webpackJsonp([0],[,,function(d,e,f){'use strict';var g=f(0);f.n(g);var h=f(1);f.n(h);var l=f(4);let m=f(3)(h),n=(q,r,s,t,u,w,A)=>{let B=A/r.length;q.save(),q.translate(s,t),q.rotate(w);for(let C=0;C<r.length;C++)q.save(),q.rotate(C*B),q.fillText(r[C],0,-u),q.restore();q.restore()};let o=[{name:'Davo',srcAvatar:'./dist/img/matthew.png',image:null,selected:!0},{name:'Stretcho',srcAvatar:'./dist/img/john.png',image:null,selected:!0},{name:'Davo',srcAvatar:'./dist/img/matthew.png',image:null,selected:!0},{name:'Stretcho',srcAvatar:'./dist/img/john.png',image:null,selected:!0},{name:'Davo',srcAvatar:'./dist/img/matthew.png',image:null,selected:!0}];class p{constructor(){this.tweenWheel=()=>{let q=this.cfg.container,r=new Date().getTime(),s=2*Math.PI/q.nbBars,t=0;this.circle.rotation.set(0,0,q.currentRotation),this.bars.forEach((u,w)=>{let A=q.radius*Math.cos(w*s+q.currentRotation),B=q.radius*Math.sin(w*s+q.currentRotation),C=new Date().getTime(),D=r-C,E=q.currentRotation-t,F=q.radius*E/D,G=A*Math.cos(Math.PI/2)-B*Math.sin(Math.PI/2),H=A*Math.sin(Math.PI/2)+B*Math.cos(Math.PI/2),I=new CANNON.Vec3(G,H,0);I.normalize(),I.scale(F),u.velocity=I,u.quaternion.setFromAxisAngle(new CANNON.Vec3(0,0,1),w*s+q.currentRotation+Math.PI/4),u.position.set(A,B,0),r=C,t=q.currentRotation})},this.spinWheel=()=>{let q=this.cfg.container,r=this.cfg.ball;this.moveBall(0,q.radius-r.radius,0,new CANNON.Vec3(100,0,0)),this.wheelTween.restart()},this.mouseMove=q=>{q.preventDefault();let r=this.getMousePosition(this.renderer.domElement,q.clientX,q.clientY);this.onClickPosition.fromArray(r);let s=this.getIntersects(this.onClickPosition,[this.circle]);this.mouseUVCoord.set(0,0),s.length&&s.forEach(u=>{if(u.uv){let w=u.uv;u.object.material.map.transformUv(w),this.mouseUVCoord.set(w.x,w.y)}});let t=(.5-this.mouseUVCoord.x)*(.5-this.mouseUVCoord.x)+(.5-this.mouseUVCoord.y)*(.5-this.mouseUVCoord.y)<=.5*.5;t&&this.drawTexture()},this.updatePhysicalWorld=()=>{let q=new Date().getTime(),r=(q-this.lastTick)/1e3;this.cannonWorld.step(1/25,r,2),this.lastTick=q,this.syncMeshWithBody(this.ball,this.sphereBody),this.cannonDebugRenderer.update()},this.animate=()=>{this.renderer&&this.scene&&this.camera&&(this.stats.begin(),this.renderer.render(this.scene,this.camera),this.stats.end()),requestAnimationFrame(this.animate)},this.free(),this.init()}free(){this.lights=[],this.scene=null,this.renderer=null,this.camera=null}refresh(){this.drawTexture()}init(){this.cfg={container:{radius:20,height:10,nbBars:120,currentRotation:0},material:{friction:0,restitution:2},ball:{radius:3,mass:2}},this.stats=new Stats,this.stats.showPanel(0),this.stats.domElement.className='stats',document.body.appendChild(this.stats.domElement);let q=this.cfg.container;this.mouse=new h.Vector2(0,0),this.mouseUVCoord=new h.Vector2(0,0),this.onClickPosition=new h.Vector2(0,0),this.raycaster=new h.Raycaster,this.scene=new h.Scene,this.fbo=document.createElement('canvas'),this.fbo.width=512,this.fbo.height=512,this.camera=new h.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e4),this.renderer=new h.WebGLRenderer,this.renderer.setSize(window.innerWidth,window.innerHeight),this.controls=new m(this.camera,this.renderer.domElement),this.controls.addEventListener('change',this.animate.bind(this));let r=new h.PointLight(16777215);r.position.set(0,20,0),this.scene.add(r);let s=new h.AmbientLight(4473924);this.scene.add(s);let t=new h.DirectionalLight(16772829);t.position.set(0,0,1).normalize(),this.scene.add(t),this.lights.push(r),this.lights.push(s),this.lights.push(t),this.renderer.domElement.addEventListener('mousemove',this.mouseMove,!1),document.body.appendChild(this.renderer.domElement),this.camera.position.set(100,0,0),this.camera.lookAt(new h.Vector3(0,0,0)),this.setupMeshes(),this.setupPhysicalWorld(),this.loadAssets(),this.wheelTween=TweenLite.to(q,10*Math.random(),{currentRotation:'+='+100*Math.PI,ease:TweenLite.defaultEase,onUpdate:this.tweenWheel}),this.gui=new dat.GUI,o.forEach(u=>{this.gui.add(u,'selected').name(u.name).onChange(this.refresh.bind(this))}),this.gui.add({spinWheel:this.spinWheel},'spinWheel')}loadAssets(){this.loadingManager=new h.LoadingManager(()=>{setInterval(this.updatePhysicalWorld,40),this.drawTexture(),this.animate()}),o.forEach(q=>{q.image=new h.ImageLoader(this.loadingManager).load(q.srcAvatar)})}moveBall(q,r,s,t=new CANNON.Vec3(0,0,0)){this.sphereBody.position.set(q,r,s),this.sphereBody.velocity=t,this.syncMeshWithBody(this.ball,this.sphereBody)}setupMeshes(){let q=this.cfg.ball,r=new h.CircleGeometry(this.cfg.container.radius,32,0,2*Math.PI);this.texture=new h.CanvasTexture(this.fbo,h.UVMapping,h.RepeatWrapping,h.RepeatWrapping),this.texture.minFilter=h.LinearFilter,this.texture.magFilter=h.LinearFilter,this.texture.format=h.RGBFormat;let s=new h.MeshBasicMaterial({color:16777215,map:this.texture,side:h.DoubleSide});this.circle=new h.Mesh(r,s),this.circle.position.set(0,0,this.cfg.container.height/2),this.scene.add(this.circle);let t=new h.SphereGeometry(q.radius,32,32),u=new h.MeshBasicMaterial({color:16776960});this.ball=new h.Mesh(t,u)}setupPhysicalWorld(){let q=this.cfg.container,r=this.cfg.ball,s=this.cfg.material;this.cannonWorld=new CANNON.World,this.cannonWorld.broadphase=new CANNON.SAPBroadphase(this.cannonWorld),this.cannonWorld.gravity.set(0,-9.82,0),this.cannonWorld.quatNormalizeFast=!0,this.cannonWorld.quatNormalizeSkip=8;let t=new CANNON.Material('bumpy'),u=new CANNON.ContactMaterial(t,t,{friction:s.friction,restitution:s.restitution});this.cannonWorld.addContactMaterial(u);let w=new CANNON.Sphere(r.radius);this.sphereBody=new CANNON.Body({mass:r.mass,shape:w}),this.sphereBody.allowSleep=!0,this.moveBall(0,0,0),this.cannonWorld.addBody(this.sphereBody);let A=new CANNON.Plane,B=new CANNON.Plane,C=new CANNON.Body({mass:0,material:t}),D=new CANNON.Body({mass:0,material:t});D.quaternion.setFromAxisAngle(new CANNON.Vec3(1,0,0),Math.PI),C.position.set(0,0,-this.cfg.container.height/2),D.position.set(0,0,this.cfg.container.height/2),C.addShape(A),D.addShape(B),this.cannonWorld.addBody(C),this.cannonWorld.addBody(D),this.bars=[];let E=2*Math.PI/this.cfg.container.nbBars;for(let F=0;F<this.cfg.container.nbBars;F++){let G=F*E,H=new CANNON.Cylinder(.5,.5,10,4),I=new CANNON.Body({mass:0,material:t});I.allowSleep=!0,I.sleepTimeLimit=1,I.addShape(H),I.quaternion.setFromAxisAngle(new CANNON.Vec3(0,0,1),G+Math.PI/4),I.position.set(q.radius*Math.cos(G),q.radius*Math.sin(G),0),this.cannonWorld.addBody(I),this.bars.push(I)}this.cannonDebugRenderer=new l.a(this.scene,this.cannonWorld)}createMesh(q){let r=new h.MeshNormalMaterial;r.side=h.DoubleSide;let s=new h.MeshBasicMaterial;s.wireframe=!0;let t=h.SceneUtils.createMultiMaterialObject(q,[s]);return t}syncMeshWithBody(q,r){q.position.x=r.position.x,q.position.y=r.position.y,q.position.z=r.position.z,q.quaternion.x=r.quaternion.x,q.quaternion.y=r.quaternion.y,q.quaternion.z=r.quaternion.z,q.quaternion.w=r.quaternion.w}drawTexture(){let q=this.fbo.getContext('2d'),r=Math.floor(this.fbo.width),s=Math.floor(this.fbo.height),t=r/2,u=s/2,w=2,A=f.i(g.filter)(o,F=>F.selected),B=2*Math.PI/A.length;Math.floor(5*Math.random()),q.clearRect(0,0,r,s),q.lineWidth=w,q.strokeStyle='#003300';let C=0,D=(.5-this.mouseUVCoord.x)*(.5-this.mouseUVCoord.x)+(.5-this.mouseUVCoord.y)*(.5-this.mouseUVCoord.y)<=.5*.5,E=Math.atan2(this.mouseUVCoord.y-.5,this.mouseUVCoord.x-.5);0>E&&(E=E+2*Math.PI),1<A.length&&A.forEach(F=>{let G=C*B<=E&&E<=(C+1)*B,H=D&&G?'red':'blue',I=C*B,J=(C+1)*B;q.save(),q.fillStyle=H,q.beginPath(),q.moveTo(t,u),q.arc(t,u,-w+t,I,J),q.lineTo(t,u),q.closePath(),q.fill(),q.stroke(),q.restore(),q.save(),q.translate(t,u),q.rotate(I+B/2+Math.PI/2),q.drawImage(F.image,-35,-u+15,70,70),q.restore(),n(q,F.name,t,u,-30-w+t,C*B-B/2,B),C++}),this.texture.needsUpdate=!0}drawTimeTexture(){let q=this.fbo.getContext('2d'),r=Math.floor(this.fbo.width),s=Math.floor(this.fbo.height),t=5;q.clearRect(0,0,r,s),q.beginPath(),q.arc(r/2,s/2,-t+this.fbo.width/2,0,2*Math.PI,!1),q.fillStyle='blue',q.fill(),q.lineWidth=t,q.strokeStyle='#003300',q.stroke(),q.font='18pt Arial',q.fillStyle='black',q.textAlign='center',q.textBaseline='middle',q.fillText(new Date().toUTCString(),this.fbo.width/2,this.fbo.height/2,this.fbo.width-2*t),this.texture.needsUpdate=!0}drawUvTexture(){let q=Math.floor(this.fbo.width),r=Math.floor(this.fbo.height),s=this.fbo.getContext('2d');s.save(),s.drawImage(this.uvTexture,0,0,q,r),s.restore()}drawCrossAir(){let q=Math.floor(this.fbo.width),r=Math.floor(this.fbo.height),s=this.fbo.getContext('2d');s.save();let t=5;s.fillStyle='red',s.beginPath(),s.rect(q*this.mouseUVCoord.x-t/2,r*this.mouseUVCoord.y-t/2,t,t),s.closePath(),s.fill(),s.restore()}getMousePosition(q,r,s){let t=q.getBoundingClientRect();return[(r-t.left)/t.width,(s-t.top)/t.height]}getIntersects(q,r){return this.mouse.set(2*q.x-1,-(2*q.y)+1),this.raycaster.setFromCamera(this.mouse,this.camera),this.raycaster.intersectObjects(r)}}document.addEventListener('DOMContentLoaded',function(){new p})},function(d){d.exports=function(e){function f(g,h){function l(){return 2*Math.PI/60/60*U.autoRotateSpeed}function m(){return Math.pow(0.95,U.zoomSpeed)}function n(qa){aa.theta-=qa}function o(qa){aa.phi-=qa}function p(qa){U.object instanceof e.PerspectiveCamera?ba/=qa:U.object instanceof e.OrthographicCamera?(U.object.zoom=Math.max(U.minZoom,Math.min(U.maxZoom,U.object.zoom*qa)),U.object.updateProjectionMatrix(),da=!0):(console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.'),U.enableZoom=!1)}function q(qa){U.object instanceof e.PerspectiveCamera?ba*=qa:U.object instanceof e.OrthographicCamera?(U.object.zoom=Math.max(U.minZoom,Math.min(U.maxZoom,U.object.zoom/qa)),U.object.updateProjectionMatrix(),da=!0):(console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.'),U.enableZoom=!1)}function r(qa){ea.set(qa.clientX,qa.clientY)}function s(qa){ka.set(qa.clientX,qa.clientY)}function t(qa){ha.set(qa.clientX,qa.clientY)}function u(qa){fa.set(qa.clientX,qa.clientY),ga.subVectors(fa,ea);var ra=U.domElement===document?U.domElement.body:U.domElement;n(2*Math.PI*ga.x/ra.clientWidth*U.rotateSpeed),o(2*Math.PI*ga.y/ra.clientHeight*U.rotateSpeed),ea.copy(fa),U.update()}function w(qa){la.set(qa.clientX,qa.clientY),ma.subVectors(la,ka),0<ma.y?p(m()):0>ma.y&&q(m()),ka.copy(la),U.update()}function A(qa){ia.set(qa.clientX,qa.clientY),ja.subVectors(ia,ha),pa(ja.x,ja.y),ha.copy(ia),U.update()}function B(){}function C(qa){0>qa.deltaY?q(m()):0<qa.deltaY&&p(m()),U.update()}function D(qa){switch(qa.keyCode){case U.keys.UP:pa(0,U.keyPanSpeed),U.update();break;case U.keys.BOTTOM:pa(0,-U.keyPanSpeed),U.update();break;case U.keys.LEFT:pa(U.keyPanSpeed,0),U.update();break;case U.keys.RIGHT:pa(-U.keyPanSpeed,0),U.update();}}function E(qa){ea.set(qa.touches[0].pageX,qa.touches[0].pageY)}function F(qa){var ra=qa.touches[0].pageX-qa.touches[1].pageX,sa=qa.touches[0].pageY-qa.touches[1].pageY,ta=Math.sqrt(ra*ra+sa*sa);ka.set(0,ta)}function G(qa){ha.set(qa.touches[0].pageX,qa.touches[0].pageY)}function H(qa){fa.set(qa.touches[0].pageX,qa.touches[0].pageY),ga.subVectors(fa,ea);var ra=U.domElement===document?U.domElement.body:U.domElement;n(2*Math.PI*ga.x/ra.clientWidth*U.rotateSpeed),o(2*Math.PI*ga.y/ra.clientHeight*U.rotateSpeed),ea.copy(fa),U.update()}function I(qa){var ra=qa.touches[0].pageX-qa.touches[1].pageX,sa=qa.touches[0].pageY-qa.touches[1].pageY,ta=Math.sqrt(ra*ra+sa*sa);la.set(0,ta),ma.subVectors(la,ka),0<ma.y?q(m()):0>ma.y&&p(m()),ka.copy(la),U.update()}function J(qa){ia.set(qa.touches[0].pageX,qa.touches[0].pageY),ja.subVectors(ia,ha),pa(ja.x,ja.y),ha.copy(ia),U.update()}function K(){}function L(qa){if(!1!==U.enabled){if(qa.preventDefault(),qa.button===U.mouseButtons.ORBIT){if(!1===U.enableRotate)return;r(qa),Z=Y.ROTATE}else if(qa.button===U.mouseButtons.ZOOM){if(!1===U.enableZoom)return;s(qa),Z=Y.DOLLY}else if(qa.button===U.mouseButtons.PAN){if(!1===U.enablePan)return;t(qa),Z=Y.PAN}Z!==Y.NONE&&(document.addEventListener('mousemove',M,!1),document.addEventListener('mouseup',N,!1),U.dispatchEvent(W))}}function M(qa){if(!1!==U.enabled)if(qa.preventDefault(),Z===Y.ROTATE){if(!1===U.enableRotate)return;u(qa)}else if(Z===Y.DOLLY){if(!1===U.enableZoom)return;w(qa)}else if(Z===Y.PAN){if(!1===U.enablePan)return;A(qa)}}function N(qa){!1===U.enabled||(B(qa),document.removeEventListener('mousemove',M,!1),document.removeEventListener('mouseup',N,!1),U.dispatchEvent(X),Z=Y.NONE)}function O(qa){!1===U.enabled||!1===U.enableZoom||Z!==Y.NONE&&Z!==Y.ROTATE||(qa.preventDefault(),qa.stopPropagation(),C(qa),U.dispatchEvent(W),U.dispatchEvent(X))}function P(qa){!1===U.enabled||!1===U.enableKeys||!1===U.enablePan||D(qa)}function Q(qa){if(!1!==U.enabled){switch(qa.touches.length){case 1:if(!1===U.enableRotate)return;E(qa),Z=Y.TOUCH_ROTATE;break;case 2:if(!1===U.enableZoom)return;F(qa),Z=Y.TOUCH_DOLLY;break;case 3:if(!1===U.enablePan)return;G(qa),Z=Y.TOUCH_PAN;break;default:Z=Y.NONE;}Z!==Y.NONE&&U.dispatchEvent(W)}}function R(qa){if(!1!==U.enabled)switch(qa.preventDefault(),qa.stopPropagation(),qa.touches.length){case 1:if(!1===U.enableRotate)return;if(Z!==Y.TOUCH_ROTATE)return;H(qa);break;case 2:if(!1===U.enableZoom)return;if(Z!==Y.TOUCH_DOLLY)return;I(qa);break;case 3:if(!1===U.enablePan)return;if(Z!==Y.TOUCH_PAN)return;J(qa);break;default:Z=Y.NONE;}}function S(qa){!1===U.enabled||(K(qa),U.dispatchEvent(X),Z=Y.NONE)}function T(qa){qa.preventDefault()}this.object=g,this.domElement=void 0===h?document:h,this.enabled=!0,this.target=new e.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=0.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:e.MOUSE.LEFT,ZOOM:e.MOUSE.MIDDLE,PAN:e.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return _.phi},this.getAzimuthalAngle=function(){return _.theta},this.reset=function(){U.target.copy(U.target0),U.object.position.copy(U.position0),U.object.zoom=U.zoom0,U.object.updateProjectionMatrix(),U.dispatchEvent(V),U.update(),Z=Y.NONE},this.update=function(){var qa=new e.Vector3,ra=new e.Quaternion().setFromUnitVectors(g.up,new e.Vector3(0,1,0)),sa=ra.clone().inverse(),ta=new e.Vector3,ua=new e.Quaternion;return function(){var wa=U.object.position;return qa.copy(wa).sub(U.target),qa.applyQuaternion(ra),_.setFromVector3(qa),U.autoRotate&&Z===Y.NONE&&n(l()),_.theta+=aa.theta,_.phi+=aa.phi,_.theta=Math.max(U.minAzimuthAngle,Math.min(U.maxAzimuthAngle,_.theta)),_.phi=Math.max(U.minPolarAngle,Math.min(U.maxPolarAngle,_.phi)),_.makeSafe(),_.radius*=ba,_.radius=Math.max(U.minDistance,Math.min(U.maxDistance,_.radius)),U.target.add(ca),qa.setFromSpherical(_),qa.applyQuaternion(sa),wa.copy(U.target).add(qa),U.object.lookAt(U.target),!0===U.enableDamping?(aa.theta*=1-U.dampingFactor,aa.phi*=1-U.dampingFactor):aa.set(0,0,0),ba=1,ca.set(0,0,0),(da||ta.distanceToSquared(U.object.position)>$||8*(1-ua.dot(U.object.quaternion))>$)&&(U.dispatchEvent(V),ta.copy(U.object.position),ua.copy(U.object.quaternion),da=!1,!0)}}(),this.dispose=function(){U.domElement.removeEventListener('contextmenu',T,!1),U.domElement.removeEventListener('mousedown',L,!1),U.domElement.removeEventListener('wheel',O,!1),U.domElement.removeEventListener('touchstart',Q,!1),U.domElement.removeEventListener('touchend',S,!1),U.domElement.removeEventListener('touchmove',R,!1),document.removeEventListener('mousemove',M,!1),document.removeEventListener('mouseup',N,!1),window.removeEventListener('keydown',P,!1)};var U=this,V={type:'change'},W={type:'start'},X={type:'end'},Y={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},Z=Y.NONE,$=1e-6,_=new e.Spherical,aa=new e.Spherical,ba=1,ca=new e.Vector3,da=!1,ea=new e.Vector2,fa=new e.Vector2,ga=new e.Vector2,ha=new e.Vector2,ia=new e.Vector2,ja=new e.Vector2,ka=new e.Vector2,la=new e.Vector2,ma=new e.Vector2,na=function(){var qa=new e.Vector3;return function(sa,ta){qa.setFromMatrixColumn(ta,0),qa.multiplyScalar(-sa),ca.add(qa)}}(),oa=function(){var qa=new e.Vector3;return function(sa,ta){qa.setFromMatrixColumn(ta,1),qa.multiplyScalar(sa),ca.add(qa)}}(),pa=function(){var qa=new e.Vector3;return function(sa,ta){var ua=U.domElement===document?U.domElement.body:U.domElement;if(U.object instanceof e.PerspectiveCamera){var va=U.object.position;qa.copy(va).sub(U.target);var wa=qa.length();wa*=Math.tan(U.object.fov/2*Math.PI/180),na(2*sa*wa/ua.clientHeight,U.object.matrix),oa(2*ta*wa/ua.clientHeight,U.object.matrix)}else U.object instanceof e.OrthographicCamera?(na(sa*(U.object.right-U.object.left)/U.object.zoom/ua.clientWidth,U.object.matrix),oa(ta*(U.object.top-U.object.bottom)/U.object.zoom/ua.clientHeight,U.object.matrix)):(console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.'),U.enablePan=!1)}}();U.domElement.addEventListener('contextmenu',T,!1),U.domElement.addEventListener('mousedown',L,!1),U.domElement.addEventListener('wheel',O,!1),U.domElement.addEventListener('touchstart',Q,!1),U.domElement.addEventListener('touchend',S,!1),U.domElement.addEventListener('touchmove',R,!1),window.addEventListener('keydown',P,!1),this.update()}return f.prototype=Object.create(e.EventDispatcher.prototype),f.prototype.constructor=f,Object.defineProperties(f.prototype,{center:{get:function(){return console.warn('THREE.OrbitControls: .center has been renamed to .target'),this.target}},noZoom:{get:function(){return console.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.'),!this.enableZoom},set:function(g){console.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.'),this.enableZoom=!g}},noRotate:{get:function(){return console.warn('THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.'),!this.enableRotate},set:function(g){console.warn('THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.'),this.enableRotate=!g}},noPan:{get:function(){return console.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.'),!this.enablePan},set:function(g){console.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.'),this.enablePan=!g}},noKeys:{get:function(){return console.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.'),!this.enableKeys},set:function(g){console.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.'),this.enableKeys=!g}},staticMoving:{get:function(){return console.warn('THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.'),!this.enableDamping},set:function(g){console.warn('THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.'),this.enableDamping=!g}},dynamicDampingFactor:{get:function(){return console.warn('THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.'),this.dampingFactor},set:function(g){console.warn('THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.'),this.dampingFactor=g}}}),f}},function(d,e,f){'use strict';var g=f(1);f.n(g),e.a=class{constructor(l,m,n={}){n=n||{},this.tmpVec0=new CANNON.Vec3,this.tmpVec1=new CANNON.Vec3,this.tmpVec2=new CANNON.Vec3,this.tmpQuat0=new CANNON.Vec3,this.scene=l,this.world=m,this._meshes=[],this._material=new g.MeshBasicMaterial({color:65280,wireframe:!0}),this._sphereGeometry=new g.SphereGeometry(1),this._boxGeometry=new g.BoxGeometry(1,1,1),this._planeGeometry=new g.PlaneGeometry(40,40,10,10),this._cylinderGeometry=new g.CylinderGeometry(1,1,10,10)}update(){let l=this.world.bodies,m=this._meshes,n=this.tmpVec0,o=this.tmpQuat0,p=0;for(let q=0;q!==l.length;q++){let r=l[q];for(let s=0;s!==r.shapes.length;s++){let t=r.shapes[s];this._updateMesh(p,r,t);let u=m[p];u&&(r.quaternion.vmult(r.shapeOffsets[s],n),r.position.vadd(n,n),r.quaternion.mult(r.shapeOrientations[s],o),u.position.copy(n),u.quaternion.copy(o)),p++}}for(let q=p;q<m.length;q++){let r=m[q];r&&this.scene.remove(r)}m.length=p}_updateMesh(l,m,n){let o=this._meshes[l];this._typeMatch(o,n)||(o&&this.scene.remove(o),o=this._meshes[l]=this._createMesh(n)),this._scaleMesh(o,n)}_typeMatch(l,m){if(!l)return!1;let n=l.geometry;return n instanceof g.SphereGeometry&&m instanceof CANNON.Sphere||n instanceof g.BoxGeometry&&m instanceof CANNON.Box||n instanceof g.PlaneGeometry&&m instanceof CANNON.Plane||n.id===m.geometryId&&m instanceof CANNON.ConvexPolyhedron||n.id===m.geometryId&&m instanceof CANNON.Trimesh||n.id===m.geometryId&&m instanceof CANNON.Heightfield}_createMesh(l){let m,o,p,q,r,n=this._material;switch(l.type){case CANNON.Shape.types.SPHERE:m=new g.Mesh(this._sphereGeometry,n);break;case CANNON.Shape.types.BOX:m=new g.Mesh(this._boxGeometry,n);break;case CANNON.Shape.types.PLANE:m=new g.Mesh(this._planeGeometry,n);break;case CANNON.Shape.types.CONVEXPOLYHEDRON:let w=new g.Geometry;for(let A=0;A<l.vertices.length;A++){let B=l.vertices[A];w.vertices.push(new g.Vector3(B.x,B.y,B.z))}for(let A=0;A<l.faces.length;A++){let B=l.faces[A],C=B[0];for(let D=1;D<B.length-1;D++){let E=B[D],F=B[D+1];w.faces.push(new g.Face3(C,E,F))}}w.computeBoundingSphere(),w.computeFaceNormals(),m=new g.Mesh(w,n),l.geometryId=w.id;break;case CANNON.Shape.types.TRIMESH:o=new g.Geometry,p=this.tmpVec0,q=this.tmpVec1,r=this.tmpVec2;for(let A=0;A<l.indices.length/3;A++){l.getTriangleVertices(A,p,q,r),o.vertices.push(new g.Vector3(p.x,p.y,p.z),new g.Vector3(q.x,q.y,q.z),new g.Vector3(r.x,r.y,r.z));let B=o.vertices.length-3;o.faces.push(new g.Face3(B,B+1,B+2))}o.computeBoundingSphere(),o.computeFaceNormals(),m=new g.Mesh(o,n),l.geometryId=o.id;break;case CANNON.Shape.types.HEIGHTFIELD:o=new g.Geometry,p=this.tmpVec0,q=this.tmpVec1,r=this.tmpVec2;for(var s=0;s<l.data.length-1;s++)for(var t=0;t<l.data[s].length-1;t++)for(var u=0;2>u;u++){l.getConvexTrianglePillar(s,t,0===u),p.copy(l.pillarConvex.vertices[0]),q.copy(l.pillarConvex.vertices[1]),r.copy(l.pillarConvex.vertices[2]),p.vadd(l.pillarOffset,p),q.vadd(l.pillarOffset,q),r.vadd(l.pillarOffset,r),o.vertices.push(new g.Vector3(p.x,p.y,p.z),new g.Vector3(q.x,q.y,q.z),new g.Vector3(r.x,r.y,r.z));let A=o.vertices.length-3;o.faces.push(new g.Face3(A,A+1,A+2))}o.computeBoundingSphere(),o.computeFaceNormals(),m=new g.Mesh(o,n),l.geometryId=o.id;}return m&&this.scene.add(m),m}_scaleMesh(l,m){switch(m.type){case CANNON.Shape.types.SPHERE:let n=m.radius;l.scale.set(n,n,n);break;case CANNON.Shape.types.BOX:l.scale.copy(m.halfExtents),l.scale.multiplyScalar(2);break;case CANNON.Shape.types.CONVEXPOLYHEDRON:l.scale.set(1,1,1);break;case CANNON.Shape.types.TRIMESH:l.scale.copy(m.scale);break;case CANNON.Shape.types.HEIGHTFIELD:l.scale.set(1,1,1);}}}},,,function(d,e,f){d.exports=f(2)}],[7]);