(function(E){function S(R){if(A[R])return A[R].exports;var P=A[R]={i:R,l:!1,exports:{}};return E[R].call(P.exports,P,P.exports,S),P.l=!0,P.exports}var M=window.webpackJsonp;window.webpackJsonp=function(P,C,I){for(var F=0,O=[],U,D,G;F<P.length;F++)D=P[F],L[D]&&O.push(L[D][0]),L[D]=0;for(U in C)Object.prototype.hasOwnProperty.call(C,U)&&(E[U]=C[U]);for(M&&M(P,C,I);O.length;)O.shift()();if(I)for(F=0;F<I.length;F++)G=S(S.s=I[F]);return G};var A={},L={1:0};return S.e=function(P){function C(){U.onerror=U.onload=null,clearTimeout(D);var O=L[P];0!==O&&(O&&O[1](new Error("Loading chunk "+P+" failed.")),L[P]=void 0)}if(0===L[P])return Promise.resolve();if(L[P])return L[P][2];var I=document.getElementsByTagName("head")[0],U=document.createElement("script");U.type="text/javascript",U.charset="utf-8",U.async=!0,U.timeout=120000,S.nc&&U.setAttribute("nonce",S.nc),U.src=S.p+""+P+".bundle.js";var D=setTimeout(C,120000);U.onerror=U.onload=C;;I.appendChild(U);var F=new Promise(function(O,G){L[P]=[O,G]});return L[P][2]=F},S.m=E,S.c=A,S.i=function(R){return R},S.d=function(R,P,C){S.o(R,P)||Object.defineProperty(R,P,{configurable:!1,enumerable:!0,get:C})},S.n=function(R){var P=R&&R.__esModule?function(){return R["default"]}:function(){return R};return S.d(P,"a",P),P},S.o=function(R,P){return Object.prototype.hasOwnProperty.call(R,P)},S.p="",S.oe=function(R){throw console.error(R),R},S(S.s=7)})([function(E,S,M){(function(A,L){var R;;(function(){function P(Ia,Ua){return Ia.set(Ua[0],Ua[1]),Ia}function C(Ia,Ua){return Ia.add(Ua),Ia}function I(Ia,Ua,Da){switch(Da.length){case 0:return Ia.call(Ua);case 1:return Ia.call(Ua,Da[0]);case 2:return Ia.call(Ua,Da[0],Da[1]);case 3:return Ia.call(Ua,Da[0],Da[1],Da[2]);}return Ia.apply(Ua,Da)}function U(Ia,Ua,Da,Na){for(var Fa=-1,za=null==Ia?0:Ia.length;++Fa<za;){var Ba=Ia[Fa];Ua(Na,Ba,Da(Ba),Ia)}return Na}function D(Ia,Ua){for(var Da=-1,Na=null==Ia?0:Ia.length;++Da<Na&&!(!1===Ua(Ia[Da],Da,Ia)););return Ia}function F(Ia,Ua){for(var Da=null==Ia?0:Ia.length;Da--&&!(!1===Ua(Ia[Da],Da,Ia)););return Ia}function O(Ia,Ua){for(var Da=-1,Na=null==Ia?0:Ia.length;++Da<Na;)if(!Ua(Ia[Da],Da,Ia))return!1;return!0}function G(Ia,Ua){for(var Da=-1,Na=null==Ia?0:Ia.length,Fa=0,za=[];++Da<Na;){var Ba=Ia[Da];Ua(Ba,Da,Ia)&&(za[Fa++]=Ba)}return za}function V(Ia,Ua){var Da=null==Ia?0:Ia.length;return!!Da&&-1<ie(Ia,Ua,0)}function H(Ia,Ua,Da){for(var Na=-1,Fa=null==Ia?0:Ia.length;++Na<Fa;)if(Da(Ua,Ia[Na]))return!0;return!1}function W(Ia,Ua){for(var Da=-1,Na=null==Ia?0:Ia.length,Fa=Array(Na);++Da<Na;)Fa[Da]=Ua(Ia[Da],Da,Ia);return Fa}function X(Ia,Ua){for(var Da=-1,Na=Ua.length,Fa=Ia.length;++Da<Na;)Ia[Fa+Da]=Ua[Da];return Ia}function Y(Ia,Ua,Da,Na){var Fa=-1,za=null==Ia?0:Ia.length;for(Na&&za&&(Da=Ia[++Fa]);++Fa<za;)Da=Ua(Da,Ia[Fa],Fa,Ia);return Da}function Z(Ia,Ua,Da,Na){var Fa=null==Ia?0:Ia.length;for(Na&&Fa&&(Da=Ia[--Fa]);Fa--;)Da=Ua(Da,Ia[Fa],Fa,Ia);return Da}function J(Ia,Ua){for(var Da=-1,Na=null==Ia?0:Ia.length;++Da<Na;)if(Ua(Ia[Da],Da,Ia))return!0;return!1}function Q(Ia){return Ia.split("")}function K(Ia){return Ia.match(mr)||[]}function $(Ia,Ua,Da){var Na;return Da(Ia,function(Fa,za,Ba){if(Ua(Fa,za,Ba))return Na=za,!1}),Na}function ee(Ia,Ua,Da,Na){for(var Fa=Ia.length,za=Da+(Na?1:-1);Na?za--:++za<Fa;)if(Ua(Ia[za],za,Ia))return za;return-1}function ie(Ia,Ua,Da){return Ua===Ua?Ne(Ia,Ua,Da):ee(Ia,oe,Da)}function ne(Ia,Ua,Da,Na){for(var Fa=Da-1,za=Ia.length;++Fa<za;)if(Na(Ia[Fa],Ua))return Fa;return-1}function oe(Ia){return Ia!==Ia}function se(Ia,Ua){var Da=null==Ia?0:Ia.length;return Da?ge(Ia,Ua)/Da:ft}function le(Ia){return function(Ua){return null==Ua?ke:Ua[Ia]}}function pe(Ia){return function(Ua){return null==Ia?ke:Ia[Ua]}}function ue(Ia,Ua,Da,Na,Fa){return Fa(Ia,function(za,Ba,Oa){Da=Na?(Na=!1,za):Ua(Da,za,Ba,Oa)}),Da}function fe(Ia,Ua){var Da=Ia.length;for(Ia.sort(Ua);Da--;)Ia[Da]=Ia[Da].value;return Ia}function ge(Ia,Ua){for(var Na=-1,Fa=Ia.length,Da;++Na<Fa;){var za=Ua(Ia[Na]);za!==ke&&(Da=Da===ke?za:Da+za)}return Da}function he(Ia,Ua){for(var Da=-1,Na=Array(Ia);++Da<Ia;)Na[Da]=Ua(Da);return Na}function ye(Ia,Ua){return W(Ua,function(Da){return[Da,Ia[Da]]})}function xe(Ia){return function(Ua){return Ia(Ua)}}function _e(Ia,Ua){return W(Ua,function(Da){return Ia[Da]})}function ve(Ia,Ua){return Ia.has(Ua)}function Ee(Ia,Ua){for(var Da=-1,Na=Ia.length;++Da<Na&&-1<ie(Ua,Ia[Da],0););return Da}function Te(Ia,Ua){for(var Da=Ia.length;Da--&&-1<ie(Ua,Ia[Da],0););return Da}function Se(Ia,Ua){for(var Da=Ia.length,Na=0;Da--;)Ia[Da]===Ua&&++Na;return Na}function Me(Ia){return"\\"+da[Ia]}function we(Ia,Ua){return null==Ia?ke:Ia[Ua]}function Ae(Ia){return aa.test(Ia)}function Le(Ia){return ia.test(Ia)}function Re(Ia){for(var Da=[],Ua;!(Ua=Ia.next()).done;)Da.push(Ua.value);return Da}function Pe(Ia){var Ua=-1,Da=Array(Ia.size);return Ia.forEach(function(Na,Fa){Da[++Ua]=[Fa,Na]}),Da}function Ce(Ia,Ua){return function(Da){return Ia(Ua(Da))}}function Ie(Ia,Ua){for(var Da=-1,Na=Ia.length,Fa=0,za=[];++Da<Na;){var Ba=Ia[Da];(Ba===Ua||Ba===Xe)&&(Ia[Da]=Xe,za[Fa++]=Da)}return za}function Ue(Ia){var Ua=-1,Da=Array(Ia.size);return Ia.forEach(function(Na){Da[++Ua]=Na}),Da}function De(Ia){var Ua=-1,Da=Array(Ia.size);return Ia.forEach(function(Na){Da[++Ua]=[Na,Na]}),Da}function Ne(Ia,Ua,Da){for(var Na=Da-1,Fa=Ia.length;++Na<Fa;)if(Ia[Na]===Ua)return Na;return-1}function Fe(Ia,Ua,Da){for(var Na=Da+1;Na--;)if(Ia[Na]===Ua)return Na;return Na}function ze(Ia){return Ae(Ia)?Oe(Ia):Aa(Ia)}function Be(Ia){return Ae(Ia)?Ge(Ia):Q(Ia)}function Oe(Ia){for(var Ua=ta.lastIndex=0;ta.test(Ia);)++Ua;return Ua}function Ge(Ia){return Ia.match(ta)||[]}function Ve(Ia){return Ia.match(ra)||[]}var ke,He=200,We="Expected a function",je="__lodash_hash_undefined__",Xe="__lodash_placeholder__",qe=1,Ye=2,Ze=4,Je=1,Qe=2,Ke=1,$e=2,et=4,tt=8,rt=16,it=32,nt=64,ot=128,st=256,dt=512,ct=1,ut=1/0,mt=9007199254740991,ft=0/0,ht=4294967295,yt=[["ary",ot],["bind",Ke],["bindKey",$e],["curry",tt],["curryRight",rt],["flip",dt],["partial",it],["partialRight",nt],["rearg",st]],xt="[object Arguments]",_t="[object Array]",vt="[object Boolean]",bt="[object Date]",Et="[object Error]",Tt="[object Function]",St="[object GeneratorFunction]",Mt="[object Map]",wt="[object Number]",At="[object Object]",Lt="[object Promise]",Rt="[object RegExp]",Pt="[object Set]",Ct="[object String]",It="[object Symbol]",Ut="[object WeakMap]",Dt="[object ArrayBuffer]",Nt="[object DataView]",Ft="[object Float32Array]",zt="[object Float64Array]",Bt="[object Int8Array]",Ot="[object Int16Array]",Gt="[object Int32Array]",Vt="[object Uint8Array]",kt="[object Uint8ClampedArray]",Ht="[object Uint16Array]",Wt="[object Uint32Array]",jt=/\b__p \+= '';/g,Xt=/\b(__p \+=) '' \+/g,qt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Yt=/&(?:amp|lt|gt|quot|#39);/g,Zt=/[&<>"']/g,Jt=RegExp(Yt.source),Qt=RegExp(Zt.source),Kt=/<%-([\s\S]+?)%>/g,$t=/<%([\s\S]+?)%>/g,er=/<%=([\s\S]+?)%>/g,tr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rr=/^\w*$/,ar=/^\./,ir=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nr=/[\\^$.*+?()[\]{}|]/g,or=RegExp(nr.source),sr=/^\s+|\s+$/g,lr=/^\s+/,dr=/\s+$/,pr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,cr=/\{\n\/\* \[wrapped with (.+)\] \*/,ur=/,? & /,mr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,fr=/\\(\\)?/g,gr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,hr=/\w*$/,yr=/^[-+]0x[0-9a-f]+$/i,xr=/^0b[01]+$/i,_r=/^\[object .+?Constructor\]$/,vr=/^0o[0-7]+$/i,br=/^(?:0|[1-9]\d*)$/,Er=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Tr=/($^)/,Sr=/['\n\r\u2028\u2029\\]/g,Mr="\\ud800-\\udfff",wr="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ar="\\u2700-\\u27bf",Lr="a-z\\xdf-\\xf6\\xf8-\\xff",Rr="A-Z\\xc0-\\xd6\\xd8-\\xde",Pr="\\ufe0e\\ufe0f",Cr="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ir="['\u2019]",Ur="["+Cr+"]",Dr="["+wr+"]",Nr="\\d+",Fr="["+Lr+"]",zr="[^"+Mr+Cr+Nr+Ar+Lr+Rr+"]",Br="\\ud83c[\\udffb-\\udfff]",Or="[^"+Mr+"]",Gr="(?:\\ud83c[\\udde6-\\uddff]){2}",Vr="[\\ud800-\\udbff][\\udc00-\\udfff]",kr="["+Rr+"]",Hr="\\u200d",Wr="(?:"+Fr+"|"+zr+")",jr="(?:"+Ir+"(?:d|ll|m|re|s|t|ve))?",Xr="(?:"+Ir+"(?:D|LL|M|RE|S|T|VE))?",qr="(?:"+Dr+"|"+Br+")?",Yr="["+Pr+"]?",Zr="(?:"+Hr+"(?:"+[Or,Gr,Vr].join("|")+")"+Yr+qr+")*",Jr=Yr+qr+Zr,Qr="(?:"+["["+Ar+"]",Gr,Vr].join("|")+")"+Jr,Kr="(?:"+[Or+Dr+"?",Dr,Gr,Vr,"["+Mr+"]"].join("|")+")",$r=RegExp(Ir,"g"),ea=RegExp(Dr,"g"),ta=RegExp(Br+"(?="+Br+")|"+Kr+Jr,"g"),ra=RegExp([kr+"?"+Fr+"+"+jr+"(?="+[Ur,kr,"$"].join("|")+")","(?:"+kr+"|"+zr+")+"+Xr+"(?="+[Ur,kr+Wr,"$"].join("|")+")",kr+"?"+Wr+"+"+jr,kr+"+"+Xr,"\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Nr,Qr].join("|"),"g"),aa=RegExp("["+Hr+Mr+wr+Pr+"]"),ia=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,na=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],oa=-1,sa={};sa[Ft]=sa[zt]=sa[Bt]=sa[Ot]=sa[Gt]=sa[Vt]=sa[kt]=sa[Ht]=sa[Wt]=!0,sa[xt]=sa[_t]=sa[Dt]=sa[vt]=sa[Nt]=sa[bt]=sa[Et]=sa[Tt]=sa[Mt]=sa[wt]=sa[At]=sa[Rt]=sa[Pt]=sa[Ct]=sa[Ut]=!1;var la={};la[xt]=la[_t]=la[Dt]=la[Nt]=la[vt]=la[bt]=la[Ft]=la[zt]=la[Bt]=la[Ot]=la[Gt]=la[Mt]=la[wt]=la[At]=la[Rt]=la[Pt]=la[Ct]=la[It]=la[Vt]=la[kt]=la[Ht]=la[Wt]=!0,la[Et]=la[Tt]=la[Ut]=!1;var da={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ca=parseFloat,ua=parseInt,ma="object"==typeof A&&A&&A.Object===Object&&A,fa="object"==typeof self&&self&&self.Object===Object&&self,ga=ma||fa||Function("return this")(),ha="object"==typeof S&&S&&!S.nodeType&&S,ya=ha&&"object"==typeof L&&L&&!L.nodeType&&L,xa=ya&&ya.exports===ha,_a=xa&&ma.process,va=function(){try{return _a&&_a.binding&&_a.binding("util")}catch(Ia){}}(),ba=va&&va.isArrayBuffer,Ea=va&&va.isDate,Ta=va&&va.isMap,Sa=va&&va.isRegExp,Ma=va&&va.isSet,wa=va&&va.isTypedArray,Aa=le("length"),La=pe({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Ra=pe({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}),Pa=pe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":"\"","&#39;":"'"}),Ca=function Ia(Ua){function Da(jc){if(Ds(jc)&&!Hp(jc)&&!(jc instanceof za)){if(jc instanceof Fa)return jc;if(Nl.call(jc,"__wrapped__"))return ts(jc)}return new Fa(jc)}function Na(){}function Fa(jc,Xc){this.__wrapped__=jc,this.__actions__=[],this.__chain__=!!Xc,this.__index__=0,this.__values__=ke}function za(jc){this.__wrapped__=jc,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ht,this.__views__=[]}function Ba(jc){var Xc=-1,qc=null==jc?0:jc.length;for(this.clear();++Xc<qc;){var Yc=jc[Xc];this.set(Yc[0],Yc[1])}}function Oa(jc){var Xc=-1,qc=null==jc?0:jc.length;for(this.clear();++Xc<qc;){var Yc=jc[Xc];this.set(Yc[0],Yc[1])}}function Ga(jc){var Xc=-1,qc=null==jc?0:jc.length;for(this.clear();++Xc<qc;){var Yc=jc[Xc];this.set(Yc[0],Yc[1])}}function Va(jc){var Xc=-1,qc=null==jc?0:jc.length;for(this.__data__=new Ga;++Xc<qc;)this.add(jc[Xc])}function ka(jc){var Xc=this.__data__=new Oa(jc);this.size=Xc.size}function Ha(jc,Xc){var qc=Hp(jc),Yc=!qc&&kp(jc),Zc=!qc&&!Yc&&Xp(jc),Jc=!qc&&!Yc&&!Zc&&Qp(jc),Qc=qc||Yc||Zc||Jc,Kc=Qc?he(jc.length,Ll):[],$c=Kc.length;for(var eu in jc)(Xc||Nl.call(jc,eu))&&!(Qc&&("length"==eu||Zc&&("offset"==eu||"parent"==eu)||Jc&&("buffer"==eu||"byteLength"==eu||"byteOffset"==eu)||Uo(eu,$c)))&&Kc.push(eu);return Kc}function Wa(jc){var Xc=jc.length;return Xc?jc[Ji(0,Xc-1)]:ke}function ja(jc,Xc){return Qo(Fn(jc),ai(Xc,0,jc.length))}function Xa(jc){return Qo(Fn(jc))}function Ya(jc,Xc,qc,Yc){return jc===ke||ws(jc,Il[qc])&&!Nl.call(Yc,qc)?Xc:jc}function Za(jc,Xc,qc){(qc===ke||ws(jc[Xc],qc))&&(qc!==ke||Xc in jc)||ti(jc,Xc,qc)}function Ja(jc,Xc,qc){var Yc=jc[Xc];Nl.call(jc,Xc)&&ws(Yc,qc)&&(qc!==ke||Xc in jc)||ti(jc,Xc,qc)}function Qa(jc,Xc){for(var qc=jc.length;qc--;)if(ws(jc[qc][0],Xc))return qc;return-1}function Ka(jc,Xc,qc,Yc){return Od(jc,function(Zc,Jc,Qc){Xc(Yc,Zc,qc(Zc),Qc)}),Yc}function $a(jc,Xc){return jc&&zn(Xc,Ys(Xc),jc)}function ei(jc,Xc){return jc&&zn(Xc,Zs(Xc),jc)}function ti(jc,Xc,qc){"__proto__"==Xc&&td?td(jc,Xc,{configurable:!0,enumerable:!0,value:qc,writable:!0}):jc[Xc]=qc}function ri(jc,Xc){for(var qc=-1,Yc=Xc.length,Zc=_l(Yc);++qc<Yc;)Zc[qc]=null==jc?ke:Xs(jc,Xc[qc]);return Zc}function ai(jc,Xc,qc){return jc===jc&&(qc!==ke&&(jc=jc<=qc?jc:qc),Xc!==ke&&(jc=jc>=Xc?jc:Xc)),jc}function ni(jc,Xc,qc,Yc,Zc,Jc){var Kc=Xc&qe,$c=Xc&Ye,Qc;if(qc&&(Qc=Zc?qc(jc,Yc,Zc,Jc):qc(jc)),Qc!=ke)return Qc;if(!Us(jc))return jc;var eu=Hp(jc);if(!eu){var tu=Jd(jc),ru=tu==Tt||tu==St;if(Xp(jc))return Sn(jc,Kc);if(tu!=At&&tu!=xt&&(!ru||Zc)){if(!la[tu])return Zc?jc:{};Qc=Po(jc,tu,ni,Kc)}else if(Qc=$c||ru?{}:Ro(jc),!Kc)return $c?On(jc,ei(Qc,jc)):Bn(jc,$a(Qc,jc))}else if(Qc=Lo(jc),!Kc)return Fn(jc,Qc);Jc||(Jc=new ka);var au=Jc.get(jc);if(au)return au;Jc.set(jc,Qc);var iu=Xc&Ze?$c?yo:go:$c?Zs:Ys,nu=eu?ke:iu(jc);return D(nu||jc,function(ou,lu){nu&&(lu=ou,ou=jc[lu]),Ja(Qc,lu,ni(ou,Xc,qc,lu,jc,Jc))}),Qc}function oi(jc){var Xc=Ys(jc);return function(qc){return si(qc,jc,Xc)}}function si(jc,Xc,qc){var Yc=qc.length;if(null==jc)return!Yc;for(jc=wl(jc);Yc--;){var Zc=qc[Yc],Jc=Xc[Zc],Qc=jc[Zc];if(Qc===ke&&!(Zc in jc)||!Jc(Qc))return!1}return!0}function li(jc,Xc,qc){if("function"!=typeof jc)throw new Rl(We);return $d(function(){jc.apply(ke,qc)},Xc)}function di(jc,Xc,qc,Yc){var Zc=-1,Jc=V,Qc=!0,Kc=jc.length,$c=[],eu=Xc.length;if(!Kc)return $c;qc&&(Xc=W(Xc,xe(qc))),Yc?(Jc=H,Qc=!1):Xc.length>=He&&(Jc=ve,Qc=!1,Xc=new Va(Xc));outer:for(;++Zc<Kc;){var tu=jc[Zc],ru=null==qc?tu:qc(tu);if(tu=Yc||0!==tu?tu:0,Qc&&ru===ru){for(var au=eu;au--;)if(Xc[au]===ru)continue outer;$c.push(tu)}else Jc(Xc,ru,Yc)||$c.push(tu)}return $c}function pi(jc,Xc){var qc=!0;return Od(jc,function(Yc,Zc,Jc){return qc=!!Xc(Yc,Zc,Jc),qc}),qc}function ci(jc,Xc,qc){for(var Yc=-1,Zc=jc.length;++Yc<Zc;){var Jc=jc[Yc],Qc=Xc(Jc);if(null!=Qc&&(Kc===ke?Qc===Qc&&!Bs(Qc):qc(Qc,Kc)))var Kc=Qc,$c=Jc}return $c}function ui(jc,Xc,qc,Yc){var Zc=jc.length;for(qc=Vs(qc),0>qc&&(qc=-qc>Zc?0:Zc+qc),Yc=Yc===ke||Yc>Zc?Zc:Vs(Yc),0>Yc&&(Yc+=Zc),Yc=qc>Yc?0:ks(Yc);qc<Yc;)jc[qc++]=Xc;return jc}function mi(jc,Xc){var qc=[];return Od(jc,function(Yc,Zc,Jc){Xc(Yc,Zc,Jc)&&qc.push(Yc)}),qc}function gi(jc,Xc,qc,Yc,Zc){var Jc=-1,Qc=jc.length;for(qc||(qc=Io),Zc||(Zc=[]);++Jc<Qc;){var Kc=jc[Jc];0<Xc&&qc(Kc)?1<Xc?gi(Kc,Xc-1,qc,Yc,Zc):X(Zc,Kc):!Yc&&(Zc[Zc.length]=Kc)}return Zc}function hi(jc,Xc){return jc&&Vd(jc,Xc,Ys)}function yi(jc,Xc){return jc&&kd(jc,Xc,Ys)}function xi(jc,Xc){return G(Xc,function(qc){return Ps(jc[qc])})}function _i(jc,Xc){Xc=En(Xc,jc);for(var qc=0,Yc=Xc.length;null!=jc&&qc<Yc;)jc=jc[Ko(Xc[qc++])];return qc&&qc==Yc?jc:ke}function vi(jc,Xc,qc){var Yc=Xc(jc);return Hp(jc)?Yc:X(Yc,qc(jc))}function bi(jc){return null==jc?jc===ke?"[object Undefined]":"[object Null]":(jc=wl(jc),ed&&ed in jc?So(jc):jo(jc))}function Ei(jc,Xc){return jc>Xc}function Ti(jc,Xc){return null!=jc&&Nl.call(jc,Xc)}function Si(jc,Xc){return null!=jc&&Xc in wl(jc)}function Mi(jc,Xc,qc){return jc>=hd(Xc,qc)&&jc<gd(Xc,qc)}function wi(jc,Xc,qc){for(var Yc=qc?H:V,Zc=jc[0].length,Jc=jc.length,Qc=Jc,Kc=_l(Jc),$c=1/0,eu=[];Qc--;){var tu=jc[Qc];Qc&&Xc&&(tu=W(tu,xe(Xc))),$c=hd(tu.length,$c),Kc[Qc]=!qc&&(Xc||120<=Zc&&120<=tu.length)?new Va(Qc&&tu):ke}tu=jc[0];var ru=-1,au=Kc[0];outer:for(;++ru<Zc&&eu.length<$c;){var iu=tu[ru],nu=Xc?Xc(iu):iu;if(iu=qc||0!==iu?iu:0,au?!ve(au,nu):!Yc(eu,nu,qc)){for(Qc=Jc;--Qc;){var ou=Kc[Qc];if(ou?!ve(ou,nu):!Yc(jc[Qc],nu,qc))continue outer}au&&au.push(nu),eu.push(iu)}}return eu}function Ai(jc,Xc,qc,Yc){return hi(jc,function(Zc,Jc,Qc){Xc(Yc,qc(Zc),Jc,Qc)}),Yc}function Li(jc,Xc,qc){Xc=En(Xc,jc),jc=qo(jc,Xc);var Yc=null==jc?jc:jc[Ko(os(Xc))];return null==Yc?ke:I(Yc,jc,qc)}function Ri(jc){return Ds(jc)&&bi(jc)==xt}function Pi(jc,Xc,qc,Yc,Zc){return jc===Xc||(null!=jc&&null!=Xc&&(Us(jc)||Ds(Xc))?Ci(jc,Xc,qc,Yc,Pi,Zc):jc!==jc&&Xc!==Xc)}function Ci(jc,Xc,qc,Yc,Zc,Jc){var Qc=Hp(jc),Kc=Hp(Xc),$c=_t,eu=_t;Qc||($c=Jd(jc),$c=$c==xt?At:$c),Kc||(eu=Jd(Xc),eu=eu==xt?At:eu);var tu=$c==At,ru=eu==At,au=$c==eu;if(au&&Xp(jc)){if(!Xp(Xc))return!1;Qc=!0,tu=!1}if(au&&!tu)return Jc||(Jc=new ka),Qc||Qp(jc)?co(jc,Xc,qc,Yc,Zc,Jc):uo(jc,Xc,$c,qc,Yc,Zc,Jc);if(!(qc&Je)){var iu=tu&&Nl.call(jc,"__wrapped__"),nu=ru&&Nl.call(Xc,"__wrapped__");if(iu||nu){var ou=iu?jc.value():jc,lu=nu?Xc.value():Xc;return Jc||(Jc=new ka),Zc(ou,lu,qc,Yc,Jc)}}return!!au&&(Jc||(Jc=new ka),mo(jc,Xc,qc,Yc,Zc,Jc))}function Ii(jc,Xc,qc,Yc){var Zc=qc.length,Jc=Zc,Qc=!Yc;if(null==jc)return!Jc;for(jc=wl(jc);Zc--;){var Kc=qc[Zc];if(Qc&&Kc[2]?Kc[1]!==jc[Kc[0]]:!(Kc[0]in jc))return!1}for(;++Zc<Jc;){Kc=qc[Zc];var $c=Kc[0],eu=jc[$c],tu=Kc[1];if(!(Qc&&Kc[2])){var ru=new ka;if(Yc)var au=Yc(eu,tu,$c,jc,Xc,ru);if(au===ke?!Pi(tu,eu,Je|Qe,Yc,ru):!au)return!1}else if(eu===ke&&!($c in jc))return!1}return!0}function Ui(jc){if(!Us(jc)||Bo(jc))return!1;var Xc=Ps(jc)?Vl:_r;return Xc.test($o(jc))}function Di(jc){return"function"==typeof jc?jc:null==jc?al:"object"==typeof jc?Hp(jc)?Gi(jc[0],jc[1]):Oi(jc):ul(jc)}function Ni(jc){if(!Oo(jc))return fd(jc);var Xc=[];for(var qc in wl(jc))Nl.call(jc,qc)&&"constructor"!=qc&&Xc.push(qc);return Xc}function Fi(jc){if(!Us(jc))return Wo(jc);var Xc=Oo(jc),qc=[];for(var Yc in jc)("constructor"!=Yc||!Xc&&Nl.call(jc,Yc))&&qc.push(Yc);return qc}function zi(jc,Xc){return jc<Xc}function Bi(jc,Xc){var qc=-1,Yc=As(jc)?_l(jc.length):[];return Od(jc,function(Zc,Jc,Qc){Yc[++qc]=Xc(Zc,Jc,Qc)}),Yc}function Oi(jc){var Xc=Eo(jc);return 1==Xc.length&&Xc[0][2]?Vo(Xc[0][0],Xc[0][1]):function(qc){return qc===jc||Ii(qc,jc,Xc)}}function Gi(jc,Xc){return No(jc)&&Go(Xc)?Vo(Ko(jc),Xc):function(qc){var Yc=Xs(qc,jc);return Yc===ke&&Yc===Xc?qs(qc,jc):Pi(Xc,Yc,Je|Qe)}}function Vi(jc,Xc,qc,Yc,Zc){jc===Xc||Vd(Xc,function(Jc,Qc){if(Us(Jc))Zc||(Zc=new ka),ki(jc,Xc,Qc,qc,Vi,Yc,Zc);else{var Kc=Yc?Yc(jc[Qc],Jc,Qc+"",jc,Xc,Zc):ke;Kc===ke&&(Kc=Jc),Za(jc,Qc,Kc)}},Zs)}function ki(jc,Xc,qc,Yc,Zc,Jc,Qc){var Kc=jc[qc],$c=Xc[qc],eu=Qc.get($c);if(eu)return void Za(jc,qc,eu);var tu=Jc?Jc(Kc,$c,qc+"",jc,Xc,Qc):ke,ru=tu===ke;if(ru){var au=Hp($c),iu=!au&&Xp($c),nu=!au&&!iu&&Qp($c);tu=$c,au||iu||nu?Hp(Kc)?tu=Kc:Ls(Kc)?tu=Fn(Kc):iu?(ru=!1,tu=Sn($c,!0)):nu?(ru=!1,tu=Cn($c,!0)):tu=[]:Fs($c)||kp($c)?(tu=Kc,kp(Kc)?tu=Ws(Kc):(!Us(Kc)||Yc&&Ps(Kc))&&(tu=Ro($c))):ru=!1}ru&&(Qc.set($c,tu),Zc(tu,$c,Yc,Jc,Qc),Qc["delete"]($c)),Za(jc,qc,tu)}function Hi(jc,Xc){var qc=jc.length;if(qc)return Xc+=0>Xc?qc:0,Uo(Xc,qc)?jc[Xc]:ke}function Wi(jc,Xc,qc){var Yc=-1;Xc=W(Xc.length?Xc:[al],xe(vo()));var Zc=Bi(jc,function(Jc,Qc,Kc){var $c=W(Xc,function(eu){return eu(Jc)});return{criteria:$c,index:++Yc,value:Jc}});return fe(Zc,function(Jc,Qc){return Un(Jc,Qc,qc)})}function ji(jc,Xc){return jc=wl(jc),Xi(jc,Xc,function(qc,Yc){return qs(jc,Yc)})}function Xi(jc,Xc,qc){for(var Yc=-1,Zc=Xc.length,Jc={};++Yc<Zc;){var Qc=Xc[Yc],Kc=_i(jc,Qc);qc(Kc,Qc)&&rn(Jc,En(Qc,jc),Kc)}return Jc}function qi(jc){return function(Xc){return _i(Xc,jc)}}function Yi(jc,Xc,qc,Yc){var Zc=Yc?ne:ie,Jc=-1,Qc=Xc.length,Kc=jc;for(jc===Xc&&(Xc=Fn(Xc)),qc&&(Kc=W(jc,xe(qc)));++Jc<Qc;)for(var $c=0,eu=Xc[Jc],tu=qc?qc(eu):eu;-1<($c=Zc(Kc,tu,$c,Yc));)Kc!==jc&&Ql.call(Kc,$c,1),Ql.call(jc,$c,1);return jc}function Zi(jc,Xc){for(var qc=jc?Xc.length:0,Yc=qc-1;qc--;){var Zc=Xc[qc];if(qc==Yc||Zc!==Jc){var Jc=Zc;Uo(Zc)?Ql.call(jc,Zc,1):mn(jc,Zc)}}return jc}function Ji(jc,Xc){return jc+ld(_d()*(Xc-jc+1))}function Qi(jc,Xc,qc,Yc){for(var Zc=-1,Jc=gd(sd((Xc-jc)/(qc||1)),0),Qc=_l(Jc);Jc--;)Qc[Yc?Jc:++Zc]=jc,jc+=qc;return Qc}function Ki(jc,Xc){var qc="";if(!jc||1>Xc||Xc>mt)return qc;do Xc%2&&(qc+=jc),Xc=ld(Xc/2),Xc&&(jc+=jc);while(Xc);return qc}function $i(jc,Xc){return ep(Xo(jc,Xc,al),jc+"")}function en(jc){return Wa(Qs(jc))}function tn(jc,Xc){var qc=Qs(jc);return Qo(qc,ai(Xc,0,qc.length))}function rn(jc,Xc,qc,Yc){if(!Us(jc))return jc;Xc=En(Xc,jc);for(var Zc=-1,Jc=Xc.length,Qc=jc;null!=Qc&&++Zc<Jc;){var Kc=Ko(Xc[Zc]),$c=qc;if(Zc!=Jc-1){var eu=Qc[Kc];$c=Yc?Yc(eu,Kc,Qc):ke,$c===ke&&($c=Us(eu)?eu:Uo(Xc[Zc+1])?[]:{})}Ja(Qc,Kc,$c),Qc=Qc[Kc]}return jc}function an(jc){return Qo(Qs(jc))}function nn(jc,Xc,qc){var Yc=-1,Zc=jc.length;0>Xc&&(Xc=-Xc>Zc?0:Zc+Xc),qc=qc>Zc?Zc:qc,0>qc&&(qc+=Zc),Zc=Xc>qc?0:qc-Xc>>>0,Xc>>>=0;for(var Jc=_l(Zc);++Yc<Zc;)Jc[Yc]=jc[Yc+Xc];return Jc}function on(jc,Xc){var qc;return Od(jc,function(Yc,Zc,Jc){return qc=Xc(Yc,Zc,Jc),!qc}),!!qc}function sn(jc,Xc,qc){var Yc=0,Zc=null==jc?Yc:jc.length;if("number"==typeof Xc&&Xc===Xc&&Zc<=ht>>>1){for(;Yc<Zc;){var Jc=Yc+Zc>>>1,Qc=jc[Jc];null!==Qc&&!Bs(Qc)&&(qc?Qc<=Xc:Qc<Xc)?Yc=Jc+1:Zc=Jc}return Zc}return ln(jc,Xc,al,qc)}function ln(jc,Xc,qc,Yc){Xc=qc(Xc);for(var Zc=0,Jc=null==jc?0:jc.length,Qc=Xc!==Xc,Kc=null===Xc,$c=Bs(Xc),eu=Xc===ke;Zc<Jc;){var tu=ld((Zc+Jc)/2),ru=qc(jc[tu]),au=ru!==ke,iu=null===ru,nu=ru===ru,ou=Bs(ru);if(Qc)var lu=Yc||nu;else lu=eu?nu&&(Yc||au):Kc?nu&&au&&(Yc||!iu):$c?nu&&au&&!iu&&(Yc||!ou):iu||ou?!1:Yc?ru<=Xc:ru<Xc;lu?Zc=tu+1:Jc=tu}return hd(Jc,ht-1)}function dn(jc,Xc){for(var qc=-1,Yc=jc.length,Zc=0,Jc=[];++qc<Yc;){var Qc=jc[qc],Kc=Xc?Xc(Qc):Qc;if(!qc||!ws(Kc,$c)){var $c=Kc;Jc[Zc++]=0===Qc?0:Qc}}return Jc}function pn(jc){return"number"==typeof jc?jc:Bs(jc)?ft:+jc}function cn(jc){if("string"==typeof jc)return jc;if(Hp(jc))return W(jc,cn)+"";if(Bs(jc))return zd?zd.call(jc):"";var Xc=jc+"";return"0"==Xc&&1/jc==-ut?"-0":Xc}function un(jc,Xc,qc){var Yc=-1,Zc=V,Jc=jc.length,Qc=!0,Kc=[],$c=Kc;if(qc)Qc=!1,Zc=H;else if(Jc>=He){var eu=Xc?null:Xd(jc);if(eu)return Ue(eu);Qc=!1,Zc=ve,$c=new Va}else $c=Xc?[]:Kc;outer:for(;++Yc<Jc;){var tu=jc[Yc],ru=Xc?Xc(tu):tu;if(tu=qc||0!==tu?tu:0,Qc&&ru===ru){for(var au=$c.length;au--;)if($c[au]===ru)continue outer;Xc&&$c.push(ru),Kc.push(tu)}else Zc($c,ru,qc)||($c!==Kc&&$c.push(ru),Kc.push(tu))}return Kc}function mn(jc,Xc){return Xc=En(Xc,jc),jc=qo(jc,Xc),null==jc||delete jc[Ko(os(Xc))]}function gn(jc,Xc,qc,Yc){return rn(jc,Xc,qc(_i(jc,Xc)),Yc)}function hn(jc,Xc,qc,Yc){for(var Zc=jc.length,Jc=Yc?Zc:-1;(Yc?Jc--:++Jc<Zc)&&Xc(jc[Jc],Jc,jc););return qc?nn(jc,Yc?0:Jc,Yc?Jc+1:Zc):nn(jc,Yc?Jc+1:0,Yc?Zc:Jc)}function yn(jc,Xc){var qc=jc;return qc instanceof za&&(qc=qc.value()),Y(Xc,function(Yc,Zc){return Zc.func.apply(Zc.thisArg,X([Yc],Zc.args))},qc)}function xn(jc,Xc,qc){var Yc=jc.length;if(2>Yc)return Yc?un(jc[0]):[];for(var Zc=-1,Jc=_l(Yc);++Zc<Yc;)for(var Qc=jc[Zc],Kc=-1;++Kc<Yc;)Kc!=Zc&&(Jc[Zc]=di(Jc[Zc]||Qc,jc[Kc],Xc,qc));return un(gi(Jc,1),Xc,qc)}function _n(jc,Xc,qc){for(var Yc=-1,Zc=jc.length,Jc=Xc.length,Qc={};++Yc<Zc;){var Kc=Yc<Jc?Xc[Yc]:ke;qc(Qc,jc[Yc],Kc)}return Qc}function vn(jc){return Ls(jc)?jc:[]}function bn(jc){return"function"==typeof jc?jc:al}function En(jc,Xc){return Hp(jc)?jc:No(jc,Xc)?[jc]:tp(js(jc))}function Tn(jc,Xc,qc){var Yc=jc.length;return qc=qc===ke?Yc:qc,!Xc&&qc>=Yc?jc:nn(jc,Xc,qc)}function Sn(jc,Xc){if(Xc)return jc.slice();var qc=jc.length,Yc=ql?ql(qc):new jc.constructor(qc);return jc.copy(Yc),Yc}function Mn(jc){var Xc=new jc.constructor(jc.byteLength);return new Xl(Xc).set(new Xl(jc)),Xc}function wn(jc,Xc){var qc=Xc?Mn(jc.buffer):jc.buffer;return new jc.constructor(qc,jc.byteOffset,jc.byteLength)}function An(jc,Xc,qc){var Yc=Xc?qc(Pe(jc),qe):Pe(jc);return Y(Yc,P,new jc.constructor)}function Ln(jc){var Xc=new jc.constructor(jc.source,hr.exec(jc));return Xc.lastIndex=jc.lastIndex,Xc}function Rn(jc,Xc,qc){var Yc=Xc?qc(Ue(jc),qe):Ue(jc);return Y(Yc,C,new jc.constructor)}function Pn(jc){return Fd?wl(Fd.call(jc)):{}}function Cn(jc,Xc){var qc=Xc?Mn(jc.buffer):jc.buffer;return new jc.constructor(qc,jc.byteOffset,jc.length)}function In(jc,Xc){if(jc!==Xc){var qc=jc!==ke,Yc=null===jc,Zc=jc===jc,Jc=Bs(jc),Qc=Xc!==ke,Kc=null===Xc,$c=Xc===Xc,eu=Bs(Xc);if(!Kc&&!eu&&!Jc&&jc>Xc||Jc&&Qc&&$c&&!Kc&&!eu||Yc&&Qc&&$c||!qc&&$c||!Zc)return 1;if(!Yc&&!Jc&&!eu&&jc<Xc||eu&&qc&&Zc&&!Yc&&!Jc||Kc&&qc&&Zc||!Qc&&Zc||!$c)return-1}return 0}function Un(jc,Xc,qc){for(var Yc=-1,Zc=jc.criteria,Jc=Xc.criteria,Qc=Zc.length,Kc=qc.length;++Yc<Qc;){var $c=In(Zc[Yc],Jc[Yc]);if($c){if(Yc>=Kc)return $c;var eu=qc[Yc];return $c*("desc"==eu?-1:1)}}return jc.index-Xc.index}function Dn(jc,Xc,qc,Yc){for(var Zc=-1,Jc=jc.length,Qc=qc.length,Kc=-1,$c=Xc.length,eu=gd(Jc-Qc,0),tu=_l($c+eu);++Kc<$c;)tu[Kc]=Xc[Kc];for(;++Zc<Qc;)(!Yc||Zc<Jc)&&(tu[qc[Zc]]=jc[Zc]);for(;eu--;)tu[Kc++]=jc[Zc++];return tu}function Nn(jc,Xc,qc,Yc){for(var Zc=-1,Jc=jc.length,Qc=-1,Kc=qc.length,$c=-1,eu=Xc.length,tu=gd(Jc-Kc,0),ru=_l(tu+eu);++Zc<tu;)ru[Zc]=jc[Zc];for(var au=Zc;++$c<eu;)ru[au+$c]=Xc[$c];for(;++Qc<Kc;)(!Yc||Zc<Jc)&&(ru[au+qc[Qc]]=jc[Zc++]);return ru}function Fn(jc,Xc){var qc=-1,Yc=jc.length;for(Xc||(Xc=_l(Yc));++qc<Yc;)Xc[qc]=jc[qc];return Xc}function zn(jc,Xc,qc,Yc){var Zc=!qc;qc||(qc={});for(var Jc=-1,Qc=Xc.length;++Jc<Qc;){var Kc=Xc[Jc],$c=Yc?Yc(qc[Kc],jc[Kc],Kc,qc,jc):ke;$c===ke&&($c=jc[Kc]),Zc?ti(qc,Kc,$c):Ja(qc,Kc,$c)}return qc}function Bn(jc,Xc){return zn(jc,Yd(jc),Xc)}function On(jc,Xc){return zn(jc,Zd(jc),Xc)}function Gn(jc,Xc){return function(qc,Yc){var Zc=Hp(qc)?U:Ka,Jc=Xc?Xc():{};return Zc(qc,jc,vo(Yc,2),Jc)}}function Vn(jc){return $i(function(Xc,qc){var Yc=-1,Zc=qc.length,Jc=1<Zc?qc[Zc-1]:ke,Qc=2<Zc?qc[2]:ke;for(Jc=3<jc.length&&"function"==typeof Jc?(Zc--,Jc):ke,Qc&&Do(qc[0],qc[1],Qc)&&(Jc=3>Zc?ke:Jc,Zc=1),Xc=wl(Xc);++Yc<Zc;){var Kc=qc[Yc];Kc&&jc(Xc,Kc,Yc,Jc)}return Xc})}function kn(jc,Xc){return function(qc,Yc){if(null==qc)return qc;if(!As(qc))return jc(qc,Yc);for(var Zc=qc.length,Jc=Xc?Zc:-1,Qc=wl(qc);(Xc?Jc--:++Jc<Zc)&&!1!==Yc(Qc[Jc],Jc,Qc););return qc}}function Hn(jc){return function(Xc,qc,Yc){for(var Zc=-1,Jc=wl(Xc),Qc=Yc(Xc),Kc=Qc.length;Kc--;){var $c=Qc[jc?Kc:++Zc];if(!1===qc(Jc[$c],$c,Jc))break}return Xc}}function Wn(jc,Xc,qc){function Yc(){var Jc=this&&this!==ga&&this instanceof Yc?Zc:jc;return Jc.apply(Xc&Ke?qc:this,arguments)}var Zc=qn(jc);return Yc}function jn(jc){return function(Xc){Xc=js(Xc);var qc=Ae(Xc)?Be(Xc):ke,Yc=qc?qc[0]:Xc.charAt(0),Zc=qc?Tn(qc,1).join(""):Xc.slice(1);return Yc[jc]()+Zc}}function Xn(jc){return function(Xc){return Y(el($s(Xc).replace($r,"")),jc,"")}}function qn(jc){return function(){var Xc=arguments;switch(Xc.length){case 0:return new jc;case 1:return new jc(Xc[0]);case 2:return new jc(Xc[0],Xc[1]);case 3:return new jc(Xc[0],Xc[1],Xc[2]);case 4:return new jc(Xc[0],Xc[1],Xc[2],Xc[3]);case 5:return new jc(Xc[0],Xc[1],Xc[2],Xc[3],Xc[4]);case 6:return new jc(Xc[0],Xc[1],Xc[2],Xc[3],Xc[4],Xc[5]);case 7:return new jc(Xc[0],Xc[1],Xc[2],Xc[3],Xc[4],Xc[5],Xc[6]);}var qc=Bd(jc.prototype),Yc=jc.apply(qc,Xc);return Us(Yc)?Yc:qc}}function Yn(jc,Xc,qc){function Yc(){for(var Jc=arguments.length,Qc=_l(Jc),Kc=Jc,$c=_o(Yc);Kc--;)Qc[Kc]=arguments[Kc];var eu=3>Jc&&Qc[0]!==$c&&Qc[Jc-1]!==$c?[]:Ie(Qc,$c);if(Jc-=eu.length,Jc<qc)return oo(jc,Xc,Qn,Yc.placeholder,ke,Qc,eu,ke,ke,qc-Jc);var tu=this&&this!==ga&&this instanceof Yc?Zc:jc;return I(tu,this,Qc)}var Zc=qn(jc);return Yc}function Zn(jc){return function(Xc,qc,Yc){var Zc=wl(Xc);if(!As(Xc)){var Jc=vo(qc,3);Xc=Ys(Xc),qc=function(Kc){return Jc(Zc[Kc],Kc,Zc)}}var Qc=jc(Xc,qc,Yc);return-1<Qc?Zc[Jc?Xc[Qc]:Qc]:ke}}function Jn(jc){return fo(function(Xc){var qc=Xc.length,Yc=qc,Zc=Fa.prototype.thru;for(jc&&Xc.reverse();Yc--;){var Jc=Xc[Yc];if("function"!=typeof Jc)throw new Rl(We);if(Zc&&!Qc&&"wrapper"==xo(Jc))var Qc=new Fa([],!0)}for(Yc=Qc?Yc:qc;++Yc<qc;){Jc=Xc[Yc];var Kc=xo(Jc),$c="wrapper"==Kc?qd(Jc):ke;Qc=$c&&zo($c[0])&&$c[1]==(ot|tt|it|st)&&!$c[4].length&&1==$c[9]?Qc[xo($c[0])].apply(Qc,$c[3]):1==Jc.length&&zo(Jc)?Qc[Kc]():Qc.thru(Jc)}return function(){var eu=arguments,tu=eu[0];if(Qc&&1==eu.length&&Hp(tu)&&tu.length>=He)return Qc.plant(tu).value();for(var ru=0,au=qc?Xc[ru].apply(this,eu):tu;++ru<qc;)au=Xc[ru].call(this,au);return au}})}function Qn(jc,Xc,qc,Yc,Zc,Jc,Qc,Kc,$c,eu){function tu(){for(var nu=arguments.length,ou=_l(nu),lu=nu;lu--;)ou[lu]=arguments[lu];if(au)var du=_o(tu),pu=Se(ou,du);if(Yc&&(ou=Dn(ou,Yc,Zc,au)),Jc&&(ou=Nn(ou,Jc,Qc,au)),nu-=pu,au&&nu<eu){var uu=Ie(ou,du);return oo(jc,Xc,Qn,tu.placeholder,qc,ou,uu,Kc,$c,eu-nu)}var mu=Xc&Ke?qc:this,fu=ru?mu[jc]:jc;return nu=ou.length,Kc?ou=Yo(ou,Kc):Xc&dt&&1<nu&&ou.reverse(),Xc&ot&&$c<nu&&(ou.length=$c),this&&this!==ga&&this instanceof tu&&(fu=iu||qn(fu)),fu.apply(mu,ou)}var ru=Xc&$e,au=Xc&(tt|rt),iu=ru?ke:qn(jc);return tu}function Kn(jc,Xc){return function(qc,Yc){return Ai(qc,jc,Xc(Yc),{})}}function $n(jc,Xc){return function(qc,Yc){var Zc;if(qc===ke&&Yc===ke)return Xc;if(qc!==ke&&(Zc=qc),Yc!==ke){if(Zc==ke)return Yc;"string"==typeof qc||"string"==typeof Yc?(qc=cn(qc),Yc=cn(Yc)):(qc=pn(qc),Yc=pn(Yc)),Zc=jc(qc,Yc)}return Zc}}function eo(jc){return fo(function(Xc){return Xc=W(Xc,xe(vo())),$i(function(qc){var Yc=this;return jc(Xc,function(Zc){return I(Zc,Yc,qc)})})})}function ro(jc,Xc){Xc=Xc===ke?" ":cn(Xc);var qc=Xc.length;if(2>qc)return qc?Ki(Xc,jc):Xc;var Yc=Ki(Xc,sd(jc/ze(Xc)));return Ae(Xc)?Tn(Be(Yc),0,jc).join(""):Yc.slice(0,jc)}function ao(jc,Xc,qc,Yc){function Zc(){for(var Qc=-1,Kc=arguments.length,$c=-1,eu=Yc.length,tu=_l(eu+Kc),ru=this&&this!==ga&&this instanceof Zc?Jc:jc;++$c<eu;)tu[$c]=Yc[$c];for(;Kc--;)tu[$c++]=arguments[++Qc];return I(ru,Xc&Ke?qc:this,tu)}var Jc=qn(jc);return Zc}function io(jc){return function(Xc,qc,Yc){return Yc&&"number"!=typeof Yc&&Do(Xc,qc,Yc)&&(qc=Yc=ke),Xc=Gs(Xc),qc===ke?(qc=Xc,Xc=0):qc=Gs(qc),Yc=Yc===ke?Xc<qc?1:-1:Gs(Yc),Qi(Xc,qc,Yc,jc)}}function no(jc){return function(Xc,qc){return"string"==typeof Xc&&"string"==typeof qc||(Xc=Hs(Xc),qc=Hs(qc)),jc(Xc,qc)}}function oo(jc,Xc,qc,Yc,Zc,Jc,Qc,Kc,$c,eu){var tu=Xc&tt,ru=tu?Qc:ke,au=tu?ke:Qc,iu=tu?Jc:ke,nu=tu?ke:Jc;Xc|=tu?it:nt,Xc&=~(tu?nt:it),Xc&et||(Xc&=~(Ke|$e));var ou=[jc,Xc,Zc,iu,ru,nu,au,Kc,$c,eu],lu=qc.apply(ke,ou);return zo(jc)&&Kd(lu,ou),lu.placeholder=Yc,Zo(lu,jc,Xc)}function so(jc){var Xc=Ml[jc];return function(qc,Yc){if(qc=Hs(qc),Yc=hd(Vs(Yc),292),Yc){var Zc=(js(qc)+"e").split("e"),Jc=Xc(Zc[0]+"e"+(+Zc[1]+Yc));return Zc=(js(Jc)+"e").split("e"),+(Zc[0]+"e"+(+Zc[1]-Yc))}return Xc(qc)}}function lo(jc){return function(Xc){var qc=Jd(Xc);return qc==Mt?Pe(Xc):qc==Pt?De(Xc):ye(Xc,jc(Xc))}}function po(jc,Xc,qc,Yc,Zc,Jc,Qc,Kc){var $c=Xc&$e;if(!$c&&"function"!=typeof jc)throw new Rl(We);var eu=Yc?Yc.length:0;if(eu||(Xc&=~(it|nt),Yc=Zc=ke),Qc=Qc===ke?Qc:gd(Vs(Qc),0),Kc=Kc===ke?Kc:Vs(Kc),eu-=Zc?Zc.length:0,Xc&nt){var tu=Yc,ru=Zc;Yc=Zc=ke}var au=$c?ke:qd(jc),iu=[jc,Xc,qc,Yc,Zc,tu,ru,Jc,Qc,Kc];if(au&&ko(iu,au),jc=iu[0],Xc=iu[1],qc=iu[2],Yc=iu[3],Zc=iu[4],Kc=iu[9]=null==iu[9]?$c?0:jc.length:gd(iu[9]-eu,0),!Kc&&Xc&(tt|rt)&&(Xc&=~(tt|rt)),!Xc||Xc==Ke)var nu=Wn(jc,Xc,qc);else nu=Xc==tt||Xc==rt?Yn(jc,Xc,Kc):Xc!=it&&Xc!=(Ke|it)||Zc.length?Qn.apply(ke,iu):ao(jc,Xc,qc,Yc);var ou=au?Hd:Kd;return Zo(ou(nu,iu),jc,Xc)}function co(jc,Xc,qc,Yc,Zc,Jc){var Qc=qc&Je,Kc=jc.length,$c=Xc.length;if(Kc!=$c&&!(Qc&&$c>Kc))return!1;var eu=Jc.get(jc);if(eu&&Jc.get(Xc))return eu==Xc;var tu=-1,ru=!0,au=qc&Qe?new Va:ke;for(Jc.set(jc,Xc),Jc.set(Xc,jc);++tu<Kc;){var iu=jc[tu],nu=Xc[tu];if(Yc)var ou=Qc?Yc(nu,iu,tu,Xc,jc,Jc):Yc(iu,nu,tu,jc,Xc,Jc);if(ou!==ke){if(ou)continue;ru=!1;break}if(au){if(!J(Xc,function(lu,du){if(!ve(au,du)&&(iu===lu||Zc(iu,lu,qc,Yc,Jc)))return au.push(du)})){ru=!1;break}}else if(!(iu===nu||Zc(iu,nu,qc,Yc,Jc))){ru=!1;break}}return Jc["delete"](jc),Jc["delete"](Xc),ru}function uo(jc,Xc,qc,Yc,Zc,Jc,Qc){switch(qc){case Nt:if(jc.byteLength!=Xc.byteLength||jc.byteOffset!=Xc.byteOffset)return!1;jc=jc.buffer,Xc=Xc.buffer;case Dt:return jc.byteLength==Xc.byteLength&&Jc(new Xl(jc),new Xl(Xc));case vt:case bt:case wt:return ws(+jc,+Xc);case Et:return jc.name==Xc.name&&jc.message==Xc.message;case Rt:case Ct:return jc==Xc+"";case Mt:var Kc=Pe;case Pt:var $c=Yc&Je;if(Kc||(Kc=Ue),jc.size!=Xc.size&&!$c)return!1;var eu=Qc.get(jc);if(eu)return eu==Xc;Yc|=Qe,Qc.set(jc,Xc);var tu=co(Kc(jc),Kc(Xc),Yc,Zc,Jc,Qc);return Qc["delete"](jc),tu;case It:if(Fd)return Fd.call(jc)==Fd.call(Xc);}return!1}function mo(jc,Xc,qc,Yc,Zc,Jc){var Qc=qc&Je,Kc=Ys(jc),$c=Kc.length,eu=Ys(Xc),tu=eu.length;if($c!=tu&&!Qc)return!1;for(var ru=$c;ru--;){var au=Kc[ru];if(Qc?!(au in Xc):!Nl.call(Xc,au))return!1}var iu=Jc.get(jc);if(iu&&Jc.get(Xc))return iu==Xc;var nu=!0;Jc.set(jc,Xc),Jc.set(Xc,jc);for(var ou=Qc;++ru<$c;){au=Kc[ru];var lu=jc[au],du=Xc[au];if(Yc)var pu=Qc?Yc(du,lu,au,Xc,jc,Jc):Yc(lu,du,au,jc,Xc,Jc);if(pu===ke?!(lu===du||Zc(lu,du,qc,Yc,Jc)):!pu){nu=!1;break}ou||(ou="constructor"==au)}if(nu&&!ou){var uu=jc.constructor,mu=Xc.constructor;uu!=mu&&"constructor"in jc&&"constructor"in Xc&&!("function"==typeof uu&&uu instanceof uu&&"function"==typeof mu&&mu instanceof mu)&&(nu=!1)}return Jc["delete"](jc),Jc["delete"](Xc),nu}function fo(jc){return ep(Xo(jc,ke,is),jc+"")}function go(jc){return vi(jc,Ys,Yd)}function yo(jc){return vi(jc,Zs,Zd)}function xo(jc){for(var Xc=jc.name+"",qc=Rd[Xc],Yc=Nl.call(Rd,Xc)?qc.length:0;Yc--;){var Zc=qc[Yc],Jc=Zc.func;if(null==Jc||Jc==jc)return Zc.name}return Xc}function _o(jc){var Xc=Nl.call(Da,"placeholder")?Da:jc;return Xc.placeholder}function vo(){var jc=Da.iteratee||nl;return jc=jc===nl?Di:jc,arguments.length?jc(arguments[0],arguments[1]):jc}function bo(jc,Xc){var qc=jc.__data__;return Fo(Xc)?qc["string"==typeof Xc?"string":"hash"]:qc.map}function Eo(jc){for(var Xc=Ys(jc),qc=Xc.length;qc--;){var Yc=Xc[qc],Zc=jc[Yc];Xc[qc]=[Yc,Zc,Go(Zc)]}return Xc}function To(jc,Xc){var qc=we(jc,Xc);return Ui(qc)?qc:ke}function So(jc){var Xc=Nl.call(jc,ed),qc=jc[ed];try{jc[ed]=ke;var Yc=!0}catch(Jc){}var Zc=Bl.call(jc);return Xc?jc[ed]=qc:delete jc[ed],Zc}function Mo(jc,Xc,qc){for(var Yc=-1,Zc=qc.length;++Yc<Zc;){var Jc=qc[Yc],Qc=Jc.size;switch(Jc.type){case"drop":jc+=Qc;break;case"dropRight":Xc-=Qc;break;case"take":Xc=hd(Xc,jc+Qc);break;case"takeRight":jc=gd(jc,Xc-Qc);}}return{start:jc,end:Xc}}function wo(jc){var Xc=jc.match(cr);return Xc?Xc[1].split(ur):[]}function Ao(jc,Xc,qc){Xc=En(Xc,jc);for(var Yc=-1,Zc=Xc.length,Jc=!1;++Yc<Zc;){var Qc=Ko(Xc[Yc]);if(!(Jc=null!=jc&&qc(jc,Qc)))break;jc=jc[Qc]}return Jc||++Yc!=Zc?Jc:(Zc=null==jc?0:jc.length,!!Zc&&Is(Zc)&&Uo(Qc,Zc)&&(Hp(jc)||kp(jc)))}function Lo(jc){var Xc=jc.length,qc=jc.constructor(Xc);return Xc&&"string"==typeof jc[0]&&Nl.call(jc,"index")&&(qc.index=jc.index,qc.input=jc.input),qc}function Ro(jc){return"function"!=typeof jc.constructor||Oo(jc)?{}:Bd(Yl(jc))}function Po(jc,Xc,qc,Yc){var Zc=jc.constructor;return Xc===Dt?Mn(jc):Xc===vt||Xc===bt?new Zc(+jc):Xc===Nt?wn(jc,Yc):Xc===Ft||Xc===zt||Xc===Bt||Xc===Ot||Xc===Gt||Xc===Vt||Xc===kt||Xc===Ht||Xc===Wt?Cn(jc,Yc):Xc===Mt?An(jc,Yc,qc):Xc===wt||Xc===Ct?new Zc(jc):Xc===Rt?Ln(jc):Xc===Pt?Rn(jc,Yc,qc):Xc===It?Pn(jc):void 0}function Co(jc,Xc){var qc=Xc.length;if(!qc)return jc;var Yc=qc-1;return Xc[Yc]=(1<qc?"& ":"")+Xc[Yc],Xc=Xc.join(2<qc?", ":" "),jc.replace(pr,"{\n/* [wrapped with "+Xc+"] */\n")}function Io(jc){return Hp(jc)||kp(jc)||!!(Kl&&jc&&jc[Kl])}function Uo(jc,Xc){return Xc=null==Xc?mt:Xc,!!Xc&&("number"==typeof jc||br.test(jc))&&-1<jc&&0==jc%1&&jc<Xc}function Do(jc,Xc,qc){if(!Us(qc))return!1;var Yc=typeof Xc;return("number"==Yc?!!(As(qc)&&Uo(Xc,qc.length)):!!("string"==Yc&&Xc in qc))&&ws(qc[Xc],jc)}function No(jc,Xc){if(Hp(jc))return!1;var qc=typeof jc;return"number"==qc||"symbol"==qc||"boolean"==qc||null==jc||Bs(jc)||rr.test(jc)||!tr.test(jc)||null!=Xc&&jc in wl(Xc)}function Fo(jc){var Xc=typeof jc;return"string"==Xc||"number"==Xc||"symbol"==Xc||"boolean"==Xc?"__proto__"!==jc:null===jc}function zo(jc){var Xc=xo(jc),qc=Da[Xc];if("function"!=typeof qc||!(Xc in za.prototype))return!1;if(jc===qc)return!0;var Yc=qd(qc);return!!Yc&&jc===Yc[0]}function Bo(jc){return!!zl&&zl in jc}function Oo(jc){var Xc=jc&&jc.constructor,qc="function"==typeof Xc&&Xc.prototype||Il;return jc===qc}function Go(jc){return jc===jc&&!Us(jc)}function Vo(jc,Xc){return function(qc){return null!=qc&&qc[jc]===Xc&&(Xc!==ke||jc in wl(qc))}}function ko(jc,Xc){var qc=jc[1],Yc=Xc[1],Zc=qc|Yc,Jc=Zc<(Ke|$e|ot),Qc=Yc==ot&&qc==tt||Yc==ot&&qc==st&&jc[7].length<=Xc[8]||Yc==(ot|st)&&Xc[7].length<=Xc[8]&&qc==tt;if(!(Jc||Qc))return jc;Yc&Ke&&(jc[2]=Xc[2],Zc|=qc&Ke?0:et);var Kc=Xc[3];if(Kc){var $c=jc[3];jc[3]=$c?Dn($c,Kc,Xc[4]):Kc,jc[4]=$c?Ie(jc[3],Xe):Xc[4]}return Kc=Xc[5],Kc&&($c=jc[5],jc[5]=$c?Nn($c,Kc,Xc[6]):Kc,jc[6]=$c?Ie(jc[5],Xe):Xc[6]),Kc=Xc[7],Kc&&(jc[7]=Kc),Yc&ot&&(jc[8]=null==jc[8]?Xc[8]:hd(jc[8],Xc[8])),null==jc[9]&&(jc[9]=Xc[9]),jc[0]=Xc[0],jc[1]=Zc,jc}function Ho(jc,Xc,qc,Yc,Zc,Jc){return Us(jc)&&Us(Xc)&&(Jc.set(Xc,jc),Vi(jc,Xc,ke,Ho,Jc),Jc["delete"](Xc)),jc}function Wo(jc){var Xc=[];if(null!=jc)for(var qc in wl(jc))Xc.push(qc);return Xc}function jo(jc){return Bl.call(jc)}function Xo(jc,Xc,qc){return Xc=gd(Xc===ke?jc.length-1:Xc,0),function(){for(var Yc=arguments,Zc=-1,Jc=gd(Yc.length-Xc,0),Qc=_l(Jc);++Zc<Jc;)Qc[Zc]=Yc[Xc+Zc];Zc=-1;for(var Kc=_l(Xc+1);++Zc<Xc;)Kc[Zc]=Yc[Zc];return Kc[Xc]=qc(Qc),I(jc,this,Kc)}}function qo(jc,Xc){return 2>Xc.length?jc:_i(jc,nn(Xc,0,-1))}function Yo(jc,Xc){for(var qc=jc.length,Yc=hd(Xc.length,qc),Zc=Fn(jc);Yc--;){var Jc=Xc[Yc];jc[Yc]=Uo(Jc,qc)?Zc[Jc]:ke}return jc}function Zo(jc,Xc,qc){var Yc=Xc+"";return ep(jc,Co(Yc,es(wo(Yc),qc)))}function Jo(jc){var Xc=0,qc=0;return function(){var Yc=yd(),Zc=16-(Yc-qc);if(qc=Yc,!(0<Zc))Xc=0;else if(800<=++Xc)return arguments[0];return jc.apply(ke,arguments)}}function Qo(jc,Xc){var qc=-1,Yc=jc.length;for(Xc=Xc===ke?Yc:Xc;++qc<Xc;){var Zc=Ji(qc,Yc-1),Jc=jc[Zc];jc[Zc]=jc[qc],jc[qc]=Jc}return jc.length=Xc,jc}function Ko(jc){if("string"==typeof jc||Bs(jc))return jc;var Xc=jc+"";return"0"==Xc&&1/jc==-ut?"-0":Xc}function $o(jc){if(null!=jc){try{return Dl.call(jc)}catch(Xc){}try{return jc+""}catch(Xc){}}return""}function es(jc,Xc){return D(yt,function(qc){var Yc="_."+qc[0];Xc&qc[1]&&!V(jc,Yc)&&jc.push(Yc)}),jc.sort()}function ts(jc){if(jc instanceof za)return jc.clone();var Xc=new Fa(jc.__wrapped__,jc.__chain__);return Xc.__actions__=Fn(jc.__actions__),Xc.__index__=jc.__index__,Xc.__values__=jc.__values__,Xc}function rs(jc,Xc,qc){var Yc=null==jc?0:jc.length;if(!Yc)return-1;var Zc=null==qc?0:Vs(qc);return 0>Zc&&(Zc=gd(Yc+Zc,0)),ee(jc,vo(Xc,3),Zc)}function as(jc,Xc,qc){var Yc=null==jc?0:jc.length;if(!Yc)return-1;var Zc=Yc-1;return qc!==ke&&(Zc=Vs(qc),Zc=0>qc?gd(Yc+Zc,0):hd(Zc,Yc-1)),ee(jc,vo(Xc,3),Zc,!0)}function is(jc){var Xc=null==jc?0:jc.length;return Xc?gi(jc,1):[]}function ns(jc){return jc&&jc.length?jc[0]:ke}function os(jc){var Xc=null==jc?0:jc.length;return Xc?jc[Xc-1]:ke}function ss(jc,Xc){return jc&&jc.length&&Xc&&Xc.length?Yi(jc,Xc):jc}function ls(jc){return null==jc?jc:vd.call(jc)}function ds(jc){if(!(jc&&jc.length))return[];var Xc=0;return jc=G(jc,function(qc){if(Ls(qc))return Xc=gd(qc.length,Xc),!0}),he(Xc,function(qc){return W(jc,le(qc))})}function ps(jc,Xc){if(!(jc&&jc.length))return[];var qc=ds(jc);return null==Xc?qc:W(qc,function(Yc){return I(Xc,ke,Yc)})}function us(jc){var Xc=Da(jc);return Xc.__chain__=!0,Xc}function ms(jc,Xc){return Xc(jc)}function fs(){return this}function gs(jc,Xc){var qc=Hp(jc)?D:Od;return qc(jc,vo(Xc,3))}function hs(jc,Xc){var qc=Hp(jc)?F:Gd;return qc(jc,vo(Xc,3))}function ys(jc,Xc){var qc=Hp(jc)?W:Bi;return qc(jc,vo(Xc,3))}function xs(jc,Xc,qc){return Xc=qc?ke:Xc,Xc=jc&&null==Xc?jc.length:Xc,po(jc,ot,ke,ke,ke,ke,Xc)}function _s(jc,Xc){var qc;if("function"!=typeof Xc)throw new Rl(We);return jc=Vs(jc),function(){return 0<--jc&&(qc=Xc.apply(this,arguments)),1>=jc&&(Xc=ke),qc}}function vs(jc,Xc,qc){Xc=qc?ke:Xc;var Yc=po(jc,tt,ke,ke,ke,ke,ke,Xc);return Yc.placeholder=vs.placeholder,Yc}function Es(jc,Xc,qc){Xc=qc?ke:Xc;var Yc=po(jc,rt,ke,ke,ke,ke,ke,Xc);return Yc.placeholder=Es.placeholder,Yc}function Ts(jc,Xc,qc){function Yc(mu){var fu=tu,gu=ru;return tu=ru=ke,lu=mu,iu=jc.apply(gu,fu),iu}function Zc(mu){return lu=mu,nu=$d(Kc,Xc),du?Yc(mu):iu}function Jc(mu){var fu=mu-ou,gu=mu-lu,hu=Xc-fu;return pu?hd(hu,au-gu):hu}function Qc(mu){var fu=mu-ou,gu=mu-lu;return ou===ke||fu>=Xc||0>fu||pu&&gu>=au}function Kc(){var mu=Cp();return Qc(mu)?$c(mu):void(nu=$d(Kc,Jc(mu)))}function $c(mu){return(nu=ke,uu&&tu)?Yc(mu):(tu=ru=ke,iu)}function eu(){var mu=Cp(),fu=Qc(mu);if(tu=arguments,ru=this,ou=mu,fu){if(nu===ke)return Zc(ou);if(pu)return nu=$d(Kc,Xc),Yc(ou)}return nu===ke&&(nu=$d(Kc,Xc)),iu}var lu=0,du=!1,pu=!1,uu=!0,tu,ru,au,iu,nu,ou;if("function"!=typeof jc)throw new Rl(We);return Xc=Hs(Xc)||0,Us(qc)&&(du=!!qc.leading,pu="maxWait"in qc,au=pu?gd(Hs(qc.maxWait)||0,Xc):au,uu="trailing"in qc?!!qc.trailing:uu),eu.cancel=function(){nu!==ke&&jd(nu),lu=0,tu=ou=ru=nu=ke},eu.flush=function(){return nu===ke?iu:$c(Cp())},eu}function Ss(jc,Xc){if("function"!=typeof jc||null!=Xc&&"function"!=typeof Xc)throw new Rl(We);var qc=function(){var Yc=arguments,Zc=Xc?Xc.apply(this,Yc):Yc[0],Jc=qc.cache;if(Jc.has(Zc))return Jc.get(Zc);var Qc=jc.apply(this,Yc);return qc.cache=Jc.set(Zc,Qc)||Jc,Qc};return qc.cache=new(Ss.Cache||Ga),qc}function Ms(jc){if("function"!=typeof jc)throw new Rl(We);return function(){var Xc=arguments;switch(Xc.length){case 0:return!jc.call(this);case 1:return!jc.call(this,Xc[0]);case 2:return!jc.call(this,Xc[0],Xc[1]);case 3:return!jc.call(this,Xc[0],Xc[1],Xc[2]);}return!jc.apply(this,Xc)}}function ws(jc,Xc){return jc===Xc||jc!==jc&&Xc!==Xc}function As(jc){return null!=jc&&Is(jc.length)&&!Ps(jc)}function Ls(jc){return Ds(jc)&&As(jc)}function Rs(jc){if(!Ds(jc))return!1;var Xc=bi(jc);return Xc==Et||"[object DOMException]"==Xc||"string"==typeof jc.message&&"string"==typeof jc.name&&!Fs(jc)}function Ps(jc){if(!Us(jc))return!1;var Xc=bi(jc);return Xc==Tt||Xc==St||"[object AsyncFunction]"==Xc||"[object Proxy]"==Xc}function Cs(jc){return"number"==typeof jc&&jc==Vs(jc)}function Is(jc){return"number"==typeof jc&&-1<jc&&0==jc%1&&jc<=mt}function Us(jc){var Xc=typeof jc;return null!=jc&&("object"==Xc||"function"==Xc)}function Ds(jc){return null!=jc&&"object"==typeof jc}function Ns(jc){return"number"==typeof jc||Ds(jc)&&bi(jc)==wt}function Fs(jc){if(!Ds(jc)||bi(jc)!=At)return!1;var Xc=Yl(jc);if(null===Xc)return!0;var qc=Nl.call(Xc,"constructor")&&Xc.constructor;return"function"==typeof qc&&qc instanceof qc&&Dl.call(qc)==Ol}function zs(jc){return"string"==typeof jc||!Hp(jc)&&Ds(jc)&&bi(jc)==Ct}function Bs(jc){return"symbol"==typeof jc||Ds(jc)&&bi(jc)==It}function Os(jc){if(!jc)return[];if(As(jc))return zs(jc)?Be(jc):Fn(jc);if($l&&jc[$l])return Re(jc[$l]());var Xc=Jd(jc),qc=Xc==Mt?Pe:Xc==Pt?Ue:Qs;return qc(jc)}function Gs(jc){if(!jc)return 0===jc?jc:0;if(jc=Hs(jc),jc===ut||jc===-ut){var Xc=0>jc?-1:1;return 1.7976931348623157e+308*Xc}return jc===jc?jc:0}function Vs(jc){var Xc=Gs(jc),qc=Xc%1;return Xc===Xc?qc?Xc-qc:Xc:0}function ks(jc){return jc?ai(Vs(jc),0,ht):0}function Hs(jc){if("number"==typeof jc)return jc;if(Bs(jc))return ft;if(Us(jc)){var Xc="function"==typeof jc.valueOf?jc.valueOf():jc;jc=Us(Xc)?Xc+"":Xc}if("string"!=typeof jc)return 0===jc?jc:+jc;jc=jc.replace(sr,"");var qc=xr.test(jc);return qc||vr.test(jc)?ua(jc.slice(2),qc?2:8):yr.test(jc)?ft:+jc}function Ws(jc){return zn(jc,Zs(jc))}function js(jc){return null==jc?"":cn(jc)}function Xs(jc,Xc,qc){var Yc=null==jc?ke:_i(jc,Xc);return Yc===ke?qc:Yc}function qs(jc,Xc){return null!=jc&&Ao(jc,Xc,Si)}function Ys(jc){return As(jc)?Ha(jc):Ni(jc)}function Zs(jc){return As(jc)?Ha(jc,!0):Fi(jc)}function Js(jc,Xc){if(null==jc)return{};var qc=W(yo(jc),function(Yc){return[Yc]});return Xc=vo(Xc),Xi(jc,qc,function(Yc,Zc){return Xc(Yc,Zc[0])})}function Qs(jc){return null==jc?[]:_e(jc,Ys(jc))}function Ks(jc){return wc(js(jc).toLowerCase())}function $s(jc){return jc=js(jc),jc&&jc.replace(Er,La).replace(ea,"")}function el(jc,Xc,qc){return jc=js(jc),Xc=qc?ke:Xc,Xc===ke?Le(jc)?Ve(jc):K(jc):jc.match(Xc)||[]}function rl(jc){return function(){return jc}}function al(jc){return jc}function nl(jc){return Di("function"==typeof jc?jc:ni(jc,qe))}function dl(jc,Xc,qc){var Yc=Ys(Xc),Zc=xi(Xc,Yc);null!=qc||Us(Xc)&&(Zc.length||!Yc.length)||(qc=Xc,Xc=jc,jc=this,Zc=xi(Xc,Ys(Xc)));var Jc=!(Us(qc)&&"chain"in qc)||!!qc.chain,Qc=Ps(jc);return D(Zc,function(Kc){var $c=Xc[Kc];jc[Kc]=$c,Qc&&(jc.prototype[Kc]=function(){var eu=this.__chain__;if(Jc||eu){var tu=jc(this.__wrapped__),ru=tu.__actions__=Fn(this.__actions__);return ru.push({func:$c,args:arguments,thisArg:jc}),tu.__chain__=eu,tu}return $c.apply(jc,X([this.value()],arguments))})}),jc}function cl(){}function ul(jc){return No(jc)?le(Ko(jc)):qi(jc)}function yl(){return[]}function xl(){return!1}Ua=null==Ua?ga:Ca.defaults(ga.Object(),Ua,Ca.pick(ga,na));var _l=Ua.Array,El=Ua.Date,Tl=Ua.Error,Sl=Ua.Function,Ml=Ua.Math,wl=Ua.Object,Al=Ua.RegExp,Ll=Ua.String,Rl=Ua.TypeError,Pl=_l.prototype,Cl=Sl.prototype,Il=wl.prototype,Ul=Ua["__core-js_shared__"],Dl=Cl.toString,Nl=Il.hasOwnProperty,Fl=0,zl=function(){var jc=/[^.]+$/.exec(Ul&&Ul.keys&&Ul.keys.IE_PROTO||"");return jc?"Symbol(src)_1."+jc:""}(),Bl=Il.toString,Ol=Dl.call(wl),Gl=ga._,Vl=Al("^"+Dl.call(Nl).replace(nr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hl=xa?Ua.Buffer:ke,Wl=Ua.Symbol,Xl=Ua.Uint8Array,ql=Hl?Hl.allocUnsafe:ke,Yl=Ce(wl.getPrototypeOf,wl),Zl=wl.create,Jl=Il.propertyIsEnumerable,Ql=Pl.splice,Kl=Wl?Wl.isConcatSpreadable:ke,$l=Wl?Wl.iterator:ke,ed=Wl?Wl.toStringTag:ke,td=function(){try{var jc=To(wl,"defineProperty");return jc({},"",{}),jc}catch(Xc){}}(),rd=Ua.clearTimeout!==ga.clearTimeout&&Ua.clearTimeout,nd=El&&El.now!==ga.Date.now&&El.now,od=Ua.setTimeout!==ga.setTimeout&&Ua.setTimeout,sd=Ml.ceil,ld=Ml.floor,dd=wl.getOwnPropertySymbols,cd=Hl?Hl.isBuffer:ke,ud=Ua.isFinite,md=Pl.join,fd=Ce(wl.keys,wl),gd=Ml.max,hd=Ml.min,yd=El.now,xd=Ua.parseInt,_d=Ml.random,vd=Pl.reverse,Ed=To(Ua,"DataView"),Td=To(Ua,"Map"),Sd=To(Ua,"Promise"),Md=To(Ua,"Set"),wd=To(Ua,"WeakMap"),Ad=To(wl,"create"),Ld=wd&&new wd,Rd={},Pd=$o(Ed),Cd=$o(Td),Id=$o(Sd),Ud=$o(Md),Dd=$o(wd),Nd=Wl?Wl.prototype:ke,Fd=Nd?Nd.valueOf:ke,zd=Nd?Nd.toString:ke,Bd=function(){function jc(){}return function(Xc){if(!Us(Xc))return{};if(Zl)return Zl(Xc);jc.prototype=Xc;var qc=new jc;return jc.prototype=ke,qc}}();Da.templateSettings={escape:Kt,evaluate:$t,interpolate:er,variable:"",imports:{_:Da}},Da.prototype=Na.prototype,Da.prototype.constructor=Da,Fa.prototype=Bd(Na.prototype),Fa.prototype.constructor=Fa,za.prototype=Bd(Na.prototype),za.prototype.constructor=za,Ba.prototype.clear=function(){this.__data__=Ad?Ad(null):{},this.size=0},Ba.prototype["delete"]=function(Xc){var qc=this.has(Xc)&&delete this.__data__[Xc];return this.size-=qc?1:0,qc},Ba.prototype.get=function(Xc){var qc=this.__data__;if(Ad){var Yc=qc[Xc];return Yc===je?ke:Yc}return Nl.call(qc,Xc)?qc[Xc]:ke},Ba.prototype.has=function(Xc){var qc=this.__data__;return Ad?qc[Xc]!==ke:Nl.call(qc,Xc)},Ba.prototype.set=function(Xc,qc){var Yc=this.__data__;return this.size+=this.has(Xc)?0:1,Yc[Xc]=Ad&&qc===ke?je:qc,this},Oa.prototype.clear=function(){this.__data__=[],this.size=0},Oa.prototype["delete"]=function(Xc){var qc=this.__data__,Yc=Qa(qc,Xc);if(0>Yc)return!1;var Zc=qc.length-1;return Yc==Zc?qc.pop():Ql.call(qc,Yc,1),--this.size,!0},Oa.prototype.get=function(Xc){var qc=this.__data__,Yc=Qa(qc,Xc);return 0>Yc?ke:qc[Yc][1]},Oa.prototype.has=function(Xc){return-1<Qa(this.__data__,Xc)},Oa.prototype.set=function(Xc,qc){var Yc=this.__data__,Zc=Qa(Yc,Xc);return 0>Zc?(++this.size,Yc.push([Xc,qc])):Yc[Zc][1]=qc,this},Ga.prototype.clear=function(){this.size=0,this.__data__={hash:new Ba,map:new(Td||Oa),string:new Ba}},Ga.prototype["delete"]=function(Xc){var qc=bo(this,Xc)["delete"](Xc);return this.size-=qc?1:0,qc},Ga.prototype.get=function(Xc){return bo(this,Xc).get(Xc)},Ga.prototype.has=function(Xc){return bo(this,Xc).has(Xc)},Ga.prototype.set=function(Xc,qc){var Yc=bo(this,Xc),Zc=Yc.size;return Yc.set(Xc,qc),this.size+=Yc.size==Zc?0:1,this},Va.prototype.add=Va.prototype.push=function(Xc){return this.__data__.set(Xc,je),this},Va.prototype.has=function(Xc){return this.__data__.has(Xc)},ka.prototype.clear=function(){this.__data__=new Oa,this.size=0},ka.prototype["delete"]=function(Xc){var qc=this.__data__,Yc=qc["delete"](Xc);return this.size=qc.size,Yc},ka.prototype.get=function(Xc){return this.__data__.get(Xc)},ka.prototype.has=function(Xc){return this.__data__.has(Xc)},ka.prototype.set=function(Xc,qc){var Yc=this.__data__;if(Yc instanceof Oa){var Zc=Yc.__data__;if(!Td||Zc.length<He-1)return Zc.push([Xc,qc]),this.size=++Yc.size,this;Yc=this.__data__=new Ga(Zc)}return Yc.set(Xc,qc),this.size=Yc.size,this};var Od=kn(hi),Gd=kn(yi,!0),Vd=Hn(),kd=Hn(!0),Hd=Ld?function(jc,Xc){return Ld.set(jc,Xc),jc}:al,Wd=td?function(jc,Xc){return td(jc,"toString",{configurable:!0,enumerable:!1,value:rl(Xc),writable:!0})}:al,jd=rd||function(jc){return ga.clearTimeout(jc)},Xd=Md&&1/Ue(new Md([,-0]))[1]==ut?function(jc){return new Md(jc)}:cl,qd=Ld?function(jc){return Ld.get(jc)}:cl,Yd=dd?Ce(dd,wl):yl,Zd=dd?function(jc){for(var Xc=[];jc;)X(Xc,Yd(jc)),jc=Yl(jc);return Xc}:yl,Jd=bi;(Ed&&Jd(new Ed(new ArrayBuffer(1)))!=Nt||Td&&Jd(new Td)!=Mt||Sd&&Jd(Sd.resolve())!=Lt||Md&&Jd(new Md)!=Pt||wd&&Jd(new wd)!=Ut)&&(Jd=function(jc){var Xc=bi(jc),qc=Xc==At?jc.constructor:ke,Yc=qc?$o(qc):"";if(Yc)switch(Yc){case Pd:return Nt;case Cd:return Mt;case Id:return Lt;case Ud:return Pt;case Dd:return Ut;}return Xc});var Qd=Ul?Ps:xl,Kd=Jo(Hd),$d=od||function(jc,Xc){return ga.setTimeout(jc,Xc)},ep=Jo(Wd),tp=function(Xc){var qc=Ss(Xc,function(Zc){return 500===Yc.size&&Yc.clear(),Zc}),Yc=qc.cache;return qc}(function(jc){var Xc=[];return ar.test(jc)&&Xc.push(""),jc.replace(ir,function(qc,Yc,Zc,Jc){Xc.push(Zc?Jc.replace(fr,"$1"):Yc||qc)}),Xc}),rp=$i(function(jc,Xc){return Ls(jc)?di(jc,gi(Xc,1,Ls,!0)):[]}),ap=$i(function(jc,Xc){var qc=os(Xc);return Ls(qc)&&(qc=ke),Ls(jc)?di(jc,gi(Xc,1,Ls,!0),vo(qc,2)):[]}),np=$i(function(jc,Xc){var qc=os(Xc);return Ls(qc)&&(qc=ke),Ls(jc)?di(jc,gi(Xc,1,Ls,!0),ke,qc):[]}),op=$i(function(jc){var Xc=W(jc,vn);return Xc.length&&Xc[0]===jc[0]?wi(Xc):[]}),sp=$i(function(jc){var Xc=os(jc),qc=W(jc,vn);return Xc===os(qc)?Xc=ke:qc.pop(),qc.length&&qc[0]===jc[0]?wi(qc,vo(Xc,2)):[]}),lp=$i(function(jc){var Xc=os(jc),qc=W(jc,vn);return Xc="function"==typeof Xc?Xc:ke,Xc&&qc.pop(),qc.length&&qc[0]===jc[0]?wi(qc,ke,Xc):[]}),dp=$i(ss),cp=fo(function(jc,Xc){var qc=null==jc?0:jc.length,Yc=ri(jc,Xc);return Zi(jc,W(Xc,function(Zc){return Uo(Zc,qc)?+Zc:Zc}).sort(In)),Yc}),mp=$i(function(jc){return un(gi(jc,1,Ls,!0))}),fp=$i(function(jc){var Xc=os(jc);return Ls(Xc)&&(Xc=ke),un(gi(jc,1,Ls,!0),vo(Xc,2))}),gp=$i(function(jc){var Xc=os(jc);return Xc="function"==typeof Xc?Xc:ke,un(gi(jc,1,Ls,!0),ke,Xc)}),hp=$i(function(jc,Xc){return Ls(jc)?di(jc,Xc):[]}),yp=$i(function(jc){return xn(G(jc,Ls))}),xp=$i(function(jc){var Xc=os(jc);return Ls(Xc)&&(Xc=ke),xn(G(jc,Ls),vo(Xc,2))}),_p=$i(function(jc){var Xc=os(jc);return Xc="function"==typeof Xc?Xc:ke,xn(G(jc,Ls),ke,Xc)}),vp=$i(ds),bp=$i(function(jc){var Xc=jc.length,qc=1<Xc?jc[Xc-1]:ke;return qc="function"==typeof qc?(jc.pop(),qc):ke,ps(jc,qc)}),Ep=fo(function(jc){var Xc=jc.length,qc=Xc?jc[0]:0,Yc=this.__wrapped__,Zc=function(Jc){return ri(Jc,jc)};return 1<Xc||this.__actions__.length||!(Yc instanceof za)||!Uo(qc)?this.thru(Zc):(Yc=Yc.slice(qc,+qc+(Xc?1:0)),Yc.__actions__.push({func:ms,args:[Zc],thisArg:ke}),new Fa(Yc,this.__chain__).thru(function(Jc){return Xc&&!Jc.length&&Jc.push(ke),Jc}))}),Tp=Gn(function(jc,Xc,qc){Nl.call(jc,qc)?++jc[qc]:ti(jc,qc,1)}),Sp=Zn(rs),Mp=Zn(as),wp=Gn(function(jc,Xc,qc){Nl.call(jc,qc)?jc[qc].push(Xc):ti(jc,qc,[Xc])}),Ap=$i(function(jc,Xc,qc){var Yc=-1,Zc=As(jc)?_l(jc.length):[];return Od(jc,function(Jc){Zc[++Yc]="function"==typeof Xc?I(Xc,Jc,qc):Li(Jc,Xc,qc)}),Zc}),Lp=Gn(function(jc,Xc,qc){ti(jc,qc,Xc)}),Rp=Gn(function(jc,Xc,qc){jc[qc?0:1].push(Xc)},function(){return[[],[]]}),Pp=$i(function(jc,Xc){if(null==jc)return[];var qc=Xc.length;return 1<qc&&Do(jc,Xc[0],Xc[1])?Xc=[]:2<qc&&Do(Xc[0],Xc[1],Xc[2])&&(Xc=[Xc[0]]),Wi(jc,gi(Xc,1),[])}),Cp=nd||function(){return ga.Date.now()},Ip=$i(function(jc,Xc,qc){var Yc=Ke;if(qc.length){var Zc=Ie(qc,_o(Ip));Yc|=it}return po(jc,Yc,Xc,qc,Zc)}),Up=$i(function(jc,Xc,qc){var Yc=Ke|$e;if(qc.length){var Zc=Ie(qc,_o(Up));Yc|=it}return po(Xc,Yc,jc,qc,Zc)}),Dp=$i(function(jc,Xc){return li(jc,1,Xc)}),Np=$i(function(jc,Xc,qc){return li(jc,Hs(Xc)||0,qc)});Ss.Cache=Ga;var Fp=$i(function(jc,Xc){Xc=1==Xc.length&&Hp(Xc[0])?W(Xc[0],xe(vo())):W(gi(Xc,1),xe(vo()));var qc=Xc.length;return $i(function(Yc){for(var Zc=-1,Jc=hd(Yc.length,qc);++Zc<Jc;)Yc[Zc]=Xc[Zc].call(this,Yc[Zc]);return I(jc,this,Yc)})}),zp=$i(function(jc,Xc){var qc=Ie(Xc,_o(zp));return po(jc,it,ke,Xc,qc)}),Bp=$i(function(jc,Xc){var qc=Ie(Xc,_o(Bp));return po(jc,nt,ke,Xc,qc)}),Op=fo(function(jc,Xc){return po(jc,st,ke,ke,ke,Xc)}),Gp=no(Ei),Vp=no(function(jc,Xc){return jc>=Xc}),kp=Ri(function(){return arguments}())?Ri:function(jc){return Ds(jc)&&Nl.call(jc,"callee")&&!Jl.call(jc,"callee")},Hp=_l.isArray,Wp=ba?xe(ba):function(Xc){return Ds(Xc)&&bi(Xc)==Dt},Xp=cd||xl,qp=Ea?xe(Ea):function(Xc){return Ds(Xc)&&bi(Xc)==bt},Yp=Ta?xe(Ta):function(Xc){return Ds(Xc)&&Jd(Xc)==Mt},Zp=Sa?xe(Sa):function(Xc){return Ds(Xc)&&bi(Xc)==Rt},Jp=Ma?xe(Ma):function(Xc){return Ds(Xc)&&Jd(Xc)==Pt},Qp=wa?xe(wa):function(Xc){return Ds(Xc)&&Is(Xc.length)&&!!sa[bi(Xc)]},Kp=no(zi),$p=no(function(jc,Xc){return jc<=Xc}),ec=Vn(function(jc,Xc){if(Oo(Xc)||As(Xc))return void zn(Xc,Ys(Xc),jc);for(var qc in Xc)Nl.call(Xc,qc)&&Ja(jc,qc,Xc[qc])}),tc=Vn(function(jc,Xc){zn(Xc,Zs(Xc),jc)}),rc=Vn(function(jc,Xc,qc,Yc){zn(Xc,Zs(Xc),jc,Yc)}),ic=Vn(function(jc,Xc,qc,Yc){zn(Xc,Ys(Xc),jc,Yc)}),nc=fo(ri),oc=$i(function(jc){return jc.push(ke,Ya),I(rc,ke,jc)}),sc=$i(function(jc){return jc.push(ke,Ho),I(mc,ke,jc)}),lc=Kn(function(jc,Xc,qc){jc[Xc]=qc},rl(al)),dc=Kn(function(jc,Xc,qc){Nl.call(jc,Xc)?jc[Xc].push(qc):jc[Xc]=[qc]},vo),cc=$i(Li),uc=Vn(function(jc,Xc,qc){Vi(jc,Xc,qc)}),mc=Vn(function(jc,Xc,qc,Yc){Vi(jc,Xc,qc,Yc)}),fc=fo(function(jc,Xc){var qc={};if(null==jc)return qc;var Yc=!1;Xc=W(Xc,function(Jc){return Jc=En(Jc,jc),Yc||(Yc=1<Jc.length),Jc}),zn(jc,yo(jc),qc),Yc&&(qc=ni(qc,qe|Ye|Ze));for(var Zc=Xc.length;Zc--;)mn(qc,Xc[Zc]);return qc}),gc=fo(function(jc,Xc){return null==jc?{}:ji(jc,Xc)}),hc=lo(Ys),yc=lo(Zs),xc=Xn(function(jc,Xc,qc){return Xc=Xc.toLowerCase(),jc+(qc?Ks(Xc):Xc)}),_c=Xn(function(jc,Xc,qc){return jc+(qc?"-":"")+Xc.toLowerCase()}),vc=Xn(function(jc,Xc,qc){return jc+(qc?" ":"")+Xc.toLowerCase()}),Ec=jn("toLowerCase"),Tc=Xn(function(jc,Xc,qc){return jc+(qc?"_":"")+Xc.toLowerCase()}),Sc=Xn(function(jc,Xc,qc){return jc+(qc?" ":"")+wc(Xc)}),Mc=Xn(function(jc,Xc,qc){return jc+(qc?" ":"")+Xc.toUpperCase()}),wc=jn("toUpperCase"),Ac=$i(function(jc,Xc){try{return I(jc,ke,Xc)}catch(qc){return Rs(qc)?qc:new Tl(qc)}}),Lc=fo(function(jc,Xc){return D(Xc,function(qc){qc=Ko(qc),ti(jc,qc,Ip(jc[qc],jc))}),jc}),Rc=Jn(),Pc=Jn(!0),Cc=$i(function(jc,Xc){return function(qc){return Li(qc,jc,Xc)}}),Ic=$i(function(jc,Xc){return function(qc){return Li(jc,qc,Xc)}}),Uc=eo(W),Dc=eo(O),Nc=eo(J),Fc=io(),zc=io(!0),Bc=$n(function(jc,Xc){return jc+Xc},0),Oc=so("ceil"),Gc=$n(function(jc,Xc){return jc/Xc},1),Vc=so("floor"),kc=$n(function(jc,Xc){return jc*Xc},1),Hc=so("round"),Wc=$n(function(jc,Xc){return jc-Xc},0);return Da.after=function(Xc,qc){if("function"!=typeof qc)throw new Rl(We);return Xc=Vs(Xc),function(){if(1>--Xc)return qc.apply(this,arguments)}},Da.ary=xs,Da.assign=ec,Da.assignIn=tc,Da.assignInWith=rc,Da.assignWith=ic,Da.at=nc,Da.before=_s,Da.bind=Ip,Da.bindAll=Lc,Da.bindKey=Up,Da.castArray=function(){if(!arguments.length)return[];var Xc=arguments[0];return Hp(Xc)?Xc:[Xc]},Da.chain=us,Da.chunk=function(Xc,qc,Yc){qc=(Yc?Do(Xc,qc,Yc):qc===ke)?1:gd(Vs(qc),0);var Zc=null==Xc?0:Xc.length;if(!Zc||1>qc)return[];for(var Jc=0,Qc=0,Kc=_l(sd(Zc/qc));Jc<Zc;)Kc[Qc++]=nn(Xc,Jc,Jc+=qc);return Kc},Da.compact=function(Xc){for(var qc=-1,Yc=null==Xc?0:Xc.length,Zc=0,Jc=[];++qc<Yc;){var Qc=Xc[qc];Qc&&(Jc[Zc++]=Qc)}return Jc},Da.concat=function(){var Xc=arguments.length;if(!Xc)return[];for(var qc=_l(Xc-1),Yc=arguments[0],Zc=Xc;Zc--;)qc[Zc-1]=arguments[Zc];return X(Hp(Yc)?Fn(Yc):[Yc],gi(qc,1))},Da.cond=function(Xc){var qc=null==Xc?0:Xc.length,Yc=vo();return Xc=qc?W(Xc,function(Zc){if("function"!=typeof Zc[1])throw new Rl(We);return[Yc(Zc[0]),Zc[1]]}):[],$i(function(Zc){for(var Jc=-1;++Jc<qc;){var Qc=Xc[Jc];if(I(Qc[0],this,Zc))return I(Qc[1],this,Zc)}})},Da.conforms=function(Xc){return oi(ni(Xc,qe))},Da.constant=rl,Da.countBy=Tp,Da.create=function(Xc,qc){var Yc=Bd(Xc);return null==qc?Yc:$a(Yc,qc)},Da.curry=vs,Da.curryRight=Es,Da.debounce=Ts,Da.defaults=oc,Da.defaultsDeep=sc,Da.defer=Dp,Da.delay=Np,Da.difference=rp,Da.differenceBy=ap,Da.differenceWith=np,Da.drop=function(Xc,qc,Yc){var Zc=null==Xc?0:Xc.length;return Zc?(qc=Yc||qc===ke?1:Vs(qc),nn(Xc,0>qc?0:qc,Zc)):[]},Da.dropRight=function(Xc,qc,Yc){var Zc=null==Xc?0:Xc.length;return Zc?(qc=Yc||qc===ke?1:Vs(qc),qc=Zc-qc,nn(Xc,0,0>qc?0:qc)):[]},Da.dropRightWhile=function(Xc,qc){return Xc&&Xc.length?hn(Xc,vo(qc,3),!0,!0):[]},Da.dropWhile=function(Xc,qc){return Xc&&Xc.length?hn(Xc,vo(qc,3),!0):[]},Da.fill=function(Xc,qc,Yc,Zc){var Jc=null==Xc?0:Xc.length;return Jc?(Yc&&"number"!=typeof Yc&&Do(Xc,qc,Yc)&&(Yc=0,Zc=Jc),ui(Xc,qc,Yc,Zc)):[]},Da.filter=function(Xc,qc){var Yc=Hp(Xc)?G:mi;return Yc(Xc,vo(qc,3))},Da.flatMap=function(Xc,qc){return gi(ys(Xc,qc),1)},Da.flatMapDeep=function(Xc,qc){return gi(ys(Xc,qc),ut)},Da.flatMapDepth=function(Xc,qc,Yc){return Yc=Yc===ke?1:Vs(Yc),gi(ys(Xc,qc),Yc)},Da.flatten=is,Da.flattenDeep=function(Xc){var qc=null==Xc?0:Xc.length;return qc?gi(Xc,ut):[]},Da.flattenDepth=function(Xc,qc){var Yc=null==Xc?0:Xc.length;return Yc?(qc=qc===ke?1:Vs(qc),gi(Xc,qc)):[]},Da.flip=function(Xc){return po(Xc,dt)},Da.flow=Rc,Da.flowRight=Pc,Da.fromPairs=function(Xc){for(var qc=-1,Yc=null==Xc?0:Xc.length,Zc={};++qc<Yc;){var Jc=Xc[qc];Zc[Jc[0]]=Jc[1]}return Zc},Da.functions=function(Xc){return null==Xc?[]:xi(Xc,Ys(Xc))},Da.functionsIn=function(Xc){return null==Xc?[]:xi(Xc,Zs(Xc))},Da.groupBy=wp,Da.initial=function(Xc){var qc=null==Xc?0:Xc.length;return qc?nn(Xc,0,-1):[]},Da.intersection=op,Da.intersectionBy=sp,Da.intersectionWith=lp,Da.invert=lc,Da.invertBy=dc,Da.invokeMap=Ap,Da.iteratee=nl,Da.keyBy=Lp,Da.keys=Ys,Da.keysIn=Zs,Da.map=ys,Da.mapKeys=function(Xc,qc){var Yc={};return qc=vo(qc,3),hi(Xc,function(Zc,Jc,Qc){ti(Yc,qc(Zc,Jc,Qc),Zc)}),Yc},Da.mapValues=function(Xc,qc){var Yc={};return qc=vo(qc,3),hi(Xc,function(Zc,Jc,Qc){ti(Yc,Jc,qc(Zc,Jc,Qc))}),Yc},Da.matches=function(Xc){return Oi(ni(Xc,qe))},Da.matchesProperty=function(Xc,qc){return Gi(Xc,ni(qc,qe))},Da.memoize=Ss,Da.merge=uc,Da.mergeWith=mc,Da.method=Cc,Da.methodOf=Ic,Da.mixin=dl,Da.negate=Ms,Da.nthArg=function(Xc){return Xc=Vs(Xc),$i(function(qc){return Hi(qc,Xc)})},Da.omit=fc,Da.omitBy=function(Xc,qc){return Js(Xc,Ms(vo(qc)))},Da.once=function(Xc){return _s(2,Xc)},Da.orderBy=function(Xc,qc,Yc,Zc){return null==Xc?[]:(Hp(qc)||(qc=null==qc?[]:[qc]),Yc=Zc?ke:Yc,Hp(Yc)||(Yc=null==Yc?[]:[Yc]),Wi(Xc,qc,Yc))},Da.over=Uc,Da.overArgs=Fp,Da.overEvery=Dc,Da.overSome=Nc,Da.partial=zp,Da.partialRight=Bp,Da.partition=Rp,Da.pick=gc,Da.pickBy=Js,Da.property=ul,Da.propertyOf=function(Xc){return function(qc){return null==Xc?ke:_i(Xc,qc)}},Da.pull=dp,Da.pullAll=ss,Da.pullAllBy=function(Xc,qc,Yc){return Xc&&Xc.length&&qc&&qc.length?Yi(Xc,qc,vo(Yc,2)):Xc},Da.pullAllWith=function(Xc,qc,Yc){return Xc&&Xc.length&&qc&&qc.length?Yi(Xc,qc,ke,Yc):Xc},Da.pullAt=cp,Da.range=Fc,Da.rangeRight=zc,Da.rearg=Op,Da.reject=function(Xc,qc){var Yc=Hp(Xc)?G:mi;return Yc(Xc,Ms(vo(qc,3)))},Da.remove=function(Xc,qc){var Yc=[];if(!(Xc&&Xc.length))return Yc;var Zc=-1,Jc=[],Qc=Xc.length;for(qc=vo(qc,3);++Zc<Qc;){var Kc=Xc[Zc];qc(Kc,Zc,Xc)&&(Yc.push(Kc),Jc.push(Zc))}return Zi(Xc,Jc),Yc},Da.rest=function(Xc,qc){if("function"!=typeof Xc)throw new Rl(We);return qc=qc===ke?qc:Vs(qc),$i(Xc,qc)},Da.reverse=ls,Da.sampleSize=function(Xc,qc,Yc){qc=(Yc?Do(Xc,qc,Yc):qc===ke)?1:Vs(qc);var Zc=Hp(Xc)?ja:tn;return Zc(Xc,qc)},Da.set=function(Xc,qc,Yc){return null==Xc?Xc:rn(Xc,qc,Yc)},Da.setWith=function(Xc,qc,Yc,Zc){return Zc="function"==typeof Zc?Zc:ke,null==Xc?Xc:rn(Xc,qc,Yc,Zc)},Da.shuffle=function(Xc){var qc=Hp(Xc)?Xa:an;return qc(Xc)},Da.slice=function(Xc,qc,Yc){var Zc=null==Xc?0:Xc.length;return Zc?(Yc&&"number"!=typeof Yc&&Do(Xc,qc,Yc)?(qc=0,Yc=Zc):(qc=null==qc?0:Vs(qc),Yc=Yc===ke?Zc:Vs(Yc)),nn(Xc,qc,Yc)):[]},Da.sortBy=Pp,Da.sortedUniq=function(Xc){return Xc&&Xc.length?dn(Xc):[]},Da.sortedUniqBy=function(Xc,qc){return Xc&&Xc.length?dn(Xc,vo(qc,2)):[]},Da.split=function(Xc,qc,Yc){return(Yc&&"number"!=typeof Yc&&Do(Xc,qc,Yc)&&(qc=Yc=ke),Yc=Yc===ke?ht:Yc>>>0,!Yc)?[]:(Xc=js(Xc),Xc&&("string"==typeof qc||null!=qc&&!Zp(qc))&&(qc=cn(qc),!qc&&Ae(Xc))?Tn(Be(Xc),0,Yc):Xc.split(qc,Yc))},Da.spread=function(Xc,qc){if("function"!=typeof Xc)throw new Rl(We);return qc=qc===ke?0:gd(Vs(qc),0),$i(function(Yc){var Zc=Yc[qc],Jc=Tn(Yc,0,qc);return Zc&&X(Jc,Zc),I(Xc,this,Jc)})},Da.tail=function(Xc){var qc=null==Xc?0:Xc.length;return qc?nn(Xc,1,qc):[]},Da.take=function(Xc,qc,Yc){return Xc&&Xc.length?(qc=Yc||qc===ke?1:Vs(qc),nn(Xc,0,0>qc?0:qc)):[]},Da.takeRight=function(Xc,qc,Yc){var Zc=null==Xc?0:Xc.length;return Zc?(qc=Yc||qc===ke?1:Vs(qc),qc=Zc-qc,nn(Xc,0>qc?0:qc,Zc)):[]},Da.takeRightWhile=function(Xc,qc){return Xc&&Xc.length?hn(Xc,vo(qc,3),!1,!0):[]},Da.takeWhile=function(Xc,qc){return Xc&&Xc.length?hn(Xc,vo(qc,3)):[]},Da.tap=function(Xc,qc){return qc(Xc),Xc},Da.throttle=function(Xc,qc,Yc){var Zc=!0,Jc=!0;if("function"!=typeof Xc)throw new Rl(We);return Us(Yc)&&(Zc="leading"in Yc?!!Yc.leading:Zc,Jc="trailing"in Yc?!!Yc.trailing:Jc),Ts(Xc,qc,{leading:Zc,maxWait:qc,trailing:Jc})},Da.thru=ms,Da.toArray=Os,Da.toPairs=hc,Da.toPairsIn=yc,Da.toPath=function(Xc){return Hp(Xc)?W(Xc,Ko):Bs(Xc)?[Xc]:Fn(tp(js(Xc)))},Da.toPlainObject=Ws,Da.transform=function(Xc,qc,Yc){var Zc=Hp(Xc),Jc=Zc||Xp(Xc)||Qp(Xc);if(qc=vo(qc,4),null==Yc){var Qc=Xc&&Xc.constructor;Yc=Jc?Zc?new Qc:[]:Us(Xc)?Ps(Qc)?Bd(Yl(Xc)):{}:{}}return(Jc?D:hi)(Xc,function(Kc,$c,eu){return qc(Yc,Kc,$c,eu)}),Yc},Da.unary=function(Xc){return xs(Xc,1)},Da.union=mp,Da.unionBy=fp,Da.unionWith=gp,Da.uniq=function(Xc){return Xc&&Xc.length?un(Xc):[]},Da.uniqBy=function(Xc,qc){return Xc&&Xc.length?un(Xc,vo(qc,2)):[]},Da.uniqWith=function(Xc,qc){return qc="function"==typeof qc?qc:ke,Xc&&Xc.length?un(Xc,ke,qc):[]},Da.unset=function(Xc,qc){return null==Xc||mn(Xc,qc)},Da.unzip=ds,Da.unzipWith=ps,Da.update=function(Xc,qc,Yc){return null==Xc?Xc:gn(Xc,qc,bn(Yc))},Da.updateWith=function(Xc,qc,Yc,Zc){return Zc="function"==typeof Zc?Zc:ke,null==Xc?Xc:gn(Xc,qc,bn(Yc),Zc)},Da.values=Qs,Da.valuesIn=function(Xc){return null==Xc?[]:_e(Xc,Zs(Xc))},Da.without=hp,Da.words=el,Da.wrap=function(Xc,qc){return zp(bn(qc),Xc)},Da.xor=yp,Da.xorBy=xp,Da.xorWith=_p,Da.zip=vp,Da.zipObject=function(Xc,qc){return _n(Xc||[],qc||[],Ja)},Da.zipObjectDeep=function(Xc,qc){return _n(Xc||[],qc||[],rn)},Da.zipWith=bp,Da.entries=hc,Da.entriesIn=yc,Da.extend=tc,Da.extendWith=rc,dl(Da,Da),Da.add=Bc,Da.attempt=Ac,Da.camelCase=xc,Da.capitalize=Ks,Da.ceil=Oc,Da.clamp=function(Xc,qc,Yc){return Yc===ke&&(Yc=qc,qc=ke),Yc!==ke&&(Yc=Hs(Yc),Yc=Yc===Yc?Yc:0),qc!==ke&&(qc=Hs(qc),qc=qc===qc?qc:0),ai(Hs(Xc),qc,Yc)},Da.clone=function(Xc){return ni(Xc,Ze)},Da.cloneDeep=function(Xc){return ni(Xc,qe|Ze)},Da.cloneDeepWith=function(Xc,qc){return qc="function"==typeof qc?qc:ke,ni(Xc,qe|Ze,qc)},Da.cloneWith=function(Xc,qc){return qc="function"==typeof qc?qc:ke,ni(Xc,Ze,qc)},Da.conformsTo=function(Xc,qc){return null==qc||si(Xc,qc,Ys(qc))},Da.deburr=$s,Da.defaultTo=function(Xc,qc){return null==Xc||Xc!==Xc?qc:Xc},Da.divide=Gc,Da.endsWith=function(Xc,qc,Yc){Xc=js(Xc),qc=cn(qc);var Zc=Xc.length;Yc=Yc===ke?Zc:ai(Vs(Yc),0,Zc);var Jc=Yc;return Yc-=qc.length,0<=Yc&&Xc.slice(Yc,Jc)==qc},Da.eq=ws,Da.escape=function(Xc){return Xc=js(Xc),Xc&&Qt.test(Xc)?Xc.replace(Zt,Ra):Xc},Da.escapeRegExp=function(Xc){return Xc=js(Xc),Xc&&or.test(Xc)?Xc.replace(nr,"\\$&"):Xc},Da.every=function(Xc,qc,Yc){var Zc=Hp(Xc)?O:pi;return Yc&&Do(Xc,qc,Yc)&&(qc=ke),Zc(Xc,vo(qc,3))},Da.find=Sp,Da.findIndex=rs,Da.findKey=function(Xc,qc){return $(Xc,vo(qc,3),hi)},Da.findLast=Mp,Da.findLastIndex=as,Da.findLastKey=function(Xc,qc){return $(Xc,vo(qc,3),yi)},Da.floor=Vc,Da.forEach=gs,Da.forEachRight=hs,Da.forIn=function(Xc,qc){return null==Xc?Xc:Vd(Xc,vo(qc,3),Zs)},Da.forInRight=function(Xc,qc){return null==Xc?Xc:kd(Xc,vo(qc,3),Zs)},Da.forOwn=function(Xc,qc){return Xc&&hi(Xc,vo(qc,3))},Da.forOwnRight=function(Xc,qc){return Xc&&yi(Xc,vo(qc,3))},Da.get=Xs,Da.gt=Gp,Da.gte=Vp,Da.has=function(Xc,qc){return null!=Xc&&Ao(Xc,qc,Ti)},Da.hasIn=qs,Da.head=ns,Da.identity=al,Da.includes=function(Xc,qc,Yc,Zc){Xc=As(Xc)?Xc:Qs(Xc),Yc=Yc&&!Zc?Vs(Yc):0;var Jc=Xc.length;return 0>Yc&&(Yc=gd(Jc+Yc,0)),zs(Xc)?Yc<=Jc&&-1<Xc.indexOf(qc,Yc):!!Jc&&-1<ie(Xc,qc,Yc)},Da.indexOf=function(Xc,qc,Yc){var Zc=null==Xc?0:Xc.length;if(!Zc)return-1;var Jc=null==Yc?0:Vs(Yc);return 0>Jc&&(Jc=gd(Zc+Jc,0)),ie(Xc,qc,Jc)},Da.inRange=function(Xc,qc,Yc){return qc=Gs(qc),Yc===ke?(Yc=qc,qc=0):Yc=Gs(Yc),Xc=Hs(Xc),Mi(Xc,qc,Yc)},Da.invoke=cc,Da.isArguments=kp,Da.isArray=Hp,Da.isArrayBuffer=Wp,Da.isArrayLike=As,Da.isArrayLikeObject=Ls,Da.isBoolean=function(Xc){return!0===Xc||!1===Xc||Ds(Xc)&&bi(Xc)==vt},Da.isBuffer=Xp,Da.isDate=qp,Da.isElement=function(Xc){return Ds(Xc)&&1===Xc.nodeType&&!Fs(Xc)},Da.isEmpty=function(Xc){if(null==Xc)return!0;if(As(Xc)&&(Hp(Xc)||"string"==typeof Xc||"function"==typeof Xc.splice||Xp(Xc)||Qp(Xc)||kp(Xc)))return!Xc.length;var qc=Jd(Xc);if(qc==Mt||qc==Pt)return!Xc.size;if(Oo(Xc))return!Ni(Xc).length;for(var Yc in Xc)if(Nl.call(Xc,Yc))return!1;return!0},Da.isEqual=function(Xc,qc){return Pi(Xc,qc)},Da.isEqualWith=function(Xc,qc,Yc){Yc="function"==typeof Yc?Yc:ke;var Zc=Yc?Yc(Xc,qc):ke;return Zc===ke?Pi(Xc,qc,ke,Yc):!!Zc},Da.isError=Rs,Da.isFinite=function(Xc){return"number"==typeof Xc&&ud(Xc)},Da.isFunction=Ps,Da.isInteger=Cs,Da.isLength=Is,Da.isMap=Yp,Da.isMatch=function(Xc,qc){return Xc===qc||Ii(Xc,qc,Eo(qc))},Da.isMatchWith=function(Xc,qc,Yc){return Yc="function"==typeof Yc?Yc:ke,Ii(Xc,qc,Eo(qc),Yc)},Da.isNaN=function(Xc){return Ns(Xc)&&Xc!=+Xc},Da.isNative=function(Xc){if(Qd(Xc))throw new Tl("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ui(Xc)},Da.isNil=function(Xc){return null==Xc},Da.isNull=function(Xc){return null===Xc},Da.isNumber=Ns,Da.isObject=Us,Da.isObjectLike=Ds,Da.isPlainObject=Fs,Da.isRegExp=Zp,Da.isSafeInteger=function(Xc){return Cs(Xc)&&Xc>=-mt&&Xc<=mt},Da.isSet=Jp,Da.isString=zs,Da.isSymbol=Bs,Da.isTypedArray=Qp,Da.isUndefined=function(Xc){return Xc===ke},Da.isWeakMap=function(Xc){return Ds(Xc)&&Jd(Xc)==Ut},Da.isWeakSet=function(Xc){return Ds(Xc)&&"[object WeakSet]"==bi(Xc)},Da.join=function(Xc,qc){return null==Xc?"":md.call(Xc,qc)},Da.kebabCase=_c,Da.last=os,Da.lastIndexOf=function(Xc,qc,Yc){var Zc=null==Xc?0:Xc.length;if(!Zc)return-1;var Jc=Zc;return Yc!==ke&&(Jc=Vs(Yc),Jc=0>Jc?gd(Zc+Jc,0):hd(Jc,Zc-1)),qc===qc?Fe(Xc,qc,Jc):ee(Xc,oe,Jc,!0)},Da.lowerCase=vc,Da.lowerFirst=Ec,Da.lt=Kp,Da.lte=$p,Da.max=function(Xc){return Xc&&Xc.length?ci(Xc,al,Ei):ke},Da.maxBy=function(Xc,qc){return Xc&&Xc.length?ci(Xc,vo(qc,2),Ei):ke},Da.mean=function(Xc){return se(Xc,al)},Da.meanBy=function(Xc,qc){return se(Xc,vo(qc,2))},Da.min=function(Xc){return Xc&&Xc.length?ci(Xc,al,zi):ke},Da.minBy=function(Xc,qc){return Xc&&Xc.length?ci(Xc,vo(qc,2),zi):ke},Da.stubArray=yl,Da.stubFalse=xl,Da.stubObject=function(){return{}},Da.stubString=function(){return""},Da.stubTrue=function(){return!0},Da.multiply=kc,Da.nth=function(Xc,qc){return Xc&&Xc.length?Hi(Xc,Vs(qc)):ke},Da.noConflict=function(){return ga._===this&&(ga._=Gl),this},Da.noop=cl,Da.now=Cp,Da.pad=function(Xc,qc,Yc){Xc=js(Xc),qc=Vs(qc);var Zc=qc?ze(Xc):0;if(!qc||Zc>=qc)return Xc;var Jc=(qc-Zc)/2;return ro(ld(Jc),Yc)+Xc+ro(sd(Jc),Yc)},Da.padEnd=function(Xc,qc,Yc){Xc=js(Xc),qc=Vs(qc);var Zc=qc?ze(Xc):0;return qc&&Zc<qc?Xc+ro(qc-Zc,Yc):Xc},Da.padStart=function(Xc,qc,Yc){Xc=js(Xc),qc=Vs(qc);var Zc=qc?ze(Xc):0;return qc&&Zc<qc?ro(qc-Zc,Yc)+Xc:Xc},Da.parseInt=function(Xc,qc,Yc){return Yc||null==qc?qc=0:qc&&(qc=+qc),xd(js(Xc).replace(lr,""),qc||0)},Da.random=function(Xc,qc,Yc){if(Yc&&"boolean"!=typeof Yc&&Do(Xc,qc,Yc)&&(qc=Yc=ke),Yc===ke&&("boolean"==typeof qc?(Yc=qc,qc=ke):"boolean"==typeof Xc&&(Yc=Xc,Xc=ke)),Xc===ke&&qc===ke?(Xc=0,qc=1):(Xc=Gs(Xc),qc===ke?(qc=Xc,Xc=0):qc=Gs(qc)),Xc>qc){var Zc=Xc;Xc=qc,qc=Zc}if(Yc||Xc%1||qc%1){var Jc=_d();return hd(Xc+Jc*(qc-Xc+ca("1e-"+((Jc+"").length-1))),qc)}return Ji(Xc,qc)},Da.reduce=function(Xc,qc,Yc){var Zc=Hp(Xc)?Y:ue,Jc=3>arguments.length;return Zc(Xc,vo(qc,4),Yc,Jc,Od)},Da.reduceRight=function(Xc,qc,Yc){var Zc=Hp(Xc)?Z:ue,Jc=3>arguments.length;return Zc(Xc,vo(qc,4),Yc,Jc,Gd)},Da.repeat=function(Xc,qc,Yc){return qc=(Yc?Do(Xc,qc,Yc):qc===ke)?1:Vs(qc),Ki(js(Xc),qc)},Da.replace=function(){var Xc=arguments,qc=js(Xc[0]);return 3>Xc.length?qc:qc.replace(Xc[1],Xc[2])},Da.result=function(Xc,qc,Yc){qc=En(qc,Xc);var Zc=-1,Jc=qc.length;for(Jc||(Jc=1,Xc=ke);++Zc<Jc;){var Qc=null==Xc?ke:Xc[Ko(qc[Zc])];Qc===ke&&(Zc=Jc,Qc=Yc),Xc=Ps(Qc)?Qc.call(Xc):Qc}return Xc},Da.round=Hc,Da.runInContext=Ia,Da.sample=function(Xc){var qc=Hp(Xc)?Wa:en;return qc(Xc)},Da.size=function(Xc){if(null==Xc)return 0;if(As(Xc))return zs(Xc)?ze(Xc):Xc.length;var qc=Jd(Xc);return qc==Mt||qc==Pt?Xc.size:Ni(Xc).length},Da.snakeCase=Tc,Da.some=function(Xc,qc,Yc){var Zc=Hp(Xc)?J:on;return Yc&&Do(Xc,qc,Yc)&&(qc=ke),Zc(Xc,vo(qc,3))},Da.sortedIndex=function(Xc,qc){return sn(Xc,qc)},Da.sortedIndexBy=function(Xc,qc,Yc){return ln(Xc,qc,vo(Yc,2))},Da.sortedIndexOf=function(Xc,qc){var Yc=null==Xc?0:Xc.length;if(Yc){var Zc=sn(Xc,qc);if(Zc<Yc&&ws(Xc[Zc],qc))return Zc}return-1},Da.sortedLastIndex=function(Xc,qc){return sn(Xc,qc,!0)},Da.sortedLastIndexBy=function(Xc,qc,Yc){return ln(Xc,qc,vo(Yc,2),!0)},Da.sortedLastIndexOf=function(Xc,qc){var Yc=null==Xc?0:Xc.length;if(Yc){var Zc=sn(Xc,qc,!0)-1;if(ws(Xc[Zc],qc))return Zc}return-1},Da.startCase=Sc,Da.startsWith=function(Xc,qc,Yc){return Xc=js(Xc),Yc=ai(Vs(Yc),0,Xc.length),qc=cn(qc),Xc.slice(Yc,Yc+qc.length)==qc},Da.subtract=Wc,Da.sum=function(Xc){return Xc&&Xc.length?ge(Xc,al):0},Da.sumBy=function(Xc,qc){return Xc&&Xc.length?ge(Xc,vo(qc,2)):0},Da.template=function(Xc,qc,Yc){var Zc=Da.templateSettings;Yc&&Do(Xc,qc,Yc)&&(qc=ke),Xc=js(Xc),qc=rc({},qc,Zc,Ya);var Jc=rc({},qc.imports,Zc.imports,Ya),Qc=Ys(Jc),Kc=_e(Jc,Qc),tu=0,ru=qc.interpolate||Tr,au="__p += '",iu=Al((qc.escape||Tr).source+"|"+ru.source+"|"+(ru===er?gr:Tr).source+"|"+(qc.evaluate||Tr).source+"|$","g"),nu="//# sourceURL="+("sourceURL"in qc?qc.sourceURL:"lodash.templateSources["+ ++oa+"]")+"\n",$c,eu;Xc.replace(iu,function(du,pu,uu,mu,fu,gu){return uu||(uu=mu),au+=Xc.slice(tu,gu).replace(Sr,Me),pu&&($c=!0,au+="' +\n__e("+pu+") +\n'"),fu&&(eu=!0,au+="';\n"+fu+";\n__p += '"),uu&&(au+="' +\n((__t = ("+uu+")) == null ? '' : __t) +\n'"),tu=gu+du.length,du}),au+="';\n";var ou=qc.variable;ou||(au="with (obj) {\n"+au+"\n}\n"),au=(eu?au.replace(jt,""):au).replace(Xt,"$1").replace(qt,"$1;"),au="function("+(ou||"obj")+") {\n"+(ou?"":"obj || (obj = {});\n")+"var __t, __p = ''"+($c?", __e = _.escape":"")+(eu?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+au+"return __p\n}";var lu=Ac(function(){return Sl(Qc,nu+"return "+au).apply(ke,Kc)});if(lu.source=au,Rs(lu))throw lu;return lu},Da.times=function(Xc,qc){if(Xc=Vs(Xc),1>Xc||Xc>mt)return[];var Yc=ht,Zc=hd(Xc,ht);qc=vo(qc),Xc-=ht;for(var Jc=he(Zc,qc);++Yc<Xc;)qc(Yc);return Jc},Da.toFinite=Gs,Da.toInteger=Vs,Da.toLength=ks,Da.toLower=function(Xc){return js(Xc).toLowerCase()},Da.toNumber=Hs,Da.toSafeInteger=function(Xc){return ai(Vs(Xc),-mt,mt)},Da.toString=js,Da.toUpper=function(Xc){return js(Xc).toUpperCase()},Da.trim=function(Xc,qc,Yc){if(Xc=js(Xc),Xc&&(Yc||qc===ke))return Xc.replace(sr,"");if(!Xc||!(qc=cn(qc)))return Xc;var Zc=Be(Xc),Jc=Be(qc),Qc=Ee(Zc,Jc),Kc=Te(Zc,Jc)+1;return Tn(Zc,Qc,Kc).join("")},Da.trimEnd=function(Xc,qc,Yc){if(Xc=js(Xc),Xc&&(Yc||qc===ke))return Xc.replace(dr,"");if(!Xc||!(qc=cn(qc)))return Xc;var Zc=Be(Xc),Jc=Te(Zc,Be(qc))+1;return Tn(Zc,0,Jc).join("")},Da.trimStart=function(Xc,qc,Yc){if(Xc=js(Xc),Xc&&(Yc||qc===ke))return Xc.replace(lr,"");if(!Xc||!(qc=cn(qc)))return Xc;var Zc=Be(Xc),Jc=Ee(Zc,Be(qc));return Tn(Zc,Jc).join("")},Da.truncate=function(Xc,qc){var Yc=30,Zc="...";if(Us(qc)){var Jc="separator"in qc?qc.separator:Jc;Yc="length"in qc?Vs(qc.length):Yc,Zc="omission"in qc?cn(qc.omission):Zc}Xc=js(Xc);var Qc=Xc.length;if(Ae(Xc)){var Kc=Be(Xc);Qc=Kc.length}if(Yc>=Qc)return Xc;var $c=Yc-ze(Zc);if(1>$c)return Zc;var eu=Kc?Tn(Kc,0,$c).join(""):Xc.slice(0,$c);if(Jc===ke)return eu+Zc;if(Kc&&($c+=eu.length-$c),Zp(Jc)){if(Xc.slice($c).search(Jc)){var ru=eu,tu;for(Jc.global||(Jc=Al(Jc.source,js(hr.exec(Jc))+"g")),Jc.lastIndex=0;tu=Jc.exec(ru);)var au=tu.index;eu=eu.slice(0,au===ke?$c:au)}}else if(Xc.indexOf(cn(Jc),$c)!=$c){var iu=eu.lastIndexOf(Jc);-1<iu&&(eu=eu.slice(0,iu))}return eu+Zc},Da.unescape=function(Xc){return Xc=js(Xc),Xc&&Jt.test(Xc)?Xc.replace(Yt,Pa):Xc},Da.uniqueId=function(Xc){var qc=++Fl;return js(Xc)+qc},Da.upperCase=Mc,Da.upperFirst=wc,Da.each=gs,Da.eachRight=hs,Da.first=ns,dl(Da,function(){var jc={};return hi(Da,function(Xc,qc){Nl.call(Da.prototype,qc)||(jc[qc]=Xc)}),jc}(),{chain:!1}),Da.VERSION="4.17.2",D(["bind","bindKey","curry","curryRight","partial","partialRight"],function(jc){Da[jc].placeholder=Da}),D(["drop","take"],function(jc,Xc){za.prototype[jc]=function(qc){var Yc=this.__filtered__;if(Yc&&!Xc)return new za(this);qc=qc===ke?1:gd(Vs(qc),0);var Zc=this.clone();return Yc?Zc.__takeCount__=hd(qc,Zc.__takeCount__):Zc.__views__.push({size:hd(qc,ht),type:jc+(0>Zc.__dir__?"Right":"")}),Zc},za.prototype[jc+"Right"]=function(qc){return this.reverse()[jc](qc).reverse()}}),D(["filter","map","takeWhile"],function(jc,Xc){var qc=Xc+1;za.prototype[jc]=function(Yc){var Zc=this.clone();return Zc.__iteratees__.push({iteratee:vo(Yc,3),type:qc}),Zc.__filtered__=Zc.__filtered__||qc==ct||3==qc,Zc}}),D(["head","last"],function(jc,Xc){var qc="take"+(Xc?"Right":"");za.prototype[jc]=function(){return this[qc](1).value()[0]}}),D(["initial","tail"],function(jc,Xc){var qc="drop"+(Xc?"":"Right");za.prototype[jc]=function(){return this.__filtered__?new za(this):this[qc](1)}}),za.prototype.compact=function(){return this.filter(al)},za.prototype.find=function(jc){return this.filter(jc).head()},za.prototype.findLast=function(jc){return this.reverse().find(jc)},za.prototype.invokeMap=$i(function(jc,Xc){return"function"==typeof jc?new za(this):this.map(function(qc){return Li(qc,jc,Xc)})}),za.prototype.reject=function(jc){return this.filter(Ms(vo(jc)))},za.prototype.slice=function(jc,Xc){jc=Vs(jc);var qc=this;return qc.__filtered__&&(0<jc||0>Xc)?new za(qc):(0>jc?qc=qc.takeRight(-jc):jc&&(qc=qc.drop(jc)),Xc!==ke&&(Xc=Vs(Xc),qc=0>Xc?qc.dropRight(-Xc):qc.take(Xc-jc)),qc)},za.prototype.takeRightWhile=function(jc){return this.reverse().takeWhile(jc).reverse()},za.prototype.toArray=function(){return this.take(ht)},hi(za.prototype,function(jc,Xc){var qc=/^(?:filter|find|map|reject)|While$/.test(Xc),Yc=/^(?:head|last)$/.test(Xc),Zc=Da[Yc?"take"+("last"==Xc?"Right":""):Xc],Jc=Yc||/^find/.test(Xc);Zc&&(Da.prototype[Xc]=function(){var Qc=this.__wrapped__,Kc=Yc?[1]:arguments,$c=Qc instanceof za,eu=Kc[0],tu=$c||Hp(Qc),ru=function(du){var pu=Zc.apply(Da,X([du],Kc));return Yc&&au?pu[0]:pu};tu&&qc&&"function"==typeof eu&&1!=eu.length&&($c=tu=!1);var au=this.__chain__,iu=!!this.__actions__.length,nu=Jc&&!au,ou=$c&&!iu;if(!Jc&&tu){Qc=ou?Qc:new za(this);var lu=jc.apply(Qc,Kc);return lu.__actions__.push({func:ms,args:[ru],thisArg:ke}),new Fa(lu,au)}return nu&&ou?jc.apply(this,Kc):(lu=this.thru(ru),nu?Yc?lu.value()[0]:lu.value():lu)})}),D(["pop","push","shift","sort","splice","unshift"],function(jc){var Xc=Pl[jc],qc=/^(?:push|sort|unshift)$/.test(jc)?"tap":"thru",Yc=/^(?:pop|shift)$/.test(jc);Da.prototype[jc]=function(){var Zc=arguments;if(Yc&&!this.__chain__){var Jc=this.value();return Xc.apply(Hp(Jc)?Jc:[],Zc)}return this[qc](function(Qc){return Xc.apply(Hp(Qc)?Qc:[],Zc)})}}),hi(za.prototype,function(jc,Xc){var qc=Da[Xc];if(qc){var Yc=qc.name+"",Zc=Rd[Yc]||(Rd[Yc]=[]);Zc.push({name:Xc,func:qc})}}),Rd[Qn(ke,$e).name]=[{name:"wrapper",func:ke}],za.prototype.clone=function(){var Xc=new za(this.__wrapped__);return Xc.__actions__=Fn(this.__actions__),Xc.__dir__=this.__dir__,Xc.__filtered__=this.__filtered__,Xc.__iteratees__=Fn(this.__iteratees__),Xc.__takeCount__=this.__takeCount__,Xc.__views__=Fn(this.__views__),Xc},za.prototype.reverse=function(){if(this.__filtered__){var Xc=new za(this);Xc.__dir__=-1,Xc.__filtered__=!0}else Xc=this.clone(),Xc.__dir__*=-1;return Xc},za.prototype.value=function(){var Xc=this.__wrapped__.value(),qc=this.__dir__,Yc=Hp(Xc),Zc=Yc?Xc.length:0,Jc=Mo(0,Zc,this.__views__),Qc=Jc.start,Kc=Jc.end,$c=Kc-Qc,eu=0>qc?Kc:Qc-1,tu=this.__iteratees__,ru=tu.length,au=0,iu=hd($c,this.__takeCount__);if(!Yc||Zc<He||Zc==$c&&iu==$c)return yn(Xc,this.__actions__);var nu=[];outer:for(;$c--&&au<iu;){eu+=qc;for(var ou=-1,lu=Xc[eu];++ou<ru;){var du=tu[ou],pu=du.iteratee,uu=du.type,mu=pu(lu);if(2==uu)lu=mu;else if(!mu)if(uu==ct)continue outer;else break outer}nu[au++]=lu}return nu},Da.prototype.at=Ep,Da.prototype.chain=function(){return us(this)},Da.prototype.commit=function(){return new Fa(this.value(),this.__chain__)},Da.prototype.next=function(){this.__values__===ke&&(this.__values__=Os(this.value()));var Xc=this.__index__>=this.__values__.length,qc=Xc?ke:this.__values__[this.__index__++];return{done:Xc,value:qc}},Da.prototype.plant=function(Xc){for(var Yc=this,qc;Yc instanceof Na;){var Zc=ts(Yc);Zc.__index__=0,Zc.__values__=ke,qc?Jc.__wrapped__=Zc:qc=Zc;var Jc=Zc;Yc=Yc.__wrapped__}return Jc.__wrapped__=Xc,qc},Da.prototype.reverse=function(){var Xc=this.__wrapped__;if(Xc instanceof za){var qc=Xc;return this.__actions__.length&&(qc=new za(this)),qc=qc.reverse(),qc.__actions__.push({func:ms,args:[ls],thisArg:ke}),new Fa(qc,this.__chain__)}return this.thru(ls)},Da.prototype.toJSON=Da.prototype.valueOf=Da.prototype.value=function(){return yn(this.__wrapped__,this.__actions__)},Da.prototype.first=Da.prototype.head,$l&&(Da.prototype[$l]=fs),Da}();ga._=Ca,R=function(){return Ca}.call(S,M,S,L),!(R!==ke&&(L.exports=R))}).call(this)}).call(S,M(4),M(5)(E))},function(E,S,M){(function(A,L){L(S)})(this,function(A){"use strict";function L(){}function R(Es,Ts){this.x=Es||0,this.y=Ts||0}function P(Es,Ts,Ss,Ms,ws,As,Ls,Rs,Ps,Cs){Object.defineProperty(this,"id",{value:C()}),this.uuid=A.Math.generateUUID(),this.name="",this.sourceFile="",this.image=Es===void 0?P.DEFAULT_IMAGE:Es,this.mipmaps=[],this.mapping=Ts===void 0?P.DEFAULT_MAPPING:Ts,this.wrapS=Ss===void 0?Yn:Ss,this.wrapT=Ms===void 0?Yn:Ms,this.magFilter=ws===void 0?$n:ws,this.minFilter=As===void 0?ro:As,this.anisotropy=Ps===void 0?1:Ps,this.format=Ls===void 0?_o:Ls,this.type=Rs===void 0?ao:Rs,this.offset=new R(0,0),this.repeat=new R(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=Cs===void 0?jo:Cs,this.version=0,this.onUpdate=null}function C(){return es++}function I(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function U(Es,Ts,Ss,Ms){this._x=Es||0,this._y=Ts||0,this._z=Ss||0,this._w=Ms===void 0?1:Ms}function D(Es,Ts,Ss){this.x=Es||0,this.y=Ts||0,this.z=Ss||0}function F(Es,Ts){function Ss(){var Bs=new Float32Array([-0.5,-0.5,0,0,0.5,-0.5,1,0,0.5,0.5,1,1,-0.5,0.5,0,1]),Os=new Uint16Array([0,1,2,0,2,3]);Rs=As.createBuffer(),Ps=As.createBuffer(),As.bindBuffer(As.ARRAY_BUFFER,Rs),As.bufferData(As.ARRAY_BUFFER,Bs,As.STATIC_DRAW),As.bindBuffer(As.ELEMENT_ARRAY_BUFFER,Ps),As.bufferData(As.ELEMENT_ARRAY_BUFFER,Os,As.STATIC_DRAW),Cs=Ms(),Is={position:As.getAttribLocation(Cs,"position"),uv:As.getAttribLocation(Cs,"uv")},Us={uvOffset:As.getUniformLocation(Cs,"uvOffset"),uvScale:As.getUniformLocation(Cs,"uvScale"),rotation:As.getUniformLocation(Cs,"rotation"),scale:As.getUniformLocation(Cs,"scale"),color:As.getUniformLocation(Cs,"color"),map:As.getUniformLocation(Cs,"map"),opacity:As.getUniformLocation(Cs,"opacity"),modelViewMatrix:As.getUniformLocation(Cs,"modelViewMatrix"),projectionMatrix:As.getUniformLocation(Cs,"projectionMatrix"),fogType:As.getUniformLocation(Cs,"fogType"),fogDensity:As.getUniformLocation(Cs,"fogDensity"),fogNear:As.getUniformLocation(Cs,"fogNear"),fogFar:As.getUniformLocation(Cs,"fogFar"),fogColor:As.getUniformLocation(Cs,"fogColor"),alphaTest:As.getUniformLocation(Cs,"alphaTest")};var Gs=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");Gs.width=8,Gs.height=8;var Vs=Gs.getContext("2d");Vs.fillStyle="white",Vs.fillRect(0,0,8,8),Ds=new P(Gs),Ds.needsUpdate=!0}function Ms(){var Bs=As.createProgram(),Os=As.createShader(As.VERTEX_SHADER),Gs=As.createShader(As.FRAGMENT_SHADER);return As.shaderSource(Os,["precision "+Es.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),As.shaderSource(Gs,["precision "+Es.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),As.compileShader(Os),As.compileShader(Gs),As.attachShader(Bs,Os),As.attachShader(Bs,Gs),As.linkProgram(Bs),Bs}function ws(Bs,Os){if(Bs.renderOrder!==Os.renderOrder)return Bs.renderOrder-Os.renderOrder;return Bs.z===Os.z?Os.id-Bs.id:Os.z-Bs.z}var As=Es.context,Ls=Es.state,Rs,Ps,Cs,Is,Us,Ds,Ns=new D,Fs=new U,zs=new D;this.render=function(Bs,Os){if(0!==Ts.length){Cs===void 0&&Ss(),As.useProgram(Cs),Ls.initAttributes(),Ls.enableAttribute(Is.position),Ls.enableAttribute(Is.uv),Ls.disableUnusedAttributes(),Ls.disable(As.CULL_FACE),Ls.enable(As.BLEND),As.bindBuffer(As.ARRAY_BUFFER,Rs),As.vertexAttribPointer(Is.position,2,As.FLOAT,!1,16,0),As.vertexAttribPointer(Is.uv,2,As.FLOAT,!1,16,8),As.bindBuffer(As.ELEMENT_ARRAY_BUFFER,Ps),As.uniformMatrix4fv(Us.projectionMatrix,!1,Os.projectionMatrix.elements),Ls.activeTexture(As.TEXTURE0),As.uniform1i(Us.map,0);var Gs=0,Vs=0,ks=Bs.fog;ks?(As.uniform3f(Us.fogColor,ks.color.r,ks.color.g,ks.color.b),ks&&ks.isFog?(As.uniform1f(Us.fogNear,ks.near),As.uniform1f(Us.fogFar,ks.far),As.uniform1i(Us.fogType,1),Gs=1,Vs=1):ks&&ks.isFogExp2&&(As.uniform1f(Us.fogDensity,ks.density),As.uniform1i(Us.fogType,2),Gs=2,Vs=2)):(As.uniform1i(Us.fogType,0),Gs=0,Vs=0);for(var Hs=0,Ws=Ts.length;Hs<Ws;Hs++){var js=Ts[Hs];js.modelViewMatrix.multiplyMatrices(Os.matrixWorldInverse,js.matrixWorld),js.z=-js.modelViewMatrix.elements[14]}Ts.sort(ws);for(var Xs=[],Hs=0,Ws=Ts.length;Hs<Ws;Hs++){var js=Ts[Hs],qs=js.material;if(!1!==qs.visible){As.uniform1f(Us.alphaTest,qs.alphaTest),As.uniformMatrix4fv(Us.modelViewMatrix,!1,js.modelViewMatrix.elements),js.matrixWorld.decompose(Ns,Fs,zs),Xs[0]=zs.x,Xs[1]=zs.y;var Ys=0;Bs.fog&&qs.fog&&(Ys=Vs),Gs!=Ys&&(As.uniform1i(Us.fogType,Ys),Gs=Ys),null===qs.map?(As.uniform2f(Us.uvOffset,0,0),As.uniform2f(Us.uvScale,1,1)):(As.uniform2f(Us.uvOffset,qs.map.offset.x,qs.map.offset.y),As.uniform2f(Us.uvScale,qs.map.repeat.x,qs.map.repeat.y)),As.uniform1f(Us.opacity,qs.opacity),As.uniform3f(Us.color,qs.color.r,qs.color.g,qs.color.b),As.uniform1f(Us.rotation,qs.rotation),As.uniform2fv(Us.scale,Xs),Ls.setBlending(qs.blending,qs.blendEquation,qs.blendSrc,qs.blendDst),Ls.setDepthTest(qs.depthTest),Ls.setDepthWrite(qs.depthWrite),qs.map?Es.setTexture2D(qs.map,0):Es.setTexture2D(Ds,0),As.drawElements(As.TRIANGLES,6,As.UNSIGNED_SHORT,0)}}Ls.enable(As.CULL_FACE),Es.resetGLState()}}}function O(Es,Ts){this.min=Es===void 0?new R(+(1/0),+(1/0)):Es,this.max=Ts===void 0?new R(-(1/0),-(1/0)):Ts}function G(Es,Ts){function Ss(){var Fs=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),zs=new Uint16Array([0,1,2,0,2,3]);Ls=ws.createBuffer(),Rs=ws.createBuffer(),ws.bindBuffer(ws.ARRAY_BUFFER,Ls),ws.bufferData(ws.ARRAY_BUFFER,Fs,ws.STATIC_DRAW),ws.bindBuffer(ws.ELEMENT_ARRAY_BUFFER,Rs),ws.bufferData(ws.ELEMENT_ARRAY_BUFFER,zs,ws.STATIC_DRAW),Ds=ws.createTexture(),Ns=ws.createTexture(),As.bindTexture(ws.TEXTURE_2D,Ds),ws.texImage2D(ws.TEXTURE_2D,0,ws.RGB,16,16,0,ws.RGB,ws.UNSIGNED_BYTE,null),ws.texParameteri(ws.TEXTURE_2D,ws.TEXTURE_WRAP_S,ws.CLAMP_TO_EDGE),ws.texParameteri(ws.TEXTURE_2D,ws.TEXTURE_WRAP_T,ws.CLAMP_TO_EDGE),ws.texParameteri(ws.TEXTURE_2D,ws.TEXTURE_MAG_FILTER,ws.NEAREST),ws.texParameteri(ws.TEXTURE_2D,ws.TEXTURE_MIN_FILTER,ws.NEAREST),As.bindTexture(ws.TEXTURE_2D,Ns),ws.texImage2D(ws.TEXTURE_2D,0,ws.RGBA,16,16,0,ws.RGBA,ws.UNSIGNED_BYTE,null),ws.texParameteri(ws.TEXTURE_2D,ws.TEXTURE_WRAP_S,ws.CLAMP_TO_EDGE),ws.texParameteri(ws.TEXTURE_2D,ws.TEXTURE_WRAP_T,ws.CLAMP_TO_EDGE),ws.texParameteri(ws.TEXTURE_2D,ws.TEXTURE_MAG_FILTER,ws.NEAREST),ws.texParameteri(ws.TEXTURE_2D,ws.TEXTURE_MIN_FILTER,ws.NEAREST),Ps={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},Cs=Ms(Ps),Is={vertex:ws.getAttribLocation(Cs,"position"),uv:ws.getAttribLocation(Cs,"uv")},Us={renderType:ws.getUniformLocation(Cs,"renderType"),map:ws.getUniformLocation(Cs,"map"),occlusionMap:ws.getUniformLocation(Cs,"occlusionMap"),opacity:ws.getUniformLocation(Cs,"opacity"),color:ws.getUniformLocation(Cs,"color"),scale:ws.getUniformLocation(Cs,"scale"),rotation:ws.getUniformLocation(Cs,"rotation"),screenPosition:ws.getUniformLocation(Cs,"screenPosition")}}function Ms(Fs){var zs=ws.createProgram(),Bs=ws.createShader(ws.FRAGMENT_SHADER),Os=ws.createShader(ws.VERTEX_SHADER),Gs="precision "+Es.getPrecision()+" float;\n";return ws.shaderSource(Bs,Gs+Fs.fragmentShader),ws.shaderSource(Os,Gs+Fs.vertexShader),ws.compileShader(Bs),ws.compileShader(Os),ws.attachShader(zs,Bs),ws.attachShader(zs,Os),ws.linkProgram(zs),zs}var ws=Es.context,As=Es.state,Ls,Rs,Ps,Cs,Is,Us,Ds,Ns;this.render=function(Fs,zs,Bs){if(0!==Ts.length){var Os=new D,Gs=Bs.w/Bs.z,Vs=0.5*Bs.z,ks=0.5*Bs.w,Hs=16/Bs.w,Ws=new R(Hs*Gs,Hs),js=new D(1,1,0),Xs=new R(1,1),qs=new O;qs.min.set(0,0),qs.max.set(Bs.z-16,Bs.w-16),Cs===void 0&&Ss(),ws.useProgram(Cs),As.initAttributes(),As.enableAttribute(Is.vertex),As.enableAttribute(Is.uv),As.disableUnusedAttributes(),ws.uniform1i(Us.occlusionMap,0),ws.uniform1i(Us.map,1),ws.bindBuffer(ws.ARRAY_BUFFER,Ls),ws.vertexAttribPointer(Is.vertex,2,ws.FLOAT,!1,16,0),ws.vertexAttribPointer(Is.uv,2,ws.FLOAT,!1,16,8),ws.bindBuffer(ws.ELEMENT_ARRAY_BUFFER,Rs),As.disable(ws.CULL_FACE),As.setDepthWrite(!1);for(var Ys=0,Zs=Ts.length;Ys<Zs;Ys++){Hs=16/Bs.w,Ws.set(Hs*Gs,Hs);var Js=Ts[Ys];if(Os.set(Js.matrixWorld.elements[12],Js.matrixWorld.elements[13],Js.matrixWorld.elements[14]),Os.applyMatrix4(zs.matrixWorldInverse),Os.applyProjection(zs.projectionMatrix),js.copy(Os),Xs.x=Bs.x+js.x*Vs+Vs-8,Xs.y=Bs.y+js.y*ks+ks-8,!0===qs.containsPoint(Xs)){As.activeTexture(ws.TEXTURE0),As.bindTexture(ws.TEXTURE_2D,null),As.activeTexture(ws.TEXTURE1),As.bindTexture(ws.TEXTURE_2D,Ds),ws.copyTexImage2D(ws.TEXTURE_2D,0,ws.RGB,Xs.x,Xs.y,16,16,0),ws.uniform1i(Us.renderType,0),ws.uniform2f(Us.scale,Ws.x,Ws.y),ws.uniform3f(Us.screenPosition,js.x,js.y,js.z),As.disable(ws.BLEND),As.enable(ws.DEPTH_TEST),ws.drawElements(ws.TRIANGLES,6,ws.UNSIGNED_SHORT,0),As.activeTexture(ws.TEXTURE0),As.bindTexture(ws.TEXTURE_2D,Ns),ws.copyTexImage2D(ws.TEXTURE_2D,0,ws.RGBA,Xs.x,Xs.y,16,16,0),ws.uniform1i(Us.renderType,1),As.disable(ws.DEPTH_TEST),As.activeTexture(ws.TEXTURE1),As.bindTexture(ws.TEXTURE_2D,Ds),ws.drawElements(ws.TRIANGLES,6,ws.UNSIGNED_SHORT,0),Js.positionScreen.copy(js),Js.customUpdateCallback?Js.customUpdateCallback(Js):Js.updateLensFlares(),ws.uniform1i(Us.renderType,2),As.enable(ws.BLEND);for(var Qs=0,Ks=Js.lensFlares.length;Qs<Ks;Qs++){var $s=Js.lensFlares[Qs];0.001<$s.opacity&&0.001<$s.scale&&(js.x=$s.x,js.y=$s.y,js.z=$s.z,Hs=$s.size*$s.scale/Bs.w,Ws.x=Hs*Gs,Ws.y=Hs,ws.uniform3f(Us.screenPosition,js.x,js.y,js.z),ws.uniform2f(Us.scale,Ws.x,Ws.y),ws.uniform1f(Us.rotation,$s.rotation),ws.uniform1f(Us.opacity,$s.opacity),ws.uniform3f(Us.color,$s.color.r,$s.color.g,$s.color.b),As.setBlending($s.blending,$s.blendEquation,$s.blendSrc,$s.blendDst),Es.setTexture2D($s.texture,1),ws.drawElements(ws.TRIANGLES,6,ws.UNSIGNED_SHORT,0))}}}As.enable(ws.CULL_FACE),As.enable(ws.DEPTH_TEST),As.setDepthWrite(!0),Es.resetGLState()}}}function V(Es,Ts,Ss,Ms,ws,As,Ls,Rs,Ps,Cs){Es=Es===void 0?[]:Es,Ts=Ts===void 0?Gn:Ts,P.call(this,Es,Ts,Ss,Ms,ws,As,Ls,Rs,Ps,Cs),this.flipY=!1}function H(){this.seq=[],this.map={}}function W(Es,Ts,Ss){var Ms=Es[0];if(0>=Ms||0<Ms)return Es;var ws=Ts*Ss,As=as[ws];if(void 0===As&&(As=new Float32Array(ws),as[ws]=As),0!==Ts){Ms.toArray(As,0);for(var Ls=1,Rs=0;Ls!==Ts;++Ls)Rs+=Ss,Es[Ls].toArray(As,Rs)}return As}function X(Es,Ts){var Ss=is[Ts];Ss===void 0&&(Ss=new Int32Array(Ts),is[Ts]=Ss);for(var Ms=0;Ms!==Ts;++Ms)Ss[Ms]=Es.allocTextureUnit();return Ss}function Y(Es,Ts){Es.uniform1f(this.addr,Ts)}function Z(Es,Ts){Es.uniform1i(this.addr,Ts)}function J(Es,Ts){Ts.x===void 0?Es.uniform2fv(this.addr,Ts):Es.uniform2f(this.addr,Ts.x,Ts.y)}function Q(Es,Ts){Ts.x===void 0?Ts.r===void 0?Es.uniform3fv(this.addr,Ts):Es.uniform3f(this.addr,Ts.r,Ts.g,Ts.b):Es.uniform3f(this.addr,Ts.x,Ts.y,Ts.z)}function K(Es,Ts){Ts.x===void 0?Es.uniform4fv(this.addr,Ts):Es.uniform4f(this.addr,Ts.x,Ts.y,Ts.z,Ts.w)}function $(Es,Ts){Es.uniformMatrix2fv(this.addr,!1,Ts.elements||Ts)}function ee(Es,Ts){Es.uniformMatrix3fv(this.addr,!1,Ts.elements||Ts)}function ie(Es,Ts){Es.uniformMatrix4fv(this.addr,!1,Ts.elements||Ts)}function ne(Es,Ts,Ss){var Ms=Ss.allocTextureUnit();Es.uniform1i(this.addr,Ms),Ss.setTexture2D(Ts||ts,Ms)}function oe(Es,Ts,Ss){var Ms=Ss.allocTextureUnit();Es.uniform1i(this.addr,Ms),Ss.setTextureCube(Ts||rs,Ms)}function se(Es,Ts){Es.uniform2iv(this.addr,Ts)}function le(Es,Ts){Es.uniform3iv(this.addr,Ts)}function pe(Es,Ts){Es.uniform4iv(this.addr,Ts)}function ue(Es){return 5126===Es?Y:35664===Es?J:35665===Es?Q:35666===Es?K:35674===Es?$:35675===Es?ee:35676===Es?ie:35678===Es?ne:35680===Es?oe:5124===Es||35670===Es?Z:35667===Es||35671===Es?se:35668===Es||35672===Es?le:35669===Es||35673===Es?pe:void 0}function fe(Es,Ts){Es.uniform1fv(this.addr,Ts)}function ge(Es,Ts){Es.uniform1iv(this.addr,Ts)}function he(Es,Ts){Es.uniform2fv(this.addr,W(Ts,this.size,2))}function ye(Es,Ts){Es.uniform3fv(this.addr,W(Ts,this.size,3))}function xe(Es,Ts){Es.uniform4fv(this.addr,W(Ts,this.size,4))}function _e(Es,Ts){Es.uniformMatrix2fv(this.addr,!1,W(Ts,this.size,4))}function ve(Es,Ts){Es.uniformMatrix3fv(this.addr,!1,W(Ts,this.size,9))}function Ee(Es,Ts){Es.uniformMatrix4fv(this.addr,!1,W(Ts,this.size,16))}function Te(Es,Ts,Ss){var Ms=Ts.length,ws=X(Ss,Ms);Es.uniform1iv(this.addr,ws);for(var As=0;As!==Ms;++As)Ss.setTexture2D(Ts[As]||ts,ws[As])}function Se(Es,Ts,Ss){var Ms=Ts.length,ws=X(Ss,Ms);Es.uniform1iv(this.addr,ws);for(var As=0;As!==Ms;++As)Ss.setTextureCube(Ts[As]||rs,ws[As])}function Me(Es){return 5126===Es?fe:35664===Es?he:35665===Es?ye:35666===Es?xe:35674===Es?_e:35675===Es?ve:35676===Es?Ee:35678===Es?Te:35680===Es?Se:5124===Es||35670===Es?ge:35667===Es||35671===Es?se:35668===Es||35672===Es?le:35669===Es||35673===Es?pe:void 0}function we(Es,Ts,Ss){this.id=Es,this.addr=Ss,this.setValue=ue(Ts.type)}function Ae(Es,Ts,Ss){this.id=Es,this.addr=Ss,this.size=Ts.size,this.setValue=Me(Ts.type)}function Le(Es){this.id=Es,H.call(this)}function Re(Es,Ts){Es.seq.push(Ts),Es.map[Ts.id]=Ts}function Pe(Es,Ts,Ss){var Ms=Es.name,ws=Ms.length;for(ns.lastIndex=0;;){var As=ns.exec(Ms),Ls=ns.lastIndex,Rs=As[1],Ps="]"===As[2],Cs=As[3];if(Ps&&(Rs=0|Rs),void 0===Cs||"["===Cs&&Ls+2===ws){Re(Ss,void 0===Cs?new we(Rs,Es,Ts):new Ae(Rs,Es,Ts));break}else{var Is=Ss.map,Us=Is[Rs];void 0===Us&&(Us=new Le(Rs),Re(Ss,Us)),Ss=Us}}}function Ce(Es,Ts,Ss){H.call(this),this.renderer=Ss;for(var Ms=Es.getProgramParameter(Ts,Es.ACTIVE_UNIFORMS),ws=0;ws!==Ms;++ws){var As=Es.getActiveUniform(Ts,ws),Ls=As.name,Rs=Es.getUniformLocation(Ts,Ls);Pe(As,Rs,this)}}function Ie(Es,Ts,Ss,Ms,ws,As,Ls){function Rs(qs,Ys){if(qs.width>Ys||qs.height>Ys){var Zs=Ys/Math.max(qs.width,qs.height),Js=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");Js.width=Math.floor(qs.width*Zs),Js.height=Math.floor(qs.height*Zs);var Qs=Js.getContext("2d");return Qs.drawImage(qs,0,0,qs.width,qs.height,0,0,Js.width,Js.height),console.warn("THREE.WebGLRenderer: image is too big ("+qs.width+"x"+qs.height+"). Resized to "+Js.width+"x"+Js.height,qs),Js}return qs}function Ps(qs){return A.Math.isPowerOfTwo(qs.width)&&A.Math.isPowerOfTwo(qs.height)}function Cs(qs){if(qs instanceof HTMLImageElement||qs instanceof HTMLCanvasElement){var Ys=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");Ys.width=A.Math.nearestPowerOfTwo(qs.width),Ys.height=A.Math.nearestPowerOfTwo(qs.height);var Zs=Ys.getContext("2d");return Zs.drawImage(qs,0,0,Ys.width,Ys.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+qs.width+"x"+qs.height+"). Resized to "+Ys.width+"x"+Ys.height,qs),Ys}return qs}function Is(qs){return qs.wrapS!==Yn||qs.wrapT!==Yn||qs.minFilter!==Jn&&qs.minFilter!==$n}function Us(qs){return qs===Jn||qs===Qn||qs===Kn?Es.NEAREST:Es.LINEAR}function Ds(qs){var Ys=qs.target;Ys.removeEventListener("dispose",Ds),Fs(Ys),js.textures--}function Ns(qs){var Ys=qs.target;Ys.removeEventListener("dispose",Ns),zs(Ys),js.textures--}function Fs(qs){var Ys=Ms.get(qs);if(qs.image&&Ys.__image__webglTextureCube)Es.deleteTexture(Ys.__image__webglTextureCube);else{if(Ys.__webglInit===void 0)return;Es.deleteTexture(Ys.__webglTexture)}Ms.delete(qs)}function zs(qs){var Ys=Ms.get(qs),Zs=Ms.get(qs.texture);if(qs){if(void 0!==Zs.__webglTexture&&Es.deleteTexture(Zs.__webglTexture),qs.depthTexture&&qs.depthTexture.dispose(),qs&&qs.isWebGLRenderTargetCube)for(var Js=0;6>Js;Js++)Es.deleteFramebuffer(Ys.__webglFramebuffer[Js]),Ys.__webglDepthbuffer&&Es.deleteRenderbuffer(Ys.__webglDepthbuffer[Js]);else Es.deleteFramebuffer(Ys.__webglFramebuffer),Ys.__webglDepthbuffer&&Es.deleteRenderbuffer(Ys.__webglDepthbuffer);Ms.delete(qs.texture),Ms.delete(qs)}}function Bs(qs,Ys){var Zs=Ms.get(qs);if(0<qs.version&&Zs.__version!==qs.version){var Js=qs.image;if(Js===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",qs);else if(!1===Js.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",qs);else return void Gs(Zs,qs,Ys)}Ss.activeTexture(Es.TEXTURE0+Ys),Ss.bindTexture(Es.TEXTURE_2D,Zs.__webglTexture)}function Os(qs,Ys,Zs){var Js;if(Zs?(Es.texParameteri(qs,Es.TEXTURE_WRAP_S,As(Ys.wrapS)),Es.texParameteri(qs,Es.TEXTURE_WRAP_T,As(Ys.wrapT)),Es.texParameteri(qs,Es.TEXTURE_MAG_FILTER,As(Ys.magFilter)),Es.texParameteri(qs,Es.TEXTURE_MIN_FILTER,As(Ys.minFilter))):(Es.texParameteri(qs,Es.TEXTURE_WRAP_S,Es.CLAMP_TO_EDGE),Es.texParameteri(qs,Es.TEXTURE_WRAP_T,Es.CLAMP_TO_EDGE),(Ys.wrapS!==Yn||Ys.wrapT!==Yn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",Ys),Es.texParameteri(qs,Es.TEXTURE_MAG_FILTER,Us(Ys.magFilter)),Es.texParameteri(qs,Es.TEXTURE_MIN_FILTER,Us(Ys.minFilter)),Ys.minFilter!==Jn&&Ys.minFilter!==$n&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",Ys)),Js=Ts.get("EXT_texture_filter_anisotropic"),Js){if(Ys.type===po&&null===Ts.get("OES_texture_float_linear"))return;if(Ys.type===co&&null===Ts.get("OES_texture_half_float_linear"))return;(1<Ys.anisotropy||Ms.get(Ys).__currentAnisotropy)&&(Es.texParameterf(qs,Js.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Ys.anisotropy,ws.getMaxAnisotropy())),Ms.get(Ys).__currentAnisotropy=Ys.anisotropy)}}function Gs(qs,Ys,Zs){qs.__webglInit===void 0&&(qs.__webglInit=!0,Ys.addEventListener("dispose",Ds),qs.__webglTexture=Es.createTexture(),js.textures++),Ss.activeTexture(Es.TEXTURE0+Zs),Ss.bindTexture(Es.TEXTURE_2D,qs.__webglTexture),Es.pixelStorei(Es.UNPACK_FLIP_Y_WEBGL,Ys.flipY),Es.pixelStorei(Es.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ys.premultiplyAlpha),Es.pixelStorei(Es.UNPACK_ALIGNMENT,Ys.unpackAlignment);var Js=Rs(Ys.image,ws.maxTextureSize);Is(Ys)&&!1===Ps(Js)&&(Js=Cs(Js));var Qs=Ps(Js),Ks=As(Ys.format),$s=As(Ys.type);Os(Es.TEXTURE_2D,Ys,Qs);var rl=Ys.mipmaps,el;if(Ys&&Ys.isDepthTexture){var al=Es.DEPTH_COMPONENT;if(Ys.type===po){if(!Xs)throw new Error("Float Depth Texture only supported in WebGL2.0");al=Es.DEPTH_COMPONENT32F}else Xs&&(al=Es.DEPTH_COMPONENT16);Ys.format===To&&(al=Es.DEPTH_STENCIL),Ss.texImage2D(Es.TEXTURE_2D,0,al,Js.width,Js.height,0,Ks,$s,null)}else if(Ys&&Ys.isDataTexture){if(0<rl.length&&Qs){for(var nl=0,dl=rl.length;nl<dl;nl++)el=rl[nl],Ss.texImage2D(Es.TEXTURE_2D,nl,Ks,el.width,el.height,0,Ks,$s,el.data);Ys.generateMipmaps=!1}else Ss.texImage2D(Es.TEXTURE_2D,0,Ks,Js.width,Js.height,0,Ks,$s,Js.data);}else if(Ys&&Ys.isCompressedTexture)for(var nl=0,dl=rl.length;nl<dl;nl++)el=rl[nl],Ys.format!==_o&&Ys.format!==xo?-1<Ss.getCompressedTextureFormats().indexOf(Ks)?Ss.compressedTexImage2D(Es.TEXTURE_2D,nl,Ks,el.width,el.height,0,el.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ss.texImage2D(Es.TEXTURE_2D,nl,Ks,el.width,el.height,0,Ks,$s,el.data);else if(0<rl.length&&Qs){for(var nl=0,dl=rl.length;nl<dl;nl++)el=rl[nl],Ss.texImage2D(Es.TEXTURE_2D,nl,Ks,Ks,$s,el);Ys.generateMipmaps=!1}else Ss.texImage2D(Es.TEXTURE_2D,0,Ks,Ks,$s,Js);Ys.generateMipmaps&&Qs&&Es.generateMipmap(Es.TEXTURE_2D),qs.__version=Ys.version,Ys.onUpdate&&Ys.onUpdate(Ys)}function Vs(qs,Ys,Zs,Js){var Qs=As(Ys.texture.format),Ks=As(Ys.texture.type);Ss.texImage2D(Js,0,Qs,Ys.width,Ys.height,0,Qs,Ks,null),Es.bindFramebuffer(Es.FRAMEBUFFER,qs),Es.framebufferTexture2D(Es.FRAMEBUFFER,Zs,Js,Ms.get(Ys.texture).__webglTexture,0),Es.bindFramebuffer(Es.FRAMEBUFFER,null)}function ks(qs,Ys){Es.bindRenderbuffer(Es.RENDERBUFFER,qs),Ys.depthBuffer&&!Ys.stencilBuffer?(Es.renderbufferStorage(Es.RENDERBUFFER,Es.DEPTH_COMPONENT16,Ys.width,Ys.height),Es.framebufferRenderbuffer(Es.FRAMEBUFFER,Es.DEPTH_ATTACHMENT,Es.RENDERBUFFER,qs)):Ys.depthBuffer&&Ys.stencilBuffer?(Es.renderbufferStorage(Es.RENDERBUFFER,Es.DEPTH_STENCIL,Ys.width,Ys.height),Es.framebufferRenderbuffer(Es.FRAMEBUFFER,Es.DEPTH_STENCIL_ATTACHMENT,Es.RENDERBUFFER,qs)):Es.renderbufferStorage(Es.RENDERBUFFER,Es.RGBA4,Ys.width,Ys.height),Es.bindRenderbuffer(Es.RENDERBUFFER,null)}function Hs(qs,Ys){var Zs=Ys&&Ys.isWebGLRenderTargetCube;if(Zs)throw new Error("Depth Texture with cube render targets is not supported!");if(Es.bindFramebuffer(Es.FRAMEBUFFER,qs),!(Ys.depthTexture&&Ys.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");Ms.get(Ys.depthTexture).__webglTexture&&Ys.depthTexture.image.width===Ys.width&&Ys.depthTexture.image.height===Ys.height||(Ys.depthTexture.image.width=Ys.width,Ys.depthTexture.image.height=Ys.height,Ys.depthTexture.needsUpdate=!0),Bs(Ys.depthTexture,0);var Js=Ms.get(Ys.depthTexture).__webglTexture;if(Ys.depthTexture.format===Eo)Es.framebufferTexture2D(Es.FRAMEBUFFER,Es.DEPTH_ATTACHMENT,Es.TEXTURE_2D,Js,0);else if(Ys.depthTexture.format===To)Es.framebufferTexture2D(Es.FRAMEBUFFER,Es.DEPTH_STENCIL_ATTACHMENT,Es.TEXTURE_2D,Js,0);else throw new Error("Unknown depthTexture format")}function Ws(qs){var Ys=Ms.get(qs),Zs=qs&&qs.isWebGLRenderTargetCube;if(qs.depthTexture){if(Zs)throw new Error("target.depthTexture not supported in Cube render targets");Hs(Ys.__webglFramebuffer,qs)}else if(Zs){Ys.__webglDepthbuffer=[];for(var Js=0;6>Js;Js++)Es.bindFramebuffer(Es.FRAMEBUFFER,Ys.__webglFramebuffer[Js]),Ys.__webglDepthbuffer[Js]=Es.createRenderbuffer(),ks(Ys.__webglDepthbuffer[Js],qs)}else Es.bindFramebuffer(Es.FRAMEBUFFER,Ys.__webglFramebuffer),Ys.__webglDepthbuffer=Es.createRenderbuffer(),ks(Ys.__webglDepthbuffer,qs);Es.bindFramebuffer(Es.FRAMEBUFFER,null)}var js=Ls.memory,Xs="undefined"!=typeof WebGL2RenderingContext&&Es instanceof WebGL2RenderingContext;this.setTexture2D=Bs,this.setTextureCube=function(Ys,Zs){var Js=Ms.get(Ys);if(6===Ys.image.length)if(0<Ys.version&&Js.__version!==Ys.version){Js.__image__webglTextureCube||(Ys.addEventListener("dispose",Ds),Js.__image__webglTextureCube=Es.createTexture(),js.textures++),Ss.activeTexture(Es.TEXTURE0+Zs),Ss.bindTexture(Es.TEXTURE_CUBE_MAP,Js.__image__webglTextureCube),Es.pixelStorei(Es.UNPACK_FLIP_Y_WEBGL,Ys.flipY);for(var Qs=Ys&&Ys.isCompressedTexture,Ks=Ys.image[0]&&Ys.image[0].isDataTexture,$s=[],el=0;6>el;el++)$s[el]=Qs||Ks?Ks?Ys.image[el].image:Ys.image[el]:Rs(Ys.image[el],ws.maxCubemapSize);var rl=$s[0],al=Ps(rl),nl=As(Ys.format),dl=As(Ys.type);Os(Es.TEXTURE_CUBE_MAP,Ys,al);for(var el=0;6>el;el++)if(!Qs)Ks?Ss.texImage2D(Es.TEXTURE_CUBE_MAP_POSITIVE_X+el,0,nl,$s[el].width,$s[el].height,0,nl,dl,$s[el].data):Ss.texImage2D(Es.TEXTURE_CUBE_MAP_POSITIVE_X+el,0,nl,nl,dl,$s[el]);else for(var ul=$s[el].mipmaps,yl=0,xl=ul.length,cl;yl<xl;yl++)cl=ul[yl],Ys.format!==_o&&Ys.format!==xo?-1<Ss.getCompressedTextureFormats().indexOf(nl)?Ss.compressedTexImage2D(Es.TEXTURE_CUBE_MAP_POSITIVE_X+el,yl,nl,cl.width,cl.height,0,cl.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ss.texImage2D(Es.TEXTURE_CUBE_MAP_POSITIVE_X+el,yl,nl,cl.width,cl.height,0,nl,dl,cl.data);Ys.generateMipmaps&&al&&Es.generateMipmap(Es.TEXTURE_CUBE_MAP),Js.__version=Ys.version,Ys.onUpdate&&Ys.onUpdate(Ys)}else Ss.activeTexture(Es.TEXTURE0+Zs),Ss.bindTexture(Es.TEXTURE_CUBE_MAP,Js.__image__webglTextureCube)},this.setTextureCubeDynamic=function(Ys,Zs){Ss.activeTexture(Es.TEXTURE0+Zs),Ss.bindTexture(Es.TEXTURE_CUBE_MAP,Ms.get(Ys).__webglTexture)},this.setupRenderTarget=function(Ys){var Zs=Ms.get(Ys),Js=Ms.get(Ys.texture);Ys.addEventListener("dispose",Ns),Js.__webglTexture=Es.createTexture(),js.textures++;var Qs=Ys&&Ys.isWebGLRenderTargetCube,Ks=Ps(Ys);if(Qs){Zs.__webglFramebuffer=[];for(var $s=0;6>$s;$s++)Zs.__webglFramebuffer[$s]=Es.createFramebuffer()}else Zs.__webglFramebuffer=Es.createFramebuffer();if(Qs){Ss.bindTexture(Es.TEXTURE_CUBE_MAP,Js.__webglTexture),Os(Es.TEXTURE_CUBE_MAP,Ys.texture,Ks);for(var $s=0;6>$s;$s++)Vs(Zs.__webglFramebuffer[$s],Ys,Es.COLOR_ATTACHMENT0,Es.TEXTURE_CUBE_MAP_POSITIVE_X+$s);Ys.texture.generateMipmaps&&Ks&&Es.generateMipmap(Es.TEXTURE_CUBE_MAP),Ss.bindTexture(Es.TEXTURE_CUBE_MAP,null)}else Ss.bindTexture(Es.TEXTURE_2D,Js.__webglTexture),Os(Es.TEXTURE_2D,Ys.texture,Ks),Vs(Zs.__webglFramebuffer,Ys,Es.COLOR_ATTACHMENT0,Es.TEXTURE_2D),Ys.texture.generateMipmaps&&Ks&&Es.generateMipmap(Es.TEXTURE_2D),Ss.bindTexture(Es.TEXTURE_2D,null);Ys.depthBuffer&&Ws(Ys)},this.updateRenderTargetMipmap=function(Ys){var Zs=Ys.texture;if(Zs.generateMipmaps&&Ps(Ys)&&Zs.minFilter!==Jn&&Zs.minFilter!==$n){var Js=Ys&&Ys.isWebGLRenderTargetCube?Es.TEXTURE_CUBE_MAP:Es.TEXTURE_2D,Qs=Ms.get(Zs).__webglTexture;Ss.bindTexture(Js,Qs),Es.generateMipmap(Js),Ss.bindTexture(Js,null)}}}function Ue(Es,Ts,Ss,Ms){this.x=Es||0,this.y=Ts||0,this.z=Ss||0,this.w=Ms===void 0?1:Ms}function De(Es,Ts,Ss){function Ms(Tl,Sl,Ml){var wl=new Uint8Array(4),Al=Es.createTexture();Es.bindTexture(Tl,Al),Es.texParameteri(Tl,Es.TEXTURE_MIN_FILTER,Es.NEAREST),Es.texParameteri(Tl,Es.TEXTURE_MAG_FILTER,Es.NEAREST);for(var Ll=0;Ll<Ml;Ll++)Es.texImage2D(Sl+Ll,0,Es.RGBA,1,1,0,Es.RGBA,Es.UNSIGNED_BYTE,wl);return Al}function ws(Tl){!0!==Hs[Tl]&&(Es.enable(Tl),Hs[Tl]=!0)}function As(Tl){!1!==Hs[Tl]&&(Es.disable(Tl),Hs[Tl]=!1)}function Ls(Tl,Sl,Ml,wl,Al,Ll,Rl,Pl){if(Tl!==$i)ws(Es.BLEND);else return As(Es.BLEND),void(js=Tl);(Tl!==js||Pl!==Ks)&&(Tl===tn?Pl?(Es.blendEquationSeparate(Es.FUNC_ADD,Es.FUNC_ADD),Es.blendFuncSeparate(Es.ONE,Es.ONE,Es.ONE,Es.ONE)):(Es.blendEquation(Es.FUNC_ADD),Es.blendFunc(Es.SRC_ALPHA,Es.ONE)):Tl===rn?Pl?(Es.blendEquationSeparate(Es.FUNC_ADD,Es.FUNC_ADD),Es.blendFuncSeparate(Es.ZERO,Es.ZERO,Es.ONE_MINUS_SRC_COLOR,Es.ONE_MINUS_SRC_ALPHA)):(Es.blendEquation(Es.FUNC_ADD),Es.blendFunc(Es.ZERO,Es.ONE_MINUS_SRC_COLOR)):Tl===an?Pl?(Es.blendEquationSeparate(Es.FUNC_ADD,Es.FUNC_ADD),Es.blendFuncSeparate(Es.ZERO,Es.SRC_COLOR,Es.ZERO,Es.SRC_ALPHA)):(Es.blendEquation(Es.FUNC_ADD),Es.blendFunc(Es.ZERO,Es.SRC_COLOR)):Pl?(Es.blendEquationSeparate(Es.FUNC_ADD,Es.FUNC_ADD),Es.blendFuncSeparate(Es.ONE,Es.ONE_MINUS_SRC_ALPHA,Es.ONE,Es.ONE_MINUS_SRC_ALPHA)):(Es.blendEquationSeparate(Es.FUNC_ADD,Es.FUNC_ADD),Es.blendFuncSeparate(Es.SRC_ALPHA,Es.ONE_MINUS_SRC_ALPHA,Es.ONE,Es.ONE_MINUS_SRC_ALPHA)),js=Tl,Ks=Pl),Tl===nn?(Al=Al||Sl,Ll=Ll||Ml,Rl=Rl||wl,(Sl!==Xs||Al!==Zs)&&(Es.blendEquationSeparate(Ss(Sl),Ss(Al)),Xs=Sl,Zs=Al),(Ml!==qs||wl!==Ys||Ll!==Js||Rl!==Qs)&&(Es.blendFuncSeparate(Ss(Ml),Ss(wl),Ss(Ll),Ss(Rl)),qs=Ml,Ys=wl,Js=Ll,Qs=Rl)):(Xs=null,qs=null,Ys=null,Zs=null,Js=null,Qs=null)}function Rs(Tl){zs.setFunc(Tl)}function Ps(Tl){$s!==Tl&&(Tl?Es.frontFace(Es.CW):Es.frontFace(Es.CCW),$s=Tl)}function Cs(Tl){Tl===Oi?As(Es.CULL_FACE):(ws(Es.CULL_FACE),Tl!==el&&(Tl===Gi?Es.cullFace(Es.BACK):Tl===Vi?Es.cullFace(Es.FRONT):Es.cullFace(Es.FRONT_AND_BACK))),el=Tl}function Is(Tl){void 0===Tl&&(Tl=Es.TEXTURE0+cl-1),ul!==Tl&&(Es.activeTexture(Tl),ul=Tl)}function Us(Tl,Sl,Ml,wl){Fs.setClear(Tl,Sl,Ml,wl)}function Ds(Tl){zs.setClear(Tl)}function Ns(Tl){Bs.setClear(Tl)}var Fs=new function(){var Sl=!1,Ml=new Ue,wl=null,Al=new Ue;return{setMask:function(Ll){wl===Ll||Sl||(Es.colorMask(Ll,Ll,Ll,Ll),wl=Ll)},setLocked:function(Ll){Sl=Ll},setClear:function(Ll,Rl,Pl,Cl){Ml.set(Ll,Rl,Pl,Cl),!1===Al.equals(Ml)&&(Es.clearColor(Ll,Rl,Pl,Cl),Al.copy(Ml))},reset:function(){Sl=!1,wl=null,Al.set(0,0,0,1)}}},zs=new function(){var Sl=!1,Ml=null,wl=null,Al=null;return{setTest:function(Ll){Ll?ws(Es.DEPTH_TEST):As(Es.DEPTH_TEST)},setMask:function(Ll){Ml===Ll||Sl||(Es.depthMask(Ll),Ml=Ll)},setFunc:function(Ll){wl!==Ll&&(Ll?Ll===Tn?Es.depthFunc(Es.NEVER):Ll===Sn?Es.depthFunc(Es.ALWAYS):Ll===Mn?Es.depthFunc(Es.LESS):Ll===wn?Es.depthFunc(Es.LEQUAL):Ll===An?Es.depthFunc(Es.EQUAL):Ll===Ln?Es.depthFunc(Es.GEQUAL):Ll===Rn?Es.depthFunc(Es.GREATER):Ll===Pn?Es.depthFunc(Es.NOTEQUAL):Es.depthFunc(Es.LEQUAL):Es.depthFunc(Es.LEQUAL),wl=Ll)},setLocked:function(Ll){Sl=Ll},setClear:function(Ll){Al!==Ll&&(Es.clearDepth(Ll),Al=Ll)},reset:function(){Sl=!1,Ml=null,wl=null,Al=null}}},Bs=new function(){var Sl=!1,Ml=null,wl=null,Al=null,Ll=null,Rl=null,Pl=null,Cl=null,Il=null;return{setTest:function(Ul){Ul?ws(Es.STENCIL_TEST):As(Es.STENCIL_TEST)},setMask:function(Ul){Ml===Ul||Sl||(Es.stencilMask(Ul),Ml=Ul)},setFunc:function(Ul,Dl,Nl){(wl!==Ul||Al!==Dl||Ll!==Nl)&&(Es.stencilFunc(Ul,Dl,Nl),wl=Ul,Al=Dl,Ll=Nl)},setOp:function(Ul,Dl,Nl){(Rl!==Ul||Pl!==Dl||Cl!==Nl)&&(Es.stencilOp(Ul,Dl,Nl),Rl=Ul,Pl=Dl,Cl=Nl)},setLocked:function(Ul){Sl=Ul},setClear:function(Ul){Il!==Ul&&(Es.clearStencil(Ul),Il=Ul)},reset:function(){Sl=!1,Ml=null,wl=null,Al=null,Ll=null,Rl=null,Pl=null,Cl=null,Il=null}}},Os=Es.getParameter(Es.MAX_VERTEX_ATTRIBS),Gs=new Uint8Array(Os),Vs=new Uint8Array(Os),ks=new Uint8Array(Os),Hs={},Ws=null,js=null,Xs=null,qs=null,Ys=null,Zs=null,Js=null,Qs=null,Ks=!1,$s=null,el=null,rl=null,al=null,nl=null,dl=null,cl=Es.getParameter(Es.MAX_TEXTURE_IMAGE_UNITS),ul=null,yl={},xl=new Ue,_l=new Ue,El={};return El[Es.TEXTURE_2D]=Ms(Es.TEXTURE_2D,Es.TEXTURE_2D,1),El[Es.TEXTURE_CUBE_MAP]=Ms(Es.TEXTURE_CUBE_MAP,Es.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:Fs,depth:zs,stencil:Bs},init:function(){Us(0,0,0,1),Ds(1),Ns(0),ws(Es.DEPTH_TEST),Rs(wn),Ps(!1),Cs(Gi),ws(Es.CULL_FACE),ws(Es.BLEND),Ls(en)},initAttributes:function(){for(var Sl=0,Ml=Gs.length;Sl<Ml;Sl++)Gs[Sl]=0},enableAttribute:function(Sl){if(Gs[Sl]=1,0===Vs[Sl]&&(Es.enableVertexAttribArray(Sl),Vs[Sl]=1),0!==ks[Sl]){var Ml=Ts.get("ANGLE_instanced_arrays");Ml.vertexAttribDivisorANGLE(Sl,0),ks[Sl]=0}},enableAttributeAndDivisor:function(Sl,Ml,wl){Gs[Sl]=1,0===Vs[Sl]&&(Es.enableVertexAttribArray(Sl),Vs[Sl]=1),ks[Sl]!==Ml&&(wl.vertexAttribDivisorANGLE(Sl,Ml),ks[Sl]=Ml)},disableUnusedAttributes:function(){for(var Sl=0,Ml=Vs.length;Sl!==Ml;++Sl)Vs[Sl]!==Gs[Sl]&&(Es.disableVertexAttribArray(Sl),Vs[Sl]=0)},enable:ws,disable:As,getCompressedTextureFormats:function(){if(null==Ws&&(Ws=[],Ts.get("WEBGL_compressed_texture_pvrtc")||Ts.get("WEBGL_compressed_texture_s3tc")||Ts.get("WEBGL_compressed_texture_etc1")))for(var Sl=Es.getParameter(Es.COMPRESSED_TEXTURE_FORMATS),Ml=0;Ml<Sl.length;Ml++)Ws.push(Sl[Ml]);return Ws},setBlending:Ls,setColorWrite:function(Sl){Fs.setMask(Sl)},setDepthTest:function(Sl){zs.setTest(Sl)},setDepthWrite:function(Sl){zs.setMask(Sl)},setDepthFunc:Rs,setStencilTest:function(Sl){Bs.setTest(Sl)},setStencilWrite:function(Sl){Bs.setMask(Sl)},setStencilFunc:function(Sl,Ml,wl){Bs.setFunc(Sl,Ml,wl)},setStencilOp:function(Sl,Ml,wl){Bs.setOp(Sl,Ml,wl)},setFlipSided:Ps,setCullFace:Cs,setLineWidth:function(Sl){Sl!==rl&&(Es.lineWidth(Sl),rl=Sl)},setPolygonOffset:function(Sl,Ml,wl){Sl?(ws(Es.POLYGON_OFFSET_FILL),(al!==Ml||nl!==wl)&&(Es.polygonOffset(Ml,wl),al=Ml,nl=wl)):As(Es.POLYGON_OFFSET_FILL)},getScissorTest:function(){return dl},setScissorTest:function(Sl){dl=Sl,Sl?ws(Es.SCISSOR_TEST):As(Es.SCISSOR_TEST)},activeTexture:Is,bindTexture:function(Sl,Ml){null===ul&&Is();var wl=yl[ul];void 0===wl&&(wl={type:void 0,texture:void 0},yl[ul]=wl),(wl.type!==Sl||wl.texture!==Ml)&&(Es.bindTexture(Sl,Ml||El[Sl]),wl.type=Sl,wl.texture=Ml)},compressedTexImage2D:function(){try{Es.compressedTexImage2D.apply(Es,arguments)}catch(Sl){console.error(Sl)}},texImage2D:function(){try{Es.texImage2D.apply(Es,arguments)}catch(Sl){console.error(Sl)}},clearColor:Us,clearDepth:Ds,clearStencil:Ns,scissor:function(Tl){!1===xl.equals(Tl)&&(Es.scissor(Tl.x,Tl.y,Tl.z,Tl.w),xl.copy(Tl))},viewport:function(Tl){!1===_l.equals(Tl)&&(Es.viewport(Tl.x,Tl.y,Tl.z,Tl.w),_l.copy(Tl))},reset:function(){for(var Sl=0;Sl<Vs.length;Sl++)1===Vs[Sl]&&(Es.disableVertexAttribArray(Sl),Vs[Sl]=0);Hs={},Ws=null,ul=null,yl={},js=null,$s=null,el=null,Fs.reset(),zs.reset(),Bs.reset()}}}function Ne(Es,Ts,Ss){this.uuid=A.Math.generateUUID(),this.width=Es,this.height=Ts,this.scissor=new Ue(0,0,Es,Ts),this.scissorTest=!1,this.viewport=new Ue(0,0,Es,Ts),Ss=Ss||{},Ss.minFilter===void 0&&(Ss.minFilter=$n),this.texture=new P(void 0,void 0,Ss.wrapS,Ss.wrapT,Ss.magFilter,Ss.minFilter,Ss.format,Ss.type,Ss.anisotropy,Ss.encoding),this.depthBuffer=!(Ss.depthBuffer!==void 0)||Ss.depthBuffer,this.stencilBuffer=!(Ss.stencilBuffer!==void 0)||Ss.stencilBuffer,this.depthTexture=Ss.depthTexture===void 0?null:Ss.depthTexture}function Fe(){Object.defineProperty(this,"id",{value:ze()}),this.uuid=A.Math.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=en,this.side=ji,this.shading=Zi,this.vertexColors=Ji,this.opacity=1,this.transparent=!1,this.blendSrc=hn,this.blendDst=yn,this.blendEquation=on,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=wn,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0}function ze(){return os++}function Be(Es){Fe.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,Es!==void 0&&(Es.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(Es))}function Oe(Es,Ts,Ss){return void 0===Ts&&void 0===Ss?this.set(Es):this.setRGB(Es,Ts,Ss)}function Ge(Es){Fe.call(this),this.type="MeshDepthMaterial",this.depthPacking=Ko,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(Es)}function Ve(Es,Ts){this.min=Es===void 0?new D(+(1/0),+(1/0),+(1/0)):Es,this.max=Ts===void 0?new D(-(1/0),-(1/0),-(1/0)):Ts}function ke(Es,Ts){this.center=Es===void 0?new D:Es,this.radius=Ts===void 0?0:Ts}function He(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function We(Es,Ts){this.normal=Es===void 0?new D(1,0,0):Es,this.constant=Ts===void 0?0:Ts}function je(Es,Ts,Ss,Ms,ws,As){this.planes=[Es===void 0?new We:Es,Ts===void 0?new We:Ts,Ss===void 0?new We:Ss,Ms===void 0?new We:Ms,ws===void 0?new We:ws,As===void 0?new We:As]}function Xe(Es,Ts,Ss,Ms){function ws(al,nl,dl,cl){var ul=al.geometry,yl=null,xl=Vs,_l=al.customDepthMaterial;if(dl&&(xl=ks,_l=al.customDistanceMaterial),!_l){var El=!1;nl.morphTargets&&(ul&&ul.isBufferGeometry?El=ul.morphAttributes&&ul.morphAttributes.position&&0<ul.morphAttributes.position.length:ul&&ul.isGeometry&&(El=ul.morphTargets&&0<ul.morphTargets.length));var Tl=al.isSkinnedMesh&&nl.skinning,Sl=0;El&&(Sl|=Bs),Tl&&(Sl|=Os),yl=xl[Sl]}else yl=_l;if(Es.localClippingEnabled&&!0===nl.clipShadows&&0!==nl.clippingPlanes.length){var Ml=yl.uuid,wl=nl.uuid,Al=Hs[Ml];void 0===Al&&(Al={},Hs[Ml]=Al);var Ll=Al[wl];void 0===Ll&&(Ll=yl.clone(),Al[wl]=Ll),yl=Ll}yl.visible=nl.visible,yl.wireframe=nl.wireframe;var Rl=nl.side;return rl.renderSingleSided&&Rl==qi&&(Rl=ji),rl.renderReverseSided&&(Rl===ji?Rl=Xi:Rl===Xi&&(Rl=ji)),yl.side=Rl,yl.clipShadows=nl.clipShadows,yl.clippingPlanes=nl.clippingPlanes,yl.wireframeLinewidth=nl.wireframeLinewidth,yl.linewidth=nl.linewidth,dl&&void 0!==yl.uniforms.lightPos&&yl.uniforms.lightPos.value.copy(cl),yl}function As(al,nl,dl){if(!1!==al.visible){var cl=0!=(al.layers.mask&nl.layers.mask);if(cl&&(al.isMesh||al.isLine||al.isPoints)&&al.castShadow&&(!1===al.frustumCulled||!0===Ps.intersectsObject(al))){var ul=al.material;!0===ul.visible&&(al.modelViewMatrix.multiplyMatrices(dl.matrixWorldInverse,al.matrixWorld),zs.push(al))}for(var yl=al.children,xl=0,_l=yl.length;xl<_l;xl++)As(yl[xl],nl,dl)}}var Ls=Es.context,Rs=Es.state,Ps=new je,Cs=new I,Is=Ts.shadows,Us=new R,Ds=new R(Ms.maxTextureSize,Ms.maxTextureSize),Ns=new D,Fs=new D,zs=[],Bs=1,Os=2,Gs=(Bs|Os)+1,Vs=[,,,,],ks=[,,,,],Hs={},Ws=[new D(1,0,0),new D(-1,0,0),new D(0,0,1),new D(0,0,-1),new D(0,1,0),new D(0,-1,0)],js=[new D(0,1,0),new D(0,1,0),new D(0,1,0),new D(0,1,0),new D(0,0,1),new D(0,0,-1)],Xs=[new Ue,new Ue,new Ue,new Ue,new Ue,new Ue],qs=new Ge;qs.depthPacking=$o,qs.clipping=!0;for(var Ys=ds.distanceRGBA,Zs=A.UniformsUtils.clone(Ys.uniforms),Js=0;Js!==Gs;++Js){var Qs=0!=(Js&Bs),Ks=0!=(Js&Os),$s=qs.clone();$s.morphTargets=Qs,$s.skinning=Ks,Vs[Js]=$s;var el=new Be({defines:{USE_SHADOWMAP:""},uniforms:Zs,vertexShader:Ys.vertexShader,fragmentShader:Ys.fragmentShader,morphTargets:Qs,skinning:Ks,clipping:!0});ks[Js]=el}var rl=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Hi,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(al,nl){if(!1!==rl.enabled&&(!1!==rl.autoUpdate||!1!==rl.needsUpdate)&&0!==Is.length){Rs.clearColor(1,1,1,1),Rs.disable(Ls.BLEND),Rs.setDepthTest(!0),Rs.setScissorTest(!1);for(var ul=0,yl=Is.length,dl,cl;ul<yl;ul++){var xl=Is[ul],_l=xl.shadow;if(void 0===_l){console.warn("THREE.WebGLShadowMap:",xl,"has no shadow.");continue}var El=_l.camera;if(Us.copy(_l.mapSize),Us.min(Ds),xl&&xl.isPointLight){dl=6,cl=!0;var Tl=Us.x,Sl=Us.y;Xs[0].set(2*Tl,Sl,Tl,Sl),Xs[1].set(0,Sl,Tl,Sl),Xs[2].set(3*Tl,Sl,Tl,Sl),Xs[3].set(Tl,Sl,Tl,Sl),Xs[4].set(3*Tl,0,Tl,Sl),Xs[5].set(Tl,0,Tl,Sl),Us.x*=4,Us.y*=2}else dl=1,cl=!1;null===_l.map&&(_l.map=new Ne(Us.x,Us.y,{minFilter:Jn,magFilter:Jn,format:_o}),El.updateProjectionMatrix()),_l&&_l.isSpotLightShadow&&_l.update(xl);var Ml=_l.map,wl=_l.matrix;Fs.setFromMatrixPosition(xl.matrixWorld),El.position.copy(Fs),Es.setRenderTarget(Ml),Es.clear();for(var Al=0;Al<dl;Al++){if(cl){Ns.copy(El.position),Ns.add(Ws[Al]),El.up.copy(js[Al]),El.lookAt(Ns);var Ll=Xs[Al];Rs.viewport(Ll)}else Ns.setFromMatrixPosition(xl.target.matrixWorld),El.lookAt(Ns);El.updateMatrixWorld(),El.matrixWorldInverse.getInverse(El.matrixWorld),wl.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1),wl.multiply(El.projectionMatrix),wl.multiply(El.matrixWorldInverse),Cs.multiplyMatrices(El.projectionMatrix,El.matrixWorldInverse),Ps.setFromMatrix(Cs),zs.length=0,As(al,nl,El);for(var Rl=0,Pl=zs.length;Rl<Pl;Rl++){var Cl=zs[Rl],Il=Ss.update(Cl),Ul=Cl.material;if(Ul&&Ul.isMultiMaterial)for(var Dl=Il.groups,Nl=Ul.materials,Fl=0,zl=Dl.length;Fl<zl;Fl++){var Bl=Dl[Fl],Ol=Nl[Bl.materialIndex];if(!0===Ol.visible){var Gl=ws(Cl,Ol,cl,Fs);Es.renderBufferDirect(El,null,Il,Gl,Cl,Bl)}}else{var Gl=ws(Cl,Ul,cl,Fs);Es.renderBufferDirect(El,null,Il,Gl,Cl,null)}}}}var Vl=Es.getClearColor(),Hl=Es.getClearAlpha();Es.setClearColor(Vl,Hl),rl.needsUpdate=!1}}}function qe(Es){for(var Ts=Es.split("\n"),Ss=0;Ss<Ts.length;Ss++)Ts[Ss]=Ss+1+": "+Ts[Ss];return Ts.join("\n")}function Ye(Es,Ts,Ss){var Ms=Es.createShader(Ts);return Es.shaderSource(Ms,Ss),Es.compileShader(Ms),!1===Es.getShaderParameter(Ms,Es.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==Es.getShaderInfoLog(Ms)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",Ts===Es.VERTEX_SHADER?"vertex":"fragment",Es.getShaderInfoLog(Ms),qe(Ss)),Ms}function Ze(){var Es={};return{get:function(Ts){var Ss=Ts.uuid,Ms=Es[Ss];return void 0===Ms&&(Ms={},Es[Ss]=Ms),Ms},delete:function(Ts){delete Es[Ts.uuid]},clear:function(){Es={}}}}function Je(Es){switch(Es){case jo:return["Linear","( value )"];case Xo:return["sRGB","( value )"];case Yo:return["RGBE","( value )"];case Zo:return["RGBM","( value, 7.0 )"];case Jo:return["RGBM","( value, 16.0 )"];case Qo:return["RGBD","( value, 256.0 )"];case qo:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+Es);}}function Qe(Es,Ts){var Ss=Je(Ts);return"vec4 "+Es+"( vec4 value ) { return "+Ss[0]+"ToLinear"+Ss[1]+"; }"}function Ke(Es,Ts){var Ss=Je(Ts);return"vec4 "+Es+"( vec4 value ) { return LinearTo"+Ss[0]+Ss[1]+"; }"}function $e(Es,Ts){var Ss;switch(Ts){case Nn:Ss="Linear";break;case Fn:Ss="Reinhard";break;case zn:Ss="Uncharted2";break;case Bn:Ss="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+Ts);}return"vec3 "+Es+"( vec3 color ) { return "+Ss+"ToneMapping( color ); }"}function et(Es,Ts,Ss){Es=Es||{};var Ms=[Es.derivatives||Ts.envMapCubeUV||Ts.bumpMap||Ts.normalMap||Ts.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(Es.fragDepth||Ts.logarithmicDepthBuffer)&&Ss.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",Es.drawBuffers&&Ss.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(Es.shaderTextureLOD||Ts.envMap)&&Ss.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return Ms.filter(it).join("\n")}function tt(Es){var Ts=[];for(var Ss in Es){var Ms=Es[Ss];!1===Ms||Ts.push("#define "+Ss+" "+Ms)}return Ts.join("\n")}function rt(Es,Ts,Ss){for(var Ms={},ws=Es.getProgramParameter(Ts,Es.ACTIVE_ATTRIBUTES),As=0;As<ws;As++){var Ls=Es.getActiveAttrib(Ts,As),Rs=Ls.name;Ms[Rs]=Es.getAttribLocation(Ts,Rs)}return Ms}function it(Es){return""!==Es}function nt(Es,Ts){return Es.replace(/NUM_DIR_LIGHTS/g,Ts.numDirLights).replace(/NUM_SPOT_LIGHTS/g,Ts.numSpotLights).replace(/NUM_POINT_LIGHTS/g,Ts.numPointLights).replace(/NUM_HEMI_LIGHTS/g,Ts.numHemiLights)}function ot(Es){var Ts=/#include +<([\w\d.]+)>/g;return Es.replace(Ts,function(Ms,ws){var Ss=ss[ws];if(Ss===void 0)throw new Error("Can not resolve #include <"+ws+">");return ot(Ss)})}function st(Es){var Ts=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return Es.replace(Ts,function(Ms,ws,As,Ls){for(var Rs="",Ps=parseInt(ws);Ps<parseInt(As);Ps++)Rs+=Ls.replace(/\[ i \]/g,"[ "+Ps+" ]");return Rs})}function dt(Es,Ts,Ss,Ms){var ws=Es.context,As=Ss.extensions,Ls=Ss.defines,Rs=Ss.__webglShader.vertexShader,Ps=Ss.__webglShader.fragmentShader,Cs="SHADOWMAP_TYPE_BASIC";Ms.shadowMapType===Hi?Cs="SHADOWMAP_TYPE_PCF":Ms.shadowMapType===Wi&&(Cs="SHADOWMAP_TYPE_PCF_SOFT");var Is="ENVMAP_TYPE_CUBE",Us="ENVMAP_MODE_REFLECTION",Ds="ENVMAP_BLENDING_MULTIPLY";if(Ms.envMap){switch(Ss.envMap.mapping){case Gn:case Vn:Is="ENVMAP_TYPE_CUBE";break;case jn:case Xn:Is="ENVMAP_TYPE_CUBE_UV";break;case kn:case Hn:Is="ENVMAP_TYPE_EQUIREC";break;case Wn:Is="ENVMAP_TYPE_SPHERE";}switch(Ss.envMap.mapping){case Vn:case Hn:Us="ENVMAP_MODE_REFRACTION";}switch(Ss.combine){case Cn:Ds="ENVMAP_BLENDING_MULTIPLY";break;case In:Ds="ENVMAP_BLENDING_MIX";break;case Un:Ds="ENVMAP_BLENDING_ADD";}}var Ns=0<Es.gammaFactor?Es.gammaFactor:1,Fs=et(As,Ms,Es.extensions),zs=tt(Ls),Bs=ws.createProgram(),Os,Gs;Ss.isRawShaderMaterial?(Os=[zs,"\n"].filter(it).join("\n"),Gs=[Fs,zs,"\n"].filter(it).join("\n")):(Os=["precision "+Ms.precision+" float;","precision "+Ms.precision+" int;","#define SHADER_NAME "+Ss.__webglShader.name,zs,Ms.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+Ns,"#define MAX_BONES "+Ms.maxBones,Ms.map?"#define USE_MAP":"",Ms.envMap?"#define USE_ENVMAP":"",Ms.envMap?"#define "+Us:"",Ms.lightMap?"#define USE_LIGHTMAP":"",Ms.aoMap?"#define USE_AOMAP":"",Ms.emissiveMap?"#define USE_EMISSIVEMAP":"",Ms.bumpMap?"#define USE_BUMPMAP":"",Ms.normalMap?"#define USE_NORMALMAP":"",Ms.displacementMap&&Ms.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",Ms.specularMap?"#define USE_SPECULARMAP":"",Ms.roughnessMap?"#define USE_ROUGHNESSMAP":"",Ms.metalnessMap?"#define USE_METALNESSMAP":"",Ms.alphaMap?"#define USE_ALPHAMAP":"",Ms.vertexColors?"#define USE_COLOR":"",Ms.flatShading?"#define FLAT_SHADED":"",Ms.skinning?"#define USE_SKINNING":"",Ms.useVertexTexture?"#define BONE_TEXTURE":"",Ms.morphTargets?"#define USE_MORPHTARGETS":"",Ms.morphNormals&&!1===Ms.flatShading?"#define USE_MORPHNORMALS":"",Ms.doubleSided?"#define DOUBLE_SIDED":"",Ms.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+Ms.numClippingPlanes,Ms.shadowMapEnabled?"#define USE_SHADOWMAP":"",Ms.shadowMapEnabled?"#define "+Cs:"",Ms.sizeAttenuation?"#define USE_SIZEATTENUATION":"",Ms.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",Ms.logarithmicDepthBuffer&&Es.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(it).join("\n"),Gs=[Fs,"precision "+Ms.precision+" float;","precision "+Ms.precision+" int;","#define SHADER_NAME "+Ss.__webglShader.name,zs,Ms.alphaTest?"#define ALPHATEST "+Ms.alphaTest:"","#define GAMMA_FACTOR "+Ns,Ms.useFog&&Ms.fog?"#define USE_FOG":"",Ms.useFog&&Ms.fogExp?"#define FOG_EXP2":"",Ms.map?"#define USE_MAP":"",Ms.envMap?"#define USE_ENVMAP":"",Ms.envMap?"#define "+Is:"",Ms.envMap?"#define "+Us:"",Ms.envMap?"#define "+Ds:"",Ms.lightMap?"#define USE_LIGHTMAP":"",Ms.aoMap?"#define USE_AOMAP":"",Ms.emissiveMap?"#define USE_EMISSIVEMAP":"",Ms.bumpMap?"#define USE_BUMPMAP":"",Ms.normalMap?"#define USE_NORMALMAP":"",Ms.specularMap?"#define USE_SPECULARMAP":"",Ms.roughnessMap?"#define USE_ROUGHNESSMAP":"",Ms.metalnessMap?"#define USE_METALNESSMAP":"",Ms.alphaMap?"#define USE_ALPHAMAP":"",Ms.vertexColors?"#define USE_COLOR":"",Ms.flatShading?"#define FLAT_SHADED":"",Ms.doubleSided?"#define DOUBLE_SIDED":"",Ms.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+Ms.numClippingPlanes,Ms.shadowMapEnabled?"#define USE_SHADOWMAP":"",Ms.shadowMapEnabled?"#define "+Cs:"",Ms.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",Ms.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",Ms.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",Ms.logarithmicDepthBuffer&&Es.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",Ms.envMap&&Es.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",Ms.toneMapping===Dn?"":"#define TONE_MAPPING",Ms.toneMapping===Dn?"":ss.tonemapping_pars_fragment,Ms.toneMapping===Dn?"":$e("toneMapping",Ms.toneMapping),Ms.outputEncoding||Ms.mapEncoding||Ms.envMapEncoding||Ms.emissiveMapEncoding?ss.encodings_pars_fragment:"",Ms.mapEncoding?Qe("mapTexelToLinear",Ms.mapEncoding):"",Ms.envMapEncoding?Qe("envMapTexelToLinear",Ms.envMapEncoding):"",Ms.emissiveMapEncoding?Qe("emissiveMapTexelToLinear",Ms.emissiveMapEncoding):"",Ms.outputEncoding?Ke("linearToOutputTexel",Ms.outputEncoding):"",Ms.depthPacking?"#define DEPTH_PACKING "+Ss.depthPacking:"","\n"].filter(it).join("\n")),Rs=ot(Rs,Ms),Rs=nt(Rs,Ms),Ps=ot(Ps,Ms),Ps=nt(Ps,Ms),Ss.isShaderMaterial||(Rs=st(Rs),Ps=st(Ps));var Vs=Os+Rs,ks=Gs+Ps,Hs=Ye(ws,ws.VERTEX_SHADER,Vs),Ws=Ye(ws,ws.FRAGMENT_SHADER,ks);ws.attachShader(Bs,Hs),ws.attachShader(Bs,Ws),void 0===Ss.index0AttributeName?!0===Ms.morphTargets&&ws.bindAttribLocation(Bs,0,"position"):ws.bindAttribLocation(Bs,0,Ss.index0AttributeName),ws.linkProgram(Bs);var js=ws.getProgramInfoLog(Bs),Xs=ws.getShaderInfoLog(Hs),qs=ws.getShaderInfoLog(Ws),Ys=!0,Zs=!0;!1===ws.getProgramParameter(Bs,ws.LINK_STATUS)?(Ys=!1,console.error("THREE.WebGLProgram: shader error: ",ws.getError(),"gl.VALIDATE_STATUS",ws.getProgramParameter(Bs,ws.VALIDATE_STATUS),"gl.getProgramInfoLog",js,Xs,qs)):""===js?(""===Xs||""===qs)&&(Zs=!1):console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",js),Zs&&(this.diagnostics={runnable:Ys,material:Ss,programLog:js,vertexShader:{log:Xs,prefix:Os},fragmentShader:{log:qs,prefix:Gs}}),ws.deleteShader(Hs),ws.deleteShader(Ws);var Js;this.getUniforms=function(){return void 0==Js&&(Js=new Ce(ws,Bs,Es)),Js};var Qs;return this.getAttributes=function(){return void 0==Qs&&(Qs=rt(ws,Bs)),Qs},this.destroy=function(){ws.deleteProgram(Bs),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=ps++,this.code=Ts,this.usedTimes=1,this.program=Bs,this.vertexShader=Hs,this.fragmentShader=Ws,this}function ct(Es,Ts){function Ss(Rs){if(Ts.floatVertexTextures&&Rs&&Rs.skeleton&&Rs.skeleton.useVertexTexture)return 1024;var Ps=Ts.maxVertexUniforms,Cs=Math.floor((Ps-20)/4),Is=Cs;return void 0!==Rs&&Rs&&Rs.isSkinnedMesh&&(Is=Math.min(Rs.skeleton.bones.length,Is),Is<Rs.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+Rs.skeleton.bones.length+", this GPU supports just "+Is+" (try OpenGL instead of ANGLE)")),Is}function Ms(Rs,Ps){var Cs;return Rs?Rs&&Rs.isTexture?Cs=Rs.encoding:Rs&&Rs.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),Cs=Rs.texture.encoding):Cs=jo,Cs===jo&&Ps&&(Cs=qo),Cs}var ws=[],As={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},Ls=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","depthPacking"];this.getParameters=function(Rs,Ps,Cs,Is,Us){var Ds=As[Rs.type],Ns=Ss(Us),Fs=Es.getPrecision();null!==Rs.precision&&(Fs=Ts.getMaxPrecision(Rs.precision),Fs!==Rs.precision&&console.warn("THREE.WebGLProgram.getParameters:",Rs.precision,"not supported, using",Fs,"instead."));var zs=Es.getCurrentRenderTarget(),Bs={shaderID:Ds,precision:Fs,supportsVertexTextures:Ts.vertexTextures,outputEncoding:Ms(zs?zs.texture:null,Es.gammaOutput),map:!!Rs.map,mapEncoding:Ms(Rs.map,Es.gammaInput),envMap:!!Rs.envMap,envMapMode:Rs.envMap&&Rs.envMap.mapping,envMapEncoding:Ms(Rs.envMap,Es.gammaInput),envMapCubeUV:!!Rs.envMap&&(Rs.envMap.mapping===jn||Rs.envMap.mapping===Xn),lightMap:!!Rs.lightMap,aoMap:!!Rs.aoMap,emissiveMap:!!Rs.emissiveMap,emissiveMapEncoding:Ms(Rs.emissiveMap,Es.gammaInput),bumpMap:!!Rs.bumpMap,normalMap:!!Rs.normalMap,displacementMap:!!Rs.displacementMap,roughnessMap:!!Rs.roughnessMap,metalnessMap:!!Rs.metalnessMap,specularMap:!!Rs.specularMap,alphaMap:!!Rs.alphaMap,combine:Rs.combine,vertexColors:Rs.vertexColors,fog:!!Cs,useFog:Rs.fog,fogExp:Cs&&Cs.isFogExp2,flatShading:Rs.shading===Yi,sizeAttenuation:Rs.sizeAttenuation,logarithmicDepthBuffer:Ts.logarithmicDepthBuffer,skinning:Rs.skinning,maxBones:Ns,useVertexTexture:Ts.floatVertexTextures&&Us&&Us.skeleton&&Us.skeleton.useVertexTexture,morphTargets:Rs.morphTargets,morphNormals:Rs.morphNormals,maxMorphTargets:Es.maxMorphTargets,maxMorphNormals:Es.maxMorphNormals,numDirLights:Ps.directional.length,numPointLights:Ps.point.length,numSpotLights:Ps.spot.length,numHemiLights:Ps.hemi.length,numClippingPlanes:Is,shadowMapEnabled:Es.shadowMap.enabled&&Us.receiveShadow&&0<Ps.shadows.length,shadowMapType:Es.shadowMap.type,toneMapping:Es.toneMapping,physicallyCorrectLights:Es.physicallyCorrectLights,premultipliedAlpha:Rs.premultipliedAlpha,alphaTest:Rs.alphaTest,doubleSided:Rs.side===qi,flipSided:Rs.side===Xi,depthPacking:Rs.depthPacking!==void 0&&Rs.depthPacking};return Bs},this.getProgramCode=function(Rs,Ps){var Cs=[];if(Ps.shaderID?Cs.push(Ps.shaderID):(Cs.push(Rs.fragmentShader),Cs.push(Rs.vertexShader)),void 0!==Rs.defines)for(var Is in Rs.defines)Cs.push(Is),Cs.push(Rs.defines[Is]);for(var Us=0;Us<Ls.length;Us++)Cs.push(Ps[Ls[Us]]);return Cs.join()},this.acquireProgram=function(Rs,Ps,Cs){for(var Us=0,Ds=ws.length,Is;Us<Ds;Us++){var Ns=ws[Us];if(Ns.code===Cs){Is=Ns,++Is.usedTimes;break}}return void 0===Is&&(Is=new dt(Es,Cs,Rs,Ps),ws.push(Is)),Is},this.releaseProgram=function(Rs){if(0==--Rs.usedTimes){var Ps=ws.indexOf(Rs);ws[Ps]=ws[ws.length-1],ws.pop(),Rs.destroy()}},this.programs=ws}function ut(Es,Ts,Ss){if(Array.isArray(Es))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=A.Math.generateUUID(),this.array=Es,this.itemSize=Ts,this.normalized=!0===Ss,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function mt(Es,Ts){return new ut(new Uint16Array(Es),Ts)}function ft(Es,Ts){return new ut(new Uint32Array(Es),Ts)}function ht(Es,Ts){return new ut(new Float32Array(Es),Ts)}function yt(Es,Ts,Ss,Ms,ws,As){this.a=Es,this.b=Ts,this.c=Ss,this.normal=Ms&&Ms.isVector3?Ms:new D,this.vertexNormals=Array.isArray(Ms)?Ms:[],this.color=ws&&ws.isColor?ws:new Oe,this.vertexColors=Array.isArray(ws)?ws:[],this.materialIndex=As===void 0?0:As}function xt(Es,Ts,Ss,Ms){this._x=Es||0,this._y=Ts||0,this._z=Ss||0,this._order=Ms||xt.DefaultOrder}function _t(){this.mask=1}function vt(){Object.defineProperty(this,"id",{value:bt()}),this.uuid=A.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=vt.DefaultUp.clone();var Es=new D,Ts=new xt,Ss=new U,Ms=new D(1,1,1);Ts.onChange(function(){Ss.setFromEuler(Ts,!1)}),Ss.onChange(function(){Ts.setFromQuaternion(Ss,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:Es},rotation:{enumerable:!0,value:Ts},quaternion:{enumerable:!0,value:Ss},scale:{enumerable:!0,value:Ms},modelViewMatrix:{value:new I},normalMatrix:{value:new He}}),this.matrix=new I,this.matrixWorld=new I,this.matrixAutoUpdate=vt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new _t,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function bt(){return us++}function Et(){Object.defineProperty(this,"id",{value:Tt()}),this.uuid=A.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Tt(){return ms++}function St(){Object.defineProperty(this,"id",{value:Tt()}),this.uuid=A.Math.generateUUID(),this.name="",this.type="DirectGeometry",this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Mt(){Object.defineProperty(this,"id",{value:Tt()}),this.uuid=A.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function wt(Es,Ts,Ss){function Ms(Cs){var Is=Cs.target,Us=Ps[Is.id];null!==Us.index&&As(Us.index),Ls(Us.attributes),Is.removeEventListener("dispose",Ms),delete Ps[Is.id];var Ds=Ts.get(Is);Ds.wireframe&&As(Ds.wireframe),Ts.delete(Is);var Ns=Ts.get(Us);Ns.wireframe&&As(Ns.wireframe),Ts.delete(Us),Ss.memory.geometries--}function ws(Cs){return Cs.isInterleavedBufferAttribute?Ts.get(Cs.data).__webglBuffer:Ts.get(Cs).__webglBuffer}function As(Cs){var Is=ws(Cs);Is!==void 0&&(Es.deleteBuffer(Is),Rs(Cs))}function Ls(Cs){for(var Is in Cs)As(Cs[Is])}function Rs(Cs){Cs.isInterleavedBufferAttribute?Ts.delete(Cs.data):Ts.delete(Cs)}var Ps={};return{get:function(Cs){var Is=Cs.geometry;if(void 0!==Ps[Is.id])return Ps[Is.id];Is.addEventListener("dispose",Ms);var Us;return Is.isBufferGeometry?Us=Is:Is.isGeometry&&(void 0===Is._bufferGeometry&&(Is._bufferGeometry=new Mt().setFromObject(Cs)),Us=Is._bufferGeometry),Ps[Is.id]=Us,Ss.memory.geometries++,Us}}}function At(Es,Ts,Ss){function Ms(Ps,Cs){var Is=Ps.isInterleavedBufferAttribute?Ps.data:Ps,Us=Ts.get(Is);Us.__webglBuffer===void 0?ws(Us,Is,Cs):Us.version!==Is.version&&As(Us,Is,Cs)}function ws(Ps,Cs,Is){Ps.__webglBuffer=Es.createBuffer(),Es.bindBuffer(Is,Ps.__webglBuffer);var Us=Cs.dynamic?Es.DYNAMIC_DRAW:Es.STATIC_DRAW;Es.bufferData(Is,Cs.array,Us),Ps.version=Cs.version}function As(Ps,Cs,Is){Es.bindBuffer(Is,Ps.__webglBuffer),!1===Cs.dynamic||-1===Cs.updateRange.count?Es.bufferSubData(Is,0,Cs.array):0===Cs.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(Es.bufferSubData(Is,Cs.updateRange.offset*Cs.array.BYTES_PER_ELEMENT,Cs.array.subarray(Cs.updateRange.offset,Cs.updateRange.offset+Cs.updateRange.count)),Cs.updateRange.count=0),Ps.version=Cs.version}function Ls(Ps,Cs,Is){if(Cs>Is){var Us=Cs;Cs=Is,Is=Us}var Ds=Ps[Cs];return!(void 0!==Ds)||!(-1!==Ds.indexOf(Is))}var Rs=new wt(Es,Ts,Ss);return{getAttributeBuffer:function(Cs){return Cs.isInterleavedBufferAttribute?Ts.get(Cs.data).__webglBuffer:Ts.get(Cs).__webglBuffer},getWireframeAttribute:function(Cs){var Is=Ts.get(Cs);if(void 0!==Is.wireframe)return Is.wireframe;var Us=[],Ds=Cs.index,Ns=Cs.attributes,Fs=Ns.position;if(null!==Ds)for(var zs={},Bs=Ds.array,Os=0,Gs=Bs.length;Os<Gs;Os+=3){var Vs=Bs[Os+0],ks=Bs[Os+1],Hs=Bs[Os+2];Ls(zs,Vs,ks)&&Us.push(Vs,ks),Ls(zs,ks,Hs)&&Us.push(ks,Hs),Ls(zs,Hs,Vs)&&Us.push(Hs,Vs)}else for(var Bs=Ns.position.array,Os=0,Gs=Bs.length/3-1;Os<Gs;Os+=3){var Vs=Os+0,ks=Os+1,Hs=Os+2;Us.push(Vs,ks,ks,Hs,Hs,Vs)}var Ws=65535<Fs.count?Uint32Array:Uint16Array,js=new ut(new Ws(Us),1);return Ms(js,Es.ELEMENT_ARRAY_BUFFER),Is.wireframe=js,js},update:function(Cs){var Is=Rs.get(Cs);Cs.geometry.isGeometry&&Is.updateFromObject(Cs);var Us=Is.index,Ds=Is.attributes;for(var Ns in null!==Us&&Ms(Us,Es.ELEMENT_ARRAY_BUFFER),Ds)Ms(Ds[Ns],Es.ARRAY_BUFFER);var Fs=Is.morphAttributes;for(var Ns in Fs)for(var zs=Fs[Ns],Bs=0,Os=zs.length;Bs<Os;Bs++)Ms(zs[Bs],Es.ARRAY_BUFFER);return Is}}}function Lt(){var Es={};return{get:function(Ts){if(void 0!==Es[Ts.id])return Es[Ts.id];var Ss;switch(Ts.type){case"DirectionalLight":Ss={direction:new D,color:new Oe,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new R};break;case"SpotLight":Ss={position:new D,direction:new D,color:new Oe,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new R};break;case"PointLight":Ss={position:new D,color:new Oe,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new R};break;case"HemisphereLight":Ss={direction:new D,skyColor:new Oe,groundColor:new Oe};}return Es[Ts.id]=Ss,Ss}}}function Rt(Es,Ts,Ss){function Ms(Gs){if("highp"===Gs){if(0<Es.getShaderPrecisionFormat(Es.VERTEX_SHADER,Es.HIGH_FLOAT).precision&&0<Es.getShaderPrecisionFormat(Es.FRAGMENT_SHADER,Es.HIGH_FLOAT).precision)return"highp";Gs="mediump"}return"mediump"===Gs&&0<Es.getShaderPrecisionFormat(Es.VERTEX_SHADER,Es.MEDIUM_FLOAT).precision&&0<Es.getShaderPrecisionFormat(Es.FRAGMENT_SHADER,Es.MEDIUM_FLOAT).precision?"mediump":"lowp"}var ws,As=Ss.precision===void 0?"highp":Ss.precision,Ls=Ms(As);Ls!==As&&(console.warn("THREE.WebGLRenderer:",As,"not supported, using",Ls,"instead."),As=Ls);var Rs=!0===Ss.logarithmicDepthBuffer&&!!Ts.get("EXT_frag_depth"),Ps=Es.getParameter(Es.MAX_TEXTURE_IMAGE_UNITS),Cs=Es.getParameter(Es.MAX_VERTEX_TEXTURE_IMAGE_UNITS),Is=Es.getParameter(Es.MAX_TEXTURE_SIZE),Us=Es.getParameter(Es.MAX_CUBE_MAP_TEXTURE_SIZE),Ds=Es.getParameter(Es.MAX_VERTEX_ATTRIBS),Ns=Es.getParameter(Es.MAX_VERTEX_UNIFORM_VECTORS),Fs=Es.getParameter(Es.MAX_VARYING_VECTORS),zs=Es.getParameter(Es.MAX_FRAGMENT_UNIFORM_VECTORS),Bs=0<Cs,Os=!!Ts.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!=ws)return ws;var Vs=Ts.get("EXT_texture_filter_anisotropic");return ws=null===Vs?0:Es.getParameter(Vs.MAX_TEXTURE_MAX_ANISOTROPY_EXT),ws},getMaxPrecision:Ms,precision:As,logarithmicDepthBuffer:Rs,maxTextures:Ps,maxVertexTextures:Cs,maxTextureSize:Is,maxCubemapSize:Us,maxAttributes:Ds,maxVertexUniforms:Ns,maxVaryings:Fs,maxFragmentUniforms:zs,vertexTextures:Bs,floatFragmentTextures:Os,floatVertexTextures:Bs&&Os}}function Pt(Es){var Ts={};return{get:function(Ss){if(void 0!==Ts[Ss])return Ts[Ss];var Ms;return Ms="WEBGL_depth_texture"===Ss?Es.getExtension("WEBGL_depth_texture")||Es.getExtension("MOZ_WEBGL_depth_texture")||Es.getExtension("WEBKIT_WEBGL_depth_texture"):"EXT_texture_filter_anisotropic"===Ss?Es.getExtension("EXT_texture_filter_anisotropic")||Es.getExtension("MOZ_EXT_texture_filter_anisotropic")||Es.getExtension("WEBKIT_EXT_texture_filter_anisotropic"):"WEBGL_compressed_texture_s3tc"===Ss?Es.getExtension("WEBGL_compressed_texture_s3tc")||Es.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||Es.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"):"WEBGL_compressed_texture_pvrtc"===Ss?Es.getExtension("WEBGL_compressed_texture_pvrtc")||Es.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"):"WEBGL_compressed_texture_etc1"===Ss?Es.getExtension("WEBGL_compressed_texture_etc1"):Es.getExtension(Ss),null===Ms&&console.warn("THREE.WebGLRenderer: "+Ss+" extension not supported."),Ts[Ss]=Ms,Ms}}}function Ct(Es,Ts,Ss){var Ms,ws,As;return{setMode:function(Rs){Ms=Rs},setIndex:function(Rs){Rs.array instanceof Uint32Array&&Ts.get("OES_element_index_uint")?(ws=Es.UNSIGNED_INT,As=4):(ws=Es.UNSIGNED_SHORT,As=2)},render:function(Rs,Ps){Es.drawElements(Ms,Ps,ws,Rs*As),Ss.calls++,Ss.vertices+=Ps,Ms===Es.TRIANGLES&&(Ss.faces+=Ps/3)},renderInstances:function(Rs,Ps,Cs){var Is=Ts.get("ANGLE_instanced_arrays");return null===Is?void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):void(Is.drawElementsInstancedANGLE(Ms,Cs,ws,Ps*As,Rs.maxInstancedCount),Ss.calls++,Ss.vertices+=Cs*Rs.maxInstancedCount,Ms===Es.TRIANGLES&&(Ss.faces+=Rs.maxInstancedCount*Cs/3))}}}function It(){function Es(){Cs.value!==Ms&&(Cs.value=Ms,Cs.needsUpdate=0<ws),Ss.numPlanes=ws}function Ts(Is,Us,Ds,Ns){var Fs=null===Is?0:Is.length,zs=null;if(0!==Fs){if(zs=Cs.value,!0!==Ns||null==zs){var Bs=Ds+4*Fs,Os=Us.matrixWorldInverse;Ps.getNormalMatrix(Os),(null==zs||zs.length<Bs)&&(zs=new Float32Array(Bs));for(var Gs=0,Vs=Ds;Gs!==Fs;++Gs,Vs+=4)Rs.copy(Is[Gs]).applyMatrix4(Os,Ps),Rs.normal.toArray(zs,Vs),zs[Vs+3]=Rs.constant}Cs.value=zs,Cs.needsUpdate=!0}return Ss.numPlanes=Fs,zs}var Ss=this,Ms=null,ws=0,As=!1,Ls=!1,Rs=new We,Ps=new He,Cs={value:null,needsUpdate:!1};this.uniform=Cs,this.numPlanes=0,this.init=function(Is,Us,Ds){var Ns=0!==Is.length||Us||0!=ws||As;return As=Us,Ms=Ts(Is,Ds,0),ws=Is.length,Ns},this.beginShadows=function(){Ls=!0,Ts(null)},this.endShadows=function(){Ls=!1,Es()},this.setState=function(Is,Us,Ds,Ns,Fs){if(!As||null===Is||0===Is.length||Ls&&!Us)Ls?Ts(null):Es();else{var zs=Ls?0:ws,Bs=4*zs,Os=Ns.clippingState||null;Cs.value=Os,Os=Ts(Is,Ds,Bs,Fs);for(var Gs=0;Gs!==Bs;++Gs)Os[Gs]=Ms[Gs];Ns.clippingState=Os,this.numPlanes+=zs}}}function Ut(Es,Ts,Ss){var Ms;return{setMode:function(As){Ms=As},render:function(As,Ls){Es.drawArrays(Ms,As,Ls),Ss.calls++,Ss.vertices+=Ls,Ms===Es.TRIANGLES&&(Ss.faces+=Ls/3)},renderInstances:function(As){var Ls=Ts.get("ANGLE_instanced_arrays");if(null===Ls)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var Rs=As.attributes.position,Ps=0;Rs&&Rs.isInterleavedBufferAttribute?(Ps=Rs.data.count,Ls.drawArraysInstancedANGLE(Ms,0,Ps,As.maxInstancedCount)):(Ps=Rs.count,Ls.drawArraysInstancedANGLE(Ms,0,Ps,As.maxInstancedCount)),Ss.calls++,Ss.vertices+=Ps*As.maxInstancedCount,Ms===Es.TRIANGLES&&(Ss.faces+=As.maxInstancedCount*Ps/3)}}}function Dt(Es,Ts,Ss){Ne.call(this,Es,Ts,Ss),this.activeCubeFace=0,this.activeMipMapLevel=0}function Nt(Es,Ts,Ss,Ms,ws,As){function Ls(Vs,ks,Hs,Ws,js,Xs,qs,Ys,Zs,Js,Qs){for(var Ks=Zs+1,$s=0,el=0,rl=new D,al=0;al<Js+1;al++)for(var nl=al*(qs/Js)-qs/2,dl=0;dl<Ks;dl++){var cl=dl*(Xs/Zs)-Xs/2;rl[Vs]=cl*Ws,rl[ks]=nl*js,rl[Hs]=Ys/2,Us[Fs]=rl.x,Us[Fs+1]=rl.y,Us[Fs+2]=rl.z,rl[Vs]=0,rl[ks]=0,rl[Hs]=0<Ys?1:-1,Ds[Fs]=rl.x,Ds[Fs+1]=rl.y,Ds[Fs+2]=rl.z,Ns[zs]=dl/Zs,Ns[zs+1]=1-al/Js,Fs+=3,zs+=2,$s+=1}for(al=0;al<Js;al++)for(dl=0;dl<Zs;dl++){var ul=Os+dl+Ks*al,yl=Os+dl+Ks*(al+1),xl=Os+(dl+1)+Ks*(al+1),_l=Os+(dl+1)+Ks*al;Is[Bs]=ul,Is[Bs+1]=yl,Is[Bs+2]=_l,Is[Bs+3]=yl,Is[Bs+4]=xl,Is[Bs+5]=_l,Bs+=6,el+=6}Rs.addGroup(Gs,el,Qs),Gs+=el,Os+=$s}Mt.call(this),this.type="BoxBufferGeometry",this.parameters={width:Es,height:Ts,depth:Ss,widthSegments:Ms,heightSegments:ws,depthSegments:As};var Rs=this;Ms=Math.floor(Ms)||1,ws=Math.floor(ws)||1,As=Math.floor(As)||1;var Ps=function(ks,Hs,Ws){var js=0;return js+=2*((ks+1)*(Hs+1)),js+=2*((ks+1)*(Ws+1)),js+=2*((Ws+1)*(Hs+1)),js}(Ms,ws,As),Cs=function(ks,Hs,Ws){var js=0;return js+=2*(ks*Hs),js+=2*(ks*Ws),js+=2*(Ws*Hs),6*js}(Ms,ws,As),Is=new(65535<Cs?Uint32Array:Uint16Array)(Cs),Us=new Float32Array(3*Ps),Ds=new Float32Array(3*Ps),Ns=new Float32Array(2*Ps),Fs=0,zs=0,Bs=0,Os=0,Gs=0;Ls("z","y","x",-1,-1,Ss,Ts,Es,As,ws,0),Ls("z","y","x",1,-1,Ss,Ts,-Es,As,ws,1),Ls("x","z","y",1,1,Es,Ss,Ts,Ms,As,2),Ls("x","z","y",1,-1,Es,Ss,-Ts,Ms,As,3),Ls("x","y","z",1,-1,Es,Ts,Ss,Ms,ws,4),Ls("x","y","z",-1,-1,Es,Ts,-Ss,Ms,ws,5),this.setIndex(new ut(Is,1)),this.addAttribute("position",new ut(Us,3)),this.addAttribute("normal",new ut(Ds,3)),this.addAttribute("uv",new ut(Ns,2))}function Ft(Es,Ts){this.origin=Es===void 0?new D:Es,this.direction=Ts===void 0?new D:Ts}function zt(Es,Ts){this.start=Es===void 0?new D:Es,this.end=Ts===void 0?new D:Ts}function Bt(Es,Ts,Ss){this.a=Es===void 0?new D:Es,this.b=Ts===void 0?new D:Ts,this.c=Ss===void 0?new D:Ss}function Ot(Es){Fe.call(this),this.type="MeshBasicMaterial",this.color=new Oe(16777215),this.map=null,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Cn,this.reflectivity=1,this.refractionRatio=0.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(Es)}function Gt(Es,Ts){vt.call(this),this.type="Mesh",this.geometry=Es===void 0?new Mt:Es,this.material=Ts===void 0?new Ot({color:16777215*Math.random()}):Ts,this.drawMode=ko,this.updateMorphTargets()}function Vt(Es,Ts,Ss,Ms){Mt.call(this),this.type="PlaneBufferGeometry",this.parameters={width:Es,height:Ts,widthSegments:Ss,heightSegments:Ms};for(var ws=Math.floor(Ss)||1,As=Math.floor(Ms)||1,Ls=ws+1,Rs=As+1,Ps=new Float32Array(3*(Ls*Rs)),Cs=new Float32Array(3*(Ls*Rs)),Is=new Float32Array(2*(Ls*Rs)),Us=0,Ds=0,Ns=0;Ns<Rs;Ns++)for(var Fs=Ns*(Ts/As)-Ts/2,zs=0;zs<Ls;zs++){var Bs=zs*(Es/ws)-Es/2;Ps[Us]=Bs,Ps[Us+1]=-Fs,Cs[Us+2]=1,Is[Ds]=zs/ws,Is[Ds+1]=1-Ns/As,Us+=3,Ds+=2}Us=0;for(var Os=new(65535<Ps.length/3?Uint32Array:Uint16Array)(6*(ws*As)),Ns=0;Ns<As;Ns++)for(var zs=0;zs<ws;zs++){var Gs=zs+Ls*Ns,Vs=zs+Ls*(Ns+1),ks=zs+1+Ls*(Ns+1),Hs=zs+1+Ls*Ns;Os[Us]=Gs,Os[Us+1]=Vs,Os[Us+2]=Hs,Os[Us+3]=Vs,Os[Us+4]=ks,Os[Us+5]=Hs,Us+=6}this.setIndex(new ut(Os,1)),this.addAttribute("position",new ut(Ps,3)),this.addAttribute("normal",new ut(Cs,3)),this.addAttribute("uv",new ut(Is,2))}function kt(){vt.call(this),this.type="Camera",this.matrixWorldInverse=new I,this.projectionMatrix=new I}function Ht(Es,Ts,Ss,Ms){kt.call(this),this.type="PerspectiveCamera",this.fov=Es===void 0?50:Es,this.zoom=1,this.near=Ss===void 0?0.1:Ss,this.far=Ms===void 0?2000:Ms,this.focus=10,this.aspect=Ts===void 0?1:Ts,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Wt(Es,Ts,Ss,Ms,ws,As){kt.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=Es,this.right=Ts,this.top=Ss,this.bottom=Ms,this.near=ws===void 0?0.1:ws,this.far=As===void 0?2000:As,this.updateProjectionMatrix()}function jt(Es){function Ts(){return null===Ul?Yl:1}function Ss(Cd,Id,Ud,Dd){!0===_l&&(Cd*=Dd,Id*=Dd,Ud*=Dd),fd.clearColor(Cd,Id,Ud,Dd)}function Ms(){fd.init(),fd.scissor(Bl.copy(Zl).multiplyScalar(Yl)),fd.viewport(Gl.copy(Ql).multiplyScalar(Yl)),Ss(Hl.r,Hl.g,Hl.b,Wl)}function ws(){Il=null,zl=null,Fl="",Nl=-1,fd.reset()}function As(Cd){Cd.preventDefault(),ws(),Ms(),gd.clear()}function Ls(Cd){var Id=Cd.target;Id.removeEventListener("dispose",Ls),Rs(Id)}function Rs(Cd){Ps(Cd),gd.delete(Cd)}function Ps(Cd){var Id=gd.get(Cd).program;Cd.program=void 0,Id!==void 0&&xd.releaseProgram(Id)}function Cs(Cd,Id,Ud,Dd){var Nd;if(Ud&&Ud.isInstancedBufferGeometry&&(Nd=ud.get("ANGLE_instanced_arrays"),null===Nd))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");Dd===void 0&&(Dd=0),fd.initAttributes();var Fd=Ud.attributes,zd=Id.getAttributes(),Bd=Cd.defaultAttributeValues;for(var Od in zd){var Gd=zd[Od];if(0<=Gd){var Vd=Fd[Od];if(Vd!==void 0){var kd=dd.FLOAT,Hd=Vd.array,Wd=Vd.normalized;Hd instanceof Float32Array?kd=dd.FLOAT:Hd instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):Hd instanceof Uint16Array?kd=dd.UNSIGNED_SHORT:Hd instanceof Int16Array?kd=dd.SHORT:Hd instanceof Uint32Array?kd=dd.UNSIGNED_INT:Hd instanceof Int32Array?kd=dd.INT:Hd instanceof Int8Array?kd=dd.BYTE:Hd instanceof Uint8Array&&(kd=dd.UNSIGNED_BYTE);var jd=Vd.itemSize,Xd=yd.getAttributeBuffer(Vd);if(Vd&&Vd.isInterleavedBufferAttribute){var qd=Vd.data,Yd=qd.stride,Zd=Vd.offset;qd&&qd.isInstancedInterleavedBuffer?(fd.enableAttributeAndDivisor(Gd,qd.meshPerAttribute,Nd),Ud.maxInstancedCount===void 0&&(Ud.maxInstancedCount=qd.meshPerAttribute*qd.count)):fd.enableAttribute(Gd),dd.bindBuffer(dd.ARRAY_BUFFER,Xd),dd.vertexAttribPointer(Gd,jd,kd,Wd,Yd*qd.array.BYTES_PER_ELEMENT,(Dd*Yd+Zd)*qd.array.BYTES_PER_ELEMENT)}else Vd&&Vd.isInstancedBufferAttribute?(fd.enableAttributeAndDivisor(Gd,Vd.meshPerAttribute,Nd),void 0===Ud.maxInstancedCount&&(Ud.maxInstancedCount=Vd.meshPerAttribute*Vd.count)):fd.enableAttribute(Gd),dd.bindBuffer(dd.ARRAY_BUFFER,Xd),dd.vertexAttribPointer(Gd,jd,kd,Wd,0,Dd*jd*Vd.array.BYTES_PER_ELEMENT)}else if(Bd!==void 0){var Jd=Bd[Od];if(Jd!==void 0)switch(Jd.length){case 2:dd.vertexAttrib2fv(Gd,Jd);break;case 3:dd.vertexAttrib3fv(Gd,Jd);break;case 4:dd.vertexAttrib4fv(Gd,Jd);break;default:dd.vertexAttrib1fv(Gd,Jd);}}}}fd.disableUnusedAttributes()}function Is(Cd,Id){return Math.abs(Id[0])-Math.abs(Cd[0])}function Us(Cd,Id){if(Cd.object.renderOrder!==Id.object.renderOrder)return Cd.object.renderOrder-Id.object.renderOrder;return Cd.material.program&&Id.material.program&&Cd.material.program!==Id.material.program?Cd.material.program.id-Id.material.program.id:Cd.material.id===Id.material.id?Cd.z===Id.z?Cd.id-Id.id:Cd.z-Id.z:Cd.material.id-Id.material.id}function Ds(Cd,Id){return Cd.object.renderOrder===Id.object.renderOrder?Cd.z===Id.z?Cd.id-Id.id:Id.z-Cd.z:Cd.object.renderOrder-Id.object.renderOrder}function Ns(Cd,Id,Ud,Dd,Nd){var Fd,zd;Ud.transparent?(Fd=wl,zd=++Al):(Fd=Sl,zd=++Ml);var Bd=Fd[zd];Bd===void 0?(Bd={id:Cd.id,object:Cd,geometry:Id,material:Ud,z:od.z,group:Nd},Fd.push(Bd)):(Bd.id=Cd.id,Bd.object=Cd,Bd.geometry=Id,Bd.material=Ud,Bd.z=od.z,Bd.group=Nd)}function Fs(Cd){var Id=Cd.geometry;return null===Id.boundingSphere&&Id.computeBoundingSphere(),rd.copy(Id.boundingSphere).applyMatrix4(Cd.matrixWorld),Bs(rd)}function zs(Cd){return rd.center.set(0,0,0),rd.radius=0.7071067811865476,rd.applyMatrix4(Cd.matrixWorld),Bs(rd)}function Bs(Cd){if(!Kl.intersectsSphere(Cd))return!1;var Id=$l.numPlanes;if(0===Id)return!0;var Ud=Cl.clippingPlanes,Dd=Cd.center,Nd=-Cd.radius,Fd=0;do if(Ud[Fd].distanceToPoint(Dd)<Nd)return!1;while(++Fd!==Id);return!0}function Os(Cd,Id){if(!1!==Cd.visible){var Ud=0!=(Cd.layers.mask&Id.layers.mask);if(Ud)if(Cd.isLight)Tl.push(Cd);else if(Cd.isSprite)(!1===Cd.frustumCulled||!0===zs(Cd))&&Rl.push(Cd);else if(Cd.isLensFlare)Pl.push(Cd);else if(Cd.isImmediateRenderObject)!0===Cl.sortObjects&&(od.setFromMatrixPosition(Cd.matrixWorld),od.applyProjection(nd)),Ns(Cd,null,Cd.material,od.z,null);else if((Cd.isMesh||Cd.isLine||Cd.isPoints)&&(Cd.isSkinnedMesh&&Cd.skeleton.update(),!1===Cd.frustumCulled||!0===Fs(Cd))){var Dd=Cd.material;if(!0===Dd.visible){!0===Cl.sortObjects&&(od.setFromMatrixPosition(Cd.matrixWorld),od.applyProjection(nd));var Nd=yd.update(Cd);if(Dd.isMultiMaterial)for(var Fd=Nd.groups,zd=Dd.materials,Bd=0,Od=Fd.length;Bd<Od;Bd++){var Gd=Fd[Bd],Vd=zd[Gd.materialIndex];!0===Vd.visible&&Ns(Cd,Nd,Vd,od.z,Gd)}else Ns(Cd,Nd,Dd,od.z,null)}}for(var kd=Cd.children,Bd=0,Od=kd.length;Bd<Od;Bd++)Os(kd[Bd],Id)}}function Gs(Cd,Id,Ud,Dd){for(var Nd=0,Fd=Cd.length;Nd<Fd;Nd++){var zd=Cd[Nd],Bd=zd.object,Od=zd.geometry,Gd=void 0===Dd?zd.material:Dd,Vd=zd.group;if(Bd.modelViewMatrix.multiplyMatrices(Id.matrixWorldInverse,Bd.matrixWorld),Bd.normalMatrix.getNormalMatrix(Bd.modelViewMatrix),Bd.isImmediateRenderObject){ks(Gd);var kd=Hs(Id,Ud,Gd,Bd);Fl="",Bd.render(function(Hd){Cl.renderBufferImmediate(Hd,kd,Gd)})}else Cl.renderBufferDirect(Id,Ud,Od,Gd,Bd,Vd)}}function Vs(Cd,Id,Ud){var Dd=gd.get(Cd),Nd=xd.getParameters(Cd,sd,Id,$l.numPlanes,Ud),Fd=xd.getProgramCode(Cd,Nd),zd=Dd.program,Bd=!0;if(zd===void 0)Cd.addEventListener("dispose",Ls);else if(zd.code!==Fd)Ps(Cd);else{if(Nd.shaderID!==void 0)return;Bd=!1}if(Bd){if(Nd.shaderID){var Od=ds[Nd.shaderID];Dd.__webglShader={name:Cd.type,uniforms:A.UniformsUtils.clone(Od.uniforms),vertexShader:Od.vertexShader,fragmentShader:Od.fragmentShader}}else Dd.__webglShader={name:Cd.type,uniforms:Cd.uniforms,vertexShader:Cd.vertexShader,fragmentShader:Cd.fragmentShader};Cd.__webglShader=Dd.__webglShader,zd=xd.acquireProgram(Cd,Nd,Fd),Dd.program=zd,Cd.program=zd}var Gd=zd.getAttributes();if(Cd.morphTargets){Cd.numSupportedMorphTargets=0;for(var Vd=0;Vd<Cl.maxMorphTargets;Vd++)0<=Gd["morphTarget"+Vd]&&Cd.numSupportedMorphTargets++}if(Cd.morphNormals){Cd.numSupportedMorphNormals=0;for(var Vd=0;Vd<Cl.maxMorphNormals;Vd++)0<=Gd["morphNormal"+Vd]&&Cd.numSupportedMorphNormals++}var kd=Dd.__webglShader.uniforms;!Cd.isShaderMaterial&&!Cd.isRawShaderMaterial|!0===Cd.clipping&&(Dd.numClippingPlanes=$l.numPlanes,kd.clippingPlanes=$l.uniform),Dd.fog=Id,Dd.lightsHash=sd.hash,Cd.lights&&(kd.ambientLightColor.value=sd.ambient,kd.directionalLights.value=sd.directional,kd.spotLights.value=sd.spot,kd.pointLights.value=sd.point,kd.hemisphereLights.value=sd.hemi,kd.directionalShadowMap.value=sd.directionalShadowMap,kd.directionalShadowMatrix.value=sd.directionalShadowMatrix,kd.spotShadowMap.value=sd.spotShadowMap,kd.spotShadowMatrix.value=sd.spotShadowMatrix,kd.pointShadowMap.value=sd.pointShadowMap,kd.pointShadowMatrix.value=sd.pointShadowMatrix);var Hd=Dd.program.getUniforms(),Wd=Ce.seqWithValue(Hd.seq,kd);Dd.uniformsList=Wd,Dd.dynamicUniforms=Ce.splitDynamic(Wd,kd)}function ks(Cd){Cd.side===qi?fd.disable(dd.CULL_FACE):fd.enable(dd.CULL_FACE),fd.setFlipSided(Cd.side===Xi),!0===Cd.transparent?fd.setBlending(Cd.blending,Cd.blendEquation,Cd.blendSrc,Cd.blendDst,Cd.blendEquationAlpha,Cd.blendSrcAlpha,Cd.blendDstAlpha,Cd.premultipliedAlpha):fd.setBlending($i),fd.setDepthFunc(Cd.depthFunc),fd.setDepthTest(Cd.depthTest),fd.setDepthWrite(Cd.depthWrite),fd.setColorWrite(Cd.colorWrite),fd.setPolygonOffset(Cd.polygonOffset,Cd.polygonOffsetFactor,Cd.polygonOffsetUnits)}function Hs(Cd,Id,Ud,Dd){Vl=0;var Nd=gd.get(Ud);if(ed&&(td||Cd!==zl)){var Fd=Cd===zl&&Ud.id===Nl;$l.setState(Ud.clippingPlanes,Ud.clipShadows,Cd,Nd,Fd)}!1===Ud.needsUpdate&&(void 0===Nd.program?Ud.needsUpdate=!0:Ud.fog&&Nd.fog!==Id?Ud.needsUpdate=!0:Ud.lights&&Nd.lightsHash!==sd.hash?Ud.needsUpdate=!0:void 0!==Nd.numClippingPlanes&&Nd.numClippingPlanes!==$l.numPlanes&&(Ud.needsUpdate=!0)),Ud.needsUpdate&&(Vs(Ud,Id,Dd),Ud.needsUpdate=!1);var zd=!1,Bd=!1,Od=!1,Gd=Nd.program,Vd=Gd.getUniforms(),kd=Nd.__webglShader.uniforms;if(Gd.id!==Il&&(dd.useProgram(Gd.program),Il=Gd.id,zd=!0,Bd=!0,Od=!0),Ud.id!==Nl&&(Nl=Ud.id,Bd=!0),zd||Cd!==zl){if(Vd.set(dd,Cd,"projectionMatrix"),md.logarithmicDepthBuffer&&Vd.setValue(dd,"logDepthBufFC",2/(Math.log(Cd.far+1)/Math.LN2)),Cd!==zl&&(zl=Cd,Bd=!0,Od=!0),Ud.isShaderMaterial||Ud.isMeshPhongMaterial||Ud.isMeshStandardMaterial||Ud.envMap){var Hd=Vd.map.cameraPosition;void 0!==Hd&&Hd.setValue(dd,od.setFromMatrixPosition(Cd.matrixWorld))}(Ud.isMeshPhongMaterial||Ud.isMeshLambertMaterial||Ud.isMeshBasicMaterial||Ud.isMeshStandardMaterial||Ud.isShaderMaterial||Ud.skinning)&&Vd.setValue(dd,"viewMatrix",Cd.matrixWorldInverse),Vd.set(dd,Cl,"toneMappingExposure"),Vd.set(dd,Cl,"toneMappingWhitePoint")}if(Ud.skinning){Vd.setOptional(dd,Dd,"bindMatrix"),Vd.setOptional(dd,Dd,"bindMatrixInverse");var Wd=Dd.skeleton;Wd&&(md.floatVertexTextures&&Wd.useVertexTexture?(Vd.set(dd,Wd,"boneTexture"),Vd.set(dd,Wd,"boneTextureWidth"),Vd.set(dd,Wd,"boneTextureHeight")):Vd.setOptional(dd,Wd,"boneMatrices"))}Bd&&(Ud.lights&&$s(kd,Od),Id&&Ud.fog&&Ys(kd,Id),(Ud.isMeshBasicMaterial||Ud.isMeshLambertMaterial||Ud.isMeshPhongMaterial||Ud.isMeshStandardMaterial||Ud.isMeshDepthMaterial)&&Ws(kd,Ud),Ud.isLineBasicMaterial?js(kd,Ud):Ud.isLineDashedMaterial?(js(kd,Ud),Xs(kd,Ud)):Ud.isPointsMaterial?qs(kd,Ud):Ud.isMeshLambertMaterial?Zs(kd,Ud):Ud.isMeshPhongMaterial?Js(kd,Ud):Ud.isMeshPhysicalMaterial?Ks(kd,Ud):Ud.isMeshStandardMaterial?Qs(kd,Ud):Ud.isMeshDepthMaterial?Ud.displacementMap&&(kd.displacementMap.value=Ud.displacementMap,kd.displacementScale.value=Ud.displacementScale,kd.displacementBias.value=Ud.displacementBias):Ud.isMeshNormalMaterial&&(kd.opacity.value=Ud.opacity),Ce.upload(dd,Nd.uniformsList,kd,Cl)),Vd.set(dd,Dd,"modelViewMatrix"),Vd.set(dd,Dd,"normalMatrix"),Vd.setValue(dd,"modelMatrix",Dd.matrixWorld);var jd=Nd.dynamicUniforms;return null!==jd&&(Ce.evalDynamic(jd,kd,Dd,Cd),Ce.upload(dd,jd,kd,Cl)),Gd}function Ws(Cd,Id){Cd.opacity.value=Id.opacity,Cd.diffuse.value=Id.color,Id.emissive&&Cd.emissive.value.copy(Id.emissive).multiplyScalar(Id.emissiveIntensity),Cd.map.value=Id.map,Cd.specularMap.value=Id.specularMap,Cd.alphaMap.value=Id.alphaMap,Id.aoMap&&(Cd.aoMap.value=Id.aoMap,Cd.aoMapIntensity.value=Id.aoMapIntensity);var Ud;if(Id.map?Ud=Id.map:Id.specularMap?Ud=Id.specularMap:Id.displacementMap?Ud=Id.displacementMap:Id.normalMap?Ud=Id.normalMap:Id.bumpMap?Ud=Id.bumpMap:Id.roughnessMap?Ud=Id.roughnessMap:Id.metalnessMap?Ud=Id.metalnessMap:Id.alphaMap?Ud=Id.alphaMap:Id.emissiveMap&&(Ud=Id.emissiveMap),void 0!=Ud){Ud.isWebGLRenderTarget&&(Ud=Ud.texture);var Dd=Ud.offset,Nd=Ud.repeat;Cd.offsetRepeat.value.set(Dd.x,Dd.y,Nd.x,Nd.y)}Cd.envMap.value=Id.envMap,Cd.flipEnvMap.value=Id.envMap&&Id.envMap.isCubeTexture?-1:1,Cd.reflectivity.value=Id.reflectivity,Cd.refractionRatio.value=Id.refractionRatio}function js(Cd,Id){Cd.diffuse.value=Id.color,Cd.opacity.value=Id.opacity}function Xs(Cd,Id){Cd.dashSize.value=Id.dashSize,Cd.totalSize.value=Id.dashSize+Id.gapSize,Cd.scale.value=Id.scale}function qs(Cd,Id){if(Cd.diffuse.value=Id.color,Cd.opacity.value=Id.opacity,Cd.size.value=Id.size*Yl,Cd.scale.value=0.5*nl.clientHeight,Cd.map.value=Id.map,null!==Id.map){var Ud=Id.map.offset,Dd=Id.map.repeat;Cd.offsetRepeat.value.set(Ud.x,Ud.y,Dd.x,Dd.y)}}function Ys(Cd,Id){Cd.fogColor.value=Id.color,Id.isFog?(Cd.fogNear.value=Id.near,Cd.fogFar.value=Id.far):Id.isFogExp2&&(Cd.fogDensity.value=Id.density)}function Zs(Cd,Id){Id.lightMap&&(Cd.lightMap.value=Id.lightMap,Cd.lightMapIntensity.value=Id.lightMapIntensity),Id.emissiveMap&&(Cd.emissiveMap.value=Id.emissiveMap)}function Js(Cd,Id){Cd.specular.value=Id.specular,Cd.shininess.value=Math.max(Id.shininess,1e-4),Id.lightMap&&(Cd.lightMap.value=Id.lightMap,Cd.lightMapIntensity.value=Id.lightMapIntensity),Id.emissiveMap&&(Cd.emissiveMap.value=Id.emissiveMap),Id.bumpMap&&(Cd.bumpMap.value=Id.bumpMap,Cd.bumpScale.value=Id.bumpScale),Id.normalMap&&(Cd.normalMap.value=Id.normalMap,Cd.normalScale.value.copy(Id.normalScale)),Id.displacementMap&&(Cd.displacementMap.value=Id.displacementMap,Cd.displacementScale.value=Id.displacementScale,Cd.displacementBias.value=Id.displacementBias)}function Qs(Cd,Id){Cd.roughness.value=Id.roughness,Cd.metalness.value=Id.metalness,Id.roughnessMap&&(Cd.roughnessMap.value=Id.roughnessMap),Id.metalnessMap&&(Cd.metalnessMap.value=Id.metalnessMap),Id.lightMap&&(Cd.lightMap.value=Id.lightMap,Cd.lightMapIntensity.value=Id.lightMapIntensity),Id.emissiveMap&&(Cd.emissiveMap.value=Id.emissiveMap),Id.bumpMap&&(Cd.bumpMap.value=Id.bumpMap,Cd.bumpScale.value=Id.bumpScale),Id.normalMap&&(Cd.normalMap.value=Id.normalMap,Cd.normalScale.value.copy(Id.normalScale)),Id.displacementMap&&(Cd.displacementMap.value=Id.displacementMap,Cd.displacementScale.value=Id.displacementScale,Cd.displacementBias.value=Id.displacementBias),Id.envMap&&(Cd.envMapIntensity.value=Id.envMapIntensity)}function Ks(Cd,Id){Cd.clearCoat.value=Id.clearCoat,Cd.clearCoatRoughness.value=Id.clearCoatRoughness,Qs(Cd,Id)}function $s(Cd,Id){Cd.ambientLightColor.needsUpdate=Id,Cd.directionalLights.needsUpdate=Id,Cd.pointLights.needsUpdate=Id,Cd.spotLights.needsUpdate=Id,Cd.hemisphereLights.needsUpdate=Id}function el(Cd){for(var Id=0,Ud=0,Dd=Cd.length;Ud<Dd;Ud++){var Nd=Cd[Ud];Nd.castShadow&&(sd.shadows[Id++]=Nd)}sd.shadows.length=Id}function rl(Cd,Id){var Fd=0,zd=0,Bd=0,Hd=Id.matrixWorldInverse,Wd=0,jd=0,Xd=0,qd=0,Ud,Dd,Nd,Od,Gd,Vd,kd;for(Ud=0,Dd=Cd.length;Ud<Dd;Ud++)if(Nd=Cd[Ud],Od=Nd.color,Gd=Nd.intensity,Vd=Nd.distance,kd=Nd.shadow&&Nd.shadow.map?Nd.shadow.map.texture:null,Nd.isAmbientLight)Fd+=Od.r*Gd,zd+=Od.g*Gd,Bd+=Od.b*Gd;else if(Nd.isDirectionalLight){var Yd=_d.get(Nd);Yd.color.copy(Nd.color).multiplyScalar(Nd.intensity),Yd.direction.setFromMatrixPosition(Nd.matrixWorld),od.setFromMatrixPosition(Nd.target.matrixWorld),Yd.direction.sub(od),Yd.direction.transformDirection(Hd),Yd.shadow=Nd.castShadow,Nd.castShadow&&(Yd.shadowBias=Nd.shadow.bias,Yd.shadowRadius=Nd.shadow.radius,Yd.shadowMapSize=Nd.shadow.mapSize),sd.directionalShadowMap[Wd]=kd,sd.directionalShadowMatrix[Wd]=Nd.shadow.matrix,sd.directional[Wd++]=Yd}else if(Nd.isSpotLight){var Yd=_d.get(Nd);Yd.position.setFromMatrixPosition(Nd.matrixWorld),Yd.position.applyMatrix4(Hd),Yd.color.copy(Od).multiplyScalar(Gd),Yd.distance=Vd,Yd.direction.setFromMatrixPosition(Nd.matrixWorld),od.setFromMatrixPosition(Nd.target.matrixWorld),Yd.direction.sub(od),Yd.direction.transformDirection(Hd),Yd.coneCos=Math.cos(Nd.angle),Yd.penumbraCos=Math.cos(Nd.angle*(1-Nd.penumbra)),Yd.decay=0===Nd.distance?0:Nd.decay,Yd.shadow=Nd.castShadow,Nd.castShadow&&(Yd.shadowBias=Nd.shadow.bias,Yd.shadowRadius=Nd.shadow.radius,Yd.shadowMapSize=Nd.shadow.mapSize),sd.spotShadowMap[Xd]=kd,sd.spotShadowMatrix[Xd]=Nd.shadow.matrix,sd.spot[Xd++]=Yd}else if(Nd.isPointLight){var Yd=_d.get(Nd);Yd.position.setFromMatrixPosition(Nd.matrixWorld),Yd.position.applyMatrix4(Hd),Yd.color.copy(Nd.color).multiplyScalar(Nd.intensity),Yd.distance=Nd.distance,Yd.decay=0===Nd.distance?0:Nd.decay,Yd.shadow=Nd.castShadow,Nd.castShadow&&(Yd.shadowBias=Nd.shadow.bias,Yd.shadowRadius=Nd.shadow.radius,Yd.shadowMapSize=Nd.shadow.mapSize),sd.pointShadowMap[jd]=kd,void 0===sd.pointShadowMatrix[jd]&&(sd.pointShadowMatrix[jd]=new I),od.setFromMatrixPosition(Nd.matrixWorld).negate(),sd.pointShadowMatrix[jd].identity().setPosition(od),sd.point[jd++]=Yd}else if(Nd.isHemisphereLight){var Yd=_d.get(Nd);Yd.direction.setFromMatrixPosition(Nd.matrixWorld),Yd.direction.transformDirection(Hd),Yd.direction.normalize(),Yd.skyColor.copy(Nd.color).multiplyScalar(Gd),Yd.groundColor.copy(Nd.groundColor).multiplyScalar(Gd),sd.hemi[qd++]=Yd}sd.ambient[0]=Fd,sd.ambient[1]=zd,sd.ambient[2]=Bd,sd.directional.length=Wd,sd.spot.length=Xd,sd.point.length=jd,sd.hemi.length=qd,sd.hash=Wd+","+jd+","+Xd+","+qd+","+sd.shadows.length}function al(Cd){var Id;if(Cd===qn)return dd.REPEAT;if(Cd===Yn)return dd.CLAMP_TO_EDGE;if(Cd===Zn)return dd.MIRRORED_REPEAT;if(Cd===Jn)return dd.NEAREST;if(Cd===Qn)return dd.NEAREST_MIPMAP_NEAREST;if(Cd===Kn)return dd.NEAREST_MIPMAP_LINEAR;if(Cd===$n)return dd.LINEAR;if(Cd===eo)return dd.LINEAR_MIPMAP_NEAREST;if(Cd===ro)return dd.LINEAR_MIPMAP_LINEAR;if(Cd===ao)return dd.UNSIGNED_BYTE;if(Cd===uo)return dd.UNSIGNED_SHORT_4_4_4_4;if(Cd===mo)return dd.UNSIGNED_SHORT_5_5_5_1;if(Cd===fo)return dd.UNSIGNED_SHORT_5_6_5;if(Cd===io)return dd.BYTE;if(Cd===no)return dd.SHORT;if(Cd===oo)return dd.UNSIGNED_SHORT;if(Cd===so)return dd.INT;if(Cd===lo)return dd.UNSIGNED_INT;if(Cd===po)return dd.FLOAT;if(Id=ud.get("OES_texture_half_float"),null!==Id&&Cd===co)return Id.HALF_FLOAT_OES;if(Cd===yo)return dd.ALPHA;if(Cd===xo)return dd.RGB;if(Cd===_o)return dd.RGBA;if(Cd===vo)return dd.LUMINANCE;if(Cd===bo)return dd.LUMINANCE_ALPHA;if(Cd===Eo)return dd.DEPTH_COMPONENT;if(Cd===To)return dd.DEPTH_STENCIL;if(Cd===on)return dd.FUNC_ADD;if(Cd===sn)return dd.FUNC_SUBTRACT;if(Cd===ln)return dd.FUNC_REVERSE_SUBTRACT;if(Cd===cn)return dd.ZERO;if(Cd===un)return dd.ONE;if(Cd===mn)return dd.SRC_COLOR;if(Cd===gn)return dd.ONE_MINUS_SRC_COLOR;if(Cd===hn)return dd.SRC_ALPHA;if(Cd===yn)return dd.ONE_MINUS_SRC_ALPHA;if(Cd===xn)return dd.DST_ALPHA;if(Cd===_n)return dd.ONE_MINUS_DST_ALPHA;if(Cd===vn)return dd.DST_COLOR;if(Cd===bn)return dd.ONE_MINUS_DST_COLOR;if(Cd===En)return dd.SRC_ALPHA_SATURATE;if(Id=ud.get("WEBGL_compressed_texture_s3tc"),null!==Id){if(Cd===So)return Id.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Cd===Mo)return Id.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Cd===wo)return Id.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Cd===Ao)return Id.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(Id=ud.get("WEBGL_compressed_texture_pvrtc"),null!==Id){if(Cd===Lo)return Id.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Cd===Ro)return Id.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Cd===Po)return Id.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Cd===Co)return Id.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(Id=ud.get("WEBGL_compressed_texture_etc1"),null!==Id&&Cd===Io)return Id.COMPRESSED_RGB_ETC1_WEBGL;if(Id=ud.get("EXT_blend_minmax"),null!==Id){if(Cd===dn)return Id.MIN_EXT;if(Cd===pn)return Id.MAX_EXT}return Id=ud.get("WEBGL_depth_texture"),null!==Id&&Cd===go?Id.UNSIGNED_INT_24_8_WEBGL:0}console.log("THREE.WebGLRenderer",Bi),Es=Es||{};var nl=Es.canvas===void 0?document.createElementNS("http://www.w3.org/1999/xhtml","canvas"):Es.canvas,dl=Es.context===void 0?null:Es.context,cl=Es.alpha!==void 0&&Es.alpha,ul=!(Es.depth!==void 0)||Es.depth,yl=!(Es.stencil!==void 0)||Es.stencil,xl=Es.antialias!==void 0&&Es.antialias,_l=!(Es.premultipliedAlpha!==void 0)||Es.premultipliedAlpha,El=Es.preserveDrawingBuffer!==void 0&&Es.preserveDrawingBuffer,Tl=[],Sl=[],Ml=-1,wl=[],Al=-1,Ll=new Float32Array(8),Rl=[],Pl=[];this.domElement=nl,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Nn,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Cl=this,Il=null,Ul=null,Dl=null,Nl=-1,Fl="",zl=null,Bl=new Ue,Ol=null,Gl=new Ue,Vl=0,Hl=new Oe(0),Wl=0,Xl=nl.width,ql=nl.height,Yl=1,Zl=new Ue(0,0,Xl,ql),Jl=!1,Ql=new Ue(0,0,Xl,ql),Kl=new je,$l=new It,ed=!1,td=!1,rd=new ke,nd=new I,od=new D,sd={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},ld={calls:0,vertices:0,faces:0,points:0};this.info={render:ld,memory:{geometries:0,textures:0},programs:null};var dd;try{var cd={alpha:cl,depth:ul,stencil:yl,antialias:xl,premultipliedAlpha:_l,preserveDrawingBuffer:El};if(dd=dl||nl.getContext("webgl",cd)||nl.getContext("experimental-webgl",cd),null===dd)if(null!==nl.getContext("webgl"))throw"Error creating WebGL context with your selected attributes.";else throw"Error creating WebGL context.";void 0===dd.getShaderPrecisionFormat&&(dd.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),nl.addEventListener("webglcontextlost",As,!1)}catch(Cd){console.error("THREE.WebGLRenderer: "+Cd)}var ud=new Pt(dd);ud.get("WEBGL_depth_texture"),ud.get("OES_texture_float"),ud.get("OES_texture_float_linear"),ud.get("OES_texture_half_float"),ud.get("OES_texture_half_float_linear"),ud.get("OES_standard_derivatives"),ud.get("ANGLE_instanced_arrays"),ud.get("OES_element_index_uint")&&(Mt.MaxIndex=4294967296);var md=new Rt(dd,ud,Es),fd=new De(dd,ud,al),gd=new Ze,hd=new Ie(dd,ud,fd,gd,md,al,this.info),yd=new At(dd,gd,this.info),xd=new ct(this,md),_d=new Lt;this.info.programs=xd.programs;var vd=new Ut(dd,ud,ld),Ed=new Ct(dd,ud,ld),Td=new Wt(-1,1,1,-1,0,1),Sd=new Ht,Md=new Gt(new Vt(2,2),new Ot({depthTest:!1,depthWrite:!1,fog:!1})),wd=ds.cube,Ad=new Gt(new Nt(5,5,5),new Be({uniforms:wd.uniforms,vertexShader:wd.vertexShader,fragmentShader:wd.fragmentShader,side:Xi,depthTest:!1,depthWrite:!1,fog:!1}));Ms(),this.context=dd,this.capabilities=md,this.extensions=ud,this.properties=gd,this.state=fd;var Ld=new Xe(this,sd,yd,md);this.shadowMap=Ld;var Rd=new F(this,Rl),Pd=new G(this,Pl);this.getContext=function(){return dd},this.getContextAttributes=function(){return dd.getContextAttributes()},this.forceContextLoss=function(){ud.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return md.getMaxAnisotropy()},this.getPrecision=function(){return md.precision},this.getPixelRatio=function(){return Yl},this.setPixelRatio=function(Cd){Cd===void 0||(Yl=Cd,this.setSize(Ql.z,Ql.w,!1))},this.getSize=function(){return{width:Xl,height:ql}},this.setSize=function(Cd,Id,Ud){Xl=Cd,ql=Id,nl.width=Cd*Yl,nl.height=Id*Yl,!1!==Ud&&(nl.style.width=Cd+"px",nl.style.height=Id+"px"),this.setViewport(0,0,Cd,Id)},this.setViewport=function(Cd,Id,Ud,Dd){fd.viewport(Ql.set(Cd,Id,Ud,Dd))},this.setScissor=function(Cd,Id,Ud,Dd){fd.scissor(Zl.set(Cd,Id,Ud,Dd))},this.setScissorTest=function(Cd){fd.setScissorTest(Jl=Cd)},this.getClearColor=function(){return Hl},this.setClearColor=function(Cd,Id){Hl.set(Cd),Wl=Id===void 0?1:Id,Ss(Hl.r,Hl.g,Hl.b,Wl)},this.getClearAlpha=function(){return Wl},this.setClearAlpha=function(Cd){Wl=Cd,Ss(Hl.r,Hl.g,Hl.b,Wl)},this.clear=function(Cd,Id,Ud){var Dd=0;(Cd===void 0||Cd)&&(Dd|=dd.COLOR_BUFFER_BIT),(Id===void 0||Id)&&(Dd|=dd.DEPTH_BUFFER_BIT),(Ud===void 0||Ud)&&(Dd|=dd.STENCIL_BUFFER_BIT),dd.clear(Dd)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(Cd,Id,Ud,Dd){this.setRenderTarget(Cd),this.clear(Id,Ud,Dd)},this.resetGLState=ws,this.dispose=function(){wl=[],Al=-1,Sl=[],Ml=-1,nl.removeEventListener("webglcontextlost",As,!1)},this.renderBufferImmediate=function(Cd,Id,Ud){fd.initAttributes();var Dd=gd.get(Cd);Cd.hasPositions&&!Dd.position&&(Dd.position=dd.createBuffer()),Cd.hasNormals&&!Dd.normal&&(Dd.normal=dd.createBuffer()),Cd.hasUvs&&!Dd.uv&&(Dd.uv=dd.createBuffer()),Cd.hasColors&&!Dd.color&&(Dd.color=dd.createBuffer());var Nd=Id.getAttributes();if(Cd.hasPositions&&(dd.bindBuffer(dd.ARRAY_BUFFER,Dd.position),dd.bufferData(dd.ARRAY_BUFFER,Cd.positionArray,dd.DYNAMIC_DRAW),fd.enableAttribute(Nd.position),dd.vertexAttribPointer(Nd.position,3,dd.FLOAT,!1,0,0)),Cd.hasNormals){if(dd.bindBuffer(dd.ARRAY_BUFFER,Dd.normal),!Ud.isMeshPhongMaterial&&!Ud.isMeshStandardMaterial&&Ud.shading===Yi)for(var Fd=0,zd=3*Cd.count;Fd<zd;Fd+=9){var Bd=Cd.normalArray,Od=(Bd[Fd+0]+Bd[Fd+3]+Bd[Fd+6])/3,Gd=(Bd[Fd+1]+Bd[Fd+4]+Bd[Fd+7])/3,Vd=(Bd[Fd+2]+Bd[Fd+5]+Bd[Fd+8])/3;Bd[Fd+0]=Od,Bd[Fd+1]=Gd,Bd[Fd+2]=Vd,Bd[Fd+3]=Od,Bd[Fd+4]=Gd,Bd[Fd+5]=Vd,Bd[Fd+6]=Od,Bd[Fd+7]=Gd,Bd[Fd+8]=Vd}dd.bufferData(dd.ARRAY_BUFFER,Cd.normalArray,dd.DYNAMIC_DRAW),fd.enableAttribute(Nd.normal),dd.vertexAttribPointer(Nd.normal,3,dd.FLOAT,!1,0,0)}Cd.hasUvs&&Ud.map&&(dd.bindBuffer(dd.ARRAY_BUFFER,Dd.uv),dd.bufferData(dd.ARRAY_BUFFER,Cd.uvArray,dd.DYNAMIC_DRAW),fd.enableAttribute(Nd.uv),dd.vertexAttribPointer(Nd.uv,2,dd.FLOAT,!1,0,0)),Cd.hasColors&&Ud.vertexColors!==Ji&&(dd.bindBuffer(dd.ARRAY_BUFFER,Dd.color),dd.bufferData(dd.ARRAY_BUFFER,Cd.colorArray,dd.DYNAMIC_DRAW),fd.enableAttribute(Nd.color),dd.vertexAttribPointer(Nd.color,3,dd.FLOAT,!1,0,0)),fd.disableUnusedAttributes(),dd.drawArrays(dd.TRIANGLES,0,Cd.count),Cd.count=0},this.renderBufferDirect=function(Cd,Id,Ud,Dd,Nd,Fd){ks(Dd);var zd=Hs(Cd,Id,Dd,Nd),Bd=!1,Od=Ud.id+"_"+zd.id+"_"+Dd.wireframe;Od!=Fl&&(Fl=Od,Bd=!0);var Gd=Nd.morphTargetInfluences;if(Gd!==void 0){for(var Vd=[],kd=0,Hd=Gd.length;kd<Hd;kd++){var Wd=Gd[kd];Vd.push([Wd,kd])}Vd.sort(Is),8<Vd.length&&(Vd.length=8);for(var jd=Ud.morphAttributes,kd=0,Hd=Vd.length;kd<Hd;kd++){var Wd=Vd[kd];if(Ll[kd]=Wd[0],0!==Wd[0]){var Xd=Wd[1];!0===Dd.morphTargets&&jd.position&&Ud.addAttribute("morphTarget"+kd,jd.position[Xd]),!0===Dd.morphNormals&&jd.normal&&Ud.addAttribute("morphNormal"+kd,jd.normal[Xd])}else!0===Dd.morphTargets&&Ud.removeAttribute("morphTarget"+kd),!0===Dd.morphNormals&&Ud.removeAttribute("morphNormal"+kd)}zd.getUniforms().setValue(dd,"morphTargetInfluences",Ll),Bd=!0}var Xd=Ud.index,qd=Ud.attributes.position;!0===Dd.wireframe&&(Xd=yd.getWireframeAttribute(Ud));var Yd;null===Xd?Yd=vd:(Yd=Ed,Yd.setIndex(Xd)),Bd&&(Cs(Dd,zd,Ud),null!==Xd&&dd.bindBuffer(dd.ELEMENT_ARRAY_BUFFER,yd.getAttributeBuffer(Xd)));var Zd=0,Jd=1/0;null===Xd?qd!==void 0&&(Jd=qd.count):Jd=Xd.count;var Qd=Ud.drawRange.start,Kd=Ud.drawRange.count,$d=null===Fd?0:Fd.start,ep=null===Fd?1/0:Fd.count,tp=Math.max(Zd,Qd,$d),rp=Math.min(Zd+Jd,Qd+Kd,$d+ep)-1,ap=Math.max(0,rp-tp+1);if(Nd.isMesh){if(!0===Dd.wireframe)fd.setLineWidth(Dd.wireframeLinewidth*Ts()),Yd.setMode(dd.LINES);else switch(Nd.drawMode){case ko:Yd.setMode(dd.TRIANGLES);break;case Ho:Yd.setMode(dd.TRIANGLE_STRIP);break;case Wo:Yd.setMode(dd.TRIANGLE_FAN);}}else if(Nd.isLine){var np=Dd.linewidth;np===void 0&&(np=1),fd.setLineWidth(np*Ts()),Nd.isLineSegments?Yd.setMode(dd.LINES):Yd.setMode(dd.LINE_STRIP)}else Nd.isPoints&&Yd.setMode(dd.POINTS);Ud&&Ud.isInstancedBufferGeometry?0<Ud.maxInstancedCount&&Yd.renderInstances(Ud,tp,ap):Yd.render(tp,ap)},this.render=function(Cd,Id,Ud,Dd){if(!1===(Id&&Id.isCamera))return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");var Nd=Cd.fog;Fl="",Nl=-1,zl=null,!0===Cd.autoUpdate&&Cd.updateMatrixWorld(),null===Id.parent&&Id.updateMatrixWorld(),Id.matrixWorldInverse.getInverse(Id.matrixWorld),nd.multiplyMatrices(Id.projectionMatrix,Id.matrixWorldInverse),Kl.setFromMatrix(nd),Tl.length=0,Ml=-1,Al=-1,Rl.length=0,Pl.length=0,td=this.localClippingEnabled,ed=$l.init(this.clippingPlanes,td,Id),Os(Cd,Id),Sl.length=Ml+1,wl.length=Al+1,!0===Cl.sortObjects&&(Sl.sort(Us),wl.sort(Ds)),ed&&$l.beginShadows(),el(Tl),Ld.render(Cd,Id),rl(Tl,Id),ed&&$l.endShadows(),ld.calls=0,ld.vertices=0,ld.faces=0,ld.points=0,void 0===Ud&&(Ud=null),this.setRenderTarget(Ud);var Fd=Cd.background;if(null===Fd?Ss(Hl.r,Hl.g,Hl.b,Wl):Fd&&Fd.isColor&&(Ss(Fd.r,Fd.g,Fd.b,1),Dd=!0),(this.autoClear||Dd)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),Fd&&Fd.isCubeTexture?(Sd.projectionMatrix.copy(Id.projectionMatrix),Sd.matrixWorld.extractRotation(Id.matrixWorld),Sd.matrixWorldInverse.getInverse(Sd.matrixWorld),Ad.material.uniforms.tCube.value=Fd,Ad.modelViewMatrix.multiplyMatrices(Sd.matrixWorldInverse,Ad.matrixWorld),yd.update(Ad),Cl.renderBufferDirect(Sd,null,Ad.geometry,Ad.material,Ad,null)):Fd&&Fd.isTexture&&(Md.material.map=Fd,yd.update(Md),Cl.renderBufferDirect(Td,null,Md.geometry,Md.material,Md,null)),Cd.overrideMaterial){var zd=Cd.overrideMaterial;Gs(Sl,Id,Nd,zd),Gs(wl,Id,Nd,zd)}else fd.setBlending($i),Gs(Sl,Id,Nd),Gs(wl,Id,Nd);Rd.render(Cd,Id),Pd.render(Cd,Id,Gl),Ud&&hd.updateRenderTargetMipmap(Ud),fd.setDepthTest(!0),fd.setDepthWrite(!0),fd.setColorWrite(!0)},this.setFaceCulling=function(Cd,Id){fd.setCullFace(Cd),fd.setFlipSided(Id===ki)},this.allocTextureUnit=function(){var Id=Vl;return Id>=md.maxTextures&&console.warn("WebGLRenderer: trying to use "+Id+" texture units while this GPU supports only "+md.maxTextures),Vl+=1,Id},this.setTexture2D=function(){var Cd=!1;return function(Ud,Dd){Ud&&Ud.isWebGLRenderTarget&&(!Cd&&(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),Cd=!0),Ud=Ud.texture),hd.setTexture2D(Ud,Dd)}}(),this.setTexture=function(){var Cd=!1;return function(Ud,Dd){Cd||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),Cd=!0),hd.setTexture2D(Ud,Dd)}}(),this.setTextureCube=function(){var Cd=!1;return function(Ud,Dd){Ud&&Ud.isWebGLRenderTargetCube&&(!Cd&&(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Cd=!0),Ud=Ud.texture),Ud&&Ud.isCubeTexture||Array.isArray(Ud.image)&&6===Ud.image.length?hd.setTextureCube(Ud,Dd):hd.setTextureCubeDynamic(Ud,Dd)}}(),this.getCurrentRenderTarget=function(){return Ul},this.setRenderTarget=function(Cd){Ul=Cd,Cd&&void 0===gd.get(Cd).__webglFramebuffer&&hd.setupRenderTarget(Cd);var Id=Cd&&Cd.isWebGLRenderTargetCube,Ud;if(Cd){var Dd=gd.get(Cd);Ud=Id?Dd.__webglFramebuffer[Cd.activeCubeFace]:Dd.__webglFramebuffer,Bl.copy(Cd.scissor),Ol=Cd.scissorTest,Gl.copy(Cd.viewport)}else Ud=null,Bl.copy(Zl).multiplyScalar(Yl),Ol=Jl,Gl.copy(Ql).multiplyScalar(Yl);if(Dl!==Ud&&(dd.bindFramebuffer(dd.FRAMEBUFFER,Ud),Dl=Ud),fd.scissor(Bl),fd.setScissorTest(Ol),fd.viewport(Gl),Id){var Nd=gd.get(Cd.texture);dd.framebufferTexture2D(dd.FRAMEBUFFER,dd.COLOR_ATTACHMENT0,dd.TEXTURE_CUBE_MAP_POSITIVE_X+Cd.activeCubeFace,Nd.__webglTexture,Cd.activeMipMapLevel)}},this.readRenderTargetPixels=function(Cd,Id,Ud,Dd,Nd,Fd){if(!1===(Cd&&Cd.isWebGLRenderTarget))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var zd=gd.get(Cd).__webglFramebuffer;if(zd){var Bd=!1;zd!==Dl&&(dd.bindFramebuffer(dd.FRAMEBUFFER,zd),Bd=!0);try{var Od=Cd.texture,Gd=Od.format,Vd=Od.type;if(Gd!==_o&&al(Gd)!==dd.getParameter(dd.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(Vd!==ao&&al(Vd)!==dd.getParameter(dd.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Vd===po&&(ud.get("OES_texture_float")||ud.get("WEBGL_color_buffer_float")))&&!(Vd===co&&ud.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");dd.checkFramebufferStatus(dd.FRAMEBUFFER)===dd.FRAMEBUFFER_COMPLETE?0<=Id&&Id<=Cd.width-Dd&&0<=Ud&&Ud<=Cd.height-Nd&&dd.readPixels(Id,Ud,Dd,Nd,al(Gd),al(Vd),Fd):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{Bd&&dd.bindFramebuffer(dd.FRAMEBUFFER,Dl)}}}}function Xt(Es,Ts){this.name="",this.color=new Oe(Es),this.density=Ts===void 0?0.00025:Ts}function qt(Es,Ts,Ss){this.name="",this.color=new Oe(Es),this.near=Ts===void 0?1:Ts,this.far=Ss===void 0?1000:Ss}function Yt(){vt.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Zt(Es,Ts,Ss,Ms,ws){vt.call(this),this.lensFlares=[],this.positionScreen=new D,this.customUpdateCallback=void 0,Es!==void 0&&this.add(Es,Ts,Ss,Ms,ws)}function Jt(Es){Fe.call(this),this.type="SpriteMaterial",this.color=new Oe(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(Es)}function Qt(Es){vt.call(this),this.type="Sprite",this.material=Es===void 0?new Jt:Es}function Kt(){vt.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function $t(Es,Ts,Ss,Ms,ws,As,Ls,Rs,Ps,Cs,Is,Us){P.call(this,null,As,Ls,Rs,Ps,Cs,Ms,ws,Is,Us),this.image={data:Es,width:Ts,height:Ss},this.magFilter=Ps===void 0?Jn:Ps,this.minFilter=Cs===void 0?Jn:Cs,this.flipY=!1,this.generateMipmaps=!1}function er(Es,Ts,Ss){if(this.useVertexTexture=void 0===Ss||Ss,this.identityMatrix=new I,Es=Es||[],this.bones=Es.slice(0),this.useVertexTexture){var Ms=Math.sqrt(4*this.bones.length);Ms=A.Math.nextPowerOfTwo(Math.ceil(Ms)),Ms=Math.max(Ms,4),this.boneTextureWidth=Ms,this.boneTextureHeight=Ms,this.boneMatrices=new Float32Array(4*(this.boneTextureWidth*this.boneTextureHeight)),this.boneTexture=new $t(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,_o,po)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===Ts)this.calculateInverses();else if(this.bones.length===Ts.length)this.boneInverses=Ts.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var ws=0,As=this.bones.length;ws<As;ws++)this.boneInverses.push(new I)}}function tr(Es){vt.call(this),this.type="Bone",this.skin=Es}function rr(Es,Ts,Ss){Gt.call(this,Es,Ts),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new I,this.bindMatrixInverse=new I;var Ms=[];if(this.geometry&&this.geometry.bones!==void 0){for(var Ls=0,Rs=this.geometry.bones.length,ws,As;Ls<Rs;++Ls)As=this.geometry.bones[Ls],ws=new tr(this),Ms.push(ws),ws.name=As.name,ws.position.fromArray(As.pos),ws.quaternion.fromArray(As.rotq),void 0!==As.scl&&ws.scale.fromArray(As.scl);for(var Ls=0,Rs=this.geometry.bones.length;Ls<Rs;++Ls)As=this.geometry.bones[Ls],-1!==As.parent&&null!==As.parent&&void 0!==Ms[As.parent]?Ms[As.parent].add(Ms[Ls]):this.add(Ms[Ls])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new er(Ms,void 0,Ss),this.matrixWorld)}function ar(Es){Fe.call(this),this.type="LineBasicMaterial",this.color=new Oe(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(Es)}function ir(Es,Ts,Ss){return 1===Ss?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new nr(Es,Ts)):void(vt.call(this),this.type="Line",this.geometry=Es===void 0?new Mt:Es,this.material=Ts===void 0?new ar({color:16777215*Math.random()}):Ts)}function nr(Es,Ts){ir.call(this,Es,Ts),this.type="LineSegments"}function or(Es){Fe.call(this),this.type="PointsMaterial",this.color=new Oe(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(Es)}function sr(Es,Ts){vt.call(this),this.type="Points",this.geometry=Es===void 0?new Mt:Es,this.material=Ts===void 0?new or({color:16777215*Math.random()}):Ts}function lr(){vt.call(this),this.type="Group"}function dr(Es,Ts,Ss,Ms,ws,As,Ls,Rs,Ps){function Cs(){requestAnimationFrame(Cs),Es.readyState>=Es.HAVE_CURRENT_DATA&&(Is.needsUpdate=!0)}P.call(this,Es,Ts,Ss,Ms,ws,As,Ls,Rs,Ps),this.generateMipmaps=!1;var Is=this;Cs()}function pr(Es,Ts,Ss,Ms,ws,As,Ls,Rs,Ps,Cs,Is,Us){P.call(this,null,As,Ls,Rs,Ps,Cs,Ms,ws,Is,Us),this.image={width:Ts,height:Ss},this.mipmaps=Es,this.flipY=!1,this.generateMipmaps=!1}function cr(Es,Ts,Ss,Ms,ws,As,Ls,Rs,Ps){P.call(this,Es,Ts,Ss,Ms,ws,As,Ls,Rs,Ps),this.needsUpdate=!0}function ur(Es,Ts,Ss,Ms,ws,As,Ls,Rs,Ps,Cs){if(Cs=void 0===Cs?Eo:Cs,Cs!==Eo&&Cs!==To)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");P.call(this,null,Ms,ws,As,Ls,Rs,Cs,Ss,Ps),this.image={width:Es,height:Ts},this.type=void 0===Ss?oo:Ss,this.magFilter=void 0===Ls?Jn:Ls,this.minFilter=void 0===Rs?Jn:Rs,this.flipY=!1,this.generateMipmaps=!1}function mr(){Be.call(this,{uniforms:A.UniformsUtils.merge([ls.lights,{opacity:{value:1}}]),vertexShader:ss.shadow_vert,fragmentShader:ss.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(Es){this.uniforms.opacity.value=Es}}})}function fr(Es){Be.call(this,Es),this.type="RawShaderMaterial"}function gr(Es){this.uuid=A.Math.generateUUID(),this.type="MultiMaterial",this.materials=Es instanceof Array?Es:[],this.visible=!0}function hr(Es){Fe.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Oe(16777215),this.roughness=0.5,this.metalness=0.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new R(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=0.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(Es)}function yr(Es){hr.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=0.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(Es)}function xr(Es){Fe.call(this),this.type="MeshPhongMaterial",this.color=new Oe(16777215),this.specular=new Oe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new R(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Cn,this.reflectivity=1,this.refractionRatio=0.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(Es)}function _r(Es){Fe.call(this,Es),this.type="MeshNormalMaterial",this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.morphTargets=!1,this.setValues(Es)}function vr(Es){Fe.call(this),this.type="MeshLambertMaterial",this.color=new Oe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Cn,this.reflectivity=1,this.refractionRatio=0.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(Es)}function br(Es){Fe.call(this),this.type="LineDashedMaterial",this.color=new Oe(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(Es)}function Er(Es,Ts,Ss){var Ms=this,ws=!1,As=0,Ls=0;this.onStart=void 0,this.onLoad=Es,this.onProgress=Ts,this.onError=Ss,this.itemStart=function(Rs){Ls++,!1==ws&&Ms.onStart!==void 0&&Ms.onStart(Rs,As,Ls),ws=!0},this.itemEnd=function(Rs){As++,Ms.onProgress!==void 0&&Ms.onProgress(Rs,As,Ls),As==Ls&&(ws=!1,Ms.onLoad!==void 0&&Ms.onLoad())},this.itemError=function(Rs){Ms.onError!==void 0&&Ms.onError(Rs)}}function Tr(Es){this.manager=Es===void 0?A.DefaultLoadingManager:Es}function Sr(Es){this.manager=Es===void 0?A.DefaultLoadingManager:Es,this._parser=null}function Mr(Es){this.manager=Es===void 0?A.DefaultLoadingManager:Es,this._parser=null}function wr(Es){this.manager=Es===void 0?A.DefaultLoadingManager:Es}function Ar(Es){this.manager=Es===void 0?A.DefaultLoadingManager:Es}function Lr(Es){this.manager=Es===void 0?A.DefaultLoadingManager:Es}function Rr(Es,Ts){vt.call(this),this.type="Light",this.color=new Oe(Es),this.intensity=Ts===void 0?1:Ts,this.receiveShadow=void 0}function Pr(Es,Ts,Ss){Rr.call(this,Es,Ss),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(vt.DefaultUp),this.updateMatrix(),this.groundColor=new Oe(Ts)}function Cr(Es){this.camera=Es,this.bias=0,this.radius=1,this.mapSize=new R(512,512),this.map=null,this.matrix=new I}function Ir(){Cr.call(this,new Ht(50,1,0.5,500))}function Ur(Es,Ts,Ss,Ms,ws,As){Rr.call(this,Es,Ts),this.type="SpotLight",this.position.copy(vt.DefaultUp),this.updateMatrix(),this.target=new vt,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(Ls){this.intensity=Ls/Math.PI}}),this.distance=Ss===void 0?0:Ss,this.angle=Ms===void 0?Math.PI/3:Ms,this.penumbra=ws===void 0?0:ws,this.decay=As===void 0?1:As,this.shadow=new Ir}function Dr(Es,Ts,Ss,Ms){Rr.call(this,Es,Ts),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(ws){this.intensity=ws/(4*Math.PI)}}),this.distance=Ss===void 0?0:Ss,this.decay=Ms===void 0?1:Ms,this.shadow=new Cr(new Ht(90,1,0.5,500))}function Nr(Es){Cr.call(this,new Wt(-5,5,5,-5,0.5,500))}function Fr(Es,Ts){Rr.call(this,Es,Ts),this.type="DirectionalLight",this.position.copy(vt.DefaultUp),this.updateMatrix(),this.target=new vt,this.shadow=new Nr}function zr(Es,Ts){Rr.call(this,Es,Ts),this.type="AmbientLight",this.castShadow=void 0}function Br(Es,Ts,Ss,Ms){this.parameterPositions=Es,this._cachedIndex=0,this.resultBuffer=Ms===void 0?new Ts.constructor(Ss):Ms,this.sampleValues=Ts,this.valueSize=Ss}function Or(Es,Ts,Ss,Ms){Br.call(this,Es,Ts,Ss,Ms),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Gr(Es,Ts,Ss,Ms){Br.call(this,Es,Ts,Ss,Ms)}function Vr(Es,Ts,Ss,Ms){Br.call(this,Es,Ts,Ss,Ms)}function kr(Es,Ts,Ss,Ms){if(Es===void 0)throw new Error("track name is undefined");if(void 0===Ts||0===Ts.length)throw new Error("no keyframes in track named "+Es);this.name=Es,this.times=A.AnimationUtils.convertArray(Ts,this.TimeBufferType),this.values=A.AnimationUtils.convertArray(Ss,this.ValueBufferType),this.setInterpolation(Ms||this.DefaultInterpolation),this.validate(),this.optimize()}function Hr(Es,Ts,Ss,Ms){kr.call(this,Es,Ts,Ss,Ms)}function Wr(Es,Ts,Ss,Ms){Br.call(this,Es,Ts,Ss,Ms)}function jr(Es,Ts,Ss,Ms){kr.call(this,Es,Ts,Ss,Ms)}function Xr(Es,Ts,Ss,Ms){kr.call(this,Es,Ts,Ss,Ms)}function qr(Es,Ts,Ss,Ms){kr.call(this,Es,Ts,Ss,Ms)}function Yr(Es,Ts,Ss){kr.call(this,Es,Ts,Ss)}function Zr(Es,Ts,Ss,Ms){kr.call(this,Es,Ts,Ss,Ms)}function Jr(Es,Ts,Ss,Ms){kr.apply(this,arguments)}function Qr(Es,Ts,Ss){this.name=Es,this.tracks=Ss,this.duration=Ts===void 0?-1:Ts,this.uuid=A.Math.generateUUID(),0>this.duration&&this.resetDuration(),this.trim(),this.optimize()}function Kr(Es){this.manager=Es===void 0?A.DefaultLoadingManager:Es,this.textures={}}function $r(Es){this.manager=Es===void 0?A.DefaultLoadingManager:Es}function ea(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function ta(Es){"boolean"==typeof Es&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),Es=void 0),this.manager=Es===void 0?A.DefaultLoadingManager:Es,this.withCredentials=!1}function ra(Es){this.manager=Es===void 0?A.DefaultLoadingManager:Es,this.texturePath=""}function aa(){}function ia(Es,Ts){this.v1=Es,this.v2=Ts}function na(){this.curves=[],this.autoClose=!1}function oa(Es,Ts,Ss,Ms,ws,As,Ls,Rs){this.aX=Es,this.aY=Ts,this.xRadius=Ss,this.yRadius=Ms,this.aStartAngle=ws,this.aEndAngle=As,this.aClockwise=Ls,this.aRotation=Rs||0}function sa(Es){this.points=Es===void 0?[]:Es}function la(Es,Ts,Ss,Ms){this.v0=Es,this.v1=Ts,this.v2=Ss,this.v3=Ms}function da(Es,Ts,Ss){this.v0=Es,this.v1=Ts,this.v2=Ss}function ca(Es,Ts,Ss,Ms,ws,As){function Ls(nl,dl,cl){return Ps.vertices.push(new D(nl,dl,cl))-1}Et.call(this),this.type="TubeGeometry",this.parameters={path:Es,segments:Ts,radius:Ss,radialSegments:Ms,closed:ws,taper:As},Ts=Ts||64,Ss=Ss||1,Ms=Ms||8,ws=ws||!1,As=As||ca.NoTaper;var Rs=[],Ps=this,Cs,Is,Us=Ts+1,Ds,Ns,Fs,zs,Bs,Os,Gs=new D,Vs,ks,Hs,Ws,js,Xs,qs,Ys,Zs,Js,Qs,Ks,$s=new ca.FrenetFrames(Es,Ts,ws),el=$s.tangents,rl=$s.normals,al=$s.binormals;for(this.tangents=el,this.normals=rl,this.binormals=al,Vs=0;Vs<Us;Vs++)for(Rs[Vs]=[],Ds=Vs/(Us-1),Os=Es.getPointAt(Ds),el[Vs],Cs=rl[Vs],Is=al[Vs],Fs=Ss*As(Ds),ks=0;ks<Ms;ks++)Ns=2*(ks/Ms)*Math.PI,zs=-Fs*Math.cos(Ns),Bs=Fs*Math.sin(Ns),Gs.copy(Os),Gs.x+=zs*Cs.x+Bs*Is.x,Gs.y+=zs*Cs.y+Bs*Is.y,Gs.z+=zs*Cs.z+Bs*Is.z,Rs[Vs][ks]=Ls(Gs.x,Gs.y,Gs.z);for(Vs=0;Vs<Ts;Vs++)for(ks=0;ks<Ms;ks++)Hs=ws?(Vs+1)%Ts:Vs+1,Ws=(ks+1)%Ms,js=Rs[Vs][ks],Xs=Rs[Hs][ks],qs=Rs[Hs][Ws],Ys=Rs[Vs][Ws],Zs=new R(Vs/Ts,ks/Ms),Js=new R((Vs+1)/Ts,ks/Ms),Qs=new R((Vs+1)/Ts,(ks+1)/Ms),Ks=new R(Vs/Ts,(ks+1)/Ms),this.faces.push(new yt(js,Xs,Ys)),this.faceVertexUvs[0].push([Zs,Js,Ks]),this.faces.push(new yt(Xs,qs,Ys)),this.faceVertexUvs[0].push([Js.clone(),Qs,Ks.clone()]);this.computeFaceNormals(),this.computeVertexNormals()}function ua(Es,Ts){return"undefined"==typeof Es?void(Es=[]):void(Et.call(this),this.type="ExtrudeGeometry",Es=Array.isArray(Es)?Es:[Es],this.addShapeList(Es,Ts),this.computeFaceNormals())}function ma(Es,Ts){Et.call(this),this.type="ShapeGeometry",!1===Array.isArray(Es)&&(Es=[Es]),this.addShapeList(Es,Ts),this.computeFaceNormals()}function fa(){ga.apply(this,arguments),this.holes=[]}function ga(Es){na.call(this),this.currentPoint=new R,Es&&this.fromPoints(Es)}function ha(){this.subPaths=[],this.currentPath=null}function ya(Es){this.data=Es}function xa(Es){this.manager=Es===void 0?A.DefaultLoadingManager:Es}function _a(){return void 0===hs&&(hs=new(window.AudioContext||window.webkitAudioContext)),hs}function va(Es){this.manager=Es===void 0?A.DefaultLoadingManager:Es}function ba(){this.type="StereoCamera",this.aspect=1,this.eyeSep=0.064,this.cameraL=new Ht,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ht,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Ea(Es,Ts,Ss){vt.call(this),this.type="CubeCamera";var Ms=90,ws=1,As=new Ht(Ms,ws,Es,Ts);As.up.set(0,-1,0),As.lookAt(new D(1,0,0)),this.add(As);var Ls=new Ht(Ms,ws,Es,Ts);Ls.up.set(0,-1,0),Ls.lookAt(new D(-1,0,0)),this.add(Ls);var Rs=new Ht(Ms,ws,Es,Ts);Rs.up.set(0,0,1),Rs.lookAt(new D(0,1,0)),this.add(Rs);var Ps=new Ht(Ms,ws,Es,Ts);Ps.up.set(0,0,-1),Ps.lookAt(new D(0,-1,0)),this.add(Ps);var Cs=new Ht(Ms,ws,Es,Ts);Cs.up.set(0,-1,0),Cs.lookAt(new D(0,0,1)),this.add(Cs);var Is=new Ht(Ms,ws,Es,Ts);Is.up.set(0,-1,0),Is.lookAt(new D(0,0,-1)),this.add(Is),this.renderTarget=new Dt(Ss,Ss,{format:xo,magFilter:$n,minFilter:$n}),this.updateCubeMap=function(Us,Ds){null===this.parent&&this.updateMatrixWorld();var Ns=this.renderTarget,Fs=Ns.texture.generateMipmaps;Ns.texture.generateMipmaps=!1,Ns.activeCubeFace=0,Us.render(Ds,As,Ns),Ns.activeCubeFace=1,Us.render(Ds,Ls,Ns),Ns.activeCubeFace=2,Us.render(Ds,Rs,Ns),Ns.activeCubeFace=3,Us.render(Ds,Ps,Ns),Ns.activeCubeFace=4,Us.render(Ds,Cs,Ns),Ns.texture.generateMipmaps=Fs,Ns.activeCubeFace=5,Us.render(Ds,Is,Ns),Us.setRenderTarget(null)}}function Ta(){vt.call(this),this.type="AudioListener",this.context=_a(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Sa(Es){vt.call(this),this.type="Audio",this.context=Es.context,this.source=this.context.createBufferSource(),this.source.onended=this.onEnded.bind(this),this.gain=this.context.createGain(),this.gain.connect(Es.getInput()),this.autoplay=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Ma(Es){Sa.call(this,Es),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function wa(Es,Ts){this.analyser=Es.context.createAnalyser(),this.analyser.fftSize=Ts===void 0?2048:Ts,this.data=new Uint8Array(this.analyser.frequencyBinCount),Es.getOutput().connect(this.analyser)}function Aa(Es,Ts,Ss){this.binding=Es,this.valueSize=Ss;var Ms=Float64Array,ws;"quaternion"===Ts?ws=this._slerp:"string"===Ts||"bool"===Ts?(Ms=Array,ws=this._select):ws=this._lerp;this.buffer=new Ms(4*Ss),this._mixBufferRegion=ws,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function La(Es,Ts,Ss){this.path=Ts,this.parsedPath=Ss||La.parseTrackName(Ts),this.node=La.findNode(Es,this.parsedPath.nodeName)||Es,this.rootNode=Es}function Ra(Es){this.uuid=A.Math.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var Ts={};this._indicesByUUID=Ts;for(var Ss=0,Ms=arguments.length;Ss!==Ms;++Ss)Ts[arguments[Ss].uuid]=Ss;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var ws=this;this.stats={objects:{get total(){return ws._objects.length},get inUse(){return this.total-ws.nCachedObjects_}},get bindingsPerObject(){return ws._bindings.length}}}function Pa(Es,Ts,Ss){this._mixer=Es,this._clip=Ts,this._localRoot=Ss||null;for(var Ms=Ts.tracks,ws=Ms.length,As=Array(ws),Ls={endingStart:Oo,endingEnd:Oo},Rs=0;Rs!==ws;++Rs){var Ps=Ms[Rs].createInterpolant(null);As[Rs]=Ps,Ps.settings=Ls}this._interpolantSettings=Ls,this._interpolants=As,this._propertyBindings=Array(ws),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Do,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Ca(Es){this._root=Es,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Ia(Es){"string"==typeof Es&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),Es=arguments[1]),this.value=Es,this.dynamic=!1}function Ua(){Mt.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Da(Es,Ts,Ss,Ms){this.uuid=A.Math.generateUUID(),this.data=Es,this.itemSize=Ts,this.offset=Ss,this.normalized=!0===Ms}function Na(Es,Ts){this.uuid=A.Math.generateUUID(),this.array=Es,this.stride=Ts,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Fa(Es,Ts,Ss){Na.call(this,Es,Ts),this.meshPerAttribute=Ss||1}function za(Es,Ts,Ss){ut.call(this,Es,Ts),this.meshPerAttribute=Ss||1}function Ba(Es,Ts,Ss,Ms){this.ray=new Ft(Es,Ts),this.near=Ss||0,this.far=Ms||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Oa(Es,Ts){return Es.distance-Ts.distance}function Ga(Es,Ts,Ss,Ms){if(!1!==Es.visible&&(Es.raycast(Ts,Ss),!0===Ms))for(var ws=Es.children,As=0,Ls=ws.length;As<Ls;As++)Ga(ws[As],Ts,Ss,!0)}function Va(Es){this.autoStart=!(Es!==void 0)||Es,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function ka(Es,Ts,Ss){return this.radius=void 0===Es?1:Es,this.phi=void 0===Ts?0:Ts,this.theta=void 0===Ss?0:Ss,this}function Ha(Es,Ts){Gt.call(this,Es,Ts),this.animationsMap={},this.animationsList=[];var Ss=this.geometry.morphTargets.length,Ms="__default";this.createAnimation(Ms,0,Ss-1,Ss/1),this.setAnimationWeight(Ms,1)}function Wa(Es){vt.call(this),this.material=Es,this.render=function(Ts){}}function ja(Es){function Ts(Zs,Js){return Zs-Js}Mt.call(this);var Ss=[0,0],Ms={},ws=["a","b","c"];if(Es&&Es.isGeometry){for(var As=Es.vertices,Ls=Es.faces,Rs=0,Ps=new Uint32Array(6*Ls.length),Cs=0,Is=Ls.length;Cs<Is;Cs++)for(var Us=Ls[Cs],Ds=0;3>Ds;Ds++){Ss[0]=Us[ws[Ds]],Ss[1]=Us[ws[(Ds+1)%3]],Ss.sort(Ts);var Ns=Ss.toString();void 0===Ms[Ns]&&(Ps[2*Rs]=Ss[0],Ps[2*Rs+1]=Ss[1],Ms[Ns]=!0,Rs++)}for(var Fs=new Float32Array(3*(2*Rs)),Cs=0,Is=Rs;Cs<Is;Cs++)for(var Ds=0;2>Ds;Ds++){var zs=As[Ps[2*Cs+Ds]],Bs=6*Cs+3*Ds;Fs[Bs+0]=zs.x,Fs[Bs+1]=zs.y,Fs[Bs+2]=zs.z}this.addAttribute("position",new ut(Fs,3))}else if(Es&&Es.isBufferGeometry)if(null!==Es.index){var Os=Es.index.array,As=Es.attributes.position,Gs=Es.groups,Rs=0;0===Gs.length&&Es.addGroup(0,Os.length);for(var Ps=new Uint32Array(2*Os.length),Vs=0,ks=Gs.length;Vs<ks;++Vs)for(var Hs=Gs[Vs],Ws=Hs.start,js=Hs.count,Cs=Ws;Cs<Ws+js;Cs+=3)for(var Ds=0;3>Ds;Ds++){Ss[0]=Os[Cs+Ds],Ss[1]=Os[Cs+(Ds+1)%3],Ss.sort(Ts);var Ns=Ss.toString();void 0===Ms[Ns]&&(Ps[2*Rs]=Ss[0],Ps[2*Rs+1]=Ss[1],Ms[Ns]=!0,Rs++)}for(var Fs=new Float32Array(3*(2*Rs)),Cs=0,Is=Rs;Cs<Is;Cs++)for(var Ds=0;2>Ds;Ds++){var Bs=6*Cs+3*Ds,Xs=Ps[2*Cs+Ds];Fs[Bs+0]=As.getX(Xs),Fs[Bs+1]=As.getY(Xs),Fs[Bs+2]=As.getZ(Xs)}this.addAttribute("position",new ut(Fs,3))}else{for(var As=Es.attributes.position.array,Rs=As.length/3,qs=Rs/3,Fs=new Float32Array(3*(2*Rs)),Cs=0,Is=qs;Cs<Is;Cs++)for(var Ds=0;3>Ds;Ds++){var Bs=18*Cs+6*Ds,Ys=9*Cs+3*Ds;Fs[Bs+0]=As[Ys],Fs[Bs+1]=As[Ys+1],Fs[Bs+2]=As[Ys+2];var Xs=9*Cs+3*((Ds+1)%3);Fs[Bs+3]=As[Xs],Fs[Bs+4]=As[Xs+1],Fs[Bs+5]=As[Xs+2]}this.addAttribute("position",new ut(Fs,3))}}function Xa(Es,Ts){var Ss=Ts===void 0?16777215:Ts;nr.call(this,new ja(Es.geometry),new ar({color:Ss})),this.matrix=Es.matrixWorld,this.matrixAutoUpdate=!1}function Ya(Es,Ts,Ss,Ms){this.object=Es,this.size=Ts===void 0?1:Ts;var ws=Ss===void 0?16711680:Ss,As=Ms===void 0?1:Ms,Ls=0,Rs=this.object.geometry;Rs&&Rs.isGeometry?Ls=3*Rs.faces.length:Rs&&Rs.isBufferGeometry&&(Ls=Rs.attributes.normal.count);var Ps=new Mt,Cs=new ht(3*(2*Ls),3);Ps.addAttribute("position",Cs),nr.call(this,Ps,new ar({color:ws,linewidth:As})),this.matrixAutoUpdate=!1,this.update()}function Za(Es){vt.call(this),this.light=Es,this.light.updateMatrixWorld(),this.matrix=Es.matrixWorld,this.matrixAutoUpdate=!1;for(var Ts=new Mt,Ss=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],Ms=0,ws=1,As=32;Ms<As;Ms++,ws++){var Ls=2*(Ms/As*Math.PI),Rs=2*(ws/As*Math.PI);Ss.push(Math.cos(Ls),Math.sin(Ls),1,Math.cos(Rs),Math.sin(Rs),1)}Ts.addAttribute("position",new ht(Ss,3));var Ps=new ar({fog:!1});this.cone=new nr(Ts,Ps),this.add(this.cone),this.update()}function Ja(Es){this.bones=this.getBoneList(Es);for(var Ts=new Et,Ss=0;Ss<this.bones.length;Ss++){var Ms=this.bones[Ss];Ms.parent&&Ms.parent.isBone&&(Ts.vertices.push(new D),Ts.vertices.push(new D),Ts.colors.push(new Oe(0,0,1)),Ts.colors.push(new Oe(0,1,0)))}Ts.dynamic=!0;var ws=new ar({vertexColors:Ki,depthTest:!1,depthWrite:!1,transparent:!0});nr.call(this,Ts,ws),this.root=Es,this.matrix=Es.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Qa(Es,Ts,Ss,Ms,ws,As,Ls){Mt.call(this),this.type="SphereBufferGeometry",this.parameters={radius:Es,widthSegments:Ts,heightSegments:Ss,phiStart:Ms,phiLength:ws,thetaStart:As,thetaLength:Ls},Es=Es||50,Ts=Math.max(3,Math.floor(Ts)||8),Ss=Math.max(2,Math.floor(Ss)||6),Ms=Ms===void 0?0:Ms,ws=ws===void 0?2*Math.PI:ws,As=As===void 0?0:As,Ls=Ls===void 0?Math.PI:Ls;for(var Rs=As+Ls,Ps=(Ts+1)*(Ss+1),Cs=new ut(new Float32Array(3*Ps),3),Is=new ut(new Float32Array(3*Ps),3),Us=new ut(new Float32Array(2*Ps),2),Ds=0,Ns=[],Fs=new D,zs=0;zs<=Ss;zs++){for(var Bs=[],Os=zs/Ss,Gs=0;Gs<=Ts;Gs++){var Vs=Gs/Ts,ks=-Es*Math.cos(Ms+Vs*ws)*Math.sin(As+Os*Ls),Hs=Es*Math.cos(As+Os*Ls),Ws=Es*Math.sin(Ms+Vs*ws)*Math.sin(As+Os*Ls);Fs.set(ks,Hs,Ws).normalize(),Cs.setXYZ(Ds,ks,Hs,Ws),Is.setXYZ(Ds,Fs.x,Fs.y,Fs.z),Us.setXY(Ds,Vs,1-Os),Bs.push(Ds),Ds++}Ns.push(Bs)}for(var js=[],zs=0;zs<Ss;zs++)for(var Gs=0;Gs<Ts;Gs++){var Xs=Ns[zs][Gs+1],qs=Ns[zs][Gs],Ys=Ns[zs+1][Gs],Zs=Ns[zs+1][Gs+1];(0!==zs||0<As)&&js.push(Xs,qs,Zs),(zs!==Ss-1||Rs<Math.PI)&&js.push(qs,Ys,Zs)}this.setIndex(new(65535<Cs.count?ft:mt)(js,1)),this.addAttribute("position",Cs),this.addAttribute("normal",Is),this.addAttribute("uv",Us),this.boundingSphere=new ke(new D(),Es)}function Ka(Es,Ts){this.light=Es,this.light.updateMatrixWorld();var Ss=new Qa(Ts,4,2),Ms=new Ot({wireframe:!0,fog:!1});Ms.color.copy(this.light.color).multiplyScalar(this.light.intensity),Gt.call(this,Ss,Ms),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function $a(Es,Ts,Ss,Ms,ws,As,Ls){Et.call(this),this.type="SphereGeometry",this.parameters={radius:Es,widthSegments:Ts,heightSegments:Ss,phiStart:Ms,phiLength:ws,thetaStart:As,thetaLength:Ls},this.fromBufferGeometry(new Qa(Es,Ts,Ss,Ms,ws,As,Ls))}function ei(Es,Ts){vt.call(this),this.light=Es,this.light.updateMatrixWorld(),this.matrix=Es.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new Oe,new Oe];var Ss=new $a(Ts,4,2);Ss.rotateX(-Math.PI/2);for(var Ms=0;8>Ms;Ms++)Ss.faces[Ms].color=this.colors[4>Ms?0:1];var ws=new Ot({vertexColors:Qi,wireframe:!0});this.lightSphere=new Gt(Ss,ws),this.add(this.lightSphere),this.update()}function ti(Es,Ts,Ss,Ms){Ts=Ts||1,Ss=new Oe(Ss===void 0?4473924:Ss),Ms=new Oe(Ms===void 0?8947848:Ms);for(var ws=Ts/2,As=2*Es/Ts,Ls=[],Rs=[],Ps=0,Cs=0,Is=-Es;Ps<=Ts;Ps++,Is+=As){Ls.push(-Es,0,Is,Es,0,Is),Ls.push(Is,0,-Es,Is,0,Es);var Us=Ps===ws?Ss:Ms;Us.toArray(Rs,Cs),Cs+=3,Us.toArray(Rs,Cs),Cs+=3,Us.toArray(Rs,Cs),Cs+=3,Us.toArray(Rs,Cs),Cs+=3}var Ds=new Mt;Ds.addAttribute("position",new ht(Ls,3)),Ds.addAttribute("color",new ht(Rs,3));var Ns=new ar({vertexColors:Ki});nr.call(this,Ds,Ns)}function ri(Es,Ts,Ss,Ms){this.object=Es,this.size=Ts===void 0?1:Ts;var ws=Ss===void 0?16776960:Ss,As=Ms===void 0?1:Ms,Ls=0,Rs=this.object.geometry;Rs&&Rs.isGeometry?Ls=Rs.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var Ps=new Mt,Cs=new ht(3*(2*Ls),3);Ps.addAttribute("position",Cs),nr.call(this,Ps,new ar({color:ws,linewidth:As})),this.matrixAutoUpdate=!1,this.update()}function ai(Es,Ts){function Ss(Gs,Vs){return Gs-Vs}Mt.call(this),Ts=Ts===void 0?1:Ts;var Ms=Math.cos(A.Math.DEG2RAD*Ts),ws=[0,0],As={},Ls=["a","b","c"],Rs;Es&&Es.isBufferGeometry?(Rs=new Et,Rs.fromBufferGeometry(Es)):Rs=Es.clone(),Rs.mergeVertices(),Rs.computeFaceNormals();for(var Ps=Rs.vertices,Cs=Rs.faces,Is=0,Us=Cs.length;Is<Us;Is++)for(var Ds=Cs[Is],Ns=0;3>Ns;Ns++){ws[0]=Ds[Ls[Ns]],ws[1]=Ds[Ls[(Ns+1)%3]],ws.sort(Ss);var Fs=ws.toString();void 0===As[Fs]?As[Fs]={vert1:ws[0],vert2:ws[1],face1:Is,face2:void 0}:As[Fs].face2=Is}var zs=[];for(var Fs in As){var Bs=As[Fs];if(Bs.face2===void 0||Cs[Bs.face1].normal.dot(Cs[Bs.face2].normal)<=Ms){var Os=Ps[Bs.vert1];zs.push(Os.x),zs.push(Os.y),zs.push(Os.z),Os=Ps[Bs.vert2],zs.push(Os.x),zs.push(Os.y),zs.push(Os.z)}}this.addAttribute("position",new ut(new Float32Array(zs),3))}function ni(Es,Ts,Ss){var Ms=Ts===void 0?16777215:Ts;nr.call(this,new ai(Es.geometry,Ss),new ar({color:Ms})),this.matrix=Es.matrixWorld,this.matrixAutoUpdate=!1}function oi(Es,Ts){vt.call(this),this.light=Es,this.light.updateMatrixWorld(),this.matrix=Es.matrixWorld,this.matrixAutoUpdate=!1,Ts===void 0&&(Ts=1);var Ss=new Mt;Ss.addAttribute("position",new ht([-Ts,Ts,0,Ts,Ts,0,Ts,-Ts,0,-Ts,-Ts,0,-Ts,Ts,0],3));var Ms=new ar({fog:!1});this.add(new ir(Ss,Ms)),Ss=new Mt,Ss.addAttribute("position",new ht([0,0,0,0,0,1],3)),this.add(new ir(Ss,Ms)),this.update()}function si(Es){function Ts(Is,Us,Ds){Ss(Is,Ds),Ss(Us,Ds)}function Ss(Is,Us){Ms.vertices.push(new D),Ms.colors.push(new Oe(Us)),As[Is]===void 0&&(As[Is]=[]),As[Is].push(Ms.vertices.length-1)}var Ms=new Et,ws=new ar({color:16777215,vertexColors:Qi}),As={},Ls=16755200,Rs=16711680,Ps=43775,Cs=3355443;Ts("n1","n2",Ls),Ts("n2","n4",Ls),Ts("n4","n3",Ls),Ts("n3","n1",Ls),Ts("f1","f2",Ls),Ts("f2","f4",Ls),Ts("f4","f3",Ls),Ts("f3","f1",Ls),Ts("n1","f1",Ls),Ts("n2","f2",Ls),Ts("n3","f3",Ls),Ts("n4","f4",Ls),Ts("p","n1",Rs),Ts("p","n2",Rs),Ts("p","n3",Rs),Ts("p","n4",Rs),Ts("u1","u2",Ps),Ts("u2","u3",Ps),Ts("u3","u1",Ps),Ts("c","t",16777215),Ts("p","c",Cs),Ts("cn1","cn2",Cs),Ts("cn3","cn4",Cs),Ts("cf1","cf2",Cs),Ts("cf3","cf4",Cs),nr.call(this,Ms,ws),this.camera=Es,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=Es.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=As,this.update()}function li(Es,Ts,Ss,Ms,ws,As){Et.call(this),this.type="BoxGeometry",this.parameters={width:Es,height:Ts,depth:Ss,widthSegments:Ms,heightSegments:ws,depthSegments:As},this.fromBufferGeometry(new Nt(Es,Ts,Ss,Ms,ws,As)),this.mergeVertices()}function di(Es,Ts){var Ss=Ts===void 0?8947848:Ts;this.object=Es,this.box=new Ve,Gt.call(this,new li(1,1,1),new Ot({color:Ss,wireframe:!0}))}function pi(Es,Ts){Ts===void 0&&(Ts=16776960);var Ss=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),Ms=new Float32Array(24),ws=new Mt;ws.setIndex(new ut(Ss,1)),ws.addAttribute("position",new ut(Ms,3)),nr.call(this,ws,new ar({color:Ts})),Es!==void 0&&this.update(Es)}function ci(Es,Ts,Ss,Ms,ws,As,Ls,Rs){function Ps(Ws){var js,Xs,qs,Ys=new R,Zs=new D,Js=0,Qs=!0===Ws?Es:Ts,Ks=!0===Ws?1:-1;for(Xs=Os,js=1;js<=Ms;js++)Fs.setXYZ(Os,0,ks*Ks,0),zs.setXYZ(Os,0,Ks,0),Ys.x=0.5,Ys.y=0.5,Bs.setXY(Os,Ys.x,Ys.y),Os++;for(qs=Os,js=0;js<=Ms;js++){var $s=js/Ms,el=$s*Rs+Ls,rl=Math.cos(el),al=Math.sin(el);Zs.x=Qs*al,Zs.y=ks*Ks,Zs.z=Qs*rl,Fs.setXYZ(Os,Zs.x,Zs.y,Zs.z),zs.setXYZ(Os,0,Ks,0),Ys.x=0.5*rl+0.5,Ys.y=0.5*al*Ks+0.5,Bs.setXY(Os,Ys.x,Ys.y),Os++}for(js=0;js<Ms;js++){var nl=Xs+js,dl=qs+js;!0===Ws?(Ns.setX(Gs,dl),Gs++,Ns.setX(Gs,dl+1),Gs++,Ns.setX(Gs,nl),Gs++):(Ns.setX(Gs,dl+1),Gs++,Ns.setX(Gs,dl),Gs++,Ns.setX(Gs,nl),Gs++),Js+=3}Cs.addGroup(Hs,Js,!0===Ws?1:2),Hs+=Js}Mt.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:Es,radiusBottom:Ts,height:Ss,radialSegments:Ms,heightSegments:ws,openEnded:As,thetaStart:Ls,thetaLength:Rs};var Cs=this;Es=Es===void 0?20:Es,Ts=Ts===void 0?20:Ts,Ss=Ss===void 0?100:Ss,Ms=Math.floor(Ms)||8,ws=Math.floor(ws)||1,As=As!==void 0&&As,Ls=Ls===void 0?0:Ls,Rs=Rs===void 0?2*Math.PI:Rs;var Is=0;!1===As&&(0<Es&&Is++,0<Ts&&Is++);var Us=function(){var js=(Ms+1)*(ws+1);return!1===As&&(js+=(Ms+1)*Is+Ms*Is),js}(),Ds=function(){var js=3*(2*(Ms*ws));return!1===As&&(js+=3*(Ms*Is)),js}(),Ns=new ut(new(65535<Ds?Uint32Array:Uint16Array)(Ds),1),Fs=new ut(new Float32Array(3*Us),3),zs=new ut(new Float32Array(3*Us),3),Bs=new ut(new Float32Array(2*Us),2),Os=0,Gs=0,Vs=[],ks=Ss/2,Hs=0;(function(){var js,Xs,qs=new D,Ys=new D,Zs=0,Js=(Ts-Es)/Ss;for(Xs=0;Xs<=ws;Xs++){var Qs=[],Ks=Xs/ws,$s=Ks*(Ts-Es)+Es;for(js=0;js<=Ms;js++){var el=js/Ms;Ys.x=$s*Math.sin(el*Rs+Ls),Ys.y=-Ks*Ss+ks,Ys.z=$s*Math.cos(el*Rs+Ls),Fs.setXYZ(Os,Ys.x,Ys.y,Ys.z),qs.copy(Ys),(0===Es&&0===Xs||0===Ts&&Xs===ws)&&(qs.x=Math.sin(el*Rs+Ls),qs.z=Math.cos(el*Rs+Ls)),qs.setY(Math.sqrt(qs.x*qs.x+qs.z*qs.z)*Js).normalize(),zs.setXYZ(Os,qs.x,qs.y,qs.z),Bs.setXY(Os,el,1-Ks),Qs.push(Os),Os++}Vs.push(Qs)}for(js=0;js<Ms;js++)for(Xs=0;Xs<ws;Xs++){var rl=Vs[Xs][js],al=Vs[Xs+1][js],nl=Vs[Xs+1][js+1],dl=Vs[Xs][js+1];Ns.setX(Gs,rl),Gs++,Ns.setX(Gs,al),Gs++,Ns.setX(Gs,dl),Gs++,Ns.setX(Gs,al),Gs++,Ns.setX(Gs,nl),Gs++,Ns.setX(Gs,dl),Gs++,Zs+=6}Cs.addGroup(Hs,Zs,0),Hs+=Zs})(),!1===As&&(0<Es&&Ps(!0),0<Ts&&Ps(!1)),this.setIndex(Ns),this.addAttribute("position",Fs),this.addAttribute("normal",zs),this.addAttribute("uv",Bs)}function ui(Es,Ts,Ss,Ms,ws,As){vt.call(this),Ms===void 0&&(Ms=16776960),Ss===void 0&&(Ss=1),ws===void 0&&(ws=0.2*Ss),As===void 0&&(As=0.2*ws),this.position.copy(Ts),this.line=new ir(ys,new ar({color:Ms})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Gt(xs,new Ot({color:Ms})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(Es),this.setLength(Ss,ws,As)}function mi(Es){Es=Es||1;var Ts=new Float32Array([0,0,0,Es,0,0,0,0,0,0,Es,0,0,0,0,0,0,Es]),Ss=new Float32Array([1,0,0,1,0.6,0,0,1,0,0.6,1,0,0,0,1,0,0.6,1]),Ms=new Mt;Ms.addAttribute("position",new ut(Ts,3)),Ms.addAttribute("color",new ut(Ss,3));var ws=new ar({vertexColors:Ki});nr.call(this,Ms,ws)}function gi(Es,Ts,Ss){Et.call(this),this.type="ParametricGeometry",this.parameters={func:Es,slices:Ts,stacks:Ss};var Ms=this.vertices,ws=this.faces,As=this.faceVertexUvs[0],Ls,Rs,Ps,Cs,Is,Us=Ts+1;for(Ls=0;Ls<=Ss;Ls++)for(Is=Ls/Ss,Rs=0;Rs<=Ts;Rs++)Cs=Rs/Ts,Ps=Es(Cs,Is),Ms.push(Ps);var Ds,Ns,Fs,zs,Bs,Os,Gs,Vs;for(Ls=0;Ls<Ss;Ls++)for(Rs=0;Rs<Ts;Rs++)Ds=Ls*Us+Rs,Ns=Ls*Us+Rs+1,Fs=(Ls+1)*Us+Rs+1,zs=(Ls+1)*Us+Rs,Bs=new R(Rs/Ts,Ls/Ss),Os=new R((Rs+1)/Ts,Ls/Ss),Gs=new R((Rs+1)/Ts,(Ls+1)/Ss),Vs=new R(Rs/Ts,(Ls+1)/Ss),ws.push(new yt(Ds,Ns,zs)),As.push([Bs,Os,Vs]),ws.push(new yt(Ns,Fs,zs)),As.push([Os.clone(),Gs,Vs.clone()]);this.computeFaceNormals(),this.computeVertexNormals()}function hi(Es,Ts,Ss,Ms){function ws(Ys){var Zs=Ys.normalize().clone();Zs.index=Is.vertices.push(Zs)-1;var Js=Rs(Ys)/2/Math.PI+0.5,Qs=Ps(Ys)/Math.PI+0.5;return Zs.uv=new R(Js,1-Qs),Zs}function As(Ys,Zs,Js){var Qs=new yt(Ys.index,Zs.index,Js.index,[Ys.clone(),Zs.clone(),Js.clone()]);Is.faces.push(Qs),Vs.copy(Ys).add(Zs).add(Js).divideScalar(3);var Ks=Rs(Vs);Is.faceVertexUvs[0].push([Cs(Ys.uv,Ys,Ks),Cs(Zs.uv,Zs,Ks),Cs(Js.uv,Js,Ks)])}function Ls(Ys,Zs){for(var Js=Math.pow(2,Zs),Qs=ws(Is.vertices[Ys.a]),Ks=ws(Is.vertices[Ys.b]),$s=ws(Is.vertices[Ys.c]),el=[],rl=0;rl<=Js;rl++){el[rl]=[];for(var al=ws(Qs.clone().lerp($s,rl/Js)),nl=ws(Ks.clone().lerp($s,rl/Js)),dl=Js-rl,cl=0;cl<=dl;cl++)el[rl][cl]=0===cl&&rl===Js?al:ws(al.clone().lerp(nl,cl/dl))}for(var rl=0;rl<Js;rl++)for(var cl=0;cl<2*(Js-rl)-1;cl++){var ul=Math.floor(cl/2);0==cl%2?As(el[rl][ul+1],el[rl+1][ul],el[rl][ul]):As(el[rl][ul+1],el[rl+1][ul+1],el[rl+1][ul])}}function Rs(Ys){return Math.atan2(Ys.z,-Ys.x)}function Ps(Ys){return Math.atan2(-Ys.y,Math.sqrt(Ys.x*Ys.x+Ys.z*Ys.z))}function Cs(Ys,Zs,Js){return 0>Js&&1===Ys.x&&(Ys=new R(Ys.x-1,Ys.y)),0===Zs.x&&0===Zs.z&&(Ys=new R(Js/2/Math.PI+0.5,Ys.y)),Ys.clone()}Et.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:Es,indices:Ts,radius:Ss,detail:Ms},Ss=Ss||1,Ms=Ms||0;for(var Is=this,Us=0,Ds=Es.length;Us<Ds;Us+=3)ws(new D(Es[Us],Es[Us+1],Es[Us+2]));for(var Ns=this.vertices,Fs=[],Us=0,zs=0,Ds=Ts.length;Us<Ds;Us+=3,zs++){var Bs=Ns[Ts[Us]],Os=Ns[Ts[Us+1]],Gs=Ns[Ts[Us+2]];Fs[zs]=new yt(Bs.index,Os.index,Gs.index,[Bs.clone(),Os.clone(),Gs.clone()])}for(var Vs=new D,Us=0,Ds=Fs.length;Us<Ds;Us++)Ls(Fs[Us],Ms);for(var Us=0,Ds=this.faceVertexUvs[0].length;Us<Ds;Us++){var ks=this.faceVertexUvs[0][Us],Hs=ks[0].x,Ws=ks[1].x,js=ks[2].x,Xs=Math.max(Hs,Ws,js),qs=Math.min(Hs,Ws,js);0.9<Xs&&0.1>qs&&(0.2>Hs&&(ks[0].x+=1),0.2>Ws&&(ks[1].x+=1),0.2>js&&(ks[2].x+=1))}for(var Us=0,Ds=this.vertices.length;Us<Ds;Us++)this.vertices[Us].multiplyScalar(Ss);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new ke(new D(),Ss)}function yi(Es,Ts){hi.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],Es,Ts),this.type="TetrahedronGeometry",this.parameters={radius:Es,detail:Ts}}function xi(Es,Ts){hi.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],Es,Ts),this.type="OctahedronGeometry",this.parameters={radius:Es,detail:Ts}}function _i(Es,Ts){var Ss=(1+Math.sqrt(5))/2;hi.call(this,[-1,Ss,0,1,Ss,0,-1,-Ss,0,1,-Ss,0,0,-1,Ss,0,1,Ss,0,-1,-Ss,0,1,-Ss,Ss,0,-1,Ss,0,1,-Ss,0,-1,-Ss,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],Es,Ts),this.type="IcosahedronGeometry",this.parameters={radius:Es,detail:Ts}}function vi(Es,Ts){var Ss=(1+Math.sqrt(5))/2,Ms=1/Ss;hi.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-Ms,-Ss,0,-Ms,Ss,0,Ms,-Ss,0,Ms,Ss,-Ms,-Ss,0,-Ms,Ss,0,Ms,-Ss,0,Ms,Ss,0,-Ss,0,-Ms,Ss,0,-Ms,-Ss,0,Ms,Ss,0,Ms],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],Es,Ts),this.type="DodecahedronGeometry",this.parameters={radius:Es,detail:Ts}}function bi(Es,Ts,Ss,Ms,ws,As){function Ls(rl,al,nl,dl,cl){var ul=Math.cos(rl),yl=Math.sin(rl),xl=nl/al*rl,_l=Math.cos(xl);cl.x=0.5*(dl*(2+_l))*ul,cl.y=0.5*(dl*(2+_l)*yl),cl.z=0.5*(dl*Math.sin(xl))}Mt.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:Es,tube:Ts,tubularSegments:Ss,radialSegments:Ms,p:ws,q:As},Es=Es||100,Ts=Ts||40,Ss=Math.floor(Ss)||64,Ms=Math.floor(Ms)||8,ws=ws||2,As=As||3;var Rs=(Ms+1)*(Ss+1),Ps=3*(2*(Ms*Ss)),Cs=new ut(new(65535<Ps?Uint32Array:Uint16Array)(Ps),1),Is=new ut(new Float32Array(3*Rs),3),Us=new ut(new Float32Array(3*Rs),3),Ds=new ut(new Float32Array(2*Rs),2),Ns,Fs,zs=0,Bs=0,Os=new D,Gs=new D,Vs=new R,ks=new D,Hs=new D,Ws=new D,js=new D,Xs=new D;for(Ns=0;Ns<=Ss;++Ns){var qs=2*(Ns/Ss*ws*Math.PI);for(Ls(qs,ws,As,Es,ks),Ls(qs+0.01,ws,As,Es,Hs),js.subVectors(Hs,ks),Xs.addVectors(Hs,ks),Ws.crossVectors(js,Xs),Xs.crossVectors(Ws,js),Ws.normalize(),Xs.normalize(),Fs=0;Fs<=Ms;++Fs){var Ys=2*(Fs/Ms*Math.PI),Zs=-Ts*Math.cos(Ys),Js=Ts*Math.sin(Ys);Os.x=ks.x+(Zs*Xs.x+Js*Ws.x),Os.y=ks.y+(Zs*Xs.y+Js*Ws.y),Os.z=ks.z+(Zs*Xs.z+Js*Ws.z),Is.setXYZ(zs,Os.x,Os.y,Os.z),Gs.subVectors(Os,ks).normalize(),Us.setXYZ(zs,Gs.x,Gs.y,Gs.z),Vs.x=Ns/Ss,Vs.y=Fs/Ms,Ds.setXY(zs,Vs.x,Vs.y),zs++}}for(Fs=1;Fs<=Ss;Fs++)for(Ns=1;Ns<=Ms;Ns++){var Qs=(Ms+1)*(Fs-1)+(Ns-1),Ks=(Ms+1)*Fs+(Ns-1),$s=(Ms+1)*Fs+Ns,el=(Ms+1)*(Fs-1)+Ns;Cs.setX(Bs,Qs),Bs++,Cs.setX(Bs,Ks),Bs++,Cs.setX(Bs,el),Bs++,Cs.setX(Bs,Ks),Bs++,Cs.setX(Bs,$s),Bs++,Cs.setX(Bs,el),Bs++}this.setIndex(Cs),this.addAttribute("position",Is),this.addAttribute("normal",Us),this.addAttribute("uv",Ds)}function Ei(Es,Ts,Ss,Ms,ws,As,Ls){Et.call(this),this.type="TorusKnotGeometry",this.parameters={radius:Es,tube:Ts,tubularSegments:Ss,radialSegments:Ms,p:ws,q:As},Ls!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new bi(Es,Ts,Ss,Ms,ws,As)),this.mergeVertices()}function Ti(Es,Ts,Ss,Ms,ws){Mt.call(this),this.type="TorusBufferGeometry",this.parameters={radius:Es,tube:Ts,radialSegments:Ss,tubularSegments:Ms,arc:ws},Es=Es||100,Ts=Ts||40,Ss=Math.floor(Ss)||8,Ms=Math.floor(Ms)||6,ws=ws||2*Math.PI;var As=(Ss+1)*(Ms+1),Ls=3*(2*(Ss*Ms)),Rs=new(65535<Ls?Uint32Array:Uint16Array)(Ls),Ps=new Float32Array(3*As),Cs=new Float32Array(3*As),Is=new Float32Array(2*As),Us=0,Ds=0,Ns=0,Fs=new D,zs=new D,Bs=new D,Os,Gs;for(Os=0;Os<=Ss;Os++)for(Gs=0;Gs<=Ms;Gs++){var Vs=Gs/Ms*ws,ks=2*(Os/Ss*Math.PI);zs.x=(Es+Ts*Math.cos(ks))*Math.cos(Vs),zs.y=(Es+Ts*Math.cos(ks))*Math.sin(Vs),zs.z=Ts*Math.sin(ks),Ps[Us]=zs.x,Ps[Us+1]=zs.y,Ps[Us+2]=zs.z,Fs.x=Es*Math.cos(Vs),Fs.y=Es*Math.sin(Vs),Bs.subVectors(zs,Fs).normalize(),Cs[Us]=Bs.x,Cs[Us+1]=Bs.y,Cs[Us+2]=Bs.z,Is[Ds]=Gs/Ms,Is[Ds+1]=Os/Ss,Us+=3,Ds+=2}for(Os=1;Os<=Ss;Os++)for(Gs=1;Gs<=Ms;Gs++){var Hs=(Ms+1)*Os+Gs-1,Ws=(Ms+1)*(Os-1)+Gs-1,js=(Ms+1)*(Os-1)+Gs,Xs=(Ms+1)*Os+Gs;Rs[Ns]=Hs,Rs[Ns+1]=Ws,Rs[Ns+2]=Xs,Rs[Ns+3]=Ws,Rs[Ns+4]=js,Rs[Ns+5]=Xs,Ns+=6}this.setIndex(new ut(Rs,1)),this.addAttribute("position",new ut(Ps,3)),this.addAttribute("normal",new ut(Cs,3)),this.addAttribute("uv",new ut(Is,2))}function Si(Es,Ts,Ss,Ms,ws){Et.call(this),this.type="TorusGeometry",this.parameters={radius:Es,tube:Ts,radialSegments:Ss,tubularSegments:Ms,arc:ws},this.fromBufferGeometry(new Ti(Es,Ts,Ss,Ms,ws))}function Mi(Es,Ts){Ts=Ts||{};var Ss=Ts.font;if(!1===(Ss&&Ss.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Et;var Ms=Ss.generateShapes(Es,Ts.size,Ts.curveSegments);Ts.amount=Ts.height===void 0?50:Ts.height,Ts.bevelThickness===void 0&&(Ts.bevelThickness=10),Ts.bevelSize===void 0&&(Ts.bevelSize=8),Ts.bevelEnabled===void 0&&(Ts.bevelEnabled=!1),ua.call(this,Ms,Ts),this.type="TextGeometry"}function wi(Es,Ts,Ss,Ms,ws,As){Mt.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:Es,outerRadius:Ts,thetaSegments:Ss,phiSegments:Ms,thetaStart:ws,thetaLength:As},Es=Es||20,Ts=Ts||50,ws=ws===void 0?0:ws,As=As===void 0?2*Math.PI:As,Ss=Ss===void 0?8:Math.max(3,Ss),Ms=Ms===void 0?1:Math.max(1,Ms);var Ls=(Ss+1)*(Ms+1),Rs=3*(2*(Ss*Ms)),Ps=new ut(new(65535<Rs?Uint32Array:Uint16Array)(Rs),1),Cs=new ut(new Float32Array(3*Ls),3),Is=new ut(new Float32Array(3*Ls),3),Us=new ut(new Float32Array(2*Ls),2),Ds=0,Ns=0,Fs,zs=Es,Bs=(Ts-Es)/Ms,Os=new D,Gs=new R,Vs,ks;for(Vs=0;Vs<=Ms;Vs++){for(ks=0;ks<=Ss;ks++)Fs=ws+ks/Ss*As,Os.x=zs*Math.cos(Fs),Os.y=zs*Math.sin(Fs),Cs.setXYZ(Ds,Os.x,Os.y,Os.z),Is.setXYZ(Ds,0,0,1),Gs.x=(Os.x/Ts+1)/2,Gs.y=(Os.y/Ts+1)/2,Us.setXY(Ds,Gs.x,Gs.y),Ds++;zs+=Bs}for(Vs=0;Vs<Ms;Vs++){var Hs=Vs*(Ss+1);for(ks=0;ks<Ss;ks++){Fs=ks+Hs;var Ws=Fs,js=Fs+Ss+1,Xs=Fs+Ss+2,qs=Fs+1;Ps.setX(Ns,Ws),Ns++,Ps.setX(Ns,js),Ns++,Ps.setX(Ns,Xs),Ns++,Ps.setX(Ns,Ws),Ns++,Ps.setX(Ns,Xs),Ns++,Ps.setX(Ns,qs),Ns++}}this.setIndex(Ps),this.addAttribute("position",Cs),this.addAttribute("normal",Is),this.addAttribute("uv",Us)}function Ai(Es,Ts,Ss,Ms,ws,As){Et.call(this),this.type="RingGeometry",this.parameters={innerRadius:Es,outerRadius:Ts,thetaSegments:Ss,phiSegments:Ms,thetaStart:ws,thetaLength:As},this.fromBufferGeometry(new wi(Es,Ts,Ss,Ms,ws,As))}function Li(Es,Ts,Ss,Ms){Et.call(this),this.type="PlaneGeometry",this.parameters={width:Es,height:Ts,widthSegments:Ss,heightSegments:Ms},this.fromBufferGeometry(new Vt(Es,Ts,Ss,Ms))}function Ri(Es,Ts,Ss,Ms){Mt.call(this),this.type="LatheBufferGeometry",this.parameters={points:Es,segments:Ts,phiStart:Ss,phiLength:Ms},Ts=Math.floor(Ts)||12,Ss=Ss||0,Ms=Ms||2*Math.PI,Ms=A.Math.clamp(Ms,0,2*Math.PI);var ws=(Ts+1)*Es.length,As=3*(2*(Ts*Es.length)),Ls=new ut(new(65535<As?Uint32Array:Uint16Array)(As),1),Rs=new ut(new Float32Array(3*ws),3),Ps=new ut(new Float32Array(2*ws),2),Cs=0,Is=0,Ds=1/Ts,Ns=new D,Fs=new R,Us,zs,Bs;for(zs=0;zs<=Ts;zs++){var Os=Ss+zs*Ds*Ms,Gs=Math.sin(Os),Vs=Math.cos(Os);for(Bs=0;Bs<=Es.length-1;Bs++)Ns.x=Es[Bs].x*Gs,Ns.y=Es[Bs].y,Ns.z=Es[Bs].x*Vs,Rs.setXYZ(Cs,Ns.x,Ns.y,Ns.z),Fs.x=zs/Ts,Fs.y=Bs/(Es.length-1),Ps.setXY(Cs,Fs.x,Fs.y),Cs++}for(zs=0;zs<Ts;zs++)for(Bs=0;Bs<Es.length-1;Bs++){Us=Bs+zs*Es.length;var ks=Us,Hs=Us+Es.length,Ws=Us+Es.length+1,js=Us+1;Ls.setX(Is,ks),Is++,Ls.setX(Is,Hs),Is++,Ls.setX(Is,js),Is++,Ls.setX(Is,Hs),Is++,Ls.setX(Is,Ws),Is++,Ls.setX(Is,js),Is++}if(this.setIndex(Ls),this.addAttribute("position",Rs),this.addAttribute("uv",Ps),this.computeVertexNormals(),Ms===2*Math.PI){var Xs=this.attributes.normal.array,qs=new D,Ys=new D,Zs=new D;for(Us=3*(Ts*Es.length),zs=0,Bs=0;zs<Es.length;zs++,Bs+=3)qs.x=Xs[Bs+0],qs.y=Xs[Bs+1],qs.z=Xs[Bs+2],Ys.x=Xs[Us+Bs+0],Ys.y=Xs[Us+Bs+1],Ys.z=Xs[Us+Bs+2],Zs.addVectors(qs,Ys).normalize(),Xs[Bs+0]=Xs[Us+Bs+0]=Zs.x,Xs[Bs+1]=Xs[Us+Bs+1]=Zs.y,Xs[Bs+2]=Xs[Us+Bs+2]=Zs.z}}function Pi(Es,Ts,Ss,Ms){Et.call(this),this.type="LatheGeometry",this.parameters={points:Es,segments:Ts,phiStart:Ss,phiLength:Ms},this.fromBufferGeometry(new Ri(Es,Ts,Ss,Ms)),this.mergeVertices()}function Ci(Es,Ts,Ss,Ms,ws,As,Ls,Rs){Et.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:Es,radiusBottom:Ts,height:Ss,radialSegments:Ms,heightSegments:ws,openEnded:As,thetaStart:Ls,thetaLength:Rs},this.fromBufferGeometry(new ci(Es,Ts,Ss,Ms,ws,As,Ls,Rs)),this.mergeVertices()}function Ii(Es,Ts,Ss,Ms,ws,As,Ls){Ci.call(this,0,Es,Ts,Ss,Ms,ws,As,Ls),this.type="ConeGeometry",this.parameters={radius:Es,height:Ts,radialSegments:Ss,heightSegments:Ms,openEnded:ws,thetaStart:As,thetaLength:Ls}}function Ui(Es,Ts,Ss,Ms,ws,As,Ls){ci.call(this,0,Es,Ts,Ss,Ms,ws,As,Ls),this.type="ConeBufferGeometry",this.parameters={radius:Es,height:Ts,radialSegments:Ss,heightSegments:Ms,thetaStart:As,thetaLength:Ls}}function Di(Es,Ts,Ss,Ms){Mt.call(this),this.type="CircleBufferGeometry",this.parameters={radius:Es,segments:Ts,thetaStart:Ss,thetaLength:Ms},Es=Es||50,Ts=Ts===void 0?8:Math.max(3,Ts),Ss=Ss===void 0?0:Ss,Ms=Ms===void 0?2*Math.PI:Ms;var ws=Ts+2,As=new Float32Array(3*ws),Ls=new Float32Array(3*ws),Rs=new Float32Array(2*ws);Ls[2]=1,Rs[0]=0.5,Rs[1]=0.5;for(var Ps=0,Cs=3,Is=2;Ps<=Ts;Ps++,Cs+=3,Is+=2){var Us=Ss+Ps/Ts*Ms;As[Cs]=Es*Math.cos(Us),As[Cs+1]=Es*Math.sin(Us),Ls[Cs+2]=1,Rs[Is]=(As[Cs]/Es+1)/2,Rs[Is+1]=(As[Cs+1]/Es+1)/2}for(var Ds=[],Cs=1;Cs<=Ts;Cs++)Ds.push(Cs,Cs+1,0);this.setIndex(new ut(new Uint16Array(Ds),1)),this.addAttribute("position",new ut(As,3)),this.addAttribute("normal",new ut(Ls,3)),this.addAttribute("uv",new ut(Rs,2)),this.boundingSphere=new ke(new D(),Es)}function Ni(Es,Ts,Ss,Ms){Et.call(this),this.type="CircleGeometry",this.parameters={radius:Es,segments:Ts,thetaStart:Ss,thetaLength:Ms},this.fromBufferGeometry(new Di(Es,Ts,Ss,Ms))}function Fi(Es){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3."),A.CatmullRomCurve3.call(this,Es),this.type="catmullrom",this.closed=!0}function zi(Es,Ts,Ss,Ms,ws,As){oa.call(this,Es,Ts,Ss,Ss,Ms,ws,As)}Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52)),Math.sign===void 0&&(Math.sign=function(Es){return 0>Es?-1:0<Es?1:+Es}),Function.prototype.name===void 0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}}),Object.assign===void 0&&function(){Object.assign=function(Es){"use strict";if(Es===void 0||null===Es)throw new TypeError("Cannot convert undefined or null to object");for(var Ts=Object(Es),Ss=1;Ss<arguments.length;Ss++){var Ms=arguments[Ss];if(Ms!==void 0&&null!==Ms)for(var ws in Ms)Object.prototype.hasOwnProperty.call(Ms,ws)&&(Ts[ws]=Ms[ws])}return Ts}}(),Object.assign(L.prototype,{addEventListener:function(Es,Ts){this._listeners===void 0&&(this._listeners={});var Ss=this._listeners;Ss[Es]===void 0&&(Ss[Es]=[]),-1===Ss[Es].indexOf(Ts)&&Ss[Es].push(Ts)},hasEventListener:function(Es,Ts){if(this._listeners===void 0)return!1;var Ss=this._listeners;return void 0!==Ss[Es]&&-1!==Ss[Es].indexOf(Ts)},removeEventListener:function(Es,Ts){if(this._listeners!==void 0){var Ss=this._listeners,Ms=Ss[Es];if(Ms!==void 0){var ws=Ms.indexOf(Ts);-1!==ws&&Ms.splice(ws,1)}}},dispatchEvent:function(Es){if(this._listeners!==void 0){var Ts=this._listeners,Ss=Ts[Es.type];if(Ss!==void 0){Es.target=this;var Ms=[],ws=0,As=Ss.length;for(ws=0;ws<As;ws++)Ms[ws]=Ss[ws];for(ws=0;ws<As;ws++)Ms[ws].call(this,Es)}}}});var Bi="80",Oi=0,Gi=1,Vi=2,ki=0,Hi=1,Wi=2,ji=0,Xi=1,qi=2,Yi=1,Zi=2,Ji=0,Qi=1,Ki=2,$i=0,en=1,tn=2,rn=3,an=4,nn=5,on=100,sn=101,ln=102,dn=103,pn=104,cn=200,un=201,mn=202,gn=203,hn=204,yn=205,xn=206,_n=207,vn=208,bn=209,En=210,Tn=0,Sn=1,Mn=2,wn=3,An=4,Ln=5,Rn=6,Pn=7,Cn=0,In=1,Un=2,Dn=0,Nn=1,Fn=2,zn=3,Bn=4,On=300,Gn=301,Vn=302,kn=303,Hn=304,Wn=305,jn=306,Xn=307,qn=1000,Yn=1001,Zn=1002,Jn=1003,Qn=1004,Kn=1005,$n=1006,eo=1007,ro=1008,ao=1009,io=1010,no=1011,oo=1012,so=1013,lo=1014,po=1015,co=1016,uo=1017,mo=1018,fo=1019,go=1020,yo=1021,xo=1022,_o=1023,vo=1024,bo=1025,Eo=1026,To=1027,So=2001,Mo=2002,wo=2003,Ao=2004,Lo=2100,Ro=2101,Po=2102,Co=2103,Io=2151,Uo=2200,Do=2201,No=2202,Fo=2300,zo=2301,Bo=2302,Oo=2400,Go=2401,Vo=2402,ko=0,Ho=1,Wo=2,jo=3000,Xo=3001,qo=3007,Yo=3002,Zo=3004,Jo=3005,Qo=3006,Ko=3200,$o=3201;A.Math={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var Es="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),Ts=Array(36),Ss=0,Ms;return function(){for(var As=0;36>As;As++)8===As||13===As||18===As||23===As?Ts[As]="-":14===As?Ts[As]="4":(2>=Ss&&(Ss=0|33554432+16777216*Math.random()),Ms=15&Ss,Ss=Ss>>4,Ts[As]=Es[19===As?8|3&Ms:Ms]);return Ts.join("")}}(),clamp:function(Es,Ts,Ss){return Math.max(Ts,Math.min(Ss,Es))},euclideanModulo:function(Es,Ts){return(Es%Ts+Ts)%Ts},mapLinear:function(Es,Ts,Ss,Ms,ws){return Ms+(Es-Ts)*(ws-Ms)/(Ss-Ts)},smoothstep:function(Es,Ts,Ss){return Es<=Ts?0:Es>=Ss?1:(Es=(Es-Ts)/(Ss-Ts),Es*Es*(3-2*Es))},smootherstep:function(Es,Ts,Ss){return Es<=Ts?0:Es>=Ss?1:(Es=(Es-Ts)/(Ss-Ts),Es*Es*Es*(Es*(6*Es-15)+10))},random16:function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},randInt:function(Es,Ts){return Es+Math.floor(Math.random()*(Ts-Es+1))},randFloat:function(Es,Ts){return Es+Math.random()*(Ts-Es)},randFloatSpread:function(Es){return Es*(0.5-Math.random())},degToRad:function(Es){return Es*A.Math.DEG2RAD},radToDeg:function(Es){return Es*A.Math.RAD2DEG},isPowerOfTwo:function(Es){return 0==(Es&Es-1)&&0!==Es},nearestPowerOfTwo:function(Es){return Math.pow(2,Math.round(Math.log(Es)/Math.LN2))},nextPowerOfTwo:function(Es){return Es--,Es|=Es>>1,Es|=Es>>2,Es|=Es>>4,Es|=Es>>8,Es|=Es>>16,Es++,Es}},R.prototype={constructor:R,isVector2:!0,get width(){return this.x},set width(Es){this.x=Es},get height(){return this.y},set height(Es){this.y=Es},set:function(Es,Ts){return this.x=Es,this.y=Ts,this},setScalar:function(Es){return this.x=Es,this.y=Es,this},setX:function(Es){return this.x=Es,this},setY:function(Es){return this.y=Es,this},setComponent:function(Es,Ts){switch(Es){case 0:this.x=Ts;break;case 1:this.y=Ts;break;default:throw new Error("index is out of range: "+Es);}},getComponent:function(Es){switch(Es){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+Es);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(Es){return this.x=Es.x,this.y=Es.y,this},add:function(Es,Ts){return void 0===Ts?(this.x+=Es.x,this.y+=Es.y,this):(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(Es,Ts))},addScalar:function(Es){return this.x+=Es,this.y+=Es,this},addVectors:function(Es,Ts){return this.x=Es.x+Ts.x,this.y=Es.y+Ts.y,this},addScaledVector:function(Es,Ts){return this.x+=Es.x*Ts,this.y+=Es.y*Ts,this},sub:function(Es,Ts){return void 0===Ts?(this.x-=Es.x,this.y-=Es.y,this):(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(Es,Ts))},subScalar:function(Es){return this.x-=Es,this.y-=Es,this},subVectors:function(Es,Ts){return this.x=Es.x-Ts.x,this.y=Es.y-Ts.y,this},multiply:function(Es){return this.x*=Es.x,this.y*=Es.y,this},multiplyScalar:function(Es){return isFinite(Es)?(this.x*=Es,this.y*=Es):(this.x=0,this.y=0),this},divide:function(Es){return this.x/=Es.x,this.y/=Es.y,this},divideScalar:function(Es){return this.multiplyScalar(1/Es)},min:function(Es){return this.x=Math.min(this.x,Es.x),this.y=Math.min(this.y,Es.y),this},max:function(Es){return this.x=Math.max(this.x,Es.x),this.y=Math.max(this.y,Es.y),this},clamp:function(Es,Ts){return this.x=Math.max(Es.x,Math.min(Ts.x,this.x)),this.y=Math.max(Es.y,Math.min(Ts.y,this.y)),this},clampScalar:function(){var Es,Ts;return function(Ms,ws){return void 0==Es&&(Es=new R,Ts=new R),Es.set(Ms,Ms),Ts.set(ws,ws),this.clamp(Es,Ts)}}(),clampLength:function(Es,Ts){var Ss=this.length();return this.multiplyScalar(Math.max(Es,Math.min(Ts,Ss))/Ss)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(Es){return this.x*Es.x+this.y*Es.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var Es=Math.atan2(this.y,this.x);return 0>Es&&(Es+=2*Math.PI),Es},distanceTo:function(Es){return Math.sqrt(this.distanceToSquared(Es))},distanceToSquared:function(Es){var Ts=this.x-Es.x,Ss=this.y-Es.y;return Ts*Ts+Ss*Ss},distanceToManhattan:function(Es){return Math.abs(this.x-Es.x)+Math.abs(this.y-Es.y)},setLength:function(Es){return this.multiplyScalar(Es/this.length())},lerp:function(Es,Ts){return this.x+=(Es.x-this.x)*Ts,this.y+=(Es.y-this.y)*Ts,this},lerpVectors:function(Es,Ts,Ss){return this.subVectors(Ts,Es).multiplyScalar(Ss).add(Es)},equals:function(Es){return Es.x===this.x&&Es.y===this.y},fromArray:function(Es,Ts){return void 0===Ts&&(Ts=0),this.x=Es[Ts],this.y=Es[Ts+1],this},toArray:function(Es,Ts){return void 0===Es&&(Es=[]),void 0===Ts&&(Ts=0),Es[Ts]=this.x,Es[Ts+1]=this.y,Es},fromAttribute:function(Es,Ts,Ss){return void 0===Ss&&(Ss=0),Ts=Ts*Es.itemSize+Ss,this.x=Es.array[Ts],this.y=Es.array[Ts+1],this},rotateAround:function(Es,Ts){var Ss=Math.cos(Ts),Ms=Math.sin(Ts),ws=this.x-Es.x,As=this.y-Es.y;return this.x=ws*Ss-As*Ms+Es.x,this.y=ws*Ms+As*Ss+Es.y,this}},P.DEFAULT_IMAGE=void 0,P.DEFAULT_MAPPING=On,P.prototype={constructor:P,isTexture:!0,set needsUpdate(Es){!0===Es&&this.version++},clone:function(){return new this.constructor().copy(this)},copy:function(Es){return this.image=Es.image,this.mipmaps=Es.mipmaps.slice(0),this.mapping=Es.mapping,this.wrapS=Es.wrapS,this.wrapT=Es.wrapT,this.magFilter=Es.magFilter,this.minFilter=Es.minFilter,this.anisotropy=Es.anisotropy,this.format=Es.format,this.type=Es.type,this.offset.copy(Es.offset),this.repeat.copy(Es.repeat),this.generateMipmaps=Es.generateMipmaps,this.premultiplyAlpha=Es.premultiplyAlpha,this.flipY=Es.flipY,this.unpackAlignment=Es.unpackAlignment,this.encoding=Es.encoding,this},toJSON:function(Es){function Ts(ws){var As;return void 0===ws.toDataURL?(As=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),As.width=ws.width,As.height=ws.height,As.getContext("2d").drawImage(ws,0,0,ws.width,ws.height)):As=ws,2048<As.width||2048<As.height?As.toDataURL("image/jpeg",0.6):As.toDataURL("image/png")}if(void 0!==Es.textures[this.uuid])return Es.textures[this.uuid];var Ss={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var Ms=this.image;void 0===Ms.uuid&&(Ms.uuid=A.Math.generateUUID()),void 0===Es.images[Ms.uuid]&&(Es.images[Ms.uuid]={uuid:Ms.uuid,url:Ts(Ms)}),Ss.image=Ms.uuid}return Es.textures[this.uuid]=Ss,Ss},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(Es){if(this.mapping===On){if(Es.multiply(this.repeat),Es.add(this.offset),0>Es.x||1<Es.x)switch(this.wrapS){case qn:Es.x=Es.x-Math.floor(Es.x);break;case Yn:Es.x=0>Es.x?0:1;break;case Zn:Es.x=1===Math.abs(Math.floor(Es.x)%2)?Math.ceil(Es.x)-Es.x:Es.x-Math.floor(Es.x);}if(0>Es.y||1<Es.y)switch(this.wrapT){case qn:Es.y=Es.y-Math.floor(Es.y);break;case Yn:Es.y=0>Es.y?0:1;break;case Zn:Es.y=1===Math.abs(Math.floor(Es.y)%2)?Math.ceil(Es.y)-Es.y:Es.y-Math.floor(Es.y);}this.flipY&&(Es.y=1-Es.y)}}},Object.assign(P.prototype,L.prototype);var es=0;;I.prototype={constructor:I,isMatrix4:!0,set:function(Es,Ts,Ss,Ms,ws,As,Ls,Rs,Ps,Cs,Is,Us,Ds,Ns,Fs,zs){var Bs=this.elements;return Bs[0]=Es,Bs[4]=Ts,Bs[8]=Ss,Bs[12]=Ms,Bs[1]=ws,Bs[5]=As,Bs[9]=Ls,Bs[13]=Rs,Bs[2]=Ps,Bs[6]=Cs,Bs[10]=Is,Bs[14]=Us,Bs[3]=Ds,Bs[7]=Ns,Bs[11]=Fs,Bs[15]=zs,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new I().fromArray(this.elements)},copy:function(Es){return this.elements.set(Es.elements),this},copyPosition:function(Es){var Ts=this.elements,Ss=Es.elements;return Ts[12]=Ss[12],Ts[13]=Ss[13],Ts[14]=Ss[14],this},extractBasis:function(Es,Ts,Ss){return Es.setFromMatrixColumn(this,0),Ts.setFromMatrixColumn(this,1),Ss.setFromMatrixColumn(this,2),this},makeBasis:function(Es,Ts,Ss){return this.set(Es.x,Ts.x,Ss.x,0,Es.y,Ts.y,Ss.y,0,Es.z,Ts.z,Ss.z,0,0,0,0,1),this},extractRotation:function(){var Es;return function(Ss){void 0==Es&&(Es=new D);var Ms=this.elements,ws=Ss.elements,As=1/Es.setFromMatrixColumn(Ss,0).length(),Ls=1/Es.setFromMatrixColumn(Ss,1).length(),Rs=1/Es.setFromMatrixColumn(Ss,2).length();return Ms[0]=ws[0]*As,Ms[1]=ws[1]*As,Ms[2]=ws[2]*As,Ms[4]=ws[4]*Ls,Ms[5]=ws[5]*Ls,Ms[6]=ws[6]*Ls,Ms[8]=ws[8]*Rs,Ms[9]=ws[9]*Rs,Ms[10]=ws[10]*Rs,this}}(),makeRotationFromEuler:function(Es){!1===(Es&&Es.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var Ts=this.elements,Ss=Es.x,Ms=Es.y,ws=Es.z,As=Math.cos(Ss),Ls=Math.sin(Ss),Rs=Math.cos(Ms),Ps=Math.sin(Ms),Cs=Math.cos(ws),Is=Math.sin(ws);if("XYZ"===Es.order){var Us=As*Cs,Ds=As*Is,Ns=Ls*Cs,Fs=Ls*Is;Ts[0]=Rs*Cs,Ts[4]=-Rs*Is,Ts[8]=Ps,Ts[1]=Ds+Ns*Ps,Ts[5]=Us-Fs*Ps,Ts[9]=-Ls*Rs,Ts[2]=Fs-Us*Ps,Ts[6]=Ns+Ds*Ps,Ts[10]=As*Rs}else if("YXZ"===Es.order){var zs=Rs*Cs,Bs=Rs*Is,Os=Ps*Cs,Gs=Ps*Is;Ts[0]=zs+Gs*Ls,Ts[4]=Os*Ls-Bs,Ts[8]=As*Ps,Ts[1]=As*Is,Ts[5]=As*Cs,Ts[9]=-Ls,Ts[2]=Bs*Ls-Os,Ts[6]=Gs+zs*Ls,Ts[10]=As*Rs}else if("ZXY"===Es.order){var zs=Rs*Cs,Bs=Rs*Is,Os=Ps*Cs,Gs=Ps*Is;Ts[0]=zs-Gs*Ls,Ts[4]=-As*Is,Ts[8]=Os+Bs*Ls,Ts[1]=Bs+Os*Ls,Ts[5]=As*Cs,Ts[9]=Gs-zs*Ls,Ts[2]=-As*Ps,Ts[6]=Ls,Ts[10]=As*Rs}else if("ZYX"===Es.order){var Us=As*Cs,Ds=As*Is,Ns=Ls*Cs,Fs=Ls*Is;Ts[0]=Rs*Cs,Ts[4]=Ns*Ps-Ds,Ts[8]=Us*Ps+Fs,Ts[1]=Rs*Is,Ts[5]=Fs*Ps+Us,Ts[9]=Ds*Ps-Ns,Ts[2]=-Ps,Ts[6]=Ls*Rs,Ts[10]=As*Rs}else if("YZX"===Es.order){var Vs=As*Rs,ks=As*Ps,Hs=Ls*Rs,Ws=Ls*Ps;Ts[0]=Rs*Cs,Ts[4]=Ws-Vs*Is,Ts[8]=Hs*Is+ks,Ts[1]=Is,Ts[5]=As*Cs,Ts[9]=-Ls*Cs,Ts[2]=-Ps*Cs,Ts[6]=ks*Is+Hs,Ts[10]=Vs-Ws*Is}else if("XZY"===Es.order){var Vs=As*Rs,ks=As*Ps,Hs=Ls*Rs,Ws=Ls*Ps;Ts[0]=Rs*Cs,Ts[4]=-Is,Ts[8]=Ps*Cs,Ts[1]=Vs*Is+Ws,Ts[5]=As*Cs,Ts[9]=ks*Is-Hs,Ts[2]=Hs*Is-ks,Ts[6]=Ls*Cs,Ts[10]=Ws*Is+Vs}return Ts[3]=0,Ts[7]=0,Ts[11]=0,Ts[12]=0,Ts[13]=0,Ts[14]=0,Ts[15]=1,this},makeRotationFromQuaternion:function(Es){var Ts=this.elements,Ss=Es.x,Ms=Es.y,ws=Es.z,As=Es.w,Ls=Ss+Ss,Rs=Ms+Ms,Ps=ws+ws,Cs=Ss*Ls,Is=Ss*Rs,Us=Ss*Ps,Ds=Ms*Rs,Ns=Ms*Ps,Fs=ws*Ps,zs=As*Ls,Bs=As*Rs,Os=As*Ps;return Ts[0]=1-(Ds+Fs),Ts[4]=Is-Os,Ts[8]=Us+Bs,Ts[1]=Is+Os,Ts[5]=1-(Cs+Fs),Ts[9]=Ns-zs,Ts[2]=Us-Bs,Ts[6]=Ns+zs,Ts[10]=1-(Cs+Ds),Ts[3]=0,Ts[7]=0,Ts[11]=0,Ts[12]=0,Ts[13]=0,Ts[14]=0,Ts[15]=1,this},lookAt:function(){var Es,Ts,Ss;return function(ws,As,Ls){void 0==Es&&(Es=new D,Ts=new D,Ss=new D);var Rs=this.elements;return Ss.subVectors(ws,As).normalize(),0===Ss.lengthSq()&&(Ss.z=1),Es.crossVectors(Ls,Ss).normalize(),0===Es.lengthSq()&&(Ss.z+=0.0001,Es.crossVectors(Ls,Ss).normalize()),Ts.crossVectors(Ss,Es),Rs[0]=Es.x,Rs[4]=Ts.x,Rs[8]=Ss.x,Rs[1]=Es.y,Rs[5]=Ts.y,Rs[9]=Ss.y,Rs[2]=Es.z,Rs[6]=Ts.z,Rs[10]=Ss.z,this}}(),multiply:function(Es,Ts){return void 0===Ts?this.multiplyMatrices(this,Es):(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(Es,Ts))},premultiply:function(Es){return this.multiplyMatrices(Es,this)},multiplyMatrices:function(Es,Ts){var Ss=Es.elements,Ms=Ts.elements,ws=this.elements,As=Ss[0],Ls=Ss[4],Rs=Ss[8],Ps=Ss[12],Cs=Ss[1],Is=Ss[5],Us=Ss[9],Ds=Ss[13],Ns=Ss[2],Fs=Ss[6],zs=Ss[10],Bs=Ss[14],Os=Ss[3],Gs=Ss[7],Vs=Ss[11],ks=Ss[15],Hs=Ms[0],Ws=Ms[4],js=Ms[8],Xs=Ms[12],qs=Ms[1],Ys=Ms[5],Zs=Ms[9],Js=Ms[13],Qs=Ms[2],Ks=Ms[6],$s=Ms[10],el=Ms[14],rl=Ms[3],al=Ms[7],nl=Ms[11],dl=Ms[15];return ws[0]=As*Hs+Ls*qs+Rs*Qs+Ps*rl,ws[4]=As*Ws+Ls*Ys+Rs*Ks+Ps*al,ws[8]=As*js+Ls*Zs+Rs*$s+Ps*nl,ws[12]=As*Xs+Ls*Js+Rs*el+Ps*dl,ws[1]=Cs*Hs+Is*qs+Us*Qs+Ds*rl,ws[5]=Cs*Ws+Is*Ys+Us*Ks+Ds*al,ws[9]=Cs*js+Is*Zs+Us*$s+Ds*nl,ws[13]=Cs*Xs+Is*Js+Us*el+Ds*dl,ws[2]=Ns*Hs+Fs*qs+zs*Qs+Bs*rl,ws[6]=Ns*Ws+Fs*Ys+zs*Ks+Bs*al,ws[10]=Ns*js+Fs*Zs+zs*$s+Bs*nl,ws[14]=Ns*Xs+Fs*Js+zs*el+Bs*dl,ws[3]=Os*Hs+Gs*qs+Vs*Qs+ks*rl,ws[7]=Os*Ws+Gs*Ys+Vs*Ks+ks*al,ws[11]=Os*js+Gs*Zs+Vs*$s+ks*nl,ws[15]=Os*Xs+Gs*Js+Vs*el+ks*dl,this},multiplyToArray:function(Es,Ts,Ss){var Ms=this.elements;return this.multiplyMatrices(Es,Ts),Ss[0]=Ms[0],Ss[1]=Ms[1],Ss[2]=Ms[2],Ss[3]=Ms[3],Ss[4]=Ms[4],Ss[5]=Ms[5],Ss[6]=Ms[6],Ss[7]=Ms[7],Ss[8]=Ms[8],Ss[9]=Ms[9],Ss[10]=Ms[10],Ss[11]=Ms[11],Ss[12]=Ms[12],Ss[13]=Ms[13],Ss[14]=Ms[14],Ss[15]=Ms[15],this},multiplyScalar:function(Es){var Ts=this.elements;return Ts[0]*=Es,Ts[4]*=Es,Ts[8]*=Es,Ts[12]*=Es,Ts[1]*=Es,Ts[5]*=Es,Ts[9]*=Es,Ts[13]*=Es,Ts[2]*=Es,Ts[6]*=Es,Ts[10]*=Es,Ts[14]*=Es,Ts[3]*=Es,Ts[7]*=Es,Ts[11]*=Es,Ts[15]*=Es,this},applyToVector3Array:function(){var Es;return function(Ss,Ms,ws){Es==void 0&&(Es=new D),Ms===void 0&&(Ms=0),ws===void 0&&(ws=Ss.length);for(var As=0,Ls=Ms;As<ws;As+=3,Ls+=3)Es.fromArray(Ss,Ls),Es.applyMatrix4(this),Es.toArray(Ss,Ls);return Ss}}(),applyToBuffer:function(){var Es;return function(Ss,Ms,ws){Es==void 0&&(Es=new D),Ms===void 0&&(Ms=0),ws===void 0&&(ws=Ss.length/Ss.itemSize);for(var As=0,Ls=Ms;As<ws;As++,Ls++)Es.x=Ss.getX(Ls),Es.y=Ss.getY(Ls),Es.z=Ss.getZ(Ls),Es.applyMatrix4(this),Ss.setXYZ(Es.x,Es.y,Es.z);return Ss}}(),determinant:function(){var Es=this.elements,Ts=Es[0],Ss=Es[4],Ms=Es[8],ws=Es[12],As=Es[1],Ls=Es[5],Rs=Es[9],Ps=Es[13],Cs=Es[2],Is=Es[6],Us=Es[10],Ds=Es[14],Ns=Es[3],Fs=Es[7],zs=Es[11],Bs=Es[15];return Ns*(+ws*Rs*Is-Ms*Ps*Is-ws*Ls*Us+Ss*Ps*Us+Ms*Ls*Ds-Ss*Rs*Ds)+Fs*(+Ts*Rs*Ds-Ts*Ps*Us+ws*As*Us-Ms*As*Ds+Ms*Ps*Cs-ws*Rs*Cs)+zs*(+Ts*Ps*Is-Ts*Ls*Ds-ws*As*Is+Ss*As*Ds+ws*Ls*Cs-Ss*Ps*Cs)+Bs*(-Ms*Ls*Cs-Ts*Rs*Is+Ts*Ls*Us+Ms*As*Is-Ss*As*Us+Ss*Rs*Cs)},transpose:function(){var Es=this.elements,Ts=Es[1];return Es[1]=Es[4],Es[4]=Ts,Ts=Es[2],Es[2]=Es[8],Es[8]=Ts,Ts=Es[6],Es[6]=Es[9],Es[9]=Ts,Ts=Es[3],Es[3]=Es[12],Es[12]=Ts,Ts=Es[7],Es[7]=Es[13],Es[13]=Ts,Ts=Es[11],Es[11]=Es[14],Es[14]=Ts,this},flattenToArrayOffset:function(Es,Ts){return console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead."),this.toArray(Es,Ts)},getPosition:function(){var Es;return function(){return void 0==Es&&(Es=new D),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),Es.setFromMatrixColumn(this,3)}}(),setPosition:function(Es){var Ts=this.elements;return Ts[12]=Es.x,Ts[13]=Es.y,Ts[14]=Es.z,this},getInverse:function(Es,Ts){var Ss=this.elements,Ms=Es.elements,ws=Ms[0],As=Ms[1],Ls=Ms[2],Rs=Ms[3],Ps=Ms[4],Cs=Ms[5],Is=Ms[6],Us=Ms[7],Ds=Ms[8],Ns=Ms[9],Fs=Ms[10],zs=Ms[11],Bs=Ms[12],Os=Ms[13],Gs=Ms[14],Vs=Ms[15],ks=Ns*Gs*Us-Os*Fs*Us+Os*Is*zs-Cs*Gs*zs-Ns*Is*Vs+Cs*Fs*Vs,Hs=Bs*Fs*Us-Ds*Gs*Us-Bs*Is*zs+Ps*Gs*zs+Ds*Is*Vs-Ps*Fs*Vs,Ws=Ds*Os*Us-Bs*Ns*Us+Bs*Cs*zs-Ps*Os*zs-Ds*Cs*Vs+Ps*Ns*Vs,js=Bs*Ns*Is-Ds*Os*Is-Bs*Cs*Fs+Ps*Os*Fs+Ds*Cs*Gs-Ps*Ns*Gs,Xs=ws*ks+As*Hs+Ls*Ws+Rs*js;if(0==Xs){var qs="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===Ts)throw new Error(qs);else console.warn(qs);return this.identity()}var Ys=1/Xs;return Ss[0]=ks*Ys,Ss[1]=(Os*Fs*Rs-Ns*Gs*Rs-Os*Ls*zs+As*Gs*zs+Ns*Ls*Vs-As*Fs*Vs)*Ys,Ss[2]=(Cs*Gs*Rs-Os*Is*Rs+Os*Ls*Us-As*Gs*Us-Cs*Ls*Vs+As*Is*Vs)*Ys,Ss[3]=(Ns*Is*Rs-Cs*Fs*Rs-Ns*Ls*Us+As*Fs*Us+Cs*Ls*zs-As*Is*zs)*Ys,Ss[4]=Hs*Ys,Ss[5]=(Ds*Gs*Rs-Bs*Fs*Rs+Bs*Ls*zs-ws*Gs*zs-Ds*Ls*Vs+ws*Fs*Vs)*Ys,Ss[6]=(Bs*Is*Rs-Ps*Gs*Rs-Bs*Ls*Us+ws*Gs*Us+Ps*Ls*Vs-ws*Is*Vs)*Ys,Ss[7]=(Ps*Fs*Rs-Ds*Is*Rs+Ds*Ls*Us-ws*Fs*Us-Ps*Ls*zs+ws*Is*zs)*Ys,Ss[8]=Ws*Ys,Ss[9]=(Bs*Ns*Rs-Ds*Os*Rs-Bs*As*zs+ws*Os*zs+Ds*As*Vs-ws*Ns*Vs)*Ys,Ss[10]=(Ps*Os*Rs-Bs*Cs*Rs+Bs*As*Us-ws*Os*Us-Ps*As*Vs+ws*Cs*Vs)*Ys,Ss[11]=(Ds*Cs*Rs-Ps*Ns*Rs-Ds*As*Us+ws*Ns*Us+Ps*As*zs-ws*Cs*zs)*Ys,Ss[12]=js*Ys,Ss[13]=(Ds*Os*Ls-Bs*Ns*Ls+Bs*As*Fs-ws*Os*Fs-Ds*As*Gs+ws*Ns*Gs)*Ys,Ss[14]=(Bs*Cs*Ls-Ps*Os*Ls-Bs*As*Is+ws*Os*Is+Ps*As*Gs-ws*Cs*Gs)*Ys,Ss[15]=(Ps*Ns*Ls-Ds*Cs*Ls+Ds*As*Is-ws*Ns*Is-Ps*As*Fs+ws*Cs*Fs)*Ys,this},scale:function(Es){var Ts=this.elements,Ss=Es.x,Ms=Es.y,ws=Es.z;return Ts[0]*=Ss,Ts[4]*=Ms,Ts[8]*=ws,Ts[1]*=Ss,Ts[5]*=Ms,Ts[9]*=ws,Ts[2]*=Ss,Ts[6]*=Ms,Ts[10]*=ws,Ts[3]*=Ss,Ts[7]*=Ms,Ts[11]*=ws,this},getMaxScaleOnAxis:function(){var Es=this.elements,Ts=Es[0]*Es[0]+Es[1]*Es[1]+Es[2]*Es[2],Ss=Es[4]*Es[4]+Es[5]*Es[5]+Es[6]*Es[6],Ms=Es[8]*Es[8]+Es[9]*Es[9]+Es[10]*Es[10];return Math.sqrt(Math.max(Ts,Ss,Ms))},makeTranslation:function(Es,Ts,Ss){return this.set(1,0,0,Es,0,1,0,Ts,0,0,1,Ss,0,0,0,1),this},makeRotationX:function(Es){var Ts=Math.cos(Es),Ss=Math.sin(Es);return this.set(1,0,0,0,0,Ts,-Ss,0,0,Ss,Ts,0,0,0,0,1),this},makeRotationY:function(Es){var Ts=Math.cos(Es),Ss=Math.sin(Es);return this.set(Ts,0,Ss,0,0,1,0,0,-Ss,0,Ts,0,0,0,0,1),this},makeRotationZ:function(Es){var Ts=Math.cos(Es),Ss=Math.sin(Es);return this.set(Ts,-Ss,0,0,Ss,Ts,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(Es,Ts){var Ss=Math.cos(Ts),Ms=Math.sin(Ts),ws=1-Ss,As=Es.x,Ls=Es.y,Rs=Es.z,Ps=ws*As,Cs=ws*Ls;return this.set(Ps*As+Ss,Ps*Ls-Ms*Rs,Ps*Rs+Ms*Ls,0,Ps*Ls+Ms*Rs,Cs*Ls+Ss,Cs*Rs-Ms*As,0,Ps*Rs-Ms*Ls,Cs*Rs+Ms*As,ws*Rs*Rs+Ss,0,0,0,0,1),this},makeScale:function(Es,Ts,Ss){return this.set(Es,0,0,0,0,Ts,0,0,0,0,Ss,0,0,0,0,1),this},compose:function(Es,Ts,Ss){return this.makeRotationFromQuaternion(Ts),this.scale(Ss),this.setPosition(Es),this},decompose:function(){var Es,Ts;return function(Ms,ws,As){void 0==Es&&(Es=new D,Ts=new I);var Ls=this.elements,Rs=Es.set(Ls[0],Ls[1],Ls[2]).length(),Ps=Es.set(Ls[4],Ls[5],Ls[6]).length(),Cs=Es.set(Ls[8],Ls[9],Ls[10]).length(),Is=this.determinant();0>Is&&(Rs=-Rs),Ms.x=Ls[12],Ms.y=Ls[13],Ms.z=Ls[14],Ts.elements.set(this.elements);var Us=1/Rs,Ds=1/Ps,Ns=1/Cs;return Ts.elements[0]*=Us,Ts.elements[1]*=Us,Ts.elements[2]*=Us,Ts.elements[4]*=Ds,Ts.elements[5]*=Ds,Ts.elements[6]*=Ds,Ts.elements[8]*=Ns,Ts.elements[9]*=Ns,Ts.elements[10]*=Ns,ws.setFromRotationMatrix(Ts),As.x=Rs,As.y=Ps,As.z=Cs,this}}(),makeFrustum:function(Es,Ts,Ss,Ms,ws,As){var Ls=this.elements;return Ls[0]=2*ws/(Ts-Es),Ls[4]=0,Ls[8]=(Ts+Es)/(Ts-Es),Ls[12]=0,Ls[1]=0,Ls[5]=2*ws/(Ms-Ss),Ls[9]=(Ms+Ss)/(Ms-Ss),Ls[13]=0,Ls[2]=0,Ls[6]=0,Ls[10]=-(As+ws)/(As-ws),Ls[14]=-2*As*ws/(As-ws),Ls[3]=0,Ls[7]=0,Ls[11]=-1,Ls[15]=0,this},makePerspective:function(Es,Ts,Ss,Ms){var ws=Ss*Math.tan(0.5*(A.Math.DEG2RAD*Es)),As=-ws;return this.makeFrustum(As*Ts,ws*Ts,As,ws,Ss,Ms)},makeOrthographic:function(Es,Ts,Ss,Ms,ws,As){var Ls=this.elements,Rs=1/(Ts-Es),Ps=1/(Ss-Ms),Cs=1/(As-ws);return Ls[0]=2*Rs,Ls[4]=0,Ls[8]=0,Ls[12]=-((Ts+Es)*Rs),Ls[1]=0,Ls[5]=2*Ps,Ls[9]=0,Ls[13]=-((Ss+Ms)*Ps),Ls[2]=0,Ls[6]=0,Ls[10]=-2*Cs,Ls[14]=-((As+ws)*Cs),Ls[3]=0,Ls[7]=0,Ls[11]=0,Ls[15]=1,this},equals:function(Es){for(var Ts=this.elements,Ss=Es.elements,Ms=0;16>Ms;Ms++)if(Ts[Ms]!==Ss[Ms])return!1;return!0},fromArray:function(Es){return this.elements.set(Es),this},toArray:function(Es,Ts){void 0===Es&&(Es=[]),void 0===Ts&&(Ts=0);var Ss=this.elements;return Es[Ts]=Ss[0],Es[Ts+1]=Ss[1],Es[Ts+2]=Ss[2],Es[Ts+3]=Ss[3],Es[Ts+4]=Ss[4],Es[Ts+5]=Ss[5],Es[Ts+6]=Ss[6],Es[Ts+7]=Ss[7],Es[Ts+8]=Ss[8],Es[Ts+9]=Ss[9],Es[Ts+10]=Ss[10],Es[Ts+11]=Ss[11],Es[Ts+12]=Ss[12],Es[Ts+13]=Ss[13],Es[Ts+14]=Ss[14],Es[Ts+15]=Ss[15],Es}},U.prototype={constructor:U,get x(){return this._x},set x(Es){this._x=Es,this.onChangeCallback()},get y(){return this._y},set y(Es){this._y=Es,this.onChangeCallback()},get z(){return this._z},set z(Es){this._z=Es,this.onChangeCallback()},get w(){return this._w},set w(Es){this._w=Es,this.onChangeCallback()},set:function(Es,Ts,Ss,Ms){return this._x=Es,this._y=Ts,this._z=Ss,this._w=Ms,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(Es){return this._x=Es.x,this._y=Es.y,this._z=Es.z,this._w=Es.w,this.onChangeCallback(),this},setFromEuler:function(Es,Ts){if(!1===(Es&&Es.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var Ss=Math.cos(Es._x/2),Ms=Math.cos(Es._y/2),ws=Math.cos(Es._z/2),As=Math.sin(Es._x/2),Ls=Math.sin(Es._y/2),Rs=Math.sin(Es._z/2),Ps=Es.order;return"XYZ"===Ps?(this._x=As*Ms*ws+Ss*Ls*Rs,this._y=Ss*Ls*ws-As*Ms*Rs,this._z=Ss*Ms*Rs+As*Ls*ws,this._w=Ss*Ms*ws-As*Ls*Rs):"YXZ"===Ps?(this._x=As*Ms*ws+Ss*Ls*Rs,this._y=Ss*Ls*ws-As*Ms*Rs,this._z=Ss*Ms*Rs-As*Ls*ws,this._w=Ss*Ms*ws+As*Ls*Rs):"ZXY"===Ps?(this._x=As*Ms*ws-Ss*Ls*Rs,this._y=Ss*Ls*ws+As*Ms*Rs,this._z=Ss*Ms*Rs+As*Ls*ws,this._w=Ss*Ms*ws-As*Ls*Rs):"ZYX"===Ps?(this._x=As*Ms*ws-Ss*Ls*Rs,this._y=Ss*Ls*ws+As*Ms*Rs,this._z=Ss*Ms*Rs-As*Ls*ws,this._w=Ss*Ms*ws+As*Ls*Rs):"YZX"===Ps?(this._x=As*Ms*ws+Ss*Ls*Rs,this._y=Ss*Ls*ws+As*Ms*Rs,this._z=Ss*Ms*Rs-As*Ls*ws,this._w=Ss*Ms*ws-As*Ls*Rs):"XZY"===Ps&&(this._x=As*Ms*ws-Ss*Ls*Rs,this._y=Ss*Ls*ws-As*Ms*Rs,this._z=Ss*Ms*Rs+As*Ls*ws,this._w=Ss*Ms*ws+As*Ls*Rs),!1!==Ts&&this.onChangeCallback(),this},setFromAxisAngle:function(Es,Ts){var Ss=Ts/2,Ms=Math.sin(Ss);return this._x=Es.x*Ms,this._y=Es.y*Ms,this._z=Es.z*Ms,this._w=Math.cos(Ss),this.onChangeCallback(),this},setFromRotationMatrix:function(Es){var Ts=Es.elements,Ss=Ts[0],Ms=Ts[4],ws=Ts[8],As=Ts[1],Ls=Ts[5],Rs=Ts[9],Ps=Ts[2],Cs=Ts[6],Is=Ts[10],Us=Ss+Ls+Is,Ds;return 0<Us?(Ds=0.5/Math.sqrt(Us+1),this._w=0.25/Ds,this._x=(Cs-Rs)*Ds,this._y=(ws-Ps)*Ds,this._z=(As-Ms)*Ds):Ss>Ls&&Ss>Is?(Ds=2*Math.sqrt(1+Ss-Ls-Is),this._w=(Cs-Rs)/Ds,this._x=0.25*Ds,this._y=(Ms+As)/Ds,this._z=(ws+Ps)/Ds):Ls>Is?(Ds=2*Math.sqrt(1+Ls-Ss-Is),this._w=(ws-Ps)/Ds,this._x=(Ms+As)/Ds,this._y=0.25*Ds,this._z=(Rs+Cs)/Ds):(Ds=2*Math.sqrt(1+Is-Ss-Ls),this._w=(As-Ms)/Ds,this._x=(ws+Ps)/Ds,this._y=(Rs+Cs)/Ds,this._z=0.25*Ds),this.onChangeCallback(),this},setFromUnitVectors:function(){var Es,Ts;return function(Ms,ws){return void 0==Es&&(Es=new D),Ts=Ms.dot(ws)+1,0.000001>Ts?(Ts=0,Math.abs(Ms.x)>Math.abs(Ms.z)?Es.set(-Ms.y,Ms.x,0):Es.set(0,-Ms.z,Ms.y)):Es.crossVectors(Ms,ws),this._x=Es.x,this._y=Es.y,this._z=Es.z,this._w=Ts,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(Es){return this._x*Es._x+this._y*Es._y+this._z*Es._z+this._w*Es._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var Es=this.length();return 0===Es?(this._x=0,this._y=0,this._z=0,this._w=1):(Es=1/Es,this._x=this._x*Es,this._y=this._y*Es,this._z=this._z*Es,this._w=this._w*Es),this.onChangeCallback(),this},multiply:function(Es,Ts){return void 0===Ts?this.multiplyQuaternions(this,Es):(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(Es,Ts))},premultiply:function(Es){return this.multiplyQuaternions(Es,this)},multiplyQuaternions:function(Es,Ts){var Ss=Es._x,Ms=Es._y,ws=Es._z,As=Es._w,Ls=Ts._x,Rs=Ts._y,Ps=Ts._z,Cs=Ts._w;return this._x=Ss*Cs+As*Ls+Ms*Ps-ws*Rs,this._y=Ms*Cs+As*Rs+ws*Ls-Ss*Ps,this._z=ws*Cs+As*Ps+Ss*Rs-Ms*Ls,this._w=As*Cs-Ss*Ls-Ms*Rs-ws*Ps,this.onChangeCallback(),this},slerp:function(Es,Ts){if(0===Ts)return this;if(1===Ts)return this.copy(Es);var Ss=this._x,Ms=this._y,ws=this._z,As=this._w,Ls=As*Es._w+Ss*Es._x+Ms*Es._y+ws*Es._z;if(0>Ls?(this._w=-Es._w,this._x=-Es._x,this._y=-Es._y,this._z=-Es._z,Ls=-Ls):this.copy(Es),1<=Ls)return this._w=As,this._x=Ss,this._y=Ms,this._z=ws,this;var Rs=Math.sqrt(1-Ls*Ls);if(0.001>Math.abs(Rs))return this._w=0.5*(As+this._w),this._x=0.5*(Ss+this._x),this._y=0.5*(Ms+this._y),this._z=0.5*(ws+this._z),this;var Ps=Math.atan2(Rs,Ls),Cs=Math.sin((1-Ts)*Ps)/Rs,Is=Math.sin(Ts*Ps)/Rs;return this._w=As*Cs+this._w*Is,this._x=Ss*Cs+this._x*Is,this._y=Ms*Cs+this._y*Is,this._z=ws*Cs+this._z*Is,this.onChangeCallback(),this},equals:function(Es){return Es._x===this._x&&Es._y===this._y&&Es._z===this._z&&Es._w===this._w},fromArray:function(Es,Ts){return void 0===Ts&&(Ts=0),this._x=Es[Ts],this._y=Es[Ts+1],this._z=Es[Ts+2],this._w=Es[Ts+3],this.onChangeCallback(),this},toArray:function(Es,Ts){return void 0===Es&&(Es=[]),void 0===Ts&&(Ts=0),Es[Ts]=this._x,Es[Ts+1]=this._y,Es[Ts+2]=this._z,Es[Ts+3]=this._w,Es},onChange:function(Es){return this.onChangeCallback=Es,this},onChangeCallback:function(){}},Object.assign(U,{slerp:function(Es,Ts,Ss,Ms){return Ss.copy(Es).slerp(Ts,Ms)},slerpFlat:function(Es,Ts,Ss,Ms,ws,As,Ls){var Rs=Ss[Ms+0],Ps=Ss[Ms+1],Cs=Ss[Ms+2],Is=Ss[Ms+3],Us=ws[As+0],Ds=ws[As+1],Ns=ws[As+2],Fs=ws[As+3];if(Is!==Fs||Rs!==Us||Ps!==Ds||Cs!==Ns){var zs=1-Ls,Bs=Rs*Us+Ps*Ds+Cs*Ns+Is*Fs,Os=0<=Bs?1:-1,Gs=1-Bs*Bs;if(Gs>Number.EPSILON){var Vs=Math.sqrt(Gs),ks=Math.atan2(Vs,Bs*Os);zs=Math.sin(zs*ks)/Vs,Ls=Math.sin(Ls*ks)/Vs}var Hs=Ls*Os;if(Rs=Rs*zs+Us*Hs,Ps=Ps*zs+Ds*Hs,Cs=Cs*zs+Ns*Hs,Is=Is*zs+Fs*Hs,zs==1-Ls){var Ws=1/Math.sqrt(Rs*Rs+Ps*Ps+Cs*Cs+Is*Is);Rs*=Ws,Ps*=Ws,Cs*=Ws,Is*=Ws}}Es[Ts]=Rs,Es[Ts+1]=Ps,Es[Ts+2]=Cs,Es[Ts+3]=Is}}),D.prototype={constructor:D,isVector3:!0,set:function(Es,Ts,Ss){return this.x=Es,this.y=Ts,this.z=Ss,this},setScalar:function(Es){return this.x=Es,this.y=Es,this.z=Es,this},setX:function(Es){return this.x=Es,this},setY:function(Es){return this.y=Es,this},setZ:function(Es){return this.z=Es,this},setComponent:function(Es,Ts){switch(Es){case 0:this.x=Ts;break;case 1:this.y=Ts;break;case 2:this.z=Ts;break;default:throw new Error("index is out of range: "+Es);}},getComponent:function(Es){switch(Es){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+Es);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(Es){return this.x=Es.x,this.y=Es.y,this.z=Es.z,this},add:function(Es,Ts){return void 0===Ts?(this.x+=Es.x,this.y+=Es.y,this.z+=Es.z,this):(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(Es,Ts))},addScalar:function(Es){return this.x+=Es,this.y+=Es,this.z+=Es,this},addVectors:function(Es,Ts){return this.x=Es.x+Ts.x,this.y=Es.y+Ts.y,this.z=Es.z+Ts.z,this},addScaledVector:function(Es,Ts){return this.x+=Es.x*Ts,this.y+=Es.y*Ts,this.z+=Es.z*Ts,this},sub:function(Es,Ts){return void 0===Ts?(this.x-=Es.x,this.y-=Es.y,this.z-=Es.z,this):(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(Es,Ts))},subScalar:function(Es){return this.x-=Es,this.y-=Es,this.z-=Es,this},subVectors:function(Es,Ts){return this.x=Es.x-Ts.x,this.y=Es.y-Ts.y,this.z=Es.z-Ts.z,this},multiply:function(Es,Ts){return void 0===Ts?(this.x*=Es.x,this.y*=Es.y,this.z*=Es.z,this):(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(Es,Ts))},multiplyScalar:function(Es){return isFinite(Es)?(this.x*=Es,this.y*=Es,this.z*=Es):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(Es,Ts){return this.x=Es.x*Ts.x,this.y=Es.y*Ts.y,this.z=Es.z*Ts.z,this},applyEuler:function(){var Es;return function(Ss){return!1===(Ss&&Ss.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0==Es&&(Es=new U),this.applyQuaternion(Es.setFromEuler(Ss))}}(),applyAxisAngle:function(){var Es;return function(Ss,Ms){return void 0==Es&&(Es=new U),this.applyQuaternion(Es.setFromAxisAngle(Ss,Ms))}}(),applyMatrix3:function(Es){var Ts=this.x,Ss=this.y,Ms=this.z,ws=Es.elements;return this.x=ws[0]*Ts+ws[3]*Ss+ws[6]*Ms,this.y=ws[1]*Ts+ws[4]*Ss+ws[7]*Ms,this.z=ws[2]*Ts+ws[5]*Ss+ws[8]*Ms,this},applyMatrix4:function(Es){var Ts=this.x,Ss=this.y,Ms=this.z,ws=Es.elements;return this.x=ws[0]*Ts+ws[4]*Ss+ws[8]*Ms+ws[12],this.y=ws[1]*Ts+ws[5]*Ss+ws[9]*Ms+ws[13],this.z=ws[2]*Ts+ws[6]*Ss+ws[10]*Ms+ws[14],this},applyProjection:function(Es){var Ts=this.x,Ss=this.y,Ms=this.z,ws=Es.elements,As=1/(ws[3]*Ts+ws[7]*Ss+ws[11]*Ms+ws[15]);return this.x=(ws[0]*Ts+ws[4]*Ss+ws[8]*Ms+ws[12])*As,this.y=(ws[1]*Ts+ws[5]*Ss+ws[9]*Ms+ws[13])*As,this.z=(ws[2]*Ts+ws[6]*Ss+ws[10]*Ms+ws[14])*As,this},applyQuaternion:function(Es){var Ts=this.x,Ss=this.y,Ms=this.z,ws=Es.x,As=Es.y,Ls=Es.z,Rs=Es.w,Ps=Rs*Ts+As*Ms-Ls*Ss,Cs=Rs*Ss+Ls*Ts-ws*Ms,Is=Rs*Ms+ws*Ss-As*Ts,Us=-ws*Ts-As*Ss-Ls*Ms;return this.x=Ps*Rs+Us*-ws+Cs*-Ls-Is*-As,this.y=Cs*Rs+Us*-As+Is*-ws-Ps*-Ls,this.z=Is*Rs+Us*-Ls+Ps*-As-Cs*-ws,this},project:function(){var Es;return function(Ss){return void 0==Es&&(Es=new I),Es.multiplyMatrices(Ss.projectionMatrix,Es.getInverse(Ss.matrixWorld)),this.applyProjection(Es)}}(),unproject:function(){var Es;return function(Ss){return void 0==Es&&(Es=new I),Es.multiplyMatrices(Ss.matrixWorld,Es.getInverse(Ss.projectionMatrix)),this.applyProjection(Es)}}(),transformDirection:function(Es){var Ts=this.x,Ss=this.y,Ms=this.z,ws=Es.elements;return this.x=ws[0]*Ts+ws[4]*Ss+ws[8]*Ms,this.y=ws[1]*Ts+ws[5]*Ss+ws[9]*Ms,this.z=ws[2]*Ts+ws[6]*Ss+ws[10]*Ms,this.normalize()},divide:function(Es){return this.x/=Es.x,this.y/=Es.y,this.z/=Es.z,this},divideScalar:function(Es){return this.multiplyScalar(1/Es)},min:function(Es){return this.x=Math.min(this.x,Es.x),this.y=Math.min(this.y,Es.y),this.z=Math.min(this.z,Es.z),this},max:function(Es){return this.x=Math.max(this.x,Es.x),this.y=Math.max(this.y,Es.y),this.z=Math.max(this.z,Es.z),this},clamp:function(Es,Ts){return this.x=Math.max(Es.x,Math.min(Ts.x,this.x)),this.y=Math.max(Es.y,Math.min(Ts.y,this.y)),this.z=Math.max(Es.z,Math.min(Ts.z,this.z)),this},clampScalar:function(){var Es,Ts;return function(Ms,ws){return void 0==Es&&(Es=new D,Ts=new D),Es.set(Ms,Ms,Ms),Ts.set(ws,ws,ws),this.clamp(Es,Ts)}}(),clampLength:function(Es,Ts){var Ss=this.length();return this.multiplyScalar(Math.max(Es,Math.min(Ts,Ss))/Ss)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(Es){return this.x*Es.x+this.y*Es.y+this.z*Es.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(Es){return this.multiplyScalar(Es/this.length())},lerp:function(Es,Ts){return this.x+=(Es.x-this.x)*Ts,this.y+=(Es.y-this.y)*Ts,this.z+=(Es.z-this.z)*Ts,this},lerpVectors:function(Es,Ts,Ss){return this.subVectors(Ts,Es).multiplyScalar(Ss).add(Es)},cross:function(Es,Ts){if(void 0!==Ts)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(Es,Ts);var Ss=this.x,Ms=this.y,ws=this.z;return this.x=Ms*Es.z-ws*Es.y,this.y=ws*Es.x-Ss*Es.z,this.z=Ss*Es.y-Ms*Es.x,this},crossVectors:function(Es,Ts){var Ss=Es.x,Ms=Es.y,ws=Es.z,As=Ts.x,Ls=Ts.y,Rs=Ts.z;return this.x=Ms*Rs-ws*Ls,this.y=ws*As-Ss*Rs,this.z=Ss*Ls-Ms*As,this},projectOnVector:function(Es){var Ts=Es.dot(this)/Es.lengthSq();return this.copy(Es).multiplyScalar(Ts)},projectOnPlane:function(){var Es;return function(Ss){return void 0==Es&&(Es=new D),Es.copy(this).projectOnVector(Ss),this.sub(Es)}}(),reflect:function(){var Es;return function(Ss){return void 0==Es&&(Es=new D),this.sub(Es.copy(Ss).multiplyScalar(2*this.dot(Ss)))}}(),angleTo:function(Es){var Ts=this.dot(Es)/Math.sqrt(this.lengthSq()*Es.lengthSq());return Math.acos(A.Math.clamp(Ts,-1,1))},distanceTo:function(Es){return Math.sqrt(this.distanceToSquared(Es))},distanceToSquared:function(Es){var Ts=this.x-Es.x,Ss=this.y-Es.y,Ms=this.z-Es.z;return Ts*Ts+Ss*Ss+Ms*Ms},distanceToManhattan:function(Es){return Math.abs(this.x-Es.x)+Math.abs(this.y-Es.y)+Math.abs(this.z-Es.z)},setFromSpherical:function(Es){var Ts=Math.sin(Es.phi)*Es.radius;return this.x=Ts*Math.sin(Es.theta),this.y=Math.cos(Es.phi)*Es.radius,this.z=Ts*Math.cos(Es.theta),this},setFromMatrixPosition:function(Es){return this.setFromMatrixColumn(Es,3)},setFromMatrixScale:function(Es){var Ts=this.setFromMatrixColumn(Es,0).length(),Ss=this.setFromMatrixColumn(Es,1).length(),Ms=this.setFromMatrixColumn(Es,2).length();return this.x=Ts,this.y=Ss,this.z=Ms,this},setFromMatrixColumn:function(Es,Ts){if("number"==typeof Es){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var Ss=Es;Es=Ts,Ts=Ss}return this.fromArray(Es.elements,4*Ts)},equals:function(Es){return Es.x===this.x&&Es.y===this.y&&Es.z===this.z},fromArray:function(Es,Ts){return void 0===Ts&&(Ts=0),this.x=Es[Ts],this.y=Es[Ts+1],this.z=Es[Ts+2],this},toArray:function(Es,Ts){return void 0===Es&&(Es=[]),void 0===Ts&&(Ts=0),Es[Ts]=this.x,Es[Ts+1]=this.y,Es[Ts+2]=this.z,Es},fromAttribute:function(Es,Ts,Ss){return void 0===Ss&&(Ss=0),Ts=Ts*Es.itemSize+Ss,this.x=Es.array[Ts],this.y=Es.array[Ts+1],this.z=Es.array[Ts+2],this}},O.prototype={constructor:O,set:function(Es,Ts){return this.min.copy(Es),this.max.copy(Ts),this},setFromPoints:function(Es){this.makeEmpty();for(var Ts=0,Ss=Es.length;Ts<Ss;Ts++)this.expandByPoint(Es[Ts]);return this},setFromCenterAndSize:function(){var Es=new R;return function(Ss,Ms){var ws=Es.copy(Ms).multiplyScalar(0.5);return this.min.copy(Ss).sub(ws),this.max.copy(Ss).add(ws),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(Es){return this.min.copy(Es.min),this.max.copy(Es.max),this},makeEmpty:function(){return this.min.x=this.min.y=+(1/0),this.max.x=this.max.y=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(Es){var Ts=Es||new R;return Ts.addVectors(this.min,this.max).multiplyScalar(0.5)},size:function(Es){var Ts=Es||new R;return Ts.subVectors(this.max,this.min)},expandByPoint:function(Es){return this.min.min(Es),this.max.max(Es),this},expandByVector:function(Es){return this.min.sub(Es),this.max.add(Es),this},expandByScalar:function(Es){return this.min.addScalar(-Es),this.max.addScalar(Es),this},containsPoint:function(Es){return Es.x<this.min.x||Es.x>this.max.x||Es.y<this.min.y||Es.y>this.max.y?!1:!0},containsBox:function(Es){return this.min.x<=Es.min.x&&Es.max.x<=this.max.x&&this.min.y<=Es.min.y&&Es.max.y<=this.max.y},getParameter:function(Es,Ts){var Ss=Ts||new R;return Ss.set((Es.x-this.min.x)/(this.max.x-this.min.x),(Es.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(Es){return Es.max.x<this.min.x||Es.min.x>this.max.x||Es.max.y<this.min.y||Es.min.y>this.max.y?!1:!0},clampPoint:function(Es,Ts){var Ss=Ts||new R;return Ss.copy(Es).clamp(this.min,this.max)},distanceToPoint:function(){var Es=new R;return function(Ss){var Ms=Es.copy(Ss).clamp(this.min,this.max);return Ms.sub(Ss).length()}}(),intersect:function(Es){return this.min.max(Es.min),this.max.min(Es.max),this},union:function(Es){return this.min.min(Es.min),this.max.max(Es.max),this},translate:function(Es){return this.min.add(Es),this.max.add(Es),this},equals:function(Es){return Es.min.equals(this.min)&&Es.max.equals(this.max)}},V.prototype=Object.create(P.prototype),V.prototype.constructor=V,V.prototype.isCubeTexture=!0,Object.defineProperty(V.prototype,"images",{get:function(){return this.image},set:function(Es){this.image=Es}});var ts=new P,rs=new V,as=[],is=[];Le.prototype.setValue=function(Es,Ts){for(var Ss=this.seq,Ms=0,ws=Ss.length;Ms!==ws;++Ms){var As=Ss[Ms];As.setValue(Es,Ts[As.id])}};var ns=/([\w\d_]+)(\])?(\[|\.)?/g;Ce.prototype.setValue=function(Es,Ts,Ss){var Ms=this.map[Ts];Ms!==void 0&&Ms.setValue(Es,Ss,this.renderer)},Ce.prototype.set=function(Es,Ts,Ss){var Ms=this.map[Ss];Ms!==void 0&&Ms.setValue(Es,Ts[Ss],this.renderer)},Ce.prototype.setOptional=function(Es,Ts,Ss){var Ms=Ts[Ss];Ms!==void 0&&this.setValue(Es,Ss,Ms)},Ce.upload=function(Es,Ts,Ss,Ms){for(var ws=0,As=Ts.length;ws!==As;++ws){var Ls=Ts[ws],Rs=Ss[Ls.id];!1!==Rs.needsUpdate&&Ls.setValue(Es,Rs.value,Ms)}},Ce.seqWithValue=function(Es,Ts){for(var Ss=[],Ms=0,ws=Es.length;Ms!==ws;++Ms){var As=Es[Ms];As.id in Ts&&Ss.push(As)}return Ss},Ce.splitDynamic=function(Es,Ts){for(var Ss=null,Ms=Es.length,ws=0,As=0;As!==Ms;++As){var Ls=Es[As],Rs=Ts[Ls.id];Rs&&!0===Rs.dynamic?(null==Ss&&(Ss=[]),Ss.push(Ls)):(ws<As&&(Es[ws]=Ls),++ws)}return ws<Ms&&(Es.length=ws),Ss},Ce.evalDynamic=function(Es,Ts,Ss,Ms){for(var ws=0,As=Es.length;ws!==As;++ws){var Ls=Ts[Es[ws].id],Rs=Ls.onUpdateCallback;Rs!==void 0&&Rs.call(Ls,Ss,Ms)}},Ue.prototype={constructor:Ue,isVector4:!0,set:function(Es,Ts,Ss,Ms){return this.x=Es,this.y=Ts,this.z=Ss,this.w=Ms,this},setScalar:function(Es){return this.x=Es,this.y=Es,this.z=Es,this.w=Es,this},setX:function(Es){return this.x=Es,this},setY:function(Es){return this.y=Es,this},setZ:function(Es){return this.z=Es,this},setW:function(Es){return this.w=Es,this},setComponent:function(Es,Ts){switch(Es){case 0:this.x=Ts;break;case 1:this.y=Ts;break;case 2:this.z=Ts;break;case 3:this.w=Ts;break;default:throw new Error("index is out of range: "+Es);}},getComponent:function(Es){switch(Es){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+Es);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(Es){return this.x=Es.x,this.y=Es.y,this.z=Es.z,this.w=void 0===Es.w?1:Es.w,this},add:function(Es,Ts){return void 0===Ts?(this.x+=Es.x,this.y+=Es.y,this.z+=Es.z,this.w+=Es.w,this):(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(Es,Ts))},addScalar:function(Es){return this.x+=Es,this.y+=Es,this.z+=Es,this.w+=Es,this},addVectors:function(Es,Ts){return this.x=Es.x+Ts.x,this.y=Es.y+Ts.y,this.z=Es.z+Ts.z,this.w=Es.w+Ts.w,this},addScaledVector:function(Es,Ts){return this.x+=Es.x*Ts,this.y+=Es.y*Ts,this.z+=Es.z*Ts,this.w+=Es.w*Ts,this},sub:function(Es,Ts){return void 0===Ts?(this.x-=Es.x,this.y-=Es.y,this.z-=Es.z,this.w-=Es.w,this):(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(Es,Ts))},subScalar:function(Es){return this.x-=Es,this.y-=Es,this.z-=Es,this.w-=Es,this},subVectors:function(Es,Ts){return this.x=Es.x-Ts.x,this.y=Es.y-Ts.y,this.z=Es.z-Ts.z,this.w=Es.w-Ts.w,this},multiplyScalar:function(Es){return isFinite(Es)?(this.x*=Es,this.y*=Es,this.z*=Es,this.w*=Es):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(Es){var Ts=this.x,Ss=this.y,Ms=this.z,ws=this.w,As=Es.elements;return this.x=As[0]*Ts+As[4]*Ss+As[8]*Ms+As[12]*ws,this.y=As[1]*Ts+As[5]*Ss+As[9]*Ms+As[13]*ws,this.z=As[2]*Ts+As[6]*Ss+As[10]*Ms+As[14]*ws,this.w=As[3]*Ts+As[7]*Ss+As[11]*Ms+As[15]*ws,this},divideScalar:function(Es){return this.multiplyScalar(1/Es)},setAxisAngleFromQuaternion:function(Es){this.w=2*Math.acos(Es.w);var Ts=Math.sqrt(1-Es.w*Es.w);return 0.0001>Ts?(this.x=1,this.y=0,this.z=0):(this.x=Es.x/Ts,this.y=Es.y/Ts,this.z=Es.z/Ts),this},setAxisAngleFromRotationMatrix:function(Es){var As=0.01,Ls=0.1,Rs=Es.elements,Ps=Rs[0],Cs=Rs[4],Is=Rs[8],Us=Rs[1],Ds=Rs[5],Ns=Rs[9],Fs=Rs[2],zs=Rs[6],Bs=Rs[10],Ts,Ss,Ms,ws;if(Math.abs(Cs-Us)<As&&Math.abs(Is-Fs)<As&&Math.abs(Ns-zs)<As){if(Math.abs(Cs+Us)<Ls&&Math.abs(Is+Fs)<Ls&&Math.abs(Ns+zs)<Ls&&Math.abs(Ps+Ds+Bs-3)<Ls)return this.set(1,0,0,0),this;Ts=Math.PI;var Os=(Ps+1)/2,Gs=(Ds+1)/2,Vs=(Bs+1)/2,ks=(Cs+Us)/4,Hs=(Is+Fs)/4,Ws=(Ns+zs)/4;return Os>Gs&&Os>Vs?Os<As?(Ss=0,Ms=0.707106781,ws=0.707106781):(Ss=Math.sqrt(Os),Ms=ks/Ss,ws=Hs/Ss):Gs>Vs?Gs<As?(Ss=0.707106781,Ms=0,ws=0.707106781):(Ms=Math.sqrt(Gs),Ss=ks/Ms,ws=Ws/Ms):Vs<As?(Ss=0.707106781,Ms=0.707106781,ws=0):(ws=Math.sqrt(Vs),Ss=Hs/ws,Ms=Ws/ws),this.set(Ss,Ms,ws,Ts),this}var js=Math.sqrt((zs-Ns)*(zs-Ns)+(Is-Fs)*(Is-Fs)+(Us-Cs)*(Us-Cs));return 0.001>Math.abs(js)&&(js=1),this.x=(zs-Ns)/js,this.y=(Is-Fs)/js,this.z=(Us-Cs)/js,this.w=Math.acos((Ps+Ds+Bs-1)/2),this},min:function(Es){return this.x=Math.min(this.x,Es.x),this.y=Math.min(this.y,Es.y),this.z=Math.min(this.z,Es.z),this.w=Math.min(this.w,Es.w),this},max:function(Es){return this.x=Math.max(this.x,Es.x),this.y=Math.max(this.y,Es.y),this.z=Math.max(this.z,Es.z),this.w=Math.max(this.w,Es.w),this},clamp:function(Es,Ts){return this.x=Math.max(Es.x,Math.min(Ts.x,this.x)),this.y=Math.max(Es.y,Math.min(Ts.y,this.y)),this.z=Math.max(Es.z,Math.min(Ts.z,this.z)),this.w=Math.max(Es.w,Math.min(Ts.w,this.w)),this},clampScalar:function(){var Es,Ts;return function(Ms,ws){return void 0==Es&&(Es=new Ue,Ts=new Ue),Es.set(Ms,Ms,Ms,Ms),Ts.set(ws,ws,ws,ws),this.clamp(Es,Ts)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(Es){return this.x*Es.x+this.y*Es.y+this.z*Es.z+this.w*Es.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(Es){return this.multiplyScalar(Es/this.length())},lerp:function(Es,Ts){return this.x+=(Es.x-this.x)*Ts,this.y+=(Es.y-this.y)*Ts,this.z+=(Es.z-this.z)*Ts,this.w+=(Es.w-this.w)*Ts,this},lerpVectors:function(Es,Ts,Ss){return this.subVectors(Ts,Es).multiplyScalar(Ss).add(Es)},equals:function(Es){return Es.x===this.x&&Es.y===this.y&&Es.z===this.z&&Es.w===this.w},fromArray:function(Es,Ts){return void 0===Ts&&(Ts=0),this.x=Es[Ts],this.y=Es[Ts+1],this.z=Es[Ts+2],this.w=Es[Ts+3],this},toArray:function(Es,Ts){return void 0===Es&&(Es=[]),void 0===Ts&&(Ts=0),Es[Ts]=this.x,Es[Ts+1]=this.y,Es[Ts+2]=this.z,Es[Ts+3]=this.w,Es},fromAttribute:function(Es,Ts,Ss){return void 0===Ss&&(Ss=0),Ts=Ts*Es.itemSize+Ss,this.x=Es.array[Ts],this.y=Es.array[Ts+1],this.z=Es.array[Ts+2],this.w=Es.array[Ts+3],this}},Object.assign(Ne.prototype,L.prototype,{isWebGLRenderTarget:!0,setSize:function(Es,Ts){(this.width!==Es||this.height!==Ts)&&(this.width=Es,this.height=Ts,this.dispose()),this.viewport.set(0,0,Es,Ts),this.scissor.set(0,0,Es,Ts)},clone:function(){return new this.constructor().copy(this)},copy:function(Es){return this.width=Es.width,this.height=Es.height,this.viewport.copy(Es.viewport),this.texture=Es.texture.clone(),this.depthBuffer=Es.depthBuffer,this.stencilBuffer=Es.stencilBuffer,this.depthTexture=Es.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Fe.prototype={constructor:Fe,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(Es){!0===Es&&this.update(),this._needsUpdate=Es},setValues:function(Es){if(Es!==void 0)for(var Ts in Es){var Ss=Es[Ts];if(Ss===void 0){console.warn("THREE.Material: '"+Ts+"' parameter is undefined.");continue}var Ms=this[Ts];if(Ms===void 0){console.warn("THREE."+this.type+": '"+Ts+"' is not a property of this material.");continue}Ms&&Ms.isColor?Ms.set(Ss):Ms&&Ms.isVector3&&Ss&&Ss.isVector3?Ms.copy(Ss):"overdraw"==Ts?this[Ts]=+Ss:this[Ts]=Ss}},toJSON:function(Es){function Ts(Ls){var Rs=[];for(var Ps in Ls){var Cs=Ls[Ps];delete Cs.metadata,Rs.push(Cs)}return Rs}var Ss=void 0===Es;Ss&&(Es={textures:{},images:{}});var Ms={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};if(Ms.uuid=this.uuid,Ms.type=this.type,""!==this.name&&(Ms.name=this.name),this.color&&this.color.isColor&&(Ms.color=this.color.getHex()),void 0!==this.roughness&&(Ms.roughness=this.roughness),void 0!==this.metalness&&(Ms.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(Ms.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(Ms.specular=this.specular.getHex()),void 0!==this.shininess&&(Ms.shininess=this.shininess),this.map&&this.map.isTexture&&(Ms.map=this.map.toJSON(Es).uuid),this.alphaMap&&this.alphaMap.isTexture&&(Ms.alphaMap=this.alphaMap.toJSON(Es).uuid),this.lightMap&&this.lightMap.isTexture&&(Ms.lightMap=this.lightMap.toJSON(Es).uuid),this.bumpMap&&this.bumpMap.isTexture&&(Ms.bumpMap=this.bumpMap.toJSON(Es).uuid,Ms.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(Ms.normalMap=this.normalMap.toJSON(Es).uuid,Ms.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(Ms.displacementMap=this.displacementMap.toJSON(Es).uuid,Ms.displacementScale=this.displacementScale,Ms.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(Ms.roughnessMap=this.roughnessMap.toJSON(Es).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(Ms.metalnessMap=this.metalnessMap.toJSON(Es).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(Ms.emissiveMap=this.emissiveMap.toJSON(Es).uuid),this.specularMap&&this.specularMap.isTexture&&(Ms.specularMap=this.specularMap.toJSON(Es).uuid),this.envMap&&this.envMap.isTexture&&(Ms.envMap=this.envMap.toJSON(Es).uuid,Ms.reflectivity=this.reflectivity),void 0!==this.size&&(Ms.size=this.size),void 0!==this.sizeAttenuation&&(Ms.sizeAttenuation=this.sizeAttenuation),this.blending!==en&&(Ms.blending=this.blending),this.shading!==Zi&&(Ms.shading=this.shading),this.side!==ji&&(Ms.side=this.side),this.vertexColors!==Ji&&(Ms.vertexColors=this.vertexColors),1>this.opacity&&(Ms.opacity=this.opacity),!0===this.transparent&&(Ms.transparent=this.transparent),Ms.depthFunc=this.depthFunc,Ms.depthTest=this.depthTest,Ms.depthWrite=this.depthWrite,0<this.alphaTest&&(Ms.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(Ms.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(Ms.wireframe=this.wireframe),1<this.wireframeLinewidth&&(Ms.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(Ms.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(Ms.wireframeLinejoin=this.wireframeLinejoin),Ms.skinning=this.skinning,Ms.morphTargets=this.morphTargets,Ss){var ws=Ts(Es.textures),As=Ts(Es.images);0<ws.length&&(Ms.textures=ws),0<As.length&&(Ms.images=As)}return Ms},clone:function(){return new this.constructor().copy(this)},copy:function(Es){this.name=Es.name,this.fog=Es.fog,this.lights=Es.lights,this.blending=Es.blending,this.side=Es.side,this.shading=Es.shading,this.vertexColors=Es.vertexColors,this.opacity=Es.opacity,this.transparent=Es.transparent,this.blendSrc=Es.blendSrc,this.blendDst=Es.blendDst,this.blendEquation=Es.blendEquation,this.blendSrcAlpha=Es.blendSrcAlpha,this.blendDstAlpha=Es.blendDstAlpha,this.blendEquationAlpha=Es.blendEquationAlpha,this.depthFunc=Es.depthFunc,this.depthTest=Es.depthTest,this.depthWrite=Es.depthWrite,this.colorWrite=Es.colorWrite,this.precision=Es.precision,this.polygonOffset=Es.polygonOffset,this.polygonOffsetFactor=Es.polygonOffsetFactor,this.polygonOffsetUnits=Es.polygonOffsetUnits,this.alphaTest=Es.alphaTest,this.premultipliedAlpha=Es.premultipliedAlpha,this.overdraw=Es.overdraw,this.visible=Es.visible,this.clipShadows=Es.clipShadows;var Ts=Es.clippingPlanes,Ss=null;if(null!==Ts){var Ms=Ts.length;Ss=Array(Ms);for(var ws=0;ws!==Ms;++ws)Ss[ws]=Ts[ws].clone()}return this.clippingPlanes=Ss,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(Fe.prototype,L.prototype);var os=0;;A.UniformsUtils={merge:function(Es){for(var Ts={},Ss=0;Ss<Es.length;Ss++){var Ms=this.clone(Es[Ss]);for(var ws in Ms)Ts[ws]=Ms[ws]}return Ts},clone:function(Es){var Ts={};for(var Ss in Es)for(var Ms in Ts[Ss]={},Es[Ss]){var ws=Es[Ss][Ms];Ts[Ss][Ms]=ws&&ws.isColor||ws&&ws.isVector2||ws&&ws.isVector3||ws&&ws.isVector4||ws&&ws.isMatrix3||ws&&ws.isMatrix4||ws&&ws.isTexture?ws.clone():Array.isArray(ws)?ws.slice():ws}return Ts}},Be.prototype=Object.create(Fe.prototype),Be.prototype.constructor=Be,Be.prototype.isShaderMaterial=!0,Be.prototype.copy=function(Es){return Fe.prototype.copy.call(this,Es),this.fragmentShader=Es.fragmentShader,this.vertexShader=Es.vertexShader,this.uniforms=A.UniformsUtils.clone(Es.uniforms),this.defines=Es.defines,this.wireframe=Es.wireframe,this.wireframeLinewidth=Es.wireframeLinewidth,this.lights=Es.lights,this.clipping=Es.clipping,this.skinning=Es.skinning,this.morphTargets=Es.morphTargets,this.morphNormals=Es.morphNormals,this.extensions=Es.extensions,this},Be.prototype.toJSON=function(Es){var Ts=Fe.prototype.toJSON.call(this,Es);return Ts.uniforms=this.uniforms,Ts.vertexShader=this.vertexShader,Ts.fragmentShader=this.fragmentShader,Ts};var ss={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\n\treturn any( bvec2( cutoffDistance == 0.0, lightDistance < cutoffDistance ) );\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntenstiy;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tif ( testLightInRange( lightDistance, pointLight.distance ) ) {\n\t\t\tdirectLight.color = pointLight.color;\n\t\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( all( bvec2( angleCos > spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\t#include <normal_flip>\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\t#include <normal_flip>\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\t\t\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_flip:"#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight;\n\treflectedLight.directDiffuse = vec3( 0.0 );\n\treflectedLight.directSpecular = vec3( 0.0 );\n\treflectedLight.indirectDiffuse = diffuseColor.rgb;\n\treflectedLight.indirectSpecular = vec3( 0.0 );\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nuniform float envMapIntensity;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",normal_frag:"uniform float opacity;\nvarying vec3 vNormal;\n#include <common>\n#include <packing>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( vNormal ), opacity );\n\t#include <logdepthbuf_fragment>\n}\n",normal_vert:"varying vec3 vNormal;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvNormal = normalize( normalMatrix * normal );\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"};Oe.prototype={constructor:Oe,isColor:!0,r:1,g:1,b:1,set:function(Es){return Es&&Es.isColor?this.copy(Es):"number"==typeof Es?this.setHex(Es):"string"==typeof Es&&this.setStyle(Es),this},setScalar:function(Es){this.r=Es,this.g=Es,this.b=Es},setHex:function(Es){return Es=Math.floor(Es),this.r=(255&Es>>16)/255,this.g=(255&Es>>8)/255,this.b=(255&Es)/255,this},setRGB:function(Es,Ts,Ss){return this.r=Es,this.g=Ts,this.b=Ss,this},setHSL:function(){function Es(Ts,Ss,Ms){return 0>Ms&&(Ms+=1),1<Ms&&(Ms-=1),Ms<1/6?Ts+6*(Ss-Ts)*Ms:Ms<1/2?Ss:Ms<2/3?Ts+6*(Ss-Ts)*(2/3-Ms):Ts}return function(Ss,Ms,ws){if(Ss=A.Math.euclideanModulo(Ss,1),Ms=A.Math.clamp(Ms,0,1),ws=A.Math.clamp(ws,0,1),0===Ms)this.r=this.g=this.b=ws;else{var As=0.5>=ws?ws*(1+Ms):ws+Ms-ws*Ms,Ls=2*ws-As;this.r=Es(Ls,As,Ss+1/3),this.g=Es(Ls,As,Ss),this.b=Es(Ls,As,Ss-1/3)}return this}}(),setStyle:function(Es){function Ts(Us){Us!==void 0&&1>parseFloat(Us)&&console.warn("THREE.Color: Alpha component of "+Es+" will be ignored.")}var Ss;if(Ss=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(Es)){var Ms,ws=Ss[1],As=Ss[2];switch(ws){case"rgb":case"rgba":if(Ms=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(As))return this.r=Math.min(255,parseInt(Ms[1],10))/255,this.g=Math.min(255,parseInt(Ms[2],10))/255,this.b=Math.min(255,parseInt(Ms[3],10))/255,Ts(Ms[5]),this;if(Ms=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(As))return this.r=Math.min(100,parseInt(Ms[1],10))/100,this.g=Math.min(100,parseInt(Ms[2],10))/100,this.b=Math.min(100,parseInt(Ms[3],10))/100,Ts(Ms[5]),this;break;case"hsl":case"hsla":if(Ms=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(As)){var Ls=parseFloat(Ms[1])/360,Rs=parseInt(Ms[2],10)/100,Ps=parseInt(Ms[3],10)/100;return Ts(Ms[5]),this.setHSL(Ls,Rs,Ps)}}}else if(Ss=/^\#([A-Fa-f0-9]+)$/.exec(Es)){var Cs=Ss[1],Is=Cs.length;if(3===Is)return this.r=parseInt(Cs.charAt(0)+Cs.charAt(0),16)/255,this.g=parseInt(Cs.charAt(1)+Cs.charAt(1),16)/255,this.b=parseInt(Cs.charAt(2)+Cs.charAt(2),16)/255,this;if(6===Is)return this.r=parseInt(Cs.charAt(0)+Cs.charAt(1),16)/255,this.g=parseInt(Cs.charAt(2)+Cs.charAt(3),16)/255,this.b=parseInt(Cs.charAt(4)+Cs.charAt(5),16)/255,this}if(Es&&0<Es.length){var Cs=A.ColorKeywords[Es];void 0===Cs?console.warn("THREE.Color: Unknown color "+Es):this.setHex(Cs)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(Es){return this.r=Es.r,this.g=Es.g,this.b=Es.b,this},copyGammaToLinear:function(Es,Ts){return void 0===Ts&&(Ts=2),this.r=Math.pow(Es.r,Ts),this.g=Math.pow(Es.g,Ts),this.b=Math.pow(Es.b,Ts),this},copyLinearToGamma:function(Es,Ts){void 0===Ts&&(Ts=2);var Ss=0<Ts?1/Ts:1;return this.r=Math.pow(Es.r,Ss),this.g=Math.pow(Es.g,Ss),this.b=Math.pow(Es.b,Ss),this},convertGammaToLinear:function(){var Es=this.r,Ts=this.g,Ss=this.b;return this.r=Es*Es,this.g=Ts*Ts,this.b=Ss*Ss,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(Es){var Ts=Es||{h:0,s:0,l:0},Ss=this.r,Ms=this.g,ws=this.b,As=Math.max(Ss,Ms,ws),Ls=Math.min(Ss,Ms,ws),Cs=(Ls+As)/2,Rs,Ps;if(Ls===As)Rs=0,Ps=0;else{var Is=As-Ls;Ps=0.5>=Cs?Is/(As+Ls):Is/(2-As-Ls),As===Ss?Rs=(Ms-ws)/Is+(Ms<ws?6:0):As===Ms?Rs=(ws-Ss)/Is+2:As===ws?Rs=(Ss-Ms)/Is+4:void 0,Rs/=6}return Ts.h=Rs,Ts.s=Ps,Ts.l=Cs,Ts},getStyle:function(){return"rgb("+(0|255*this.r)+","+(0|255*this.g)+","+(0|255*this.b)+")"},offsetHSL:function(Es,Ts,Ss){var Ms=this.getHSL();return Ms.h+=Es,Ms.s+=Ts,Ms.l+=Ss,this.setHSL(Ms.h,Ms.s,Ms.l),this},add:function(Es){return this.r+=Es.r,this.g+=Es.g,this.b+=Es.b,this},addColors:function(Es,Ts){return this.r=Es.r+Ts.r,this.g=Es.g+Ts.g,this.b=Es.b+Ts.b,this},addScalar:function(Es){return this.r+=Es,this.g+=Es,this.b+=Es,this},sub:function(Es){return this.r=Math.max(0,this.r-Es.r),this.g=Math.max(0,this.g-Es.g),this.b=Math.max(0,this.b-Es.b),this},multiply:function(Es){return this.r*=Es.r,this.g*=Es.g,this.b*=Es.b,this},multiplyScalar:function(Es){return this.r*=Es,this.g*=Es,this.b*=Es,this},lerp:function(Es,Ts){return this.r+=(Es.r-this.r)*Ts,this.g+=(Es.g-this.g)*Ts,this.b+=(Es.b-this.b)*Ts,this},equals:function(Es){return Es.r===this.r&&Es.g===this.g&&Es.b===this.b},fromArray:function(Es,Ts){return void 0===Ts&&(Ts=0),this.r=Es[Ts],this.g=Es[Ts+1],this.b=Es[Ts+2],this},toArray:function(Es,Ts){return void 0===Es&&(Es=[]),void 0===Ts&&(Ts=0),Es[Ts]=this.r,Es[Ts+1]=this.g,Es[Ts+2]=this.b,Es},toJSON:function(){return this.getHex()}},A.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};var ls={common:{diffuse:{value:new Oe(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new Ue(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:0.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new R(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},fog:{fogDensity:{value:0.00025},fogNear:{value:1},fogFar:{value:2000},fogColor:{value:new Oe(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}}},points:{diffuse:{value:new Oe(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new Ue(0,0,1,1)}}},ds={basic:{uniforms:A.UniformsUtils.merge([ls.common,ls.aomap,ls.fog]),vertexShader:ss.meshbasic_vert,fragmentShader:ss.meshbasic_frag},lambert:{uniforms:A.UniformsUtils.merge([ls.common,ls.aomap,ls.lightmap,ls.emissivemap,ls.fog,ls.lights,{emissive:{value:new Oe(0)}}]),vertexShader:ss.meshlambert_vert,fragmentShader:ss.meshlambert_frag},phong:{uniforms:A.UniformsUtils.merge([ls.common,ls.aomap,ls.lightmap,ls.emissivemap,ls.bumpmap,ls.normalmap,ls.displacementmap,ls.fog,ls.lights,{emissive:{value:new Oe(0)},specular:{value:new Oe(1118481)},shininess:{value:30}}]),vertexShader:ss.meshphong_vert,fragmentShader:ss.meshphong_frag},standard:{uniforms:A.UniformsUtils.merge([ls.common,ls.aomap,ls.lightmap,ls.emissivemap,ls.bumpmap,ls.normalmap,ls.displacementmap,ls.roughnessmap,ls.metalnessmap,ls.fog,ls.lights,{emissive:{value:new Oe(0)},roughness:{value:0.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ss.meshphysical_vert,fragmentShader:ss.meshphysical_frag},points:{uniforms:A.UniformsUtils.merge([ls.points,ls.fog]),vertexShader:ss.points_vert,fragmentShader:ss.points_frag},dashed:{uniforms:A.UniformsUtils.merge([ls.common,ls.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ss.linedashed_vert,fragmentShader:ss.linedashed_frag},depth:{uniforms:A.UniformsUtils.merge([ls.common,ls.displacementmap]),vertexShader:ss.depth_vert,fragmentShader:ss.depth_frag},normal:{uniforms:{opacity:{value:1}},vertexShader:ss.normal_vert,fragmentShader:ss.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ss.cube_vert,fragmentShader:ss.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:ss.equirect_vert,fragmentShader:ss.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new D}},vertexShader:ss.distanceRGBA_vert,fragmentShader:ss.distanceRGBA_frag}};ds.physical={uniforms:A.UniformsUtils.merge([ds.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:ss.meshphysical_vert,fragmentShader:ss.meshphysical_frag},Ge.prototype=Object.create(Fe.prototype),Ge.prototype.constructor=Ge,Ge.prototype.isMeshDepthMaterial=!0,Ge.prototype.copy=function(Es){return Fe.prototype.copy.call(this,Es),this.depthPacking=Es.depthPacking,this.skinning=Es.skinning,this.morphTargets=Es.morphTargets,this.map=Es.map,this.alphaMap=Es.alphaMap,this.displacementMap=Es.displacementMap,this.displacementScale=Es.displacementScale,this.displacementBias=Es.displacementBias,this.wireframe=Es.wireframe,this.wireframeLinewidth=Es.wireframeLinewidth,this},Ve.prototype={constructor:Ve,isBox3:!0,set:function(Es,Ts){return this.min.copy(Es),this.max.copy(Ts),this},setFromArray:function(Es){for(var Ts=+(1/0),Ss=+(1/0),Ms=+(1/0),ws=-(1/0),As=-(1/0),Ls=-(1/0),Rs=0,Ps=Es.length;Rs<Ps;Rs+=3){var Cs=Es[Rs],Is=Es[Rs+1],Us=Es[Rs+2];Cs<Ts&&(Ts=Cs),Is<Ss&&(Ss=Is),Us<Ms&&(Ms=Us),Cs>ws&&(ws=Cs),Is>As&&(As=Is),Us>Ls&&(Ls=Us)}this.min.set(Ts,Ss,Ms),this.max.set(ws,As,Ls)},setFromPoints:function(Es){this.makeEmpty();for(var Ts=0,Ss=Es.length;Ts<Ss;Ts++)this.expandByPoint(Es[Ts]);return this},setFromCenterAndSize:function(){var Es=new D;return function(Ss,Ms){var ws=Es.copy(Ms).multiplyScalar(0.5);return this.min.copy(Ss).sub(ws),this.max.copy(Ss).add(ws),this}}(),setFromObject:function(){var Es=new D;return function(Ss){var Ms=this;return Ss.updateMatrixWorld(!0),this.makeEmpty(),Ss.traverse(function(ws){var As=ws.geometry;if(void 0!==As)if(As&&As.isGeometry)for(var Ls=As.vertices,Rs=0,Ps=Ls.length;Rs<Ps;Rs++)Es.copy(Ls[Rs]),Es.applyMatrix4(ws.matrixWorld),Ms.expandByPoint(Es);else if(As&&As.isBufferGeometry){var Cs=As.attributes.position;if(void 0!==Cs){var Is,Us,Ds;Cs&&Cs.isInterleavedBufferAttribute?(Is=Cs.data.array,Us=Cs.offset,Ds=Cs.data.stride):(Is=Cs.array,Us=0,Ds=3);for(var Rs=Us,Ps=Is.length;Rs<Ps;Rs+=Ds)Es.fromArray(Is,Rs),Es.applyMatrix4(ws.matrixWorld),Ms.expandByPoint(Es)}}}),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(Es){return this.min.copy(Es.min),this.max.copy(Es.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=+(1/0),this.max.x=this.max.y=this.max.z=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(Es){var Ts=Es||new D;return Ts.addVectors(this.min,this.max).multiplyScalar(0.5)},size:function(Es){var Ts=Es||new D;return Ts.subVectors(this.max,this.min)},expandByPoint:function(Es){return this.min.min(Es),this.max.max(Es),this},expandByVector:function(Es){return this.min.sub(Es),this.max.add(Es),this},expandByScalar:function(Es){return this.min.addScalar(-Es),this.max.addScalar(Es),this},containsPoint:function(Es){return Es.x<this.min.x||Es.x>this.max.x||Es.y<this.min.y||Es.y>this.max.y||Es.z<this.min.z||Es.z>this.max.z?!1:!0},containsBox:function(Es){return this.min.x<=Es.min.x&&Es.max.x<=this.max.x&&this.min.y<=Es.min.y&&Es.max.y<=this.max.y&&this.min.z<=Es.min.z&&Es.max.z<=this.max.z},getParameter:function(Es,Ts){var Ss=Ts||new D;return Ss.set((Es.x-this.min.x)/(this.max.x-this.min.x),(Es.y-this.min.y)/(this.max.y-this.min.y),(Es.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(Es){return Es.max.x<this.min.x||Es.min.x>this.max.x||Es.max.y<this.min.y||Es.min.y>this.max.y||Es.max.z<this.min.z||Es.min.z>this.max.z?!1:!0},intersectsSphere:function(){var Es;return function(Ss){return void 0==Es&&(Es=new D),this.clampPoint(Ss.center,Es),Es.distanceToSquared(Ss.center)<=Ss.radius*Ss.radius}}(),intersectsPlane:function(Es){var Ts,Ss;return 0<Es.normal.x?(Ts=Es.normal.x*this.min.x,Ss=Es.normal.x*this.max.x):(Ts=Es.normal.x*this.max.x,Ss=Es.normal.x*this.min.x),0<Es.normal.y?(Ts+=Es.normal.y*this.min.y,Ss+=Es.normal.y*this.max.y):(Ts+=Es.normal.y*this.max.y,Ss+=Es.normal.y*this.min.y),0<Es.normal.z?(Ts+=Es.normal.z*this.min.z,Ss+=Es.normal.z*this.max.z):(Ts+=Es.normal.z*this.max.z,Ss+=Es.normal.z*this.min.z),Ts<=Es.constant&&Ss>=Es.constant},clampPoint:function(Es,Ts){var Ss=Ts||new D;return Ss.copy(Es).clamp(this.min,this.max)},distanceToPoint:function(){var Es=new D;return function(Ss){var Ms=Es.copy(Ss).clamp(this.min,this.max);return Ms.sub(Ss).length()}}(),getBoundingSphere:function(){var Es=new D;return function(Ss){var Ms=Ss||new ke;return Ms.center=this.center(),Ms.radius=0.5*this.size(Es).length(),Ms}}(),intersect:function(Es){return this.min.max(Es.min),this.max.min(Es.max),this.isEmpty()&&this.makeEmpty(),this},union:function(Es){return this.min.min(Es.min),this.max.max(Es.max),this},applyMatrix4:function(){var Es=[new D,new D,new D,new D,new D,new D,new D,new D];return function(Ss){return this.isEmpty()?this:(Es[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(Ss),Es[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(Ss),Es[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(Ss),Es[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(Ss),Es[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(Ss),Es[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(Ss),Es[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(Ss),Es[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(Ss),this.setFromPoints(Es),this)}}(),translate:function(Es){return this.min.add(Es),this.max.add(Es),this},equals:function(Es){return Es.min.equals(this.min)&&Es.max.equals(this.max)}},ke.prototype={constructor:ke,set:function(Es,Ts){return this.center.copy(Es),this.radius=Ts,this},setFromPoints:function(){var Es=new Ve;return function(Ss,Ms){var ws=this.center;void 0===Ms?Es.setFromPoints(Ss).center(ws):ws.copy(Ms);for(var As=0,Ls=0,Rs=Ss.length;Ls<Rs;Ls++)As=Math.max(As,ws.distanceToSquared(Ss[Ls]));return this.radius=Math.sqrt(As),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(Es){return this.center.copy(Es.center),this.radius=Es.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(Es){return Es.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(Es){return Es.distanceTo(this.center)-this.radius},intersectsSphere:function(Es){var Ts=this.radius+Es.radius;return Es.center.distanceToSquared(this.center)<=Ts*Ts},intersectsBox:function(Es){return Es.intersectsSphere(this)},intersectsPlane:function(Es){return Math.abs(this.center.dot(Es.normal)-Es.constant)<=this.radius},clampPoint:function(Es,Ts){var Ss=this.center.distanceToSquared(Es),Ms=Ts||new D;return Ms.copy(Es),Ss>this.radius*this.radius&&(Ms.sub(this.center).normalize(),Ms.multiplyScalar(this.radius).add(this.center)),Ms},getBoundingBox:function(Es){var Ts=Es||new Ve;return Ts.set(this.center,this.center),Ts.expandByScalar(this.radius),Ts},applyMatrix4:function(Es){return this.center.applyMatrix4(Es),this.radius=this.radius*Es.getMaxScaleOnAxis(),this},translate:function(Es){return this.center.add(Es),this},equals:function(Es){return Es.center.equals(this.center)&&Es.radius===this.radius}},He.prototype={constructor:He,isMatrix3:!0,set:function(Es,Ts,Ss,Ms,ws,As,Ls,Rs,Ps){var Cs=this.elements;return Cs[0]=Es,Cs[1]=Ms,Cs[2]=Ls,Cs[3]=Ts,Cs[4]=ws,Cs[5]=Rs,Cs[6]=Ss,Cs[7]=As,Cs[8]=Ps,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(Es){var Ts=Es.elements;return this.set(Ts[0],Ts[3],Ts[6],Ts[1],Ts[4],Ts[7],Ts[2],Ts[5],Ts[8]),this},setFromMatrix4:function(Es){var Ts=Es.elements;return this.set(Ts[0],Ts[4],Ts[8],Ts[1],Ts[5],Ts[9],Ts[2],Ts[6],Ts[10]),this},applyToVector3Array:function(){var Es;return function(Ss,Ms,ws){Es==void 0&&(Es=new D),Ms===void 0&&(Ms=0),ws===void 0&&(ws=Ss.length);for(var As=0,Ls=Ms;As<ws;As+=3,Ls+=3)Es.fromArray(Ss,Ls),Es.applyMatrix3(this),Es.toArray(Ss,Ls);return Ss}}(),applyToBuffer:function(){var Es;return function(Ss,Ms,ws){Es==void 0&&(Es=new D),Ms===void 0&&(Ms=0),ws===void 0&&(ws=Ss.length/Ss.itemSize);for(var As=0,Ls=Ms;As<ws;As++,Ls++)Es.x=Ss.getX(Ls),Es.y=Ss.getY(Ls),Es.z=Ss.getZ(Ls),Es.applyMatrix3(this),Ss.setXYZ(Es.x,Es.y,Es.z);return Ss}}(),multiplyScalar:function(Es){var Ts=this.elements;return Ts[0]*=Es,Ts[3]*=Es,Ts[6]*=Es,Ts[1]*=Es,Ts[4]*=Es,Ts[7]*=Es,Ts[2]*=Es,Ts[5]*=Es,Ts[8]*=Es,this},determinant:function(){var Es=this.elements,Ts=Es[0],Ss=Es[1],Ms=Es[2],ws=Es[3],As=Es[4],Ls=Es[5],Rs=Es[6],Ps=Es[7],Cs=Es[8];return Ts*As*Cs-Ts*Ls*Ps-Ss*ws*Cs+Ss*Ls*Rs+Ms*ws*Ps-Ms*As*Rs},getInverse:function(Es,Ts){Es&&Es.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var Ss=Es.elements,Ms=this.elements,ws=Ss[0],As=Ss[1],Ls=Ss[2],Rs=Ss[3],Ps=Ss[4],Cs=Ss[5],Is=Ss[6],Us=Ss[7],Ds=Ss[8],Ns=Ds*Ps-Cs*Us,Fs=Cs*Is-Ds*Rs,zs=Us*Rs-Ps*Is,Bs=ws*Ns+As*Fs+Ls*zs;if(0==Bs){var Os="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===Ts)throw new Error(Os);else console.warn(Os);return this.identity()}var Gs=1/Bs;return Ms[0]=Ns*Gs,Ms[1]=(Ls*Us-Ds*As)*Gs,Ms[2]=(Cs*As-Ls*Ps)*Gs,Ms[3]=Fs*Gs,Ms[4]=(Ds*ws-Ls*Is)*Gs,Ms[5]=(Ls*Rs-Cs*ws)*Gs,Ms[6]=zs*Gs,Ms[7]=(As*Is-Us*ws)*Gs,Ms[8]=(Ps*ws-As*Rs)*Gs,this},transpose:function(){var Ts=this.elements,Es;return Es=Ts[1],Ts[1]=Ts[3],Ts[3]=Es,Es=Ts[2],Ts[2]=Ts[6],Ts[6]=Es,Es=Ts[5],Ts[5]=Ts[7],Ts[7]=Es,this},flattenToArrayOffset:function(Es,Ts){return console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead."),this.toArray(Es,Ts)},getNormalMatrix:function(Es){return this.setFromMatrix4(Es).getInverse(this).transpose()},transposeIntoArray:function(Es){var Ts=this.elements;return Es[0]=Ts[0],Es[1]=Ts[3],Es[2]=Ts[6],Es[3]=Ts[1],Es[4]=Ts[4],Es[5]=Ts[7],Es[6]=Ts[2],Es[7]=Ts[5],Es[8]=Ts[8],this},fromArray:function(Es){return this.elements.set(Es),this},toArray:function(Es,Ts){void 0===Es&&(Es=[]),void 0===Ts&&(Ts=0);var Ss=this.elements;return Es[Ts]=Ss[0],Es[Ts+1]=Ss[1],Es[Ts+2]=Ss[2],Es[Ts+3]=Ss[3],Es[Ts+4]=Ss[4],Es[Ts+5]=Ss[5],Es[Ts+6]=Ss[6],Es[Ts+7]=Ss[7],Es[Ts+8]=Ss[8],Es}},We.prototype={constructor:We,set:function(Es,Ts){return this.normal.copy(Es),this.constant=Ts,this},setComponents:function(Es,Ts,Ss,Ms){return this.normal.set(Es,Ts,Ss),this.constant=Ms,this},setFromNormalAndCoplanarPoint:function(Es,Ts){return this.normal.copy(Es),this.constant=-Ts.dot(this.normal),this},setFromCoplanarPoints:function(){var Es=new D,Ts=new D;return function(Ms,ws,As){var Ls=Es.subVectors(As,ws).cross(Ts.subVectors(Ms,ws)).normalize();return this.setFromNormalAndCoplanarPoint(Ls,Ms),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(Es){return this.normal.copy(Es.normal),this.constant=Es.constant,this},normalize:function(){var Es=1/this.normal.length();return this.normal.multiplyScalar(Es),this.constant*=Es,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(Es){return this.normal.dot(Es)+this.constant},distanceToSphere:function(Es){return this.distanceToPoint(Es.center)-Es.radius},projectPoint:function(Es,Ts){return this.orthoPoint(Es,Ts).sub(Es).negate()},orthoPoint:function(Es,Ts){var Ss=this.distanceToPoint(Es),Ms=Ts||new D;return Ms.copy(this.normal).multiplyScalar(Ss)},intersectLine:function(){var Es=new D;return function(Ss,Ms){var ws=Ms||new D,As=Ss.delta(Es),Ls=this.normal.dot(As);if(0===Ls)return 0===this.distanceToPoint(Ss.start)?ws.copy(Ss.start):void 0;var Rs=-(Ss.start.dot(this.normal)+this.constant)/Ls;return 0>Rs||1<Rs?void 0:ws.copy(As).multiplyScalar(Rs).add(Ss.start)}}(),intersectsLine:function(Es){var Ts=this.distanceToPoint(Es.start),Ss=this.distanceToPoint(Es.end);return 0>Ts&&0<Ss||0>Ss&&0<Ts},intersectsBox:function(Es){return Es.intersectsPlane(this)},intersectsSphere:function(Es){return Es.intersectsPlane(this)},coplanarPoint:function(Es){var Ts=Es||new D;return Ts.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var Es=new D,Ts=new He;return function(Ms,ws){var As=this.coplanarPoint(Es).applyMatrix4(Ms),Ls=ws||Ts.getNormalMatrix(Ms),Rs=this.normal.applyMatrix3(Ls).normalize();return this.constant=-As.dot(Rs),this}}(),translate:function(Es){return this.constant=this.constant-Es.dot(this.normal),this},equals:function(Es){return Es.normal.equals(this.normal)&&Es.constant===this.constant}},je.prototype={constructor:je,set:function(Es,Ts,Ss,Ms,ws,As){var Ls=this.planes;return Ls[0].copy(Es),Ls[1].copy(Ts),Ls[2].copy(Ss),Ls[3].copy(Ms),Ls[4].copy(ws),Ls[5].copy(As),this},clone:function(){return new this.constructor().copy(this)},copy:function(Es){for(var Ts=this.planes,Ss=0;6>Ss;Ss++)Ts[Ss].copy(Es.planes[Ss]);return this},setFromMatrix:function(Es){var Ts=this.planes,Ss=Es.elements,Ms=Ss[0],ws=Ss[1],As=Ss[2],Ls=Ss[3],Rs=Ss[4],Ps=Ss[5],Cs=Ss[6],Is=Ss[7],Us=Ss[8],Ds=Ss[9],Ns=Ss[10],Fs=Ss[11],zs=Ss[12],Bs=Ss[13],Os=Ss[14],Gs=Ss[15];return Ts[0].setComponents(Ls-Ms,Is-Rs,Fs-Us,Gs-zs).normalize(),Ts[1].setComponents(Ls+Ms,Is+Rs,Fs+Us,Gs+zs).normalize(),Ts[2].setComponents(Ls+ws,Is+Ps,Fs+Ds,Gs+Bs).normalize(),Ts[3].setComponents(Ls-ws,Is-Ps,Fs-Ds,Gs-Bs).normalize(),Ts[4].setComponents(Ls-As,Is-Cs,Fs-Ns,Gs-Os).normalize(),Ts[5].setComponents(Ls+As,Is+Cs,Fs+Ns,Gs+Os).normalize(),this},intersectsObject:function(){var Es=new ke;return function(Ss){var Ms=Ss.geometry;return null===Ms.boundingSphere&&Ms.computeBoundingSphere(),Es.copy(Ms.boundingSphere).applyMatrix4(Ss.matrixWorld),this.intersectsSphere(Es)}}(),intersectsSprite:function(){var Es=new ke;return function(Ss){return Es.center.set(0,0,0),Es.radius=0.7071067811865476,Es.applyMatrix4(Ss.matrixWorld),this.intersectsSphere(Es)}}(),intersectsSphere:function(Es){for(var Ts=this.planes,Ss=Es.center,Ms=-Es.radius,ws=0;6>ws;ws++){var As=Ts[ws].distanceToPoint(Ss);if(As<Ms)return!1}return!0},intersectsBox:function(){var Es=new D,Ts=new D;return function(Ms){for(var ws=this.planes,As=0;6>As;As++){var Ls=ws[As];Es.x=0<Ls.normal.x?Ms.min.x:Ms.max.x,Ts.x=0<Ls.normal.x?Ms.max.x:Ms.min.x,Es.y=0<Ls.normal.y?Ms.min.y:Ms.max.y,Ts.y=0<Ls.normal.y?Ms.max.y:Ms.min.y,Es.z=0<Ls.normal.z?Ms.min.z:Ms.max.z,Ts.z=0<Ls.normal.z?Ms.max.z:Ms.min.z;var Rs=Ls.distanceToPoint(Es),Ps=Ls.distanceToPoint(Ts);if(0>Rs&&0>Ps)return!1}return!0}}(),containsPoint:function(Es){for(var Ts=this.planes,Ss=0;6>Ss;Ss++)if(0>Ts[Ss].distanceToPoint(Es))return!1;return!0}};var ps=0;ut.prototype={constructor:ut,isBufferAttribute:!0,get count(){return this.array.length/this.itemSize},set needsUpdate(Es){!0===Es&&this.version++},setDynamic:function(Es){return this.dynamic=Es,this},copy:function(Es){return this.array=new Es.array.constructor(Es.array),this.itemSize=Es.itemSize,this.normalized=Es.normalized,this.dynamic=Es.dynamic,this},copyAt:function(Es,Ts,Ss){Es*=this.itemSize,Ss*=Ts.itemSize;for(var Ms=0,ws=this.itemSize;Ms<ws;Ms++)this.array[Es+Ms]=Ts.array[Ss+Ms];return this},copyArray:function(Es){return this.array.set(Es),this},copyColorsArray:function(Es){for(var Ts=this.array,Ss=0,Ms=0,ws=Es.length;Ms<ws;Ms++){var As=Es[Ms];As===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",Ms),As=new Oe),Ts[Ss++]=As.r,Ts[Ss++]=As.g,Ts[Ss++]=As.b}return this},copyIndicesArray:function(Es){for(var Ts=this.array,Ss=0,Ms=0,ws=Es.length;Ms<ws;Ms++){var As=Es[Ms];Ts[Ss++]=As.a,Ts[Ss++]=As.b,Ts[Ss++]=As.c}return this},copyVector2sArray:function(Es){for(var Ts=this.array,Ss=0,Ms=0,ws=Es.length;Ms<ws;Ms++){var As=Es[Ms];As===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",Ms),As=new R),Ts[Ss++]=As.x,Ts[Ss++]=As.y}return this},copyVector3sArray:function(Es){for(var Ts=this.array,Ss=0,Ms=0,ws=Es.length;Ms<ws;Ms++){var As=Es[Ms];As===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",Ms),As=new D),Ts[Ss++]=As.x,Ts[Ss++]=As.y,Ts[Ss++]=As.z}return this},copyVector4sArray:function(Es){for(var Ts=this.array,Ss=0,Ms=0,ws=Es.length;Ms<ws;Ms++){var As=Es[Ms];As===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",Ms),As=new Ue),Ts[Ss++]=As.x,Ts[Ss++]=As.y,Ts[Ss++]=As.z,Ts[Ss++]=As.w}return this},set:function(Es,Ts){return void 0===Ts&&(Ts=0),this.array.set(Es,Ts),this},getX:function(Es){return this.array[Es*this.itemSize]},setX:function(Es,Ts){return this.array[Es*this.itemSize]=Ts,this},getY:function(Es){return this.array[Es*this.itemSize+1]},setY:function(Es,Ts){return this.array[Es*this.itemSize+1]=Ts,this},getZ:function(Es){return this.array[Es*this.itemSize+2]},setZ:function(Es,Ts){return this.array[Es*this.itemSize+2]=Ts,this},getW:function(Es){return this.array[Es*this.itemSize+3]},setW:function(Es,Ts){return this.array[Es*this.itemSize+3]=Ts,this},setXY:function(Es,Ts,Ss){return Es*=this.itemSize,this.array[Es+0]=Ts,this.array[Es+1]=Ss,this},setXYZ:function(Es,Ts,Ss,Ms){return Es*=this.itemSize,this.array[Es+0]=Ts,this.array[Es+1]=Ss,this.array[Es+2]=Ms,this},setXYZW:function(Es,Ts,Ss,Ms,ws){return Es*=this.itemSize,this.array[Es+0]=Ts,this.array[Es+1]=Ss,this.array[Es+2]=Ms,this.array[Es+3]=ws,this},clone:function(){return new this.constructor().copy(this)}},yt.prototype={constructor:yt,clone:function(){return new this.constructor().copy(this)},copy:function(Es){this.a=Es.a,this.b=Es.b,this.c=Es.c,this.normal.copy(Es.normal),this.color.copy(Es.color),this.materialIndex=Es.materialIndex;for(var Ts=0,Ss=Es.vertexNormals.length;Ts<Ss;Ts++)this.vertexNormals[Ts]=Es.vertexNormals[Ts].clone();for(var Ts=0,Ss=Es.vertexColors.length;Ts<Ss;Ts++)this.vertexColors[Ts]=Es.vertexColors[Ts].clone();return this}},xt.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],xt.DefaultOrder="XYZ",xt.prototype={constructor:xt,isEuler:!0,get x(){return this._x},set x(Es){this._x=Es,this.onChangeCallback()},get y(){return this._y},set y(Es){this._y=Es,this.onChangeCallback()},get z(){return this._z},set z(Es){this._z=Es,this.onChangeCallback()},get order(){return this._order},set order(Es){this._order=Es,this.onChangeCallback()},set:function(Es,Ts,Ss,Ms){return this._x=Es,this._y=Ts,this._z=Ss,this._order=Ms||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(Es){return this._x=Es._x,this._y=Es._y,this._z=Es._z,this._order=Es._order,this.onChangeCallback(),this},setFromRotationMatrix:function(Es,Ts,Ss){var Ms=A.Math.clamp,ws=Es.elements,As=ws[0],Ls=ws[4],Rs=ws[8],Ps=ws[1],Cs=ws[5],Is=ws[9],Us=ws[2],Ds=ws[6],Ns=ws[10];return Ts=Ts||this._order,"XYZ"===Ts?(this._y=Math.asin(Ms(Rs,-1,1)),0.99999>Math.abs(Rs)?(this._x=Math.atan2(-Is,Ns),this._z=Math.atan2(-Ls,As)):(this._x=Math.atan2(Ds,Cs),this._z=0)):"YXZ"===Ts?(this._x=Math.asin(-Ms(Is,-1,1)),0.99999>Math.abs(Is)?(this._y=Math.atan2(Rs,Ns),this._z=Math.atan2(Ps,Cs)):(this._y=Math.atan2(-Us,As),this._z=0)):"ZXY"===Ts?(this._x=Math.asin(Ms(Ds,-1,1)),0.99999>Math.abs(Ds)?(this._y=Math.atan2(-Us,Ns),this._z=Math.atan2(-Ls,Cs)):(this._y=0,this._z=Math.atan2(Ps,As))):"ZYX"===Ts?(this._y=Math.asin(-Ms(Us,-1,1)),0.99999>Math.abs(Us)?(this._x=Math.atan2(Ds,Ns),this._z=Math.atan2(Ps,As)):(this._x=0,this._z=Math.atan2(-Ls,Cs))):"YZX"===Ts?(this._z=Math.asin(Ms(Ps,-1,1)),0.99999>Math.abs(Ps)?(this._x=Math.atan2(-Is,Cs),this._y=Math.atan2(-Us,As)):(this._x=0,this._y=Math.atan2(Rs,Ns))):"XZY"===Ts?(this._z=Math.asin(-Ms(Ls,-1,1)),0.99999>Math.abs(Ls)?(this._x=Math.atan2(Ds,Cs),this._y=Math.atan2(Rs,As)):(this._x=Math.atan2(-Is,Ns),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+Ts),this._order=Ts,!1!==Ss&&this.onChangeCallback(),this},setFromQuaternion:function(){var Es;return function(Ss,Ms,ws){return void 0==Es&&(Es=new I),Es.makeRotationFromQuaternion(Ss),this.setFromRotationMatrix(Es,Ms,ws)}}(),setFromVector3:function(Es,Ts){return this.set(Es.x,Es.y,Es.z,Ts||this._order)},reorder:function(){var Es=new U;return function(Ss){return Es.setFromEuler(this),this.setFromQuaternion(Es,Ss)}}(),equals:function(Es){return Es._x===this._x&&Es._y===this._y&&Es._z===this._z&&Es._order===this._order},fromArray:function(Es){return this._x=Es[0],this._y=Es[1],this._z=Es[2],void 0!==Es[3]&&(this._order=Es[3]),this.onChangeCallback(),this},toArray:function(Es,Ts){return void 0===Es&&(Es=[]),void 0===Ts&&(Ts=0),Es[Ts]=this._x,Es[Ts+1]=this._y,Es[Ts+2]=this._z,Es[Ts+3]=this._order,Es},toVector3:function(Es){return Es?Es.set(this._x,this._y,this._z):new D(this._x,this._y,this._z)},onChange:function(Es){return this.onChangeCallback=Es,this},onChangeCallback:function(){}},_t.prototype={constructor:_t,set:function(Es){this.mask=1<<Es},enable:function(Es){this.mask|=1<<Es},toggle:function(Es){this.mask^=1<<Es},disable:function(Es){this.mask&=~(1<<Es)},test:function(Es){return 0!=(this.mask&Es.mask)}},vt.DefaultUp=new D(0,1,0),vt.DefaultMatrixAutoUpdate=!0,Object.assign(vt.prototype,L.prototype,{isObject3D:!0,applyMatrix:function(Es){this.matrix.multiplyMatrices(Es,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(Es,Ts){this.quaternion.setFromAxisAngle(Es,Ts)},setRotationFromEuler:function(Es){this.quaternion.setFromEuler(Es,!0)},setRotationFromMatrix:function(Es){this.quaternion.setFromRotationMatrix(Es)},setRotationFromQuaternion:function(Es){this.quaternion.copy(Es)},rotateOnAxis:function(){var Es=new U;return function(Ss,Ms){return Es.setFromAxisAngle(Ss,Ms),this.quaternion.multiply(Es),this}}(),rotateX:function(){var Es=new D(1,0,0);return function(Ss){return this.rotateOnAxis(Es,Ss)}}(),rotateY:function(){var Es=new D(0,1,0);return function(Ss){return this.rotateOnAxis(Es,Ss)}}(),rotateZ:function(){var Es=new D(0,0,1);return function(Ss){return this.rotateOnAxis(Es,Ss)}}(),translateOnAxis:function(){var Es=new D;return function(Ss,Ms){return Es.copy(Ss).applyQuaternion(this.quaternion),this.position.add(Es.multiplyScalar(Ms)),this}}(),translateX:function(){var Es=new D(1,0,0);return function(Ss){return this.translateOnAxis(Es,Ss)}}(),translateY:function(){var Es=new D(0,1,0);return function(Ss){return this.translateOnAxis(Es,Ss)}}(),translateZ:function(){var Es=new D(0,0,1);return function(Ss){return this.translateOnAxis(Es,Ss)}}(),localToWorld:function(Es){return Es.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var Es=new I;return function(Ss){return Ss.applyMatrix4(Es.getInverse(this.matrixWorld))}}(),lookAt:function(){var Es=new I;return function(Ss){Es.lookAt(Ss,this.position,this.up),this.quaternion.setFromRotationMatrix(Es)}}(),add:function(Es){if(1<arguments.length){for(var Ts=0;Ts<arguments.length;Ts++)this.add(arguments[Ts]);return this}return Es===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",Es),this):(Es&&Es.isObject3D?(null!==Es.parent&&Es.parent.remove(Es),Es.parent=this,Es.dispatchEvent({type:"added"}),this.children.push(Es)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",Es),this)},remove:function(Es){if(1<arguments.length)for(var Ts=0;Ts<arguments.length;Ts++)this.remove(arguments[Ts]);var Ss=this.children.indexOf(Es);-1!==Ss&&(Es.parent=null,Es.dispatchEvent({type:"removed"}),this.children.splice(Ss,1))},getObjectById:function(Es){return this.getObjectByProperty("id",Es)},getObjectByName:function(Es){return this.getObjectByProperty("name",Es)},getObjectByProperty:function(Es,Ts){if(this[Es]===Ts)return this;for(var Ss=0,Ms=this.children.length;Ss<Ms;Ss++){var ws=this.children[Ss],As=ws.getObjectByProperty(Es,Ts);if(As!==void 0)return As}return void 0},getWorldPosition:function(Es){var Ts=Es||new D;return this.updateMatrixWorld(!0),Ts.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var Es=new D,Ts=new D;return function(Ms){var ws=Ms||new U;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(Es,ws,Ts),ws}}(),getWorldRotation:function(){var Es=new U;return function(Ss){var Ms=Ss||new xt;return this.getWorldQuaternion(Es),Ms.setFromQuaternion(Es,this.rotation.order,!1)}}(),getWorldScale:function(){var Es=new D,Ts=new U;return function(Ms){var ws=Ms||new D;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(Es,Ts,ws),ws}}(),getWorldDirection:function(){var Es=new U;return function(Ss){var Ms=Ss||new D;return this.getWorldQuaternion(Es),Ms.set(0,0,1).applyQuaternion(Es)}}(),raycast:function(){},traverse:function(Es){Es(this);for(var Ts=this.children,Ss=0,Ms=Ts.length;Ss<Ms;Ss++)Ts[Ss].traverse(Es)},traverseVisible:function(Es){if(!1!==this.visible){Es(this);for(var Ts=this.children,Ss=0,Ms=Ts.length;Ss<Ms;Ss++)Ts[Ss].traverseVisible(Es)}},traverseAncestors:function(Es){var Ts=this.parent;null!==Ts&&(Es(Ts),Ts.traverseAncestors(Es))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(Es){!0===this.matrixAutoUpdate&&this.updateMatrix(),(!0===this.matrixWorldNeedsUpdate||!0===Es)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,Es=!0);for(var Ts=this.children,Ss=0,Ms=Ts.length;Ss<Ms;Ss++)Ts[Ss].updateMatrixWorld(Es)},toJSON:function(Es){function Ts(Is){var Us=[];for(var Ds in Is){var Ns=Is[Ds];delete Ns.metadata,Us.push(Ns)}return Us}var Ss=void 0===Es||""===Es,Ms={};Ss&&(Es={geometries:{},materials:{},textures:{},images:{}},Ms.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var ws={};if(ws.uuid=this.uuid,ws.type=this.type,""!==this.name&&(ws.name=this.name),"{}"!==JSON.stringify(this.userData)&&(ws.userData=this.userData),!0===this.castShadow&&(ws.castShadow=!0),!0===this.receiveShadow&&(ws.receiveShadow=!0),!1===this.visible&&(ws.visible=!1),ws.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===Es.geometries[this.geometry.uuid]&&(Es.geometries[this.geometry.uuid]=this.geometry.toJSON(Es)),ws.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===Es.materials[this.material.uuid]&&(Es.materials[this.material.uuid]=this.material.toJSON(Es)),ws.material=this.material.uuid),0<this.children.length){ws.children=[];for(var As=0;As<this.children.length;As++)ws.children.push(this.children[As].toJSON(Es).object)}if(Ss){var Ls=Ts(Es.geometries),Rs=Ts(Es.materials),Ps=Ts(Es.textures),Cs=Ts(Es.images);0<Ls.length&&(Ms.geometries=Ls),0<Rs.length&&(Ms.materials=Rs),0<Ps.length&&(Ms.textures=Ps),0<Cs.length&&(Ms.images=Cs)}return Ms.object=ws,Ms},clone:function(Es){return new this.constructor().copy(this,Es)},copy:function(Es,Ts){if(void 0===Ts&&(Ts=!0),this.name=Es.name,this.up.copy(Es.up),this.position.copy(Es.position),this.quaternion.copy(Es.quaternion),this.scale.copy(Es.scale),this.matrix.copy(Es.matrix),this.matrixWorld.copy(Es.matrixWorld),this.matrixAutoUpdate=Es.matrixAutoUpdate,this.matrixWorldNeedsUpdate=Es.matrixWorldNeedsUpdate,this.visible=Es.visible,this.castShadow=Es.castShadow,this.receiveShadow=Es.receiveShadow,this.frustumCulled=Es.frustumCulled,this.renderOrder=Es.renderOrder,this.userData=JSON.parse(JSON.stringify(Es.userData)),!0===Ts)for(var Ss=0;Ss<Es.children.length;Ss++){var Ms=Es.children[Ss];this.add(Ms.clone())}return this}});var us=0;;Object.assign(Et.prototype,L.prototype,{isGeometry:!0,applyMatrix:function(Es){for(var Ts=new He().getNormalMatrix(Es),Ss=0,Ms=this.vertices.length;Ss<Ms;Ss++){var ws=this.vertices[Ss];ws.applyMatrix4(Es)}for(var Ss=0,Ms=this.faces.length;Ss<Ms;Ss++){var As=this.faces[Ss];As.normal.applyMatrix3(Ts).normalize();for(var Ls=0,Rs=As.vertexNormals.length;Ls<Rs;Ls++)As.vertexNormals[Ls].applyMatrix3(Ts).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var Es;return function(Ss){return void 0==Es&&(Es=new I),Es.makeRotationX(Ss),this.applyMatrix(Es),this}}(),rotateY:function(){var Es;return function(Ss){return void 0==Es&&(Es=new I),Es.makeRotationY(Ss),this.applyMatrix(Es),this}}(),rotateZ:function(){var Es;return function(Ss){return void 0==Es&&(Es=new I),Es.makeRotationZ(Ss),this.applyMatrix(Es),this}}(),translate:function(){var Es;return function(Ss,Ms,ws){return void 0==Es&&(Es=new I),Es.makeTranslation(Ss,Ms,ws),this.applyMatrix(Es),this}}(),scale:function(){var Es;return function(Ss,Ms,ws){return void 0==Es&&(Es=new I),Es.makeScale(Ss,Ms,ws),this.applyMatrix(Es),this}}(),lookAt:function(){var Es;return function(Ss){Es==void 0&&(Es=new vt),Es.lookAt(Ss),Es.updateMatrix(),this.applyMatrix(Es.matrix)}}(),fromBufferGeometry:function(Es){function Ts(Vs,ks,Hs,Ws){var js=void 0===Ls?[]:[Is[Vs].clone(),Is[ks].clone(),Is[Hs].clone()],Xs=void 0===Rs?[]:[Ss.colors[Vs].clone(),Ss.colors[ks].clone(),Ss.colors[Hs].clone()],qs=new yt(Vs,ks,Hs,js,Xs,Ws);Ss.faces.push(qs),void 0!==Ps&&Ss.faceVertexUvs[0].push([Us[Vs].clone(),Us[ks].clone(),Us[Hs].clone()]),void 0!==Cs&&Ss.faceVertexUvs[1].push([Ds[Vs].clone(),Ds[ks].clone(),Ds[Hs].clone()])}var Ss=this,Ms=null===Es.index?void 0:Es.index.array,ws=Es.attributes,As=ws.position.array,Ls=void 0===ws.normal?void 0:ws.normal.array,Rs=void 0===ws.color?void 0:ws.color.array,Ps=void 0===ws.uv?void 0:ws.uv.array,Cs=void 0===ws.uv2?void 0:ws.uv2.array;void 0!==Cs&&(this.faceVertexUvs[1]=[]);for(var Is=[],Us=[],Ds=[],Ns=0,Fs=0;Ns<As.length;Ns+=3,Fs+=2)Ss.vertices.push(new D(As[Ns],As[Ns+1],As[Ns+2])),void 0!==Ls&&Is.push(new D(Ls[Ns],Ls[Ns+1],Ls[Ns+2])),void 0!==Rs&&Ss.colors.push(new Oe(Rs[Ns],Rs[Ns+1],Rs[Ns+2])),void 0!==Ps&&Us.push(new R(Ps[Fs],Ps[Fs+1])),void 0!==Cs&&Ds.push(new R(Cs[Fs],Cs[Fs+1]));if(void 0!==Ms){var zs=Es.groups;if(0<zs.length)for(var Ns=0;Ns<zs.length;Ns++)for(var Bs=zs[Ns],Os=Bs.start,Gs=Bs.count,Fs=Os;Fs<Os+Gs;Fs+=3)Ts(Ms[Fs],Ms[Fs+1],Ms[Fs+2],Bs.materialIndex);else for(var Ns=0;Ns<Ms.length;Ns+=3)Ts(Ms[Ns],Ms[Ns+1],Ms[Ns+2])}else for(var Ns=0;Ns<As.length/3;Ns+=3)Ts(Ns,Ns+1,Ns+2);return this.computeFaceNormals(),null!==Es.boundingBox&&(this.boundingBox=Es.boundingBox.clone()),null!==Es.boundingSphere&&(this.boundingSphere=Es.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var Es=this.boundingBox.center().negate();return this.translate(Es.x,Es.y,Es.z),Es},normalize:function(){this.computeBoundingSphere();var Es=this.boundingSphere.center,Ts=this.boundingSphere.radius,Ss=0===Ts?1:1/Ts,Ms=new I;return Ms.set(Ss,0,0,-Ss*Es.x,0,Ss,0,-Ss*Es.y,0,0,Ss,-Ss*Es.z,0,0,0,1),this.applyMatrix(Ms),this},computeFaceNormals:function(){for(var Es=new D,Ts=new D,Ss=0,Ms=this.faces.length;Ss<Ms;Ss++){var ws=this.faces[Ss],As=this.vertices[ws.a],Ls=this.vertices[ws.b],Rs=this.vertices[ws.c];Es.subVectors(Rs,Ls),Ts.subVectors(As,Ls),Es.cross(Ts),Es.normalize(),ws.normal.copy(Es)}},computeVertexNormals:function(Es){Es===void 0&&(Es=!0);var Ts,Ss,Ms,ws,As,Ls;for(Ls=Array(this.vertices.length),Ts=0,Ss=this.vertices.length;Ts<Ss;Ts++)Ls[Ts]=new D;if(Es){var Rs,Ps,Cs,Is=new D,Us=new D;for(Ms=0,ws=this.faces.length;Ms<ws;Ms++)As=this.faces[Ms],Rs=this.vertices[As.a],Ps=this.vertices[As.b],Cs=this.vertices[As.c],Is.subVectors(Cs,Ps),Us.subVectors(Rs,Ps),Is.cross(Us),Ls[As.a].add(Is),Ls[As.b].add(Is),Ls[As.c].add(Is)}else for(Ms=0,ws=this.faces.length;Ms<ws;Ms++)As=this.faces[Ms],Ls[As.a].add(As.normal),Ls[As.b].add(As.normal),Ls[As.c].add(As.normal);for(Ts=0,Ss=this.vertices.length;Ts<Ss;Ts++)Ls[Ts].normalize();for(Ms=0,ws=this.faces.length;Ms<ws;Ms++){As=this.faces[Ms];var Ds=As.vertexNormals;3===Ds.length?(Ds[0].copy(Ls[As.a]),Ds[1].copy(Ls[As.b]),Ds[2].copy(Ls[As.c])):(Ds[0]=Ls[As.a].clone(),Ds[1]=Ls[As.b].clone(),Ds[2]=Ls[As.c].clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var Es,Ts,Ss,Ms,ws;for(Ss=0,Ms=this.faces.length;Ss<Ms;Ss++)for(ws=this.faces[Ss],ws.__originalFaceNormal?ws.__originalFaceNormal.copy(ws.normal):ws.__originalFaceNormal=ws.normal.clone(),ws.__originalVertexNormals||(ws.__originalVertexNormals=[]),(Es=0,Ts=ws.vertexNormals.length);Es<Ts;Es++)ws.__originalVertexNormals[Es]?ws.__originalVertexNormals[Es].copy(ws.vertexNormals[Es]):ws.__originalVertexNormals[Es]=ws.vertexNormals[Es].clone();var As=new Et;for(As.faces=this.faces,Es=0,Ts=this.morphTargets.length;Es<Ts;Es++){if(!this.morphNormals[Es]){this.morphNormals[Es]={},this.morphNormals[Es].faceNormals=[],this.morphNormals[Es].vertexNormals=[];var Ls=this.morphNormals[Es].faceNormals,Rs=this.morphNormals[Es].vertexNormals,Ps,Cs;for(Ss=0,Ms=this.faces.length;Ss<Ms;Ss++)Ps=new D,Cs={a:new D,b:new D,c:new D},Ls.push(Ps),Rs.push(Cs)}var Is=this.morphNormals[Es];As.vertices=this.morphTargets[Es].vertices,As.computeFaceNormals(),As.computeVertexNormals();var Ps,Cs;for(Ss=0,Ms=this.faces.length;Ss<Ms;Ss++)ws=this.faces[Ss],Ps=Is.faceNormals[Ss],Cs=Is.vertexNormals[Ss],Ps.copy(ws.normal),Cs.a.copy(ws.vertexNormals[0]),Cs.b.copy(ws.vertexNormals[1]),Cs.c.copy(ws.vertexNormals[2])}for(Ss=0,Ms=this.faces.length;Ss<Ms;Ss++)ws=this.faces[Ss],ws.normal=ws.__originalFaceNormal,ws.vertexNormals=ws.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){for(var Es=0,Ts=this.vertices,Ss=0,Ms=Ts.length;Ss<Ms;Ss++)0<Ss&&(Es+=Ts[Ss].distanceTo(Ts[Ss-1])),this.lineDistances[Ss]=Es},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Ve),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new ke),this.boundingSphere.setFromPoints(this.vertices)},merge:function(Es,Ts,Ss){if(!1===(Es&&Es.isGeometry))return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",Es);var ws=this.vertices.length,As=this.vertices,Ls=Es.vertices,Rs=this.faces,Ps=Es.faces,Cs=this.faceVertexUvs[0],Is=Es.faceVertexUvs[0],Ms;Ss===void 0&&(Ss=0),Ts!==void 0&&(Ms=new He().getNormalMatrix(Ts));for(var Us=0,Ds=Ls.length;Us<Ds;Us++){var Ns=Ls[Us],Fs=Ns.clone();Ts!==void 0&&Fs.applyMatrix4(Ts),As.push(Fs)}for(Us=0,Ds=Ps.length;Us<Ds;Us++){var zs=Ps[Us],Vs=zs.vertexNormals,ks=zs.vertexColors,Bs,Os,Gs;Bs=new yt(zs.a+ws,zs.b+ws,zs.c+ws),Bs.normal.copy(zs.normal),Ms!=void 0&&Bs.normal.applyMatrix3(Ms).normalize();for(var Hs=0,Ws=Vs.length;Hs<Ws;Hs++)Os=Vs[Hs].clone(),void 0!=Ms&&Os.applyMatrix3(Ms).normalize(),Bs.vertexNormals.push(Os);Bs.color.copy(zs.color);for(var Hs=0,Ws=ks.length;Hs<Ws;Hs++)Gs=ks[Hs],Bs.vertexColors.push(Gs.clone());Bs.materialIndex=zs.materialIndex+Ss,Rs.push(Bs)}for(Us=0,Ds=Is.length;Us<Ds;Us++){var js=Is[Us],Xs=[];if(void 0!==js){for(var Hs=0,Ws=js.length;Hs<Ws;Hs++)Xs.push(js[Hs].clone());Cs.push(Xs)}}},mergeMesh:function(Es){return!1===(Es&&Es.isMesh)?void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",Es):void(Es.matrixAutoUpdate&&Es.updateMatrix(),this.merge(Es.geometry,Es.matrix))},mergeVertices:function(){var Es={},Ts=[],Ss=[],As=Math.pow(10,4),Ms,ws,Ls,Rs,Ps,Cs,Is,Us;for(Ls=0,Rs=this.vertices.length;Ls<Rs;Ls++)Ms=this.vertices[Ls],ws=Math.round(Ms.x*As)+"_"+Math.round(Ms.y*As)+"_"+Math.round(Ms.z*As),void 0===Es[ws]?(Es[ws]=Ls,Ts.push(this.vertices[Ls]),Ss[Ls]=Ts.length-1):Ss[Ls]=Ss[Es[ws]];var Ds=[];for(Ls=0,Rs=this.faces.length;Ls<Rs;Ls++){Ps=this.faces[Ls],Ps.a=Ss[Ps.a],Ps.b=Ss[Ps.b],Ps.c=Ss[Ps.c],Cs=[Ps.a,Ps.b,Ps.c];for(var Ns=0;3>Ns;Ns++)if(Cs[Ns]===Cs[(Ns+1)%3]){Ds.push(Ls);break}}for(Ls=Ds.length-1;0<=Ls;Ls--){var Fs=Ds[Ls];for(this.faces.splice(Fs,1),Is=0,Us=this.faceVertexUvs.length;Is<Us;Is++)this.faceVertexUvs[Is].splice(Fs,1)}var zs=this.vertices.length-Ts.length;return this.vertices=Ts,zs},sortFacesByMaterialIndex:function(){for(var Es=this.faces,Ts=Es.length,Ss=0;Ss<Ts;Ss++)Es[Ss]._id=Ss;Es.sort(function(Cs,Is){return Cs.materialIndex-Is.materialIndex});var Ms=this.faceVertexUvs[0],ws=this.faceVertexUvs[1],As,Ls;Ms&&Ms.length===Ts&&(As=[]),ws&&ws.length===Ts&&(Ls=[]);for(var Ss=0;Ss<Ts;Ss++){var Rs=Es[Ss]._id;As&&As.push(Ms[Rs]),Ls&&Ls.push(ws[Rs])}As&&(this.faceVertexUvs[0]=As),Ls&&(this.faceVertexUvs[1]=Ls)},toJSON:function(){function Es(Zs,Js,Qs){return Qs?Zs|1<<Js:Zs&~(1<<Js)}function Ts(Zs){var Js=Zs.x.toString()+Zs.y.toString()+Zs.z.toString();return void 0===Ds[Js]?(Ds[Js]=Us.length/3,Us.push(Zs.x,Zs.y,Zs.z),Ds[Js]):Ds[Js]}function Ss(Zs){var Js=Zs.r.toString()+Zs.g.toString()+Zs.b.toString();return void 0===Fs[Js]?(Fs[Js]=Ns.length,Ns.push(Zs.getHex()),Fs[Js]):Fs[Js]}function Ms(Zs){var Js=Zs.x.toString()+Zs.y.toString();return void 0===Bs[Js]?(Bs[Js]=zs.length/2,zs.push(Zs.x,Zs.y),Bs[Js]):Bs[Js]}var ws={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(ws.uuid=this.uuid,ws.type=this.type,""!==this.name&&(ws.name=this.name),void 0!==this.parameters){var As=this.parameters;for(var Ls in As)void 0!==As[Ls]&&(ws[Ls]=As[Ls]);return ws}for(var Rs=[],Ps=0;Ps<this.vertices.length;Ps++){var Cs=this.vertices[Ps];Rs.push(Cs.x,Cs.y,Cs.z)}for(var Is=[],Us=[],Ds={},Ns=[],Fs={},zs=[],Bs={},Ps=0;Ps<this.faces.length;Ps++){var Os=this.faces[Ps],Gs=void 0!==this.faceVertexUvs[0][Ps],Vs=0<Os.normal.length(),ks=0<Os.vertexNormals.length,Hs=1!==Os.color.r||1!==Os.color.g||1!==Os.color.b,Ws=0<Os.vertexColors.length,js=0;if(js=Es(js,0,0),js=Es(js,1,!0),js=Es(js,2,!1),js=Es(js,3,Gs),js=Es(js,4,Vs),js=Es(js,5,ks),js=Es(js,6,Hs),js=Es(js,7,Ws),Is.push(js),Is.push(Os.a,Os.b,Os.c),Is.push(Os.materialIndex),Gs){var Xs=this.faceVertexUvs[0][Ps];Is.push(Ms(Xs[0]),Ms(Xs[1]),Ms(Xs[2]))}if(Vs&&Is.push(Ts(Os.normal)),ks){var qs=Os.vertexNormals;Is.push(Ts(qs[0]),Ts(qs[1]),Ts(qs[2]))}if(Hs&&Is.push(Ss(Os.color)),Ws){var Ys=Os.vertexColors;Is.push(Ss(Ys[0]),Ss(Ys[1]),Ss(Ys[2]))}}return ws.data={},ws.data.vertices=Rs,ws.data.normals=Us,0<Ns.length&&(ws.data.colors=Ns),0<zs.length&&(ws.data.uvs=[zs]),ws.data.faces=Is,ws},clone:function(){return new Et().copy(this)},copy:function(Es){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]];for(var Ts=Es.vertices,Ss=0,Ms=Ts.length;Ss<Ms;Ss++)this.vertices.push(Ts[Ss].clone());for(var ws=Es.faces,Ss=0,Ms=ws.length;Ss<Ms;Ss++)this.faces.push(ws[Ss].clone());for(var Ss=0,Ms=Es.faceVertexUvs.length;Ss<Ms;Ss++){var As=Es.faceVertexUvs[Ss];this.faceVertexUvs[Ss]===void 0&&(this.faceVertexUvs[Ss]=[]);for(var Ls=0,Rs=As.length;Ls<Rs;Ls++){for(var Ps=As[Ls],Cs=[],Is=0,Us=Ps.length;Is<Us;Is++){var Ds=Ps[Is];Cs.push(Ds.clone())}this.faceVertexUvs[Ss].push(Cs)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var ms=0;;Object.assign(St.prototype,L.prototype,{computeBoundingBox:Et.prototype.computeBoundingBox,computeBoundingSphere:Et.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},computeGroups:function(Es){for(var Ss=[],ws=Es.faces,As=0,Ts,Ms;As<ws.length;As++){var Ls=ws[As];Ls.materialIndex!==Ms&&(Ms=Ls.materialIndex,Ts!=void 0&&(Ts.count=3*As-Ts.start,Ss.push(Ts)),Ts={start:3*As,materialIndex:Ms})}Ts!==void 0&&(Ts.count=3*As-Ts.start,Ss.push(Ts)),this.groups=Ss},fromGeometry:function(Es){var Ts=Es.faces,Ss=Es.vertices,Ms=Es.faceVertexUvs,ws=Ms[0]&&0<Ms[0].length,As=Ms[1]&&0<Ms[1].length,Ls=Es.morphTargets,Rs=Ls.length,Ps;if(0<Rs){Ps=[];for(var Cs=0;Cs<Rs;Cs++)Ps[Cs]=[];this.morphTargets.position=Ps}var Is=Es.morphNormals,Us=Is.length,Ds;if(0<Us){Ds=[];for(var Cs=0;Cs<Us;Cs++)Ds[Cs]=[];this.morphTargets.normal=Ds}for(var Ns=Es.skinIndices,Fs=Es.skinWeights,zs=Ns.length===Ss.length,Bs=Fs.length===Ss.length,Cs=0;Cs<Ts.length;Cs++){var Os=Ts[Cs];this.vertices.push(Ss[Os.a],Ss[Os.b],Ss[Os.c]);var Gs=Os.vertexNormals;if(3===Gs.length)this.normals.push(Gs[0],Gs[1],Gs[2]);else{var Vs=Os.normal;this.normals.push(Vs,Vs,Vs)}var ks=Os.vertexColors;if(3===ks.length)this.colors.push(ks[0],ks[1],ks[2]);else{var Hs=Os.color;this.colors.push(Hs,Hs,Hs)}if(!0===ws){var Ws=Ms[0][Cs];void 0===Ws?(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",Cs),this.uvs.push(new R,new R,new R)):this.uvs.push(Ws[0],Ws[1],Ws[2])}if(!0===As){var Ws=Ms[1][Cs];void 0===Ws?(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",Cs),this.uvs2.push(new R,new R,new R)):this.uvs2.push(Ws[0],Ws[1],Ws[2])}for(var js=0;js<Rs;js++){var Xs=Ls[js].vertices;Ps[js].push(Xs[Os.a],Xs[Os.b],Xs[Os.c])}for(var js=0;js<Us;js++){var qs=Is[js].vertexNormals[Cs];Ds[js].push(qs.a,qs.b,qs.c)}zs&&this.skinIndices.push(Ns[Os.a],Ns[Os.b],Ns[Os.c]),Bs&&this.skinWeights.push(Fs[Os.a],Fs[Os.b],Fs[Os.c])}return this.computeGroups(Es),this.verticesNeedUpdate=Es.verticesNeedUpdate,this.normalsNeedUpdate=Es.normalsNeedUpdate,this.colorsNeedUpdate=Es.colorsNeedUpdate,this.uvsNeedUpdate=Es.uvsNeedUpdate,this.groupsNeedUpdate=Es.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.assign(Mt.prototype,L.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(Es){this.index=Es},addAttribute:function(Es,Ts){return!1===(Ts&&Ts.isBufferAttribute)&&!1===(Ts&&Ts.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(Es,new ut(arguments[1],arguments[2]))):"index"===Es?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(Ts)):(this.attributes[Es]=Ts,this)},getAttribute:function(Es){return this.attributes[Es]},removeAttribute:function(Es){return delete this.attributes[Es],this},addGroup:function(Es,Ts,Ss){this.groups.push({start:Es,count:Ts,materialIndex:Ss===void 0?0:Ss})},clearGroups:function(){this.groups=[]},setDrawRange:function(Es,Ts){this.drawRange.start=Es,this.drawRange.count=Ts},applyMatrix:function(Es){var Ts=this.attributes.position;void 0!==Ts&&(Es.applyToVector3Array(Ts.array),Ts.needsUpdate=!0);var Ss=this.attributes.normal;if(void 0!==Ss){var Ms=new He().getNormalMatrix(Es);Ms.applyToVector3Array(Ss.array),Ss.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var Es;return function(Ss){return void 0==Es&&(Es=new I),Es.makeRotationX(Ss),this.applyMatrix(Es),this}}(),rotateY:function(){var Es;return function(Ss){return void 0==Es&&(Es=new I),Es.makeRotationY(Ss),this.applyMatrix(Es),this}}(),rotateZ:function(){var Es;return function(Ss){return void 0==Es&&(Es=new I),Es.makeRotationZ(Ss),this.applyMatrix(Es),this}}(),translate:function(){var Es;return function(Ss,Ms,ws){return void 0==Es&&(Es=new I),Es.makeTranslation(Ss,Ms,ws),this.applyMatrix(Es),this}}(),scale:function(){var Es;return function(Ss,Ms,ws){return void 0==Es&&(Es=new I),Es.makeScale(Ss,Ms,ws),this.applyMatrix(Es),this}}(),lookAt:function(){var Es;return function(Ss){Es==void 0&&(Es=new vt),Es.lookAt(Ss),Es.updateMatrix(),this.applyMatrix(Es.matrix)}}(),center:function(){this.computeBoundingBox();var Es=this.boundingBox.center().negate();return this.translate(Es.x,Es.y,Es.z),Es},setFromObject:function(Es){var Ts=Es.geometry;if(Es&&Es.isPoints||Es&&Es.isLine){var Ss=new ht(3*Ts.vertices.length,3),Ms=new ht(3*Ts.colors.length,3);if(this.addAttribute("position",Ss.copyVector3sArray(Ts.vertices)),this.addAttribute("color",Ms.copyColorsArray(Ts.colors)),Ts.lineDistances&&Ts.lineDistances.length===Ts.vertices.length){var ws=new ht(Ts.lineDistances.length,1);this.addAttribute("lineDistance",ws.copyArray(Ts.lineDistances))}null!==Ts.boundingSphere&&(this.boundingSphere=Ts.boundingSphere.clone()),null!==Ts.boundingBox&&(this.boundingBox=Ts.boundingBox.clone())}else Es&&Es.isMesh&&Ts&&Ts.isGeometry&&this.fromGeometry(Ts);return this},updateFromObject:function(Es){var Ts=Es.geometry;if(Es&&Es.isMesh){var Ss=Ts.__directGeometry;if(!0===Ts.elementsNeedUpdate&&(Ss=void 0,Ts.elementsNeedUpdate=!1),void 0===Ss)return this.fromGeometry(Ts);Ss.verticesNeedUpdate=Ts.verticesNeedUpdate,Ss.normalsNeedUpdate=Ts.normalsNeedUpdate,Ss.colorsNeedUpdate=Ts.colorsNeedUpdate,Ss.uvsNeedUpdate=Ts.uvsNeedUpdate,Ss.groupsNeedUpdate=Ts.groupsNeedUpdate,Ts.verticesNeedUpdate=!1,Ts.normalsNeedUpdate=!1,Ts.colorsNeedUpdate=!1,Ts.uvsNeedUpdate=!1,Ts.groupsNeedUpdate=!1,Ts=Ss}var Ms;return!0===Ts.verticesNeedUpdate&&(Ms=this.attributes.position,void 0!=Ms&&(Ms.copyVector3sArray(Ts.vertices),Ms.needsUpdate=!0),Ts.verticesNeedUpdate=!1),!0===Ts.normalsNeedUpdate&&(Ms=this.attributes.normal,void 0!=Ms&&(Ms.copyVector3sArray(Ts.normals),Ms.needsUpdate=!0),Ts.normalsNeedUpdate=!1),!0===Ts.colorsNeedUpdate&&(Ms=this.attributes.color,void 0!=Ms&&(Ms.copyColorsArray(Ts.colors),Ms.needsUpdate=!0),Ts.colorsNeedUpdate=!1),Ts.uvsNeedUpdate&&(Ms=this.attributes.uv,void 0!=Ms&&(Ms.copyVector2sArray(Ts.uvs),Ms.needsUpdate=!0),Ts.uvsNeedUpdate=!1),Ts.lineDistancesNeedUpdate&&(Ms=this.attributes.lineDistance,void 0!=Ms&&(Ms.copyArray(Ts.lineDistances),Ms.needsUpdate=!0),Ts.lineDistancesNeedUpdate=!1),Ts.groupsNeedUpdate&&(Ts.computeGroups(Es.geometry),this.groups=Ts.groups,Ts.groupsNeedUpdate=!1),this},fromGeometry:function(Es){return Es.__directGeometry=new St().fromGeometry(Es),this.fromDirectGeometry(Es.__directGeometry)},fromDirectGeometry:function(Es){var Ts=new Float32Array(3*Es.vertices.length);if(this.addAttribute("position",new ut(Ts,3).copyVector3sArray(Es.vertices)),0<Es.normals.length){var Ss=new Float32Array(3*Es.normals.length);this.addAttribute("normal",new ut(Ss,3).copyVector3sArray(Es.normals))}if(0<Es.colors.length){var Ms=new Float32Array(3*Es.colors.length);this.addAttribute("color",new ut(Ms,3).copyColorsArray(Es.colors))}if(0<Es.uvs.length){var ws=new Float32Array(2*Es.uvs.length);this.addAttribute("uv",new ut(ws,2).copyVector2sArray(Es.uvs))}if(0<Es.uvs2.length){var As=new Float32Array(2*Es.uvs2.length);this.addAttribute("uv2",new ut(As,2).copyVector2sArray(Es.uvs2))}if(0<Es.indices.length){var Ls=65535<Es.vertices.length?Uint32Array:Uint16Array,Rs=new Ls(3*Es.indices.length);this.setIndex(new ut(Rs,1).copyIndicesArray(Es.indices))}for(var Ps in this.groups=Es.groups,Es.morphTargets){for(var Cs=[],Is=Es.morphTargets[Ps],Us=0,Ds=Is.length;Us<Ds;Us++){var Ns=Is[Us],Fs=new ht(3*Ns.length,3);Cs.push(Fs.copyVector3sArray(Ns))}this.morphAttributes[Ps]=Cs}if(0<Es.skinIndices.length){var zs=new ht(4*Es.skinIndices.length,4);this.addAttribute("skinIndex",zs.copyVector4sArray(Es.skinIndices))}if(0<Es.skinWeights.length){var Bs=new ht(4*Es.skinWeights.length,4);this.addAttribute("skinWeight",Bs.copyVector4sArray(Es.skinWeights))}return null!==Es.boundingSphere&&(this.boundingSphere=Es.boundingSphere.clone()),null!==Es.boundingBox&&(this.boundingBox=Es.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Ve);var Es=this.attributes.position.array;Es===void 0?this.boundingBox.makeEmpty():this.boundingBox.setFromArray(Es),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error("THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.",this)},computeBoundingSphere:function(){var Es=new Ve,Ts=new D;return function(){null===this.boundingSphere&&(this.boundingSphere=new ke);var Ms=this.attributes.position;if(Ms){var ws=Ms.array,As=this.boundingSphere.center;Es.setFromArray(ws),Es.center(As);for(var Ls=0,Rs=0,Ps=ws.length;Rs<Ps;Rs+=3)Ts.fromArray(ws,Rs),Ls=Math.max(Ls,As.distanceToSquared(Ts));this.boundingSphere.radius=Math.sqrt(Ls),isNaN(this.boundingSphere.radius)&&console.error("THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.",this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var Es=this.index,Ts=this.attributes,Ss=this.groups;if(Ts.position){var Ms=Ts.position.array;if(Ts.normal===void 0)this.addAttribute("normal",new ut(new Float32Array(Ms.length),3));else for(var ws=Ts.normal.array,As=0,Ls=ws.length;As<Ls;As++)ws[As]=0;var Rs=Ts.normal.array,Ps,Cs,Is,Us=new D,Ds=new D,Ns=new D,Fs=new D,zs=new D;if(Es){var Bs=Es.array;0===Ss.length&&this.addGroup(0,Bs.length);for(var Os=0,Gs=Ss.length;Os<Gs;++Os)for(var Vs=Ss[Os],ks=Vs.start,Hs=Vs.count,As=ks,Ls=ks+Hs;As<Ls;As+=3)Ps=3*Bs[As+0],Cs=3*Bs[As+1],Is=3*Bs[As+2],Us.fromArray(Ms,Ps),Ds.fromArray(Ms,Cs),Ns.fromArray(Ms,Is),Fs.subVectors(Ns,Ds),zs.subVectors(Us,Ds),Fs.cross(zs),Rs[Ps]+=Fs.x,Rs[Ps+1]+=Fs.y,Rs[Ps+2]+=Fs.z,Rs[Cs]+=Fs.x,Rs[Cs+1]+=Fs.y,Rs[Cs+2]+=Fs.z,Rs[Is]+=Fs.x,Rs[Is+1]+=Fs.y,Rs[Is+2]+=Fs.z}else for(var As=0,Ls=Ms.length;As<Ls;As+=9)Us.fromArray(Ms,As),Ds.fromArray(Ms,As+3),Ns.fromArray(Ms,As+6),Fs.subVectors(Ns,Ds),zs.subVectors(Us,Ds),Fs.cross(zs),Rs[As]=Fs.x,Rs[As+1]=Fs.y,Rs[As+2]=Fs.z,Rs[As+3]=Fs.x,Rs[As+4]=Fs.y,Rs[As+5]=Fs.z,Rs[As+6]=Fs.x,Rs[As+7]=Fs.y,Rs[As+8]=Fs.z;this.normalizeNormals(),Ts.normal.needsUpdate=!0}},merge:function(Es,Ts){if(!1===(Es&&Es.isBufferGeometry))return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",Es);Ts===void 0&&(Ts=0);var Ss=this.attributes;for(var Ms in Ss)if(Es.attributes[Ms]!==void 0)for(var ws=Ss[Ms],As=ws.array,Ls=Es.attributes[Ms],Rs=Ls.array,Ps=Ls.itemSize,Cs=0,Is=Ps*Ts;Cs<Rs.length;Cs++,Is++)As[Is]=Rs[Cs];return this},normalizeNormals:function(){for(var Es=this.attributes.normal.array,As=0,Ls=Es.length,Ts,Ss,Ms,ws;As<Ls;As+=3)Ts=Es[As],Ss=Es[As+1],Ms=Es[As+2],ws=1/Math.sqrt(Ts*Ts+Ss*Ss+Ms*Ms),Es[As]*=ws,Es[As+1]*=ws,Es[As+2]*=ws},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var Es=new Mt,Ts=this.index.array,Ss=this.attributes;for(var Ms in Ss){for(var ws=Ss[Ms],As=ws.array,Ls=ws.itemSize,Rs=new As.constructor(Ts.length*Ls),Ps=0,Cs=0,Is=0,Us=Ts.length;Is<Us;Is++){Ps=Ts[Is]*Ls;for(var Ds=0;Ds<Ls;Ds++)Rs[Cs++]=As[Ps++]}Es.addAttribute(Ms,new ut(Rs,Ls))}return Es},toJSON:function(){var Es={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(Es.uuid=this.uuid,Es.type=this.type,""!==this.name&&(Es.name=this.name),void 0!==this.parameters){var Ts=this.parameters;for(var Ss in Ts)void 0!==Ts[Ss]&&(Es[Ss]=Ts[Ss]);return Es}Es.data={attributes:{}};var Ms=this.index;if(null!==Ms){var ws=Array.prototype.slice.call(Ms.array);Es.data.index={type:Ms.array.constructor.name,array:ws}}var As=this.attributes;for(var Ss in As){var Ls=As[Ss],ws=Array.prototype.slice.call(Ls.array);Es.data.attributes[Ss]={itemSize:Ls.itemSize,type:Ls.array.constructor.name,array:ws,normalized:Ls.normalized}}var Rs=this.groups;0<Rs.length&&(Es.data.groups=JSON.parse(JSON.stringify(Rs)));var Ps=this.boundingSphere;return null!==Ps&&(Es.data.boundingSphere={center:Ps.center.toArray(),radius:Ps.radius}),Es},clone:function(){return new Mt().copy(this)},copy:function(Es){var Ts=Es.index;null!==Ts&&this.setIndex(Ts.clone());var Ss=Es.attributes;for(var Ms in Ss){var ws=Ss[Ms];this.addAttribute(Ms,ws.clone())}for(var As=Es.groups,Ls=0,Rs=As.length;Ls<Rs;Ls++){var Ps=As[Ls];this.addGroup(Ps.start,Ps.count,Ps.materialIndex)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Mt.MaxIndex=65535,Dt.prototype=Object.create(Ne.prototype),Dt.prototype.constructor=Dt,Dt.prototype.isWebGLRenderTargetCube=!0,Nt.prototype=Object.create(Mt.prototype),Nt.prototype.constructor=Nt,Ft.prototype={constructor:Ft,set:function(Es,Ts){return this.origin.copy(Es),this.direction.copy(Ts),this},clone:function(){return new this.constructor().copy(this)},copy:function(Es){return this.origin.copy(Es.origin),this.direction.copy(Es.direction),this},at:function(Es,Ts){var Ss=Ts||new D;return Ss.copy(this.direction).multiplyScalar(Es).add(this.origin)},lookAt:function(Es){return this.direction.copy(Es).sub(this.origin).normalize(),this},recast:function(){var Es=new D;return function(Ss){return this.origin.copy(this.at(Ss,Es)),this}}(),closestPointToPoint:function(Es,Ts){var Ss=Ts||new D;Ss.subVectors(Es,this.origin);var Ms=Ss.dot(this.direction);return 0>Ms?Ss.copy(this.origin):Ss.copy(this.direction).multiplyScalar(Ms).add(this.origin)},distanceToPoint:function(Es){return Math.sqrt(this.distanceSqToPoint(Es))},distanceSqToPoint:function(){var Es=new D;return function(Ss){var Ms=Es.subVectors(Ss,this.origin).dot(this.direction);return 0>Ms?this.origin.distanceToSquared(Ss):(Es.copy(this.direction).multiplyScalar(Ms).add(this.origin),Es.distanceToSquared(Ss))}}(),distanceSqToSegment:function(){var Es=new D,Ts=new D,Ss=new D;return function(ws,As,Ls,Rs){Es.copy(ws).add(As).multiplyScalar(0.5),Ts.copy(As).sub(ws).normalize(),Ss.copy(this.origin).sub(Es);var Ps=0.5*ws.distanceTo(As),Cs=-this.direction.dot(Ts),Is=Ss.dot(this.direction),Us=-Ss.dot(Ts),Ds=Ss.lengthSq(),Ns=Math.abs(1-Cs*Cs),Fs,zs,Bs,Os;if(!(0<Ns))zs=0<Cs?-Ps:Ps,Fs=Math.max(0,-(Cs*zs+Is)),Bs=-Fs*Fs+zs*(zs+2*Us)+Ds;else if(Fs=Cs*Us-Is,zs=Cs*Is-Us,Os=Ps*Ns,!(0<=Fs))zs<=-Os?(Fs=Math.max(0,-(-Cs*Ps+Is)),zs=0<Fs?-Ps:Math.min(Math.max(-Ps,-Us),Ps),Bs=-Fs*Fs+zs*(zs+2*Us)+Ds):zs<=Os?(Fs=0,zs=Math.min(Math.max(-Ps,-Us),Ps),Bs=zs*(zs+2*Us)+Ds):(Fs=Math.max(0,-(Cs*Ps+Is)),zs=0<Fs?Ps:Math.min(Math.max(-Ps,-Us),Ps),Bs=-Fs*Fs+zs*(zs+2*Us)+Ds);else if(!(zs>=-Os))zs=-Ps,Fs=Math.max(0,-(Cs*zs+Is)),Bs=-Fs*Fs+zs*(zs+2*Us)+Ds;else if(zs<=Os){var Gs=1/Ns;Fs*=Gs,zs*=Gs,Bs=Fs*(Fs+Cs*zs+2*Is)+zs*(Cs*Fs+zs+2*Us)+Ds}else zs=Ps,Fs=Math.max(0,-(Cs*zs+Is)),Bs=-Fs*Fs+zs*(zs+2*Us)+Ds;return Ls&&Ls.copy(this.direction).multiplyScalar(Fs).add(this.origin),Rs&&Rs.copy(Ts).multiplyScalar(zs).add(Es),Bs}}(),intersectSphere:function(){var Es=new D;return function(Ss,Ms){Es.subVectors(Ss.center,this.origin);var ws=Es.dot(this.direction),As=Es.dot(Es)-ws*ws,Ls=Ss.radius*Ss.radius;if(As>Ls)return null;var Rs=Math.sqrt(Ls-As),Ps=ws-Rs,Cs=ws+Rs;return 0>Ps&&0>Cs?null:0>Ps?this.at(Cs,Ms):this.at(Ps,Ms)}}(),intersectsSphere:function(Es){return this.distanceToPoint(Es.center)<=Es.radius},distanceToPlane:function(Es){var Ts=Es.normal.dot(this.direction);if(0===Ts)return 0===Es.distanceToPoint(this.origin)?0:null;var Ss=-(this.origin.dot(Es.normal)+Es.constant)/Ts;return 0<=Ss?Ss:null},intersectPlane:function(Es,Ts){var Ss=this.distanceToPlane(Es);return null===Ss?null:this.at(Ss,Ts)},intersectsPlane:function(Es){var Ts=Es.distanceToPoint(this.origin);if(0===Ts)return!0;var Ss=Es.normal.dot(this.direction);return!!(0>Ss*Ts)},intersectBox:function(Es,Ts){var Ps=1/this.direction.x,Cs=1/this.direction.y,Is=1/this.direction.z,Us=this.origin,Ss,Ms,ws,As,Ls,Rs;return(0<=Ps?(Ss=(Es.min.x-Us.x)*Ps,Ms=(Es.max.x-Us.x)*Ps):(Ss=(Es.max.x-Us.x)*Ps,Ms=(Es.min.x-Us.x)*Ps),0<=Cs?(ws=(Es.min.y-Us.y)*Cs,As=(Es.max.y-Us.y)*Cs):(ws=(Es.max.y-Us.y)*Cs,As=(Es.min.y-Us.y)*Cs),Ss>As||ws>Ms)?null:((ws>Ss||Ss!=Ss)&&(Ss=ws),(As<Ms||Ms!=Ms)&&(Ms=As),0<=Is?(Ls=(Es.min.z-Us.z)*Is,Rs=(Es.max.z-Us.z)*Is):(Ls=(Es.max.z-Us.z)*Is,Rs=(Es.min.z-Us.z)*Is),Ss>Rs||Ls>Ms)?null:((Ls>Ss||Ss!=Ss)&&(Ss=Ls),(Rs<Ms||Ms!=Ms)&&(Ms=Rs),0>Ms?null:this.at(0<=Ss?Ss:Ms,Ts))},intersectsBox:function(){var Es=new D;return function(Ss){return null!==this.intersectBox(Ss,Es)}}(),intersectTriangle:function(){var Es=new D,Ts=new D,Ss=new D,Ms=new D;return function(As,Ls,Rs,Ps,Cs){Ts.subVectors(Ls,As),Ss.subVectors(Rs,As),Ms.crossVectors(Ts,Ss);var Is=this.direction.dot(Ms),Us;if(0<Is){if(Ps)return null;Us=1}else if(0>Is)Us=-1,Is=-Is;else return null;Es.subVectors(this.origin,As);var Ds=Us*this.direction.dot(Ss.crossVectors(Es,Ss));if(0>Ds)return null;var Ns=Us*this.direction.dot(Ts.cross(Es));if(0>Ns)return null;if(Ds+Ns>Is)return null;var Fs=-Us*Es.dot(Ms);return 0>Fs?null:this.at(Fs/Is,Cs)}}(),applyMatrix4:function(Es){return this.direction.add(this.origin).applyMatrix4(Es),this.origin.applyMatrix4(Es),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(Es){return Es.origin.equals(this.origin)&&Es.direction.equals(this.direction)}},zt.prototype={constructor:zt,set:function(Es,Ts){return this.start.copy(Es),this.end.copy(Ts),this},clone:function(){return new this.constructor().copy(this)},copy:function(Es){return this.start.copy(Es.start),this.end.copy(Es.end),this},center:function(Es){var Ts=Es||new D;return Ts.addVectors(this.start,this.end).multiplyScalar(0.5)},delta:function(Es){var Ts=Es||new D;return Ts.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(Es,Ts){var Ss=Ts||new D;return this.delta(Ss).multiplyScalar(Es).add(this.start)},closestPointToPointParameter:function(){var Es=new D,Ts=new D;return function(Ms,ws){Es.subVectors(Ms,this.start),Ts.subVectors(this.end,this.start);var As=Ts.dot(Ts),Ls=Ts.dot(Es),Rs=Ls/As;return ws&&(Rs=A.Math.clamp(Rs,0,1)),Rs}}(),closestPointToPoint:function(Es,Ts,Ss){var Ms=this.closestPointToPointParameter(Es,Ts),ws=Ss||new D;return this.delta(ws).multiplyScalar(Ms).add(this.start)},applyMatrix4:function(Es){return this.start.applyMatrix4(Es),this.end.applyMatrix4(Es),this},equals:function(Es){return Es.start.equals(this.start)&&Es.end.equals(this.end)}},Bt.normal=function(){var Es=new D;return function(Ss,Ms,ws,As){var Ls=As||new D;Ls.subVectors(ws,Ms),Es.subVectors(Ss,Ms),Ls.cross(Es);var Rs=Ls.lengthSq();return 0<Rs?Ls.multiplyScalar(1/Math.sqrt(Rs)):Ls.set(0,0,0)}}(),Bt.barycoordFromPoint=function(){var Es=new D,Ts=new D,Ss=new D;return function(ws,As,Ls,Rs,Ps){Es.subVectors(Rs,As),Ts.subVectors(Ls,As),Ss.subVectors(ws,As);var Cs=Es.dot(Es),Is=Es.dot(Ts),Us=Es.dot(Ss),Ds=Ts.dot(Ts),Ns=Ts.dot(Ss),Fs=Cs*Ds-Is*Is,zs=Ps||new D;if(0==Fs)return zs.set(-2,-1,-1);var Bs=1/Fs,Os=(Ds*Us-Is*Ns)*Bs,Gs=(Cs*Ns-Is*Us)*Bs;return zs.set(1-Os-Gs,Gs,Os)}}(),Bt.containsPoint=function(){var Es=new D;return function(Ss,Ms,ws,As){var Ls=Bt.barycoordFromPoint(Ss,Ms,ws,As,Es);return 0<=Ls.x&&0<=Ls.y&&1>=Ls.x+Ls.y}}(),Bt.prototype={constructor:Bt,set:function(Es,Ts,Ss){return this.a.copy(Es),this.b.copy(Ts),this.c.copy(Ss),this},setFromPointsAndIndices:function(Es,Ts,Ss,Ms){return this.a.copy(Es[Ts]),this.b.copy(Es[Ss]),this.c.copy(Es[Ms]),this},clone:function(){return new this.constructor().copy(this)},copy:function(Es){return this.a.copy(Es.a),this.b.copy(Es.b),this.c.copy(Es.c),this},area:function(){var Es=new D,Ts=new D;return function(){return Es.subVectors(this.c,this.b),Ts.subVectors(this.a,this.b),0.5*Es.cross(Ts).length()}}(),midpoint:function(Es){var Ts=Es||new D;return Ts.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(Es){return Bt.normal(this.a,this.b,this.c,Es)},plane:function(Es){var Ts=Es||new We;return Ts.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(Es,Ts){return Bt.barycoordFromPoint(Es,this.a,this.b,this.c,Ts)},containsPoint:function(Es){return Bt.containsPoint(Es,this.a,this.b,this.c)},closestPointToPoint:function(){var Es,Ts,Ss,Ms;return function(As,Ls){void 0==Es&&(Es=new We,Ts=[new zt,new zt,new zt],Ss=new D,Ms=new D);var Rs=Ls||new D,Ps=1/0;if(Es.setFromCoplanarPoints(this.a,this.b,this.c),Es.projectPoint(As,Ss),!0===this.containsPoint(Ss))Rs.copy(Ss);else{Ts[0].set(this.a,this.b),Ts[1].set(this.b,this.c),Ts[2].set(this.c,this.a);for(var Cs=0;Cs<Ts.length;Cs++){Ts[Cs].closestPointToPoint(Ss,!0,Ms);var Is=Ss.distanceToSquared(Ms);Is<Ps&&(Ps=Is,Rs.copy(Ms))}}return Rs}}(),equals:function(Es){return Es.a.equals(this.a)&&Es.b.equals(this.b)&&Es.c.equals(this.c)}},Ot.prototype=Object.create(Fe.prototype),Ot.prototype.constructor=Ot,Ot.prototype.isMeshBasicMaterial=!0,Ot.prototype.copy=function(Es){return Fe.prototype.copy.call(this,Es),this.color.copy(Es.color),this.map=Es.map,this.aoMap=Es.aoMap,this.aoMapIntensity=Es.aoMapIntensity,this.specularMap=Es.specularMap,this.alphaMap=Es.alphaMap,this.envMap=Es.envMap,this.combine=Es.combine,this.reflectivity=Es.reflectivity,this.refractionRatio=Es.refractionRatio,this.wireframe=Es.wireframe,this.wireframeLinewidth=Es.wireframeLinewidth,this.wireframeLinecap=Es.wireframeLinecap,this.wireframeLinejoin=Es.wireframeLinejoin,this.skinning=Es.skinning,this.morphTargets=Es.morphTargets,this},Gt.prototype=Object.assign(Object.create(vt.prototype),{constructor:Gt,isMesh:!0,setDrawMode:function(Es){this.drawMode=Es},copy:function(Es){return vt.prototype.copy.call(this,Es),this.drawMode=Es.drawMode,this},updateMorphTargets:function(){if(this.geometry.morphTargets!==void 0&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1,this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var Es=0,Ts=this.geometry.morphTargets.length;Es<Ts;Es++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[Es].name]=Es}},getMorphTargetIndexByName:function(Es){return void 0===this.morphTargetDictionary[Es]?(console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+Es+" does not exist. Returning 0."),0):this.morphTargetDictionary[Es]},raycast:function(){function Es(Gs,Vs,ks,Hs,Ws,js,Xs){return Bt.barycoordFromPoint(Gs,Vs,ks,Hs,zs),Ws.multiplyScalar(zs.x),js.multiplyScalar(zs.y),Xs.multiplyScalar(zs.z),Ws.add(js).add(Xs),Ws.clone()}function Ts(Gs,Vs,ks,Hs,Ws,js,Xs){var Ys=Gs.material,qs;if(qs=Ys.side===Xi?ks.intersectTriangle(js,Ws,Hs,!0,Xs):ks.intersectTriangle(Hs,Ws,js,Ys.side!==qi,Xs),null===qs)return null;Os.copy(Xs),Os.applyMatrix4(Gs.matrixWorld);var Zs=Vs.ray.origin.distanceTo(Os);return Zs<Vs.near||Zs>Vs.far?null:{distance:Zs,point:Os.clone(),object:Gs}}function Ss(Gs,Vs,ks,Hs,Ws,js,Xs,qs){Ls.fromArray(Hs,3*js),Rs.fromArray(Hs,3*Xs),Ps.fromArray(Hs,3*qs);var Ys=Ts(Gs,Vs,ks,Ls,Rs,Ps,Bs);return Ys&&(Ws&&(Ds.fromArray(Ws,2*js),Ns.fromArray(Ws,2*Xs),Fs.fromArray(Ws,2*qs),Ys.uv=Es(Bs,Ls,Rs,Ps,Ds,Ns,Fs)),Ys.face=new yt(js,Xs,qs,Bt.normal(Ls,Rs,Ps)),Ys.faceIndex=js),Ys}var Ms=new I,ws=new Ft,As=new ke,Ls=new D,Rs=new D,Ps=new D,Cs=new D,Is=new D,Us=new D,Ds=new R,Ns=new R,Fs=new R,zs=new D,Bs=new D,Os=new D;return function(Vs,ks){var Hs=this.geometry,Ws=this.material,js=this.matrixWorld;if(void 0!==Ws&&(null===Hs.boundingSphere&&Hs.computeBoundingSphere(),As.copy(Hs.boundingSphere),As.applyMatrix4(js),!1!==Vs.ray.intersectsSphere(As))){if(Ms.getInverse(js),ws.copy(Vs.ray).applyMatrix4(Ms),null!==Hs.boundingBox&&!1===ws.intersectsBox(Hs.boundingBox))return;var Xs,qs;if(Hs&&Hs.isBufferGeometry){var Qs=Hs.index,Ks=Hs.attributes,$s=Ks.position.array,Ys,Zs,Js;if(void 0!==Ks.uv&&(Xs=Ks.uv.array),null!==Qs)for(var el=Qs.array,rl=0,al=el.length;rl<al;rl+=3)Ys=el[rl],Zs=el[rl+1],Js=el[rl+2],qs=Ss(this,Vs,ws,$s,Xs,Ys,Zs,Js),qs&&(qs.faceIndex=Math.floor(rl/3),ks.push(qs));else for(var rl=0,al=$s.length;rl<al;rl+=9)Ys=rl/3,Zs=Ys+1,Js=Ys+2,qs=Ss(this,Vs,ws,$s,Xs,Ys,Zs,Js),qs&&(qs.index=Ys,ks.push(qs))}else if(Hs&&Hs.isGeometry){var ul=Ws&&Ws.isMultiMaterial,yl=!0===ul?Ws.materials:null,xl=Hs.vertices,_l=Hs.faces,El=Hs.faceVertexUvs[0],nl,dl,cl;0<El.length&&(Xs=El);for(var Tl=0,Sl=_l.length;Tl<Sl;Tl++){var Ml=_l[Tl],wl=!0===ul?yl[Ml.materialIndex]:Ws;if(void 0!==wl){if(nl=xl[Ml.a],dl=xl[Ml.b],cl=xl[Ml.c],!0===wl.morphTargets){var Al=Hs.morphTargets,Ll=this.morphTargetInfluences;Ls.set(0,0,0),Rs.set(0,0,0),Ps.set(0,0,0);for(var Rl=0,Pl=Al.length;Rl<Pl;Rl++){var Cl=Ll[Rl];if(0!==Cl){var Il=Al[Rl].vertices;Ls.addScaledVector(Cs.subVectors(Il[Ml.a],nl),Cl),Rs.addScaledVector(Is.subVectors(Il[Ml.b],dl),Cl),Ps.addScaledVector(Us.subVectors(Il[Ml.c],cl),Cl)}}Ls.add(nl),Rs.add(dl),Ps.add(cl),nl=Ls,dl=Rs,cl=Ps}if(qs=Ts(this,Vs,ws,nl,dl,cl,Bs),qs){if(Xs){var Ul=Xs[Tl];Ds.copy(Ul[0]),Ns.copy(Ul[1]),Fs.copy(Ul[2]),qs.uv=Es(Bs,nl,dl,cl,Ds,Ns,Fs)}qs.face=Ml,qs.faceIndex=Tl,ks.push(qs)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Vt.prototype=Object.create(Mt.prototype),Vt.prototype.constructor=Vt,kt.prototype=Object.create(vt.prototype),kt.prototype.constructor=kt,kt.prototype.isCamera=!0,kt.prototype.getWorldDirection=function(){var Es=new U;return function(Ss){var Ms=Ss||new D;return this.getWorldQuaternion(Es),Ms.set(0,0,-1).applyQuaternion(Es)}}(),kt.prototype.lookAt=function(){var Es=new I;return function(Ss){Es.lookAt(this.position,Ss,this.up),this.quaternion.setFromRotationMatrix(Es)}}(),kt.prototype.clone=function(){return new this.constructor().copy(this)},kt.prototype.copy=function(Es){return vt.prototype.copy.call(this,Es),this.matrixWorldInverse.copy(Es.matrixWorldInverse),this.projectionMatrix.copy(Es.projectionMatrix),this},Ht.prototype=Object.assign(Object.create(kt.prototype),{constructor:Ht,isPerspectiveCamera:!0,copy:function(Es){return kt.prototype.copy.call(this,Es),this.fov=Es.fov,this.zoom=Es.zoom,this.near=Es.near,this.far=Es.far,this.focus=Es.focus,this.aspect=Es.aspect,this.view=null===Es.view?null:Object.assign({},Es.view),this.filmGauge=Es.filmGauge,this.filmOffset=Es.filmOffset,this},setFocalLength:function(Es){var Ts=0.5*this.getFilmHeight()/Es;this.fov=2*A.Math.RAD2DEG*Math.atan(Ts),this.updateProjectionMatrix()},getFocalLength:function(){var Es=Math.tan(0.5*A.Math.DEG2RAD*this.fov);return 0.5*this.getFilmHeight()/Es},getEffectiveFOV:function(){return 2*A.Math.RAD2DEG*Math.atan(Math.tan(0.5*A.Math.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(Es,Ts,Ss,Ms,ws,As){this.aspect=Es/Ts,this.view={fullWidth:Es,fullHeight:Ts,offsetX:Ss,offsetY:Ms,width:ws,height:As},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var Es=this.near,Ts=Es*Math.tan(0.5*A.Math.DEG2RAD*this.fov)/this.zoom,Ss=2*Ts,Ms=this.aspect*Ss,ws=-0.5*Ms,As=this.view;if(null!==As){var Ls=As.fullWidth,Rs=As.fullHeight;ws+=As.offsetX*Ms/Ls,Ts-=As.offsetY*Ss/Rs,Ms*=As.width/Ls,Ss*=As.height/Rs}var Ps=this.filmOffset;0!==Ps&&(ws+=Es*Ps/this.getFilmWidth()),this.projectionMatrix.makeFrustum(ws,ws+Ms,Ts-Ss,Ts,Es,this.far)},toJSON:function(Es){var Ts=vt.prototype.toJSON.call(this,Es);return Ts.object.fov=this.fov,Ts.object.zoom=this.zoom,Ts.object.near=this.near,Ts.object.far=this.far,Ts.object.focus=this.focus,Ts.object.aspect=this.aspect,null!==this.view&&(Ts.object.view=Object.assign({},this.view)),Ts.object.filmGauge=this.filmGauge,Ts.object.filmOffset=this.filmOffset,Ts}}),Wt.prototype=Object.assign(Object.create(kt.prototype),{constructor:Wt,isOrthographicCamera:!0,copy:function(Es){return kt.prototype.copy.call(this,Es),this.left=Es.left,this.right=Es.right,this.top=Es.top,this.bottom=Es.bottom,this.near=Es.near,this.far=Es.far,this.zoom=Es.zoom,this.view=null===Es.view?null:Object.assign({},Es.view),this},setViewOffset:function(Es,Ts,Ss,Ms,ws,As){this.view={fullWidth:Es,fullHeight:Ts,offsetX:Ss,offsetY:Ms,width:ws,height:As},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var Es=(this.right-this.left)/(2*this.zoom),Ts=(this.top-this.bottom)/(2*this.zoom),Ss=(this.right+this.left)/2,Ms=(this.top+this.bottom)/2,ws=Ss-Es,As=Ss+Es,Ls=Ms+Ts,Rs=Ms-Ts;if(null!==this.view){var Ps=this.zoom/(this.view.width/this.view.fullWidth),Cs=this.zoom/(this.view.height/this.view.fullHeight),Is=(this.right-this.left)/this.view.width,Us=(this.top-this.bottom)/this.view.height;ws+=Is*(this.view.offsetX/Ps),As=ws+Is*(this.view.width/Ps),Ls-=Us*(this.view.offsetY/Cs),Rs=Ls-Us*(this.view.height/Cs)}this.projectionMatrix.makeOrthographic(ws,As,Ls,Rs,this.near,this.far)},toJSON:function(Es){var Ts=vt.prototype.toJSON.call(this,Es);return Ts.object.zoom=this.zoom,Ts.object.left=this.left,Ts.object.right=this.right,Ts.object.top=this.top,Ts.object.bottom=this.bottom,Ts.object.near=this.near,Ts.object.far=this.far,null!==this.view&&(Ts.object.view=Object.assign({},this.view)),Ts}}),Xt.prototype.isFogExp2=!0,Xt.prototype.clone=function(){return new Xt(this.color.getHex(),this.density)},Xt.prototype.toJSON=function(Es){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},qt.prototype.isFog=!0,qt.prototype.clone=function(){return new qt(this.color.getHex(),this.near,this.far)},qt.prototype.toJSON=function(Es){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Yt.prototype=Object.create(vt.prototype),Yt.prototype.constructor=Yt,Yt.prototype.copy=function(Es,Ts){return vt.prototype.copy.call(this,Es,Ts),null!==Es.background&&(this.background=Es.background.clone()),null!==Es.fog&&(this.fog=Es.fog.clone()),null!==Es.overrideMaterial&&(this.overrideMaterial=Es.overrideMaterial.clone()),this.autoUpdate=Es.autoUpdate,this.matrixAutoUpdate=Es.matrixAutoUpdate,this},Yt.prototype.toJSON=function(Es){var Ts=vt.prototype.toJSON.call(this,Es);return null!==this.background&&(Ts.object.background=this.background.toJSON(Es)),null!==this.fog&&(Ts.object.fog=this.fog.toJSON()),Ts},Zt.prototype=Object.assign(Object.create(vt.prototype),{constructor:Zt,isLensFlare:!0,copy:function(Es){vt.prototype.copy.call(this,Es),this.positionScreen.copy(Es.positionScreen),this.customUpdateCallback=Es.customUpdateCallback;for(var Ts=0,Ss=Es.lensFlares.length;Ts<Ss;Ts++)this.lensFlares.push(Es.lensFlares[Ts]);return this},add:function(Es,Ts,Ss,Ms,ws,As){Ts===void 0&&(Ts=-1),Ss===void 0&&(Ss=0),As===void 0&&(As=1),ws===void 0&&(ws=new Oe(16777215)),Ms===void 0&&(Ms=en),Ss=Math.min(Ss,Math.max(0,Ss)),this.lensFlares.push({texture:Es,size:Ts,distance:Ss,x:0,y:0,z:0,scale:1,rotation:0,opacity:As,color:ws,blending:Ms})},updateLensFlares:function(){var Ts=this.lensFlares.length,Es,Ss,Ms=2*-this.positionScreen.x,ws=2*-this.positionScreen.y;for(Es=0;Es<Ts;Es++)Ss=this.lensFlares[Es],Ss.x=this.positionScreen.x+Ms*Ss.distance,Ss.y=this.positionScreen.y+ws*Ss.distance,Ss.wantedRotation=0.25*(Ss.x*Math.PI),Ss.rotation+=0.25*(Ss.wantedRotation-Ss.rotation)}}),Jt.prototype=Object.create(Fe.prototype),Jt.prototype.constructor=Jt,Jt.prototype.copy=function(Es){return Fe.prototype.copy.call(this,Es),this.color.copy(Es.color),this.map=Es.map,this.rotation=Es.rotation,this},Qt.prototype=Object.assign(Object.create(vt.prototype),{constructor:Qt,isSprite:!0,raycast:function(){var Es=new D;return function(Ss,Ms){Es.setFromMatrixPosition(this.matrixWorld);var ws=Ss.ray.distanceSqToPoint(Es),As=this.scale.x*this.scale.y/4;ws>As||Ms.push({distance:Math.sqrt(ws),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),Kt.prototype=Object.assign(Object.create(vt.prototype),{constructor:Kt,copy:function(Es){vt.prototype.copy.call(this,Es,!1);for(var Ts=Es.levels,Ss=0,Ms=Ts.length;Ss<Ms;Ss++){var ws=Ts[Ss];this.addLevel(ws.object.clone(),ws.distance)}return this},addLevel:function(Es,Ts){Ts===void 0&&(Ts=0),Ts=Math.abs(Ts);for(var Ss=this.levels,Ms=0;Ms<Ss.length&&!(Ts<Ss[Ms].distance);Ms++);Ss.splice(Ms,0,{distance:Ts,object:Es}),this.add(Es)},getObjectForDistance:function(Es){for(var Ts=this.levels,Ss=1,Ms=Ts.length;Ss<Ms&&!(Es<Ts[Ss].distance);Ss++);return Ts[Ss-1].object},raycast:function(){var Es=new D;return function(Ss,Ms){Es.setFromMatrixPosition(this.matrixWorld);var ws=Ss.ray.origin.distanceTo(Es);this.getObjectForDistance(ws).raycast(Ss,Ms)}}(),update:function(){var Es=new D,Ts=new D;return function(Ms){var ws=this.levels;if(1<ws.length){Es.setFromMatrixPosition(Ms.matrixWorld),Ts.setFromMatrixPosition(this.matrixWorld);var As=Es.distanceTo(Ts);ws[0].object.visible=!0;for(var Ls=1,Rs=ws.length;Ls<Rs&&As>=ws[Ls].distance;Ls++)ws[Ls-1].object.visible=!1,ws[Ls].object.visible=!0;for(;Ls<Rs;Ls++)ws[Ls].object.visible=!1}}}(),toJSON:function(Es){var Ts=vt.prototype.toJSON.call(this,Es);Ts.object.levels=[];for(var Ss=this.levels,Ms=0,ws=Ss.length;Ms<ws;Ms++){var As=Ss[Ms];Ts.object.levels.push({object:As.object.uuid,distance:As.distance})}return Ts}}),$t.prototype=Object.create(P.prototype),$t.prototype.constructor=$t,$t.prototype.isDataTexture=!0,Object.assign(er.prototype,{calculateInverses:function(){this.boneInverses=[];for(var Es=0,Ts=this.bones.length;Es<Ts;Es++){var Ss=new I;this.bones[Es]&&Ss.getInverse(this.bones[Es].matrixWorld),this.boneInverses.push(Ss)}},pose:function(){for(var Ts=0,Ss=this.bones.length,Es;Ts<Ss;Ts++)Es=this.bones[Ts],Es&&Es.matrixWorld.getInverse(this.boneInverses[Ts]);for(var Ts=0,Ss=this.bones.length;Ts<Ss;Ts++)Es=this.bones[Ts],Es&&(Es.parent&&Es.parent.isBone?(Es.matrix.getInverse(Es.parent.matrixWorld),Es.matrix.multiply(Es.matrixWorld)):Es.matrix.copy(Es.matrixWorld),Es.matrix.decompose(Es.position,Es.quaternion,Es.scale))},update:function(){var Es=new I;return function(){for(var Ss=0,Ms=this.bones.length;Ss<Ms;Ss++){var ws=this.bones[Ss]?this.bones[Ss].matrixWorld:this.identityMatrix;Es.multiplyMatrices(ws,this.boneInverses[Ss]),Es.toArray(this.boneMatrices,16*Ss)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new er(this.bones,this.boneInverses,this.useVertexTexture)}}),tr.prototype=Object.assign(Object.create(vt.prototype),{constructor:tr,isBone:!0,copy:function(Es){return vt.prototype.copy.call(this,Es),this.skin=Es.skin,this}}),rr.prototype=Object.assign(Object.create(Gt.prototype),{constructor:rr,isSkinnedMesh:!0,bind:function(Es,Ts){this.skeleton=Es,Ts===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),Ts=this.matrixWorld),this.bindMatrix.copy(Ts),this.bindMatrixInverse.getInverse(Ts)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var Es=0;Es<this.geometry.skinWeights.length;Es++){var Ts=this.geometry.skinWeights[Es],Ss=1/Ts.lengthManhattan();Ss==1/0?Ts.set(1,0,0,0):Ts.multiplyScalar(Ss)}else if(this.geometry&&this.geometry.isBufferGeometry)for(var Ms=new Ue,ws=this.geometry.attributes.skinWeight,Es=0;Es<ws.count;Es++){Ms.x=ws.getX(Es),Ms.y=ws.getY(Es),Ms.z=ws.getZ(Es),Ms.w=ws.getW(Es);var Ss=1/Ms.lengthManhattan();Ss==1/0?Ms.set(1,0,0,0):Ms.multiplyScalar(Ss),ws.setXYZW(Es,Ms.x,Ms.y,Ms.z,Ms.w)}},updateMatrixWorld:function(Es){Gt.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),ar.prototype=Object.create(Fe.prototype),ar.prototype.constructor=ar,ar.prototype.isLineBasicMaterial=!0,ar.prototype.copy=function(Es){return Fe.prototype.copy.call(this,Es),this.color.copy(Es.color),this.linewidth=Es.linewidth,this.linecap=Es.linecap,this.linejoin=Es.linejoin,this},ir.prototype=Object.assign(Object.create(vt.prototype),{constructor:ir,isLine:!0,raycast:function(){var Es=new I,Ts=new Ft,Ss=new ke;return function(ws,As){var Ls=ws.linePrecision,Rs=Ls*Ls,Ps=this.geometry,Cs=this.matrixWorld;if(null===Ps.boundingSphere&&Ps.computeBoundingSphere(),Ss.copy(Ps.boundingSphere),Ss.applyMatrix4(Cs),!1!==ws.ray.intersectsSphere(Ss)){Es.getInverse(Cs),Ts.copy(ws.ray).applyMatrix4(Es);var Is=new D,Us=new D,Ds=new D,Ns=new D,Fs=this&&this.isLineSegments?2:1;if(Ps&&Ps.isBufferGeometry){var zs=Ps.index,Bs=Ps.attributes,Os=Bs.position.array;if(null!==zs)for(var Gs=zs.array,Vs=0,ks=Gs.length-1;Vs<ks;Vs+=Fs){var Hs=Gs[Vs],Ws=Gs[Vs+1];Is.fromArray(Os,3*Hs),Us.fromArray(Os,3*Ws);var js=Ts.distanceSqToSegment(Is,Us,Ns,Ds);if(!(js>Rs)){Ns.applyMatrix4(this.matrixWorld);var Xs=ws.ray.origin.distanceTo(Ns);Xs<ws.near||Xs>ws.far||As.push({distance:Xs,point:Ds.clone().applyMatrix4(this.matrixWorld),index:Vs,face:null,faceIndex:null,object:this})}}else for(var Vs=0,ks=Os.length/3-1;Vs<ks;Vs+=Fs){Is.fromArray(Os,3*Vs),Us.fromArray(Os,3*Vs+3);var js=Ts.distanceSqToSegment(Is,Us,Ns,Ds);if(!(js>Rs)){Ns.applyMatrix4(this.matrixWorld);var Xs=ws.ray.origin.distanceTo(Ns);Xs<ws.near||Xs>ws.far||As.push({distance:Xs,point:Ds.clone().applyMatrix4(this.matrixWorld),index:Vs,face:null,faceIndex:null,object:this})}}}else if(Ps&&Ps.isGeometry)for(var qs=Ps.vertices,Ys=qs.length,Vs=0;Vs<Ys-1;Vs+=Fs){var js=Ts.distanceSqToSegment(qs[Vs],qs[Vs+1],Ns,Ds);if(!(js>Rs)){Ns.applyMatrix4(this.matrixWorld);var Xs=ws.ray.origin.distanceTo(Ns);Xs<ws.near||Xs>ws.far||As.push({distance:Xs,point:Ds.clone().applyMatrix4(this.matrixWorld),index:Vs,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),nr.prototype=Object.assign(Object.create(ir.prototype),{constructor:nr,isLineSegments:!0}),or.prototype=Object.create(Fe.prototype),or.prototype.constructor=or,or.prototype.isPointsMaterial=!0,or.prototype.copy=function(Es){return Fe.prototype.copy.call(this,Es),this.color.copy(Es.color),this.map=Es.map,this.size=Es.size,this.sizeAttenuation=Es.sizeAttenuation,this},sr.prototype=Object.assign(Object.create(vt.prototype),{constructor:sr,isPoints:!0,raycast:function(){var Es=new I,Ts=new Ft,Ss=new ke;return function(ws,As){var Rs=this,Ps=this.geometry,Cs=this.matrixWorld,Is=ws.params.Points.threshold;if(null===Ps.boundingSphere&&Ps.computeBoundingSphere(),Ss.copy(Ps.boundingSphere),Ss.applyMatrix4(Cs),!1!==ws.ray.intersectsSphere(Ss)){function Zs(Js,Qs){var Ks=Ts.distanceSqToPoint(Js);if(Ks<Us*Us){var $s=Ts.closestPointToPoint(Js);$s.applyMatrix4(Cs);var cl=ws.ray.origin.distanceTo($s);if(cl<ws.near||cl>ws.far)return;As.push({distance:cl,distanceToRay:Math.sqrt(Ks),point:$s.clone(),index:Qs,face:null,object:Rs})}}Es.getInverse(Cs),Ts.copy(ws.ray).applyMatrix4(Es);var Us=Is/((this.scale.x+this.scale.y+this.scale.z)/3),Ds=new D;if(Ps&&Ps.isBufferGeometry){var Ns=Ps.index,Fs=Ps.attributes,zs=Fs.position.array;if(null!==Ns)for(var Bs=Ns.array,Os=0,Gs=Bs.length;Os<Gs;Os++){var Vs=Bs[Os];Ds.fromArray(zs,3*Vs),Zs(Ds,Vs)}else for(var Os=0,ks=zs.length/3;Os<ks;Os++)Ds.fromArray(zs,3*Os),Zs(Ds,Os)}else for(var Hs=Ps.vertices,Os=0,ks=Hs.length;Os<ks;Os++)Zs(Hs[Os],Os)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),lr.prototype=Object.assign(Object.create(vt.prototype),{constructor:lr}),dr.prototype=Object.create(P.prototype),dr.prototype.constructor=dr,pr.prototype=Object.create(P.prototype),pr.prototype.constructor=pr,pr.prototype.isCompressedTexture=!0,cr.prototype=Object.create(P.prototype),cr.prototype.constructor=cr,ur.prototype=Object.create(P.prototype),ur.prototype.constructor=ur,ur.prototype.isDepthTexture=!0,mr.prototype=Object.create(Be.prototype),mr.prototype.constructor=mr,mr.prototype.isShadowMaterial=!0,fr.prototype=Object.create(Be.prototype),fr.prototype.constructor=fr,fr.prototype.isRawShaderMaterial=!0,gr.prototype={constructor:gr,isMultiMaterial:!0,toJSON:function(Es){for(var Ts={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},Ss=this.materials,Ms=0,ws=Ss.length;Ms<ws;Ms++){var As=Ss[Ms].toJSON(Es);delete As.metadata,Ts.materials.push(As)}return Ts.visible=this.visible,Ts},clone:function(){for(var Es=new this.constructor,Ts=0;Ts<this.materials.length;Ts++)Es.materials.push(this.materials[Ts].clone());return Es.visible=this.visible,Es}},hr.prototype=Object.create(Fe.prototype),hr.prototype.constructor=hr,hr.prototype.isMeshStandardMaterial=!0,hr.prototype.copy=function(Es){return Fe.prototype.copy.call(this,Es),this.defines={STANDARD:""},this.color.copy(Es.color),this.roughness=Es.roughness,this.metalness=Es.metalness,this.map=Es.map,this.lightMap=Es.lightMap,this.lightMapIntensity=Es.lightMapIntensity,this.aoMap=Es.aoMap,this.aoMapIntensity=Es.aoMapIntensity,this.emissive.copy(Es.emissive),this.emissiveMap=Es.emissiveMap,this.emissiveIntensity=Es.emissiveIntensity,this.bumpMap=Es.bumpMap,this.bumpScale=Es.bumpScale,this.normalMap=Es.normalMap,this.normalScale.copy(Es.normalScale),this.displacementMap=Es.displacementMap,this.displacementScale=Es.displacementScale,this.displacementBias=Es.displacementBias,this.roughnessMap=Es.roughnessMap,this.metalnessMap=Es.metalnessMap,this.alphaMap=Es.alphaMap,this.envMap=Es.envMap,this.envMapIntensity=Es.envMapIntensity,this.refractionRatio=Es.refractionRatio,this.wireframe=Es.wireframe,this.wireframeLinewidth=Es.wireframeLinewidth,this.wireframeLinecap=Es.wireframeLinecap,this.wireframeLinejoin=Es.wireframeLinejoin,this.skinning=Es.skinning,this.morphTargets=Es.morphTargets,this.morphNormals=Es.morphNormals,this},yr.prototype=Object.create(hr.prototype),yr.prototype.constructor=yr,yr.prototype.isMeshPhysicalMaterial=!0,yr.prototype.copy=function(Es){return hr.prototype.copy.call(this,Es),this.defines={PHYSICAL:""},this.reflectivity=Es.reflectivity,this.clearCoat=Es.clearCoat,this.clearCoatRoughness=Es.clearCoatRoughness,this},xr.prototype=Object.create(Fe.prototype),xr.prototype.constructor=xr,xr.prototype.isMeshPhongMaterial=!0,xr.prototype.copy=function(Es){return Fe.prototype.copy.call(this,Es),this.color.copy(Es.color),this.specular.copy(Es.specular),this.shininess=Es.shininess,this.map=Es.map,this.lightMap=Es.lightMap,this.lightMapIntensity=Es.lightMapIntensity,this.aoMap=Es.aoMap,this.aoMapIntensity=Es.aoMapIntensity,this.emissive.copy(Es.emissive),this.emissiveMap=Es.emissiveMap,this.emissiveIntensity=Es.emissiveIntensity,this.bumpMap=Es.bumpMap,this.bumpScale=Es.bumpScale,this.normalMap=Es.normalMap,this.normalScale.copy(Es.normalScale),this.displacementMap=Es.displacementMap,this.displacementScale=Es.displacementScale,this.displacementBias=Es.displacementBias,this.specularMap=Es.specularMap,this.alphaMap=Es.alphaMap,this.envMap=Es.envMap,this.combine=Es.combine,this.reflectivity=Es.reflectivity,this.refractionRatio=Es.refractionRatio,this.wireframe=Es.wireframe,this.wireframeLinewidth=Es.wireframeLinewidth,this.wireframeLinecap=Es.wireframeLinecap,this.wireframeLinejoin=Es.wireframeLinejoin,this.skinning=Es.skinning,this.morphTargets=Es.morphTargets,this.morphNormals=Es.morphNormals,this},_r.prototype=Object.create(Fe.prototype),_r.prototype.constructor=_r,_r.prototype.isMeshNormalMaterial=!0,_r.prototype.copy=function(Es){return Fe.prototype.copy.call(this,Es),this.wireframe=Es.wireframe,this.wireframeLinewidth=Es.wireframeLinewidth,this},vr.prototype=Object.create(Fe.prototype),vr.prototype.constructor=vr,vr.prototype.isMeshLambertMaterial=!0,vr.prototype.copy=function(Es){return Fe.prototype.copy.call(this,Es),this.color.copy(Es.color),this.map=Es.map,this.lightMap=Es.lightMap,this.lightMapIntensity=Es.lightMapIntensity,this.aoMap=Es.aoMap,this.aoMapIntensity=Es.aoMapIntensity,this.emissive.copy(Es.emissive),this.emissiveMap=Es.emissiveMap,this.emissiveIntensity=Es.emissiveIntensity,this.specularMap=Es.specularMap,this.alphaMap=Es.alphaMap,this.envMap=Es.envMap,this.combine=Es.combine,this.reflectivity=Es.reflectivity,this.refractionRatio=Es.refractionRatio,this.wireframe=Es.wireframe,this.wireframeLinewidth=Es.wireframeLinewidth,this.wireframeLinecap=Es.wireframeLinecap,this.wireframeLinejoin=Es.wireframeLinejoin,this.skinning=Es.skinning,this.morphTargets=Es.morphTargets,this.morphNormals=Es.morphNormals,this},br.prototype=Object.create(Fe.prototype),br.prototype.constructor=br,br.prototype.isLineDashedMaterial=!0,br.prototype.copy=function(Es){return Fe.prototype.copy.call(this,Es),this.color.copy(Es.color),this.linewidth=Es.linewidth,this.scale=Es.scale,this.dashSize=Es.dashSize,this.gapSize=Es.gapSize,this},A.Cache={enabled:!1,files:{},add:function(Es,Ts){!1===this.enabled||(this.files[Es]=Ts)},get:function(Es){if(!1!==this.enabled)return this.files[Es]},remove:function(Es){delete this.files[Es]},clear:function(){this.files={}}},A.DefaultLoadingManager=new Er,Object.assign(Tr.prototype,{load:function(Es,Ts,Ss,Ms){void 0!==this.path&&(Es=this.path+Es);var ws=this,As=A.Cache.get(Es);if(void 0!==As)return ws.manager.itemStart(Es),setTimeout(function(){Ts&&Ts(As),ws.manager.itemEnd(Es)},0),As;var Ls=new XMLHttpRequest;return Ls.open("GET",Es,!0),Ls.addEventListener("load",function(Rs){var Ps=Rs.target.response;A.Cache.add(Es,Ps),200===this.status?(Ts&&Ts(Ps),ws.manager.itemEnd(Es)):0===this.status?(console.warn("THREE.XHRLoader: HTTP Status 0 received."),Ts&&Ts(Ps),ws.manager.itemEnd(Es)):(Ms&&Ms(Rs),ws.manager.itemError(Es))},!1),void 0!==Ss&&Ls.addEventListener("progress",function(Rs){Ss(Rs)},!1),Ls.addEventListener("error",function(Rs){Ms&&Ms(Rs),ws.manager.itemError(Es)},!1),void 0!==this.responseType&&(Ls.responseType=this.responseType),void 0!==this.withCredentials&&(Ls.withCredentials=this.withCredentials),Ls.overrideMimeType&&Ls.overrideMimeType("text/plain"),Ls.send(null),ws.manager.itemStart(Es),Ls},setPath:function(Es){return this.path=Es,this},setResponseType:function(Es){return this.responseType=Es,this},setWithCredentials:function(Es){return this.withCredentials=Es,this}}),Object.assign(Sr.prototype,{load:function(Es,Ts,Ss,Ms){function ws(Ds){Ps.load(Es[Ds],function(Ns){var Fs=As._parser(Ns,!0);Ls[Ds]={width:Fs.width,height:Fs.height,format:Fs.format,mipmaps:Fs.mipmaps},Cs+=1,6===Cs&&(1===Fs.mipmapCount&&(Rs.minFilter=$n),Rs.format=Fs.format,Rs.needsUpdate=!0,Ts&&Ts(Rs))},Ss,Ms)}var As=this,Ls=[],Rs=new pr;Rs.image=Ls;var Ps=new Tr(this.manager);if(Ps.setPath(this.path),Ps.setResponseType("arraybuffer"),Array.isArray(Es))for(var Cs=0,Is=0,Us=Es.length;Is<Us;++Is)ws(Is);else Ps.load(Es,function(Ds){var Ns=As._parser(Ds,!0);if(Ns.isCubemap)for(var Fs=Ns.mipmaps.length/Ns.mipmapCount,zs=0;zs<Fs;zs++){Ls[zs]={mipmaps:[]};for(var Bs=0;Bs<Ns.mipmapCount;Bs++)Ls[zs].mipmaps.push(Ns.mipmaps[zs*Ns.mipmapCount+Bs]),Ls[zs].format=Ns.format,Ls[zs].width=Ns.width,Ls[zs].height=Ns.height}else Rs.image.width=Ns.width,Rs.image.height=Ns.height,Rs.mipmaps=Ns.mipmaps;1===Ns.mipmapCount&&(Rs.minFilter=$n),Rs.format=Ns.format,Rs.needsUpdate=!0,Ts&&Ts(Rs)},Ss,Ms);return Rs},setPath:function(Es){return this.path=Es,this}}),Object.assign(Mr.prototype,{load:function(Es,Ts,Ss,Ms){var ws=this,As=new $t,Ls=new Tr(this.manager);return Ls.setResponseType("arraybuffer"),Ls.load(Es,function(Rs){var Ps=ws._parser(Rs);Ps&&(void 0===Ps.image?void 0!==Ps.data&&(As.image.width=Ps.width,As.image.height=Ps.height,As.image.data=Ps.data):As.image=Ps.image,As.wrapS=void 0===Ps.wrapS?Yn:Ps.wrapS,As.wrapT=void 0===Ps.wrapT?Yn:Ps.wrapT,As.magFilter=void 0===Ps.magFilter?$n:Ps.magFilter,As.minFilter=void 0===Ps.minFilter?ro:Ps.minFilter,As.anisotropy=void 0===Ps.anisotropy?1:Ps.anisotropy,void 0!==Ps.format&&(As.format=Ps.format),void 0!==Ps.type&&(As.type=Ps.type),void 0!==Ps.mipmaps&&(As.mipmaps=Ps.mipmaps),1===Ps.mipmapCount&&(As.minFilter=$n),As.needsUpdate=!0,Ts&&Ts(As,Ps))},Ss,Ms),As}}),Object.assign(wr.prototype,{load:function(Es,Ts,Ss,Ms){var ws=this,As=document.createElementNS("http://www.w3.org/1999/xhtml","img");if(As.onload=function(){URL.revokeObjectURL(As.src),Ts&&Ts(As),ws.manager.itemEnd(Es)},0===Es.indexOf("data:"))As.src=Es;else{var Ls=new Tr;Ls.setPath(this.path),Ls.setResponseType("blob"),Ls.setWithCredentials(this.withCredentials),Ls.load(Es,function(Rs){As.src=URL.createObjectURL(Rs)},Ss,Ms)}return ws.manager.itemStart(Es),As},setCrossOrigin:function(Es){return this.crossOrigin=Es,this},setWithCredentials:function(Es){return this.withCredentials=Es,this},setPath:function(Es){return this.path=Es,this}}),Object.assign(Ar.prototype,{load:function(Es,Ts,Ss,Ms){function ws(Cs){Ls.load(Es[Cs],function(Is){As.images[Cs]=Is,Rs++,6===Rs&&(As.needsUpdate=!0,Ts&&Ts(As))},void 0,Ms)}var As=new V,Ls=new wr(this.manager);Ls.setCrossOrigin(this.crossOrigin),Ls.setPath(this.path);for(var Rs=0,Ps=0;Ps<Es.length;++Ps)ws(Ps);return As},setCrossOrigin:function(Es){return this.crossOrigin=Es,this},setPath:function(Es){return this.path=Es,this}}),Object.assign(Lr.prototype,{load:function(Es,Ts,Ss,Ms){var ws=new P,As=new wr(this.manager);return As.setCrossOrigin(this.crossOrigin),As.setWithCredentials(this.withCredentials),As.setPath(this.path),As.load(Es,function(Ls){var Rs=0<Es.search(/\.(jpg|jpeg)$/)||0===Es.search(/^data\:image\/jpeg/);ws.format=Rs?xo:_o,ws.image=Ls,ws.needsUpdate=!0,void 0!==Ts&&Ts(ws)},Ss,Ms),ws},setCrossOrigin:function(Es){return this.crossOrigin=Es,this},setWithCredentials:function(Es){return this.withCredentials=Es,this},setPath:function(Es){return this.path=Es,this}}),Rr.prototype=Object.assign(Object.create(vt.prototype),{constructor:Rr,isLight:!0,copy:function(Es){return vt.prototype.copy.call(this,Es),this.color.copy(Es.color),this.intensity=Es.intensity,this},toJSON:function(Es){var Ts=vt.prototype.toJSON.call(this,Es);return Ts.object.color=this.color.getHex(),Ts.object.intensity=this.intensity,void 0!==this.groundColor&&(Ts.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(Ts.object.distance=this.distance),void 0!==this.angle&&(Ts.object.angle=this.angle),void 0!==this.decay&&(Ts.object.decay=this.decay),void 0!==this.penumbra&&(Ts.object.penumbra=this.penumbra),void 0!==this.shadow&&(Ts.object.shadow=this.shadow.toJSON()),Ts}}),Pr.prototype=Object.assign(Object.create(Rr.prototype),{constructor:Pr,isHemisphereLight:!0,copy:function(Es){return Rr.prototype.copy.call(this,Es),this.groundColor.copy(Es.groundColor),this}}),Object.assign(Cr.prototype,{copy:function(Es){return this.camera=Es.camera.clone(),this.bias=Es.bias,this.radius=Es.radius,this.mapSize.copy(Es.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var Es={};return 0!==this.bias&&(Es.bias=this.bias),1!==this.radius&&(Es.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(Es.mapSize=this.mapSize.toArray()),Es.camera=this.camera.toJSON(!1).object,delete Es.camera.matrix,Es}}),Ir.prototype=Object.assign(Object.create(Cr.prototype),{constructor:Ir,isSpotLightShadow:!0,update:function(Es){var Ts=2*A.Math.RAD2DEG*Es.angle,Ss=this.mapSize.width/this.mapSize.height,Ms=Es.distance||500,ws=this.camera;(Ts!==ws.fov||Ss!==ws.aspect||Ms!==ws.far)&&(ws.fov=Ts,ws.aspect=Ss,ws.far=Ms,ws.updateProjectionMatrix())}}),Ur.prototype=Object.assign(Object.create(Rr.prototype),{constructor:Ur,isSpotLight:!0,copy:function(Es){return Rr.prototype.copy.call(this,Es),this.distance=Es.distance,this.angle=Es.angle,this.penumbra=Es.penumbra,this.decay=Es.decay,this.target=Es.target.clone(),this.shadow=Es.shadow.clone(),this}}),Dr.prototype=Object.assign(Object.create(Rr.prototype),{constructor:Dr,isPointLight:!0,copy:function(Es){return Rr.prototype.copy.call(this,Es),this.distance=Es.distance,this.decay=Es.decay,this.shadow=Es.shadow.clone(),this}}),Nr.prototype=Object.assign(Object.create(Cr.prototype),{constructor:Nr}),Fr.prototype=Object.assign(Object.create(Rr.prototype),{constructor:Fr,isDirectionalLight:!0,copy:function(Es){return Rr.prototype.copy.call(this,Es),this.target=Es.target.clone(),this.shadow=Es.shadow.clone(),this}}),zr.prototype=Object.assign(Object.create(Rr.prototype),{constructor:zr,isAmbientLight:!0}),A.AnimationUtils={arraySlice:function(Es,Ts,Ss){return A.AnimationUtils.isTypedArray(Es)?new Es.constructor(Es.subarray(Ts,Ss)):Es.slice(Ts,Ss)},convertArray:function(Es,Ts,Ss){return Es&&(Ss||Es.constructor!==Ts)?"number"==typeof Ts.BYTES_PER_ELEMENT?new Ts(Es):Array.prototype.slice.call(Es):Es},isTypedArray:function(Es){return ArrayBuffer.isView(Es)&&!(Es instanceof DataView)},getKeyframeOrder:function(Es){for(var Ts=Es.length,Ss=Array(Ts),Ms=0;Ms!==Ts;++Ms)Ss[Ms]=Ms;return Ss.sort(function(As,Ls){return Es[As]-Es[Ls]}),Ss},sortedArray:function(Es,Ts,Ss){for(var Ms=Es.length,ws=new Es.constructor(Ms),As=0,Ls=0;Ls!==Ms;++As)for(var Rs=Ss[As]*Ts,Ps=0;Ps!==Ts;++Ps)ws[Ls++]=Es[Rs+Ps];return ws},flattenJSON:function(Es,Ts,Ss,Ms){for(var ws=1,As=Es[0];As!==void 0&&As[Ms]===void 0;)As=Es[ws++];if(As!==void 0){var Ls=As[Ms];if(Ls!==void 0)if(Array.isArray(Ls))do Ls=As[Ms],void 0!==Ls&&(Ts.push(As.time),Ss.push.apply(Ss,Ls)),As=Es[ws++];while(void 0!==As);else if(Ls.toArray!==void 0)do Ls=As[Ms],void 0!==Ls&&(Ts.push(As.time),Ls.toArray(Ss,Ss.length)),As=Es[ws++];while(void 0!==As);else do Ls=As[Ms],void 0!==Ls&&(Ts.push(As.time),Ss.push(Ls)),As=Es[ws++];while(void 0!==As)}}},Br.prototype={constructor:Br,evaluate:function(Es){var Ts=this.parameterPositions,Ss=this._cachedIndex,Ms=Ts[Ss],ws=Ts[Ss-1];validate_interval:{seek:{var As;linear_scan:{forward_scan:if(!(Es<Ms)){for(var Ls=Ss+2;;){if(void 0===Ms){if(Es<ws)break forward_scan;return Ss=Ts.length,this._cachedIndex=Ss,this.afterEnd_(Ss-1,Es,ws)}if(Ss===Ls)break;if(ws=Ms,Ms=Ts[++Ss],Es<Ms)break seek}As=Ts.length;break linear_scan}if(!(Es>=ws)){var Rs=Ts[1];Es<Rs&&(Ss=2,ws=Rs);for(var Ls=Ss-2;;){if(void 0===ws)return this._cachedIndex=0,this.beforeStart_(0,Es,Ms);if(Ss===Ls)break;if(Ms=ws,ws=Ts[--Ss-1],Es>=ws)break seek}As=Ss,Ss=0;break linear_scan}break validate_interval}for(;Ss<As;){var Ps=Ss+As>>>1;Es<Ts[Ps]?As=Ps:Ss=Ps+1}if(Ms=Ts[Ss],ws=Ts[Ss-1],void 0===ws)return this._cachedIndex=0,this.beforeStart_(0,Es,Ms);if(void 0===Ms)return Ss=Ts.length,this._cachedIndex=Ss,this.afterEnd_(Ss-1,ws,Es)}this._cachedIndex=Ss,this.intervalChanged_(Ss,ws,Ms)}return this.interpolate_(Ss,ws,Es,Ms)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(Es){for(var Ts=this.resultBuffer,Ss=this.sampleValues,Ms=this.valueSize,ws=0;ws!==Ms;++ws)Ts[ws]=Ss[Es*Ms+ws];return Ts},interpolate_:function(Es,Ts,Ss,Ms){throw new Error("call to abstract method")},intervalChanged_:function(Es,Ts,Ss){}},Object.assign(Br.prototype,{beforeStart_:Br.prototype.copySampleValue_,afterEnd_:Br.prototype.copySampleValue_}),Or.prototype=Object.assign(Object.create(Br.prototype),{constructor:Or,DefaultSettings_:{endingStart:Oo,endingEnd:Oo},intervalChanged_:function(Es,Ts,Ss){var Ms=this.parameterPositions,ws=Es-2,As=Es+1,Ls=Ms[ws],Rs=Ms[As];if(Ls===void 0)switch(this.getSettings_().endingStart){case Go:ws=Es,Ls=2*Ts-Ss;break;case Vo:ws=Ms.length-2,Ls=Ts+Ms[ws]-Ms[ws+1];break;default:ws=Es,Ls=Ss;}if(void 0===Rs)switch(this.getSettings_().endingEnd){case Go:As=Es,Rs=2*Ss-Ts;break;case Vo:As=1,Rs=Ss+Ms[1]-Ms[0];break;default:As=Es-1,Rs=Ts;}var Ps=0.5*(Ss-Ts),Cs=this.valueSize;this._weightPrev=Ps/(Ts-Ls),this._weightNext=Ps/(Rs-Ss),this._offsetPrev=ws*Cs,this._offsetNext=As*Cs},interpolate_:function(Es,Ts,Ss,Ms){for(var ws=this.resultBuffer,As=this.sampleValues,Ls=this.valueSize,Rs=Es*Ls,Ps=this._offsetPrev,Cs=this._offsetNext,Is=this._weightPrev,Us=this._weightNext,Ds=(Ss-Ts)/(Ms-Ts),Ns=Ds*Ds,Fs=Ns*Ds,zs=0;zs!==Ls;++zs)ws[zs]=(-Is*Fs+2*Is*Ns-Is*Ds)*As[Ps+zs]+((1+Is)*Fs+(-1.5-2*Is)*Ns+(-0.5+Is)*Ds+1)*As[Rs-Ls+zs]+((-1-Us)*Fs+(1.5+Us)*Ns+0.5*Ds)*As[Rs+zs]+(Us*Fs-Us*Ns)*As[Cs+zs];return ws}}),Gr.prototype=Object.assign(Object.create(Br.prototype),{constructor:Gr,interpolate_:function(Es,Ts,Ss,Ms){for(var ws=this.resultBuffer,As=this.sampleValues,Ls=this.valueSize,Rs=Es*Ls,Ps=(Ss-Ts)/(Ms-Ts),Cs=0;Cs!==Ls;++Cs)ws[Cs]=As[Rs-Ls+Cs]*(1-Ps)+As[Rs+Cs]*Ps;return ws}}),Vr.prototype=Object.assign(Object.create(Br.prototype),{constructor:Vr,interpolate_:function(Es,Ts,Ss,Ms){return this.copySampleValue_(Es-1)}});var fs={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:zo,InterpolantFactoryMethodDiscrete:function(Es){return new Vr(this.times,this.values,this.getValueSize(),Es)},InterpolantFactoryMethodLinear:function(Es){return new Gr(this.times,this.values,this.getValueSize(),Es)},InterpolantFactoryMethodSmooth:function(Es){return new Or(this.times,this.values,this.getValueSize(),Es)},setInterpolation:function(Es){var Ts;if(Es===Fo?Ts=this.InterpolantFactoryMethodDiscrete:Es===zo?Ts=this.InterpolantFactoryMethodLinear:Es===Bo?Ts=this.InterpolantFactoryMethodSmooth:void 0,void 0===Ts){var Ss="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant)if(Es!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(Ss);return void console.warn(Ss)}this.createInterpolant=Ts},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Fo;case this.InterpolantFactoryMethodLinear:return zo;case this.InterpolantFactoryMethodSmooth:return Bo;}},getValueSize:function(){return this.values.length/this.times.length},shift:function(Es){if(0!==Es)for(var Ts=this.times,Ss=0,Ms=Ts.length;Ss!==Ms;++Ss)Ts[Ss]+=Es;return this},scale:function(Es){if(1!==Es)for(var Ts=this.times,Ss=0,Ms=Ts.length;Ss!==Ms;++Ss)Ts[Ss]*=Es;return this},trim:function(Es,Ts){for(var Ss=this.times,Ms=Ss.length,ws=0,As=Ms-1;ws!==Ms&&Ss[ws]<Es;)++ws;for(;-1!=As&&Ss[As]>Ts;)--As;if(++As,0!==ws||As!==Ms){ws>=As&&(As=Math.max(As,1),ws=As-1);var Ls=this.getValueSize();this.times=A.AnimationUtils.arraySlice(Ss,ws,As),this.values=A.AnimationUtils.arraySlice(this.values,ws*Ls,As*Ls)}return this},validate:function(){var Es=!0,Ts=this.getValueSize();0!=Ts-Math.floor(Ts)&&(console.error("invalid value size in track",this),Es=!1);var Ss=this.times,Ms=this.values,ws=Ss.length;0===ws&&(console.error("track is empty",this),Es=!1);for(var As=null,Ls=0;Ls!==ws;Ls++){var Rs=Ss[Ls];if("number"==typeof Rs&&isNaN(Rs)){console.error("time is not a valid number",this,Ls,Rs),Es=!1;break}if(null!=As&&As>Rs){console.error("out of order keys",this,Ls,Rs,As),Es=!1;break}As=Rs}if(Ms!==void 0&&A.AnimationUtils.isTypedArray(Ms))for(var Ls=0,Ps=Ms.length;Ls!==Ps;++Ls){var Cs=Ms[Ls];if(isNaN(Cs)){console.error("value is not a valid number",this,Ls,Cs),Es=!1;break}}return Es},optimize:function(){for(var Es=this.times,Ts=this.values,Ss=this.getValueSize(),Ms=1,ws=1,As=Es.length-1;ws<=As;++ws){var Ls=!1,Rs=Es[ws],Ps=Es[ws+1];if(Rs!==Ps&&(1!==ws||Rs!==Rs[0]))for(var Cs=ws*Ss,Is=0;Is!==Ss;++Is){var Us=Ts[Cs+Is];if(Us!==Ts[Cs-Ss+Is]||Us!==Ts[Cs+Ss+Is]){Ls=!0;break}}if(Ls){if(ws!==Ms){Es[Ms]=Es[ws];for(var Ds=ws*Ss,Ns=Ms*Ss,Is=0;Is!==Ss;++Is)Ts[Ns+Is]=Ts[Ds+Is]}++Ms}}return Ms!==Es.length&&(this.times=A.AnimationUtils.arraySlice(Es,0,Ms),this.values=A.AnimationUtils.arraySlice(Ts,0,Ms*Ss)),this}};Hr.prototype=Object.assign(Object.create(fs),{constructor:Hr,ValueTypeName:"vector"}),Wr.prototype=Object.assign(Object.create(Br.prototype),{constructor:Wr,interpolate_:function(Es,Ts,Ss,Ms){for(var ws=this.resultBuffer,As=this.sampleValues,Ls=this.valueSize,Rs=Es*Ls,Ps=Rs+Ls;Rs!==Ps;Rs+=4)U.slerpFlat(ws,0,As,Rs-Ls,As,Rs,(Ss-Ts)/(Ms-Ts));return ws}}),jr.prototype=Object.assign(Object.create(fs),{constructor:jr,ValueTypeName:"quaternion",DefaultInterpolation:zo,InterpolantFactoryMethodLinear:function(Es){return new Wr(this.times,this.values,this.getValueSize(),Es)},InterpolantFactoryMethodSmooth:void 0}),Xr.prototype=Object.assign(Object.create(fs),{constructor:Xr,ValueTypeName:"number"}),qr.prototype=Object.assign(Object.create(fs),{constructor:qr,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Fo,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Yr.prototype=Object.assign(Object.create(fs),{constructor:Yr,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Fo,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Zr.prototype=Object.assign(Object.create(fs),{constructor:Zr,ValueTypeName:"color"}),Jr.prototype=fs,fs.constructor=Jr,Object.assign(Jr,{parse:function(Es){if(Es.type===void 0)throw new Error("track type undefined, can not parse");var Ts=Jr._getTrackTypeForValueTypeName(Es.type);if(Es.times===void 0){var Ss=[],Ms=[];A.AnimationUtils.flattenJSON(Es.keys,Ss,Ms,"value"),Es.times=Ss,Es.values=Ms}return void 0===Ts.parse?new Ts(Es.name,Es.times,Es.values,Es.interpolation):Ts.parse(Es)},toJSON:function(Es){var Ts=Es.constructor,Ss;if(void 0!==Ts.toJSON)Ss=Ts.toJSON(Es);else{Ss={name:Es.name,times:A.AnimationUtils.convertArray(Es.times,Array),values:A.AnimationUtils.convertArray(Es.values,Array)};var Ms=Es.getInterpolation();Ms!==Es.DefaultInterpolation&&(Ss.interpolation=Ms)}return Ss.type=Es.ValueTypeName,Ss},_getTrackTypeForValueTypeName:function(Es){switch(Es.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Xr;case"vector":case"vector2":case"vector3":case"vector4":return Hr;case"color":return Zr;case"quaternion":return jr;case"bool":case"boolean":return Yr;case"string":return qr;}throw new Error("Unsupported typeName: "+Es)}}),Qr.prototype={constructor:Qr,resetDuration:function(){for(var Es=this.tracks,Ts=0,Ss=0,Ms=Es.length;Ss!==Ms;++Ss){var ws=this.tracks[Ss];Ts=Math.max(Ts,ws.times[ws.times.length-1])}this.duration=Ts},trim:function(){for(var Es=0;Es<this.tracks.length;Es++)this.tracks[Es].trim(0,this.duration);return this},optimize:function(){for(var Es=0;Es<this.tracks.length;Es++)this.tracks[Es].optimize();return this}},Object.assign(Qr,{parse:function(Es){for(var Ts=[],Ss=Es.tracks,Ms=1/(Es.fps||1),ws=0,As=Ss.length;ws!==As;++ws)Ts.push(Jr.parse(Ss[ws]).scale(Ms));return new Qr(Es.name,Es.duration,Ts)},toJSON:function(Es){for(var Ts=[],Ss=Es.tracks,Ms={name:Es.name,duration:Es.duration,tracks:Ts},ws=0,As=Ss.length;ws!==As;++ws)Ts.push(Jr.toJSON(Ss[ws]));return Ms},CreateFromMorphTargetSequence:function(Es,Ts,Ss,Ms){for(var ws=Ts.length,As=[],Ls=0;Ls<ws;Ls++){var Rs=[],Ps=[];Rs.push((Ls+ws-1)%ws,Ls,(Ls+1)%ws),Ps.push(0,1,0);var Cs=A.AnimationUtils.getKeyframeOrder(Rs);Rs=A.AnimationUtils.sortedArray(Rs,1,Cs),Ps=A.AnimationUtils.sortedArray(Ps,1,Cs),Ms||0!==Rs[0]||(Rs.push(ws),Ps.push(Ps[0])),As.push(new Xr(".morphTargetInfluences["+Ts[Ls].name+"]",Rs,Ps).scale(1/Ss))}return new Qr(Es,-1,As)},findByName:function(Es,Ts){var Ss=Es;if(!Array.isArray(Es)){var Ms=Es;Ss=Ms.geometry&&Ms.geometry.animations||Ms.animations}for(var ws=0;ws<Ss.length;ws++)if(Ss[ws].name===Ts)return Ss[ws];return null},CreateClipsFromMorphTargetSequences:function(Es,Ts,Ss){for(var Ms={},ws=/^([\w-]*?)([\d]+)$/,As=0,Ls=Es.length;As<Ls;As++){var Rs=Es[As],Ps=Rs.name.match(ws);if(Ps&&1<Ps.length){var Cs=Ps[1],Is=Ms[Cs];Is||(Ms[Cs]=Is=[]),Is.push(Rs)}}var Us=[];for(var Cs in Ms)Us.push(Qr.CreateFromMorphTargetSequence(Cs,Ms[Cs],Ts,Ss));return Us},parseAnimation:function(Es,Ts,Ss){if(!Es)return console.error("  no animation in JSONLoader data"),null;for(var Ms=function(ks,Hs,Ws,js,Xs){if(0!==Ws.length){var qs=[],Ys=[];A.AnimationUtils.flattenJSON(Ws,qs,Ys,js),0!==qs.length&&Xs.push(new ks(Hs,qs,Ys))}},ws=[],As=Es.name||"default",Ls=Es.length||-1,Rs=Es.fps||30,Ps=Es.hierarchy||[],Cs=0;Cs<Ps.length;Cs++){var Is=Ps[Cs].keys;if(Is&&0!==Is.length)if(Is[0].morphTargets){for(var Us={},Ds=0;Ds<Is.length;Ds++)if(Is[Ds].morphTargets)for(var Ns=0;Ns<Is[Ds].morphTargets.length;Ns++)Us[Is[Ds].morphTargets[Ns]]=-1;for(var Fs in Us){for(var zs=[],Bs=[],Ns=0;Ns!==Is[Ds].morphTargets.length;++Ns){var Os=Is[Ds];zs.push(Os.time),Bs.push(Os.morphTarget===Fs?1:0)}ws.push(new Xr(".morphTargetInfluence["+Fs+"]",zs,Bs))}Ls=Us.length*(Rs||1)}else{var Gs=".bones["+Ts[Cs].name+"]";Ms(Hr,Gs+".position",Is,"pos",ws),Ms(jr,Gs+".quaternion",Is,"rot",ws),Ms(Hr,Gs+".scale",Is,"scl",ws)}}if(0===ws.length)return null;var Vs=new Qr(As,Ls,ws);return Vs}}),Object.assign(Kr.prototype,{load:function(Es,Ts,Ss,Ms){var ws=this,As=new Tr(ws.manager);As.load(Es,function(Ls){Ts(ws.parse(JSON.parse(Ls)))},Ss,Ms)},setTextures:function(Es){this.textures=Es},parse:function(Es){function Ts(Rs){return void 0===Ss[Rs]&&console.warn("THREE.MaterialLoader: Undefined texture",Rs),Ss[Rs]}var Ss=this.textures,Ms=new THREE[Es.type];if(void 0!==Es.uuid&&(Ms.uuid=Es.uuid),void 0!==Es.name&&(Ms.name=Es.name),void 0!==Es.color&&Ms.color.setHex(Es.color),void 0!==Es.roughness&&(Ms.roughness=Es.roughness),void 0!==Es.metalness&&(Ms.metalness=Es.metalness),void 0!==Es.emissive&&Ms.emissive.setHex(Es.emissive),void 0!==Es.specular&&Ms.specular.setHex(Es.specular),void 0!==Es.shininess&&(Ms.shininess=Es.shininess),void 0!==Es.uniforms&&(Ms.uniforms=Es.uniforms),void 0!==Es.vertexShader&&(Ms.vertexShader=Es.vertexShader),void 0!==Es.fragmentShader&&(Ms.fragmentShader=Es.fragmentShader),void 0!==Es.vertexColors&&(Ms.vertexColors=Es.vertexColors),void 0!==Es.fog&&(Ms.fog=Es.fog),void 0!==Es.shading&&(Ms.shading=Es.shading),void 0!==Es.blending&&(Ms.blending=Es.blending),void 0!==Es.side&&(Ms.side=Es.side),void 0!==Es.opacity&&(Ms.opacity=Es.opacity),void 0!==Es.transparent&&(Ms.transparent=Es.transparent),void 0!==Es.alphaTest&&(Ms.alphaTest=Es.alphaTest),void 0!==Es.depthTest&&(Ms.depthTest=Es.depthTest),void 0!==Es.depthWrite&&(Ms.depthWrite=Es.depthWrite),void 0!==Es.colorWrite&&(Ms.colorWrite=Es.colorWrite),void 0!==Es.wireframe&&(Ms.wireframe=Es.wireframe),void 0!==Es.wireframeLinewidth&&(Ms.wireframeLinewidth=Es.wireframeLinewidth),void 0!==Es.wireframeLinecap&&(Ms.wireframeLinecap=Es.wireframeLinecap),void 0!==Es.wireframeLinejoin&&(Ms.wireframeLinejoin=Es.wireframeLinejoin),void 0!==Es.skinning&&(Ms.skinning=Es.skinning),void 0!==Es.morphTargets&&(Ms.morphTargets=Es.morphTargets),void 0!==Es.size&&(Ms.size=Es.size),void 0!==Es.sizeAttenuation&&(Ms.sizeAttenuation=Es.sizeAttenuation),void 0!==Es.map&&(Ms.map=Ts(Es.map)),void 0!==Es.alphaMap&&(Ms.alphaMap=Ts(Es.alphaMap),Ms.transparent=!0),void 0!==Es.bumpMap&&(Ms.bumpMap=Ts(Es.bumpMap)),void 0!==Es.bumpScale&&(Ms.bumpScale=Es.bumpScale),void 0!==Es.normalMap&&(Ms.normalMap=Ts(Es.normalMap)),void 0!==Es.normalScale){var ws=Es.normalScale;!1===Array.isArray(ws)&&(ws=[ws,ws]),Ms.normalScale=new R().fromArray(ws)}if(void 0!==Es.displacementMap&&(Ms.displacementMap=Ts(Es.displacementMap)),void 0!==Es.displacementScale&&(Ms.displacementScale=Es.displacementScale),void 0!==Es.displacementBias&&(Ms.displacementBias=Es.displacementBias),void 0!==Es.roughnessMap&&(Ms.roughnessMap=Ts(Es.roughnessMap)),void 0!==Es.metalnessMap&&(Ms.metalnessMap=Ts(Es.metalnessMap)),void 0!==Es.emissiveMap&&(Ms.emissiveMap=Ts(Es.emissiveMap)),void 0!==Es.emissiveIntensity&&(Ms.emissiveIntensity=Es.emissiveIntensity),void 0!==Es.specularMap&&(Ms.specularMap=Ts(Es.specularMap)),void 0!==Es.envMap&&(Ms.envMap=Ts(Es.envMap)),void 0!==Es.reflectivity&&(Ms.reflectivity=Es.reflectivity),void 0!==Es.lightMap&&(Ms.lightMap=Ts(Es.lightMap)),void 0!==Es.lightMapIntensity&&(Ms.lightMapIntensity=Es.lightMapIntensity),void 0!==Es.aoMap&&(Ms.aoMap=Ts(Es.aoMap)),void 0!==Es.aoMapIntensity&&(Ms.aoMapIntensity=Es.aoMapIntensity),void 0!==Es.materials)for(var As=0,Ls=Es.materials.length;As<Ls;As++)Ms.materials.push(this.parse(Es.materials[As]));return Ms}}),Object.assign($r.prototype,{load:function(Es,Ts,Ss,Ms){var ws=this,As=new Tr(ws.manager);As.load(Es,function(Ls){Ts(ws.parse(JSON.parse(Ls)))},Ss,Ms)},parse:function(Es){var Ts=new Mt,Ss=Es.data.index,Ms={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};if(Ss!==void 0){var ws=new Ms[Ss.type](Ss.array);Ts.setIndex(new ut(ws,1))}var As=Es.data.attributes;for(var Ls in As){var Rs=As[Ls],ws=new Ms[Rs.type](Rs.array);Ts.addAttribute(Ls,new ut(ws,Rs.itemSize,Rs.normalized))}var Ps=Es.data.groups||Es.data.drawcalls||Es.data.offsets;if(Ps!==void 0)for(var Cs=0,Is=Ps.length;Cs!==Is;++Cs){var Us=Ps[Cs];Ts.addGroup(Us.start,Us.count,Us.materialIndex)}var Ds=Es.data.boundingSphere;if(Ds!==void 0){var Ns=new D;Ds.center!==void 0&&Ns.fromArray(Ds.center),Ts.boundingSphere=new ke(Ns,Ds.radius)}return Ts}}),ea.prototype={constructor:ea,crossOrigin:void 0,extractUrlBase:function(Es){var Ts=Es.split("/");return 1===Ts.length?"./":(Ts.pop(),Ts.join("/")+"/")},initMaterials:function(Es,Ts,Ss){for(var Ms=[],ws=0;ws<Es.length;++ws)Ms[ws]=this.createMaterial(Es[ws],Ts,Ss);return Ms},createMaterial:function(){var Es,Ts,Ss;return function(ws,As,Ls){function Rs(Ds,Ns,Fs,zs,Bs){var Os=As+Ds,Gs=ea.Handlers.get(Os),Vs;null===Gs?(Ts.setCrossOrigin(Ls),Vs=Ts.load(Os)):Vs=Gs.load(Os),void 0!==Ns&&(Vs.repeat.fromArray(Ns),1!==Ns[0]&&(Vs.wrapS=qn),1!==Ns[1]&&(Vs.wrapT=qn)),void 0!==Fs&&Vs.offset.fromArray(Fs),void 0!==zs&&("repeat"===zs[0]&&(Vs.wrapS=qn),"mirror"===zs[0]&&(Vs.wrapS=Zn),"repeat"===zs[1]&&(Vs.wrapT=qn),"mirror"===zs[1]&&(Vs.wrapT=Zn)),void 0!==Bs&&(Vs.anisotropy=Bs);var ks=A.Math.generateUUID();return Ps[ks]=Vs,ks}void 0==Es&&(Es=new Oe),void 0==Ts&&(Ts=new Lr),void 0==Ss&&(Ss=new Kr);var Ps={},Cs={uuid:A.Math.generateUUID(),type:"MeshLambertMaterial"};for(var Is in ws){var Us=ws[Is];switch(Is){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":Cs.name=Us;break;case"blending":Cs.blending=THREE[Us];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",Is,"is no longer supported.");break;case"colorDiffuse":Cs.color=Es.fromArray(Us).getHex();break;case"colorSpecular":Cs.specular=Es.fromArray(Us).getHex();break;case"colorEmissive":Cs.emissive=Es.fromArray(Us).getHex();break;case"specularCoef":Cs.shininess=Us;break;case"shading":"basic"===Us.toLowerCase()&&(Cs.type="MeshBasicMaterial"),"phong"===Us.toLowerCase()&&(Cs.type="MeshPhongMaterial"),"standard"===Us.toLowerCase()&&(Cs.type="MeshStandardMaterial");break;case"mapDiffuse":Cs.map=Rs(Us,ws.mapDiffuseRepeat,ws.mapDiffuseOffset,ws.mapDiffuseWrap,ws.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":Cs.emissiveMap=Rs(Us,ws.mapEmissiveRepeat,ws.mapEmissiveOffset,ws.mapEmissiveWrap,ws.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":Cs.lightMap=Rs(Us,ws.mapLightRepeat,ws.mapLightOffset,ws.mapLightWrap,ws.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":Cs.aoMap=Rs(Us,ws.mapAORepeat,ws.mapAOOffset,ws.mapAOWrap,ws.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":Cs.bumpMap=Rs(Us,ws.mapBumpRepeat,ws.mapBumpOffset,ws.mapBumpWrap,ws.mapBumpAnisotropy);break;case"mapBumpScale":Cs.bumpScale=Us;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":Cs.normalMap=Rs(Us,ws.mapNormalRepeat,ws.mapNormalOffset,ws.mapNormalWrap,ws.mapNormalAnisotropy);break;case"mapNormalFactor":Cs.normalScale=[Us,Us];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":Cs.specularMap=Rs(Us,ws.mapSpecularRepeat,ws.mapSpecularOffset,ws.mapSpecularWrap,ws.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":Cs.metalnessMap=Rs(Us,ws.mapMetalnessRepeat,ws.mapMetalnessOffset,ws.mapMetalnessWrap,ws.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":Cs.roughnessMap=Rs(Us,ws.mapRoughnessRepeat,ws.mapRoughnessOffset,ws.mapRoughnessWrap,ws.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":Cs.alphaMap=Rs(Us,ws.mapAlphaRepeat,ws.mapAlphaOffset,ws.mapAlphaWrap,ws.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":Cs.side=Xi;break;case"doubleSided":Cs.side=qi;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),Cs.opacity=Us;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":Cs[Is]=Us;break;case"vertexColors":!0===Us&&(Cs.vertexColors=Ki),"face"===Us&&(Cs.vertexColors=Qi);break;default:console.error("THREE.Loader.createMaterial: Unsupported",Is,Us);}}return"MeshBasicMaterial"===Cs.type&&delete Cs.emissive,"MeshPhongMaterial"!==Cs.type&&delete Cs.specular,1>Cs.opacity&&(Cs.transparent=!0),Ss.setTextures(Ps),Ss.parse(Cs)}}()},ea.Handlers={handlers:[],add:function(Es,Ts){this.handlers.push(Es,Ts)},get:function(Es){for(var Ts=this.handlers,Ss=0,Ms=Ts.length;Ss<Ms;Ss+=2){var ws=Ts[Ss],As=Ts[Ss+1];if(ws.test(Es))return As}return null}},Object.assign(ta.prototype,{load:function(Es,Ts,Ss,Ms){var ws=this,As=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:ea.prototype.extractUrlBase(Es),Ls=new Tr(this.manager);Ls.setWithCredentials(this.withCredentials),Ls.load(Es,function(Rs){var Ps=JSON.parse(Rs),Cs=Ps.metadata;if(Cs!==void 0){var Is=Cs.type;if(Is!==void 0){if("object"===Is.toLowerCase())return void console.error("THREE.JSONLoader: "+Es+" should be loaded with THREE.ObjectLoader instead.");if("scene"===Is.toLowerCase())return void console.error("THREE.JSONLoader: "+Es+" should be loaded with THREE.SceneLoader instead.")}}var Us=ws.parse(Ps,As);Ts(Us.geometry,Us.materials)},Ss,Ms)},setTexturePath:function(Es){this.texturePath=Es},parse:function(Es,Ts){var Ss=new Et,Ms=void 0===Es.scale?1:1/Es.scale;if(function(Ls){function Rs(xl,_l){return xl&1<<_l}var nl=Es.faces,dl=Es.vertices,cl=Es.normals,ul=Es.colors,yl=0,Ps,Cs,Is,Us,Ds,Ns,Fs,zs,Bs,Os,Gs,Vs,ks,Hs,Ws,js,Xs,qs,Ys,Zs,Js,Qs,Ks,$s,el,rl,al;if(void 0!==Es.uvs){for(Ps=0;Ps<Es.uvs.length;Ps++)Es.uvs[Ps].length&&yl++;for(Ps=0;Ps<yl;Ps++)Ss.faceVertexUvs[Ps]=[]}for(Us=0,Ds=dl.length;Us<Ds;)qs=new D,qs.x=dl[Us++]*Ls,qs.y=dl[Us++]*Ls,qs.z=dl[Us++]*Ls,Ss.vertices.push(qs);for(Us=0,Ds=nl.length;Us<Ds;)if(Os=nl[Us++],Gs=Rs(Os,0),Vs=Rs(Os,1),ks=Rs(Os,3),Hs=Rs(Os,4),Ws=Rs(Os,5),js=Rs(Os,6),Xs=Rs(Os,7),Gs){if(Zs=new yt,Zs.a=nl[Us],Zs.b=nl[Us+1],Zs.c=nl[Us+3],Js=new yt,Js.a=nl[Us+1],Js.b=nl[Us+2],Js.c=nl[Us+3],Us+=4,Vs&&(Bs=nl[Us++],Zs.materialIndex=Bs,Js.materialIndex=Bs),Is=Ss.faces.length,ks)for(Ps=0;Ps<yl;Ps++)for($s=Es.uvs[Ps],Ss.faceVertexUvs[Ps][Is]=[],Ss.faceVertexUvs[Ps][Is+1]=[],Cs=0;4>Cs;Cs++)zs=nl[Us++],rl=$s[2*zs],al=$s[2*zs+1],el=new R(rl,al),2!==Cs&&Ss.faceVertexUvs[Ps][Is].push(el),0!==Cs&&Ss.faceVertexUvs[Ps][Is+1].push(el);if(Hs&&(Fs=3*nl[Us++],Zs.normal.set(cl[Fs++],cl[Fs++],cl[Fs]),Js.normal.copy(Zs.normal)),Ws)for(Ps=0;4>Ps;Ps++)Fs=3*nl[Us++],Ks=new D(cl[Fs++],cl[Fs++],cl[Fs]),2!==Ps&&Zs.vertexNormals.push(Ks),0!==Ps&&Js.vertexNormals.push(Ks);if(js&&(Ns=nl[Us++],Qs=ul[Ns],Zs.color.setHex(Qs),Js.color.setHex(Qs)),Xs)for(Ps=0;4>Ps;Ps++)Ns=nl[Us++],Qs=ul[Ns],2!==Ps&&Zs.vertexColors.push(new Oe(Qs)),0!==Ps&&Js.vertexColors.push(new Oe(Qs));Ss.faces.push(Zs),Ss.faces.push(Js)}else{if(Ys=new yt,Ys.a=nl[Us++],Ys.b=nl[Us++],Ys.c=nl[Us++],Vs&&(Bs=nl[Us++],Ys.materialIndex=Bs),Is=Ss.faces.length,ks)for(Ps=0;Ps<yl;Ps++)for($s=Es.uvs[Ps],Ss.faceVertexUvs[Ps][Is]=[],Cs=0;3>Cs;Cs++)zs=nl[Us++],rl=$s[2*zs],al=$s[2*zs+1],el=new R(rl,al),Ss.faceVertexUvs[Ps][Is].push(el);if(Hs&&(Fs=3*nl[Us++],Ys.normal.set(cl[Fs++],cl[Fs++],cl[Fs])),Ws)for(Ps=0;3>Ps;Ps++)Fs=3*nl[Us++],Ks=new D(cl[Fs++],cl[Fs++],cl[Fs]),Ys.vertexNormals.push(Ks);if(js&&(Ns=nl[Us++],Ys.color.setHex(ul[Ns])),Xs)for(Ps=0;3>Ps;Ps++)Ns=nl[Us++],Ys.vertexColors.push(new Oe(ul[Ns]));Ss.faces.push(Ys)}}(Ms),function(){var Ls=void 0===Es.influencesPerVertex?2:Es.influencesPerVertex;if(Es.skinWeights)for(var Rs=0,Ps=Es.skinWeights.length;Rs<Ps;Rs+=Ls){var Cs=Es.skinWeights[Rs],Is=1<Ls?Es.skinWeights[Rs+1]:0,Us=2<Ls?Es.skinWeights[Rs+2]:0,Ds=3<Ls?Es.skinWeights[Rs+3]:0;Ss.skinWeights.push(new Ue(Cs,Is,Us,Ds))}if(Es.skinIndices)for(var Rs=0,Ps=Es.skinIndices.length;Rs<Ps;Rs+=Ls){var Ns=Es.skinIndices[Rs],Fs=1<Ls?Es.skinIndices[Rs+1]:0,zs=2<Ls?Es.skinIndices[Rs+2]:0,Bs=3<Ls?Es.skinIndices[Rs+3]:0;Ss.skinIndices.push(new Ue(Ns,Fs,zs,Bs))}Ss.bones=Es.bones,Ss.bones&&0<Ss.bones.length&&(Ss.skinWeights.length!==Ss.skinIndices.length||Ss.skinIndices.length!==Ss.vertices.length)&&console.warn("When skinning, number of vertices ("+Ss.vertices.length+"), skinIndices ("+Ss.skinIndices.length+"), and skinWeights ("+Ss.skinWeights.length+") should match.")}(),function(Ls){if(void 0!==Es.morphTargets)for(var Rs=0,Ps=Es.morphTargets.length;Rs<Ps;Rs++){Ss.morphTargets[Rs]={},Ss.morphTargets[Rs].name=Es.morphTargets[Rs].name,Ss.morphTargets[Rs].vertices=[];for(var Cs=Ss.morphTargets[Rs].vertices,Is=Es.morphTargets[Rs].vertices,Us=0,Ds=Is.length;Us<Ds;Us+=3){var Ns=new D;Ns.x=Is[Us]*Ls,Ns.y=Is[Us+1]*Ls,Ns.z=Is[Us+2]*Ls,Cs.push(Ns)}}if(void 0!==Es.morphColors&&0<Es.morphColors.length){console.warn("THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors.");for(var Fs=Ss.faces,zs=Es.morphColors[0].colors,Rs=0,Ps=Fs.length;Rs<Ps;Rs++)Fs[Rs].color.fromArray(zs,3*Rs)}}(Ms),function(){var Ls=[],Rs=[];void 0!==Es.animation&&Rs.push(Es.animation),void 0!==Es.animations&&(Es.animations.length?Rs=Rs.concat(Es.animations):Rs.push(Es.animations));for(var Ps=0;Ps<Rs.length;Ps++){var Cs=Qr.parseAnimation(Rs[Ps],Ss.bones);Cs&&Ls.push(Cs)}if(Ss.morphTargets){var Is=Qr.CreateClipsFromMorphTargetSequences(Ss.morphTargets,10);Ls=Ls.concat(Is)}0<Ls.length&&(Ss.animations=Ls)}(),Ss.computeFaceNormals(),Ss.computeBoundingSphere(),void 0===Es.materials||0===Es.materials.length)return{geometry:Ss};var ws=ea.prototype.initMaterials(Es.materials,Ts,this.crossOrigin);return{geometry:Ss,materials:ws}}}),Object.assign(ra.prototype,{load:function(Es,Ts,Ss,Ms){""===this.texturePath&&(this.texturePath=Es.substring(0,Es.lastIndexOf("/")+1));var ws=this,As=new Tr(ws.manager);As.load(Es,function(Ls){ws.parse(JSON.parse(Ls),Ts)},Ss,Ms)},setTexturePath:function(Es){this.texturePath=Es},setCrossOrigin:function(Es){this.crossOrigin=Es},parse:function(Es,Ts){var Ss=this.parseGeometries(Es.geometries),Ms=this.parseImages(Es.images,function(){void 0!==Ts&&Ts(Ls)}),ws=this.parseTextures(Es.textures,Ms),As=this.parseMaterials(Es.materials,ws),Ls=this.parseObject(Es.object,Ss,As);return Es.animations&&(Ls.animations=this.parseAnimations(Es.animations)),(void 0===Es.images||0===Es.images.length)&&void 0!==Ts&&Ts(Ls),Ls},parseGeometries:function(Es){var Ts={};if(Es!==void 0)for(var Ss=new ta,Ms=new $r,ws=0,As=Es.length;ws<As;ws++){var Rs=Es[ws],Ls;switch(Rs.type){case"PlaneGeometry":case"PlaneBufferGeometry":Ls=new THREE[Rs.type](Rs.width,Rs.height,Rs.widthSegments,Rs.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":Ls=new THREE[Rs.type](Rs.width,Rs.height,Rs.depth,Rs.widthSegments,Rs.heightSegments,Rs.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":Ls=new THREE[Rs.type](Rs.radius,Rs.segments,Rs.thetaStart,Rs.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":Ls=new THREE[Rs.type](Rs.radiusTop,Rs.radiusBottom,Rs.height,Rs.radialSegments,Rs.heightSegments,Rs.openEnded,Rs.thetaStart,Rs.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":Ls=new THREE[Rs.type](Rs.radius,Rs.height,Rs.radialSegments,Rs.heightSegments,Rs.openEnded,Rs.thetaStart,Rs.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":Ls=new THREE[Rs.type](Rs.radius,Rs.widthSegments,Rs.heightSegments,Rs.phiStart,Rs.phiLength,Rs.thetaStart,Rs.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":Ls=new THREE[Rs.type](Rs.radius,Rs.detail);break;case"RingGeometry":case"RingBufferGeometry":Ls=new THREE[Rs.type](Rs.innerRadius,Rs.outerRadius,Rs.thetaSegments,Rs.phiSegments,Rs.thetaStart,Rs.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":Ls=new THREE[Rs.type](Rs.radius,Rs.tube,Rs.radialSegments,Rs.tubularSegments,Rs.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":Ls=new THREE[Rs.type](Rs.radius,Rs.tube,Rs.tubularSegments,Rs.radialSegments,Rs.p,Rs.q);break;case"LatheGeometry":case"LatheBufferGeometry":Ls=new THREE[Rs.type](Rs.points,Rs.segments,Rs.phiStart,Rs.phiLength);break;case"BufferGeometry":Ls=Ms.parse(Rs);break;case"Geometry":Ls=Ss.parse(Rs.data,this.texturePath).geometry;break;default:console.warn("THREE.ObjectLoader: Unsupported geometry type \""+Rs.type+"\"");continue;}Ls.uuid=Rs.uuid,void 0!==Rs.name&&(Ls.name=Rs.name),Ts[Rs.uuid]=Ls}return Ts},parseMaterials:function(Es,Ts){var Ss={};if(Es!==void 0){var Ms=new Kr;Ms.setTextures(Ts);for(var ws=0,As=Es.length;ws<As;ws++){var Ls=Ms.parse(Es[ws]);Ss[Ls.uuid]=Ls}}return Ss},parseAnimations:function(Es){for(var Ts=[],Ss=0;Ss<Es.length;Ss++){var Ms=Qr.parse(Es[Ss]);Ts.push(Ms)}return Ts},parseImages:function(Es,Ts){function Ss(Us){return Ms.manager.itemStart(Us),Ls.load(Us,function(){Ms.manager.itemEnd(Us)},void 0,function(){Ms.manager.itemError(Us)})}var Ms=this,ws={};if(Es!==void 0&&0<Es.length){var As=new Er(Ts),Ls=new wr(As);Ls.setCrossOrigin(this.crossOrigin);for(var Rs=0,Ps=Es.length;Rs<Ps;Rs++){var Cs=Es[Rs],Is=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(Cs.url)?Cs.url:Ms.texturePath+Cs.url;ws[Cs.uuid]=Ss(Is)}}return ws},parseTextures:function(Es,Ts){function Ss(Ps){return"number"==typeof Ps?Ps:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",Ps),THREE[Ps])}var Ms={};if(Es!==void 0)for(var ws=0,As=Es.length;ws<As;ws++){var Ls=Es[ws];void 0===Ls.image&&console.warn("THREE.ObjectLoader: No \"image\" specified for",Ls.uuid),void 0===Ts[Ls.image]&&console.warn("THREE.ObjectLoader: Undefined image",Ls.image);var Rs=new P(Ts[Ls.image]);Rs.needsUpdate=!0,Rs.uuid=Ls.uuid,void 0!==Ls.name&&(Rs.name=Ls.name),void 0!==Ls.mapping&&(Rs.mapping=Ss(Ls.mapping)),void 0!==Ls.offset&&Rs.offset.fromArray(Ls.offset),void 0!==Ls.repeat&&Rs.repeat.fromArray(Ls.repeat),void 0!==Ls.wrap&&(Rs.wrapS=Ss(Ls.wrap[0]),Rs.wrapT=Ss(Ls.wrap[1])),void 0!==Ls.minFilter&&(Rs.minFilter=Ss(Ls.minFilter)),void 0!==Ls.magFilter&&(Rs.magFilter=Ss(Ls.magFilter)),void 0!==Ls.anisotropy&&(Rs.anisotropy=Ls.anisotropy),void 0!==Ls.flipY&&(Rs.flipY=Ls.flipY),Ms[Ls.uuid]=Rs}return Ms},parseObject:function(){var Es=new I;return function(Ss,Ms,ws){function As(Fs){return void 0===Ms[Fs]&&console.warn("THREE.ObjectLoader: Undefined geometry",Fs),Ms[Fs]}function Ls(Fs){return void 0===Fs?void 0:(void 0===ws[Fs]&&console.warn("THREE.ObjectLoader: Undefined material",Fs),ws[Fs])}var Rs;switch(Ss.type){case"Scene":Rs=new Yt,void 0!==Ss.background&&Number.isInteger(Ss.background)&&(Rs.background=new THREE.Color(Ss.background)),void 0!==Ss.fog&&("Fog"===Ss.fog.type?Rs.fog=new qt(Ss.fog.color,Ss.fog.near,Ss.fog.far):"FogExp2"===Ss.fog.type&&(Rs.fog=new Xt(Ss.fog.color,Ss.fog.density)));break;case"PerspectiveCamera":Rs=new Ht(Ss.fov,Ss.aspect,Ss.near,Ss.far),void 0!==Ss.focus&&(Rs.focus=Ss.focus),void 0!==Ss.zoom&&(Rs.zoom=Ss.zoom),void 0!==Ss.filmGauge&&(Rs.filmGauge=Ss.filmGauge),void 0!==Ss.filmOffset&&(Rs.filmOffset=Ss.filmOffset),void 0!==Ss.view&&(Rs.view=Object.assign({},Ss.view));break;case"OrthographicCamera":Rs=new Wt(Ss.left,Ss.right,Ss.top,Ss.bottom,Ss.near,Ss.far);break;case"AmbientLight":Rs=new zr(Ss.color,Ss.intensity);break;case"DirectionalLight":Rs=new Fr(Ss.color,Ss.intensity);break;case"PointLight":Rs=new Dr(Ss.color,Ss.intensity,Ss.distance,Ss.decay);break;case"SpotLight":Rs=new Ur(Ss.color,Ss.intensity,Ss.distance,Ss.angle,Ss.penumbra,Ss.decay);break;case"HemisphereLight":Rs=new Pr(Ss.color,Ss.groundColor,Ss.intensity);break;case"Mesh":var Ps=As(Ss.geometry),Cs=Ls(Ss.material);Rs=Ps.bones&&0<Ps.bones.length?new rr(Ps,Cs):new Gt(Ps,Cs);break;case"LOD":Rs=new Kt;break;case"Line":Rs=new ir(As(Ss.geometry),Ls(Ss.material),Ss.mode);break;case"LineSegments":Rs=new nr(As(Ss.geometry),Ls(Ss.material));break;case"PointCloud":case"Points":Rs=new sr(As(Ss.geometry),Ls(Ss.material));break;case"Sprite":Rs=new Qt(Ls(Ss.material));break;case"Group":Rs=new lr;break;default:Rs=new vt;}if(Rs.uuid=Ss.uuid,void 0!==Ss.name&&(Rs.name=Ss.name),void 0===Ss.matrix?(void 0!==Ss.position&&Rs.position.fromArray(Ss.position),void 0!==Ss.rotation&&Rs.rotation.fromArray(Ss.rotation),void 0!==Ss.quaternion&&Rs.quaternion.fromArray(Ss.quaternion),void 0!==Ss.scale&&Rs.scale.fromArray(Ss.scale)):(Es.fromArray(Ss.matrix),Es.decompose(Rs.position,Rs.quaternion,Rs.scale)),void 0!==Ss.castShadow&&(Rs.castShadow=Ss.castShadow),void 0!==Ss.receiveShadow&&(Rs.receiveShadow=Ss.receiveShadow),Ss.shadow&&(void 0!==Ss.shadow.bias&&(Rs.shadow.bias=Ss.shadow.bias),void 0!==Ss.shadow.radius&&(Rs.shadow.radius=Ss.shadow.radius),void 0!==Ss.shadow.mapSize&&Rs.shadow.mapSize.fromArray(Ss.shadow.mapSize),void 0!==Ss.shadow.camera&&(Rs.shadow.camera=this.parseObject(Ss.shadow.camera))),void 0!==Ss.visible&&(Rs.visible=Ss.visible),void 0!==Ss.userData&&(Rs.userData=Ss.userData),void 0!==Ss.children)for(var Is in Ss.children)Rs.add(this.parseObject(Ss.children[Is],Ms,ws));if("LOD"===Ss.type)for(var Us=Ss.levels,Ds=0;Ds<Us.length;Ds++){var Ns=Us[Ds],Is=Rs.getObjectByProperty("uuid",Ns.object);void 0!==Is&&Rs.addLevel(Is,Ns.distance)}return Rs}}()}),A.ShapeUtils={area:function(Es){for(var Ts=Es.length,Ss=0,Ms=Ts-1,ws=0;ws<Ts;Ms=ws++)Ss+=Es[Ms].x*Es[ws].y-Es[ws].x*Es[Ms].y;return 0.5*Ss},triangulate:function(){function Es(Ts,Ss,Ms,ws,As,Ls){var Rs,Ps,Cs,Is,Us,Ds,Ns,Fs,zs;if(Ps=Ts[Ls[Ss]].x,Cs=Ts[Ls[Ss]].y,Is=Ts[Ls[Ms]].x,Us=Ts[Ls[Ms]].y,Ds=Ts[Ls[ws]].x,Ns=Ts[Ls[ws]].y,Number.EPSILON>(Is-Ps)*(Ns-Cs)-(Us-Cs)*(Ds-Ps))return!1;var Bs,Os,Gs,Vs,ks,Hs,Ws,js,Xs,qs,Ys,Zs,Js,Qs,Ks;for(Bs=Ds-Is,Os=Ns-Us,Gs=Ps-Ds,Vs=Cs-Ns,ks=Is-Ps,Hs=Us-Cs,Rs=0;Rs<As;Rs++)if(Fs=Ts[Ls[Rs]].x,zs=Ts[Ls[Rs]].y,(Fs!=Ps||zs!=Cs)&&(Fs!=Is||zs!=Us)&&(Fs!=Ds||zs!=Ns)&&(Ws=Fs-Ps,js=zs-Cs,Xs=Fs-Is,qs=zs-Us,Ys=Fs-Ds,Zs=zs-Ns,Ks=Bs*qs-Os*Xs,Js=ks*js-Hs*Ws,Qs=Gs*Zs-Vs*Ys,Ks>=-Number.EPSILON&&Qs>=-Number.EPSILON&&Js>=-Number.EPSILON))return!1;return!0}return function(Ss,Ms){var ws=Ss.length;if(3>ws)return null;var As=[],Ls=[],Rs=[],Ps,Cs,Is;if(0<A.ShapeUtils.area(Ss))for(Cs=0;Cs<ws;Cs++)Ls[Cs]=Cs;else for(Cs=0;Cs<ws;Cs++)Ls[Cs]=ws-1-Cs;var Us=ws,Ds=2*Us;for(Cs=Us-1;2<Us;){if(0>=Ds--)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),Ms?Rs:As;if(Ps=Cs,Us<=Ps&&(Ps=0),Cs=Ps+1,Us<=Cs&&(Cs=0),Is=Cs+1,Us<=Is&&(Is=0),Es(Ss,Ps,Cs,Is,Us,Ls)){var Ns,Fs,zs,Bs,Os;for(Ns=Ls[Ps],Fs=Ls[Cs],zs=Ls[Is],As.push([Ss[Ns],Ss[Fs],Ss[zs]]),Rs.push([Ls[Ps],Ls[Cs],Ls[Is]]),(Bs=Cs,Os=Cs+1);Os<Us;Bs++,Os++)Ls[Bs]=Ls[Os];Us--,Ds=2*Us}}return Ms?Rs:As}}(),triangulateShape:function(Es,Ts){function Ss(Gs){var Vs=Gs.length;2<Vs&&Gs[Vs-1].equals(Gs[0])&&Gs.pop()}function Ms(Gs,Vs,ks){if(Gs.x!==Vs.x){if(Gs.x<Vs.x)return Gs.x<=ks.x&&ks.x<=Vs.x;return Vs.x<=ks.x&&ks.x<=Gs.x}return Gs.y<Vs.y?Gs.y<=ks.y&&ks.y<=Vs.y:Vs.y<=ks.y&&ks.y<=Gs.y}function ws(Gs,Vs,ks,Hs,Ws){var js=Vs.x-Gs.x,Xs=Vs.y-Gs.y,qs=Hs.x-ks.x,Ys=Hs.y-ks.y,Zs=Gs.x-ks.x,Js=Gs.y-ks.y,Qs=Xs*qs-js*Ys,Ks=Xs*Zs-js*Js;if(Math.abs(Qs)>Number.EPSILON){var $s;if(0<Qs){if(0>Ks||Ks>Qs)return[];if($s=Ys*Zs-qs*Js,0>$s||$s>Qs)return[]}else{if(0<Ks||Ks<Qs)return[];if($s=Ys*Zs-qs*Js,0<$s||$s<Qs)return[]}if(0===$s)return Ws&&(0==Ks||Ks==Qs)?[]:[Gs];if($s===Qs)return Ws&&(0==Ks||Ks==Qs)?[]:[Vs];if(0==Ks)return[ks];if(Ks==Qs)return[Hs];var el=$s/Qs;return[{x:Gs.x+el*js,y:Gs.y+el*Xs}]}if(0!=Ks||Ys*Zs!=qs*Js)return[];var rl=0==js&&0==Xs,al=0==qs&&0==Ys;if(rl&&al)return Gs.x!==ks.x||Gs.y!==ks.y?[]:[Gs];if(rl)return Ms(ks,Hs,Gs)?[Gs]:[];if(al)return Ms(Gs,Vs,ks)?[ks]:[];var nl,dl,cl,ul,yl,xl,_l,El;return(0==js?(Gs.y<Vs.y?(nl=Gs,cl=Gs.y,dl=Vs,ul=Vs.y):(nl=Vs,cl=Vs.y,dl=Gs,ul=Gs.y),ks.y<Hs.y?(yl=ks,_l=ks.y,xl=Hs,El=Hs.y):(yl=Hs,_l=Hs.y,xl=ks,El=ks.y)):(Gs.x<Vs.x?(nl=Gs,cl=Gs.x,dl=Vs,ul=Vs.x):(nl=Vs,cl=Vs.x,dl=Gs,ul=Gs.x),ks.x<Hs.x?(yl=ks,_l=ks.x,xl=Hs,El=Hs.x):(yl=Hs,_l=Hs.x,xl=ks,El=ks.x)),cl<=_l)?ul<_l?[]:ul==_l?Ws?[]:[yl]:ul<=El?[yl,dl]:[yl,xl]:cl>El?[]:cl==El?Ws?[]:[nl]:ul<=El?[nl,dl]:[nl,xl]}function As(Gs,Vs,ks,Hs){var Ws=Vs.x-Gs.x,js=Vs.y-Gs.y,Xs=ks.x-Gs.x,qs=ks.y-Gs.y,Ys=Hs.x-Gs.x,Zs=Hs.y-Gs.y,Js=Ws*qs-js*Xs,Qs=Ws*Zs-js*Ys;if(Math.abs(Js)>Number.EPSILON){var Ks=Ys*qs-Zs*Xs;if(0<Js)return 0<=Qs&&0<=Ks;return 0<=Qs||0<=Ks}return 0<Qs}Ss(Es),Ts.forEach(Ss);for(var Ds={},Ns=Es.concat(),Fs=0,zs=Ts.length,Ls,Rs,Ps,Cs,Is,Us;Fs<zs;Fs++)Array.prototype.push.apply(Ns,Ts[Fs]);for(Ls=0,Rs=Ns.length;Ls<Rs;Ls++)Is=Ns[Ls].x+":"+Ns[Ls].y,void 0!==Ds[Is]&&console.warn("THREE.ShapeUtils: Duplicate point",Is,Ls),Ds[Is]=Ls;var Bs=function(Vs,ks){function Hs(Tl,Sl){var Ml=Xs.length-1,wl=Tl-1;0>wl&&(wl=Ml);var Al=Tl+1;Al>Ml&&(Al=0);var Ll=As(Xs[Tl],Xs[wl],Xs[Al],qs[Sl]);if(!Ll)return!1;var Rl=qs.length-1,Pl=Sl-1;0>Pl&&(Pl=Rl);var Cl=Sl+1;return Cl>Rl&&(Cl=0),Ll=As(qs[Sl],qs[Pl],qs[Cl],Xs[Tl]),!!Ll}function Ws(Tl,Sl){var Ml,wl,Al;for(Ml=0;Ml<Xs.length;Ml++)if(wl=Ml+1,wl%=Xs.length,Al=ws(Tl,Sl,Xs[Ml],Xs[wl],!0),0<Al.length)return!0;return!1}function js(Tl,Sl){var Ml,wl,Al,Ll,Rl;for(Ml=0;Ml<Ys.length;Ml++)for(wl=ks[Ys[Ml]],Al=0;Al<wl.length;Al++)if(Ll=Al+1,Ll%=wl.length,Rl=ws(Tl,Sl,wl[Al],wl[Ll],!0),0<Rl.length)return!0;return!1}for(var Xs=Vs.concat(),Ys=[],rl=[],ul=0,yl=ks.length,qs,Zs,Js,Qs,Ks,$s,el,al,nl,dl,cl;ul<yl;ul++)Ys.push(ul);for(var xl=0,_l=2*Ys.length;0<Ys.length;){if(_l--,0>_l){console.log("Infinite Loop! Holes left:"+Ys.length+", Probably Hole outside Shape!");break}for(Js=xl;Js<Xs.length;Js++){Qs=Xs[Js],Zs=-1;for(var ul=0;ul<Ys.length;ul++)if($s=Ys[ul],el=Qs.x+":"+Qs.y+":"+$s,void 0===rl[el]){qs=ks[$s];for(var El=0;El<qs.length;El++)if(Ks=qs[El],Hs(Js,El)&&!Ws(Qs,Ks)&&!js(Qs,Ks)){Zs=El,Ys.splice(ul,1),al=Xs.slice(0,Js+1),nl=Xs.slice(Js),dl=qs.slice(Zs),cl=qs.slice(0,Zs+1),Xs=al.concat(dl).concat(cl).concat(nl),xl=Js;break}if(0<=Zs)break;rl[el]=!0}if(0<=Zs)break}}return Xs}(Es,Ts),Os=A.ShapeUtils.triangulate(Bs,!1);for(Ls=0,Rs=Os.length;Ls<Rs;Ls++)for(Cs=Os[Ls],Ps=0;3>Ps;Ps++)Is=Cs[Ps].x+":"+Cs[Ps].y,Us=Ds[Is],void 0!=Us&&(Cs[Ps]=Us);return Os.concat()},isClockWise:function(Es){return 0>A.ShapeUtils.area(Es)},b2:function(){function Es(Ms,ws){var As=1-Ms;return As*As*ws}function Ts(Ms,ws){return 2*(1-Ms)*Ms*ws}function Ss(Ms,ws){return Ms*Ms*ws}return function(ws,As,Ls,Rs){return Es(ws,As)+Ts(ws,Ls)+Ss(ws,Rs)}}(),b3:function(){function Es(ws,As){var Ls=1-ws;return Ls*Ls*Ls*As}function Ts(ws,As){var Ls=1-ws;return 3*Ls*Ls*ws*As}function Ss(ws,As){return 3*(1-ws)*ws*ws*As}function Ms(ws,As){return ws*ws*ws*As}return function(As,Ls,Rs,Ps,Cs){return Es(As,Ls)+Ts(As,Rs)+Ss(As,Ps)+Ms(As,Cs)}}()},aa.prototype={constructor:aa,getPoint:function(Es){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(Es){var Ts=this.getUtoTmapping(Es);return this.getPoint(Ts)},getPoints:function(Es){Es||(Es=5);for(var Ts=[],Ss=0;Ss<=Es;Ss++)Ts.push(this.getPoint(Ss/Es));return Ts},getSpacedPoints:function(Es){Es||(Es=5);for(var Ts=[],Ss=0;Ss<=Es;Ss++)Ts.push(this.getPointAt(Ss/Es));return Ts},getLength:function(){var Es=this.getLengths();return Es[Es.length-1]},getLengths:function(Es){if(Es||(Es=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===Es+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var Ts=[],Ms=this.getPoint(0),As=0,Ss,ws;for(Ts.push(0),ws=1;ws<=Es;ws++)Ss=this.getPoint(ws/Es),As+=Ss.distanceTo(Ms),Ts.push(As),Ms=Ss;return this.cacheArcLengths=Ts,Ts},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(Es,Ts){var Ss=this.getLengths(),Ms=0,ws=Ss.length,As;As=Ts?Ts:Es*Ss[ws-1];for(var Ls=0,Rs=ws-1,Ps;Ls<=Rs;)if(Ms=Math.floor(Ls+(Rs-Ls)/2),Ps=Ss[Ms]-As,0>Ps)Ls=Ms+1;else if(0<Ps)Rs=Ms-1;else{Rs=Ms;break}if(Ms=Rs,Ss[Ms]===As){var Cs=Ms/(ws-1);return Cs}var Is=Ss[Ms],Us=Ss[Ms+1],Ds=(As-Is)/(Us-Is),Cs=(Ms+Ds)/(ws-1);return Cs},getTangent:function(Es){var Ts=0.0001,Ss=Es-Ts,Ms=Es+Ts;0>Ss&&(Ss=0),1<Ms&&(Ms=1);var ws=this.getPoint(Ss),As=this.getPoint(Ms),Ls=As.clone().sub(ws);return Ls.normalize()},getTangentAt:function(Es){var Ts=this.getUtoTmapping(Es);return this.getTangent(Ts)}},aa.create=function(Es,Ts){return Es.prototype=Object.create(aa.prototype),Es.prototype.constructor=Es,Es.prototype.getPoint=Ts,Es},ia.prototype=Object.create(aa.prototype),ia.prototype.constructor=ia,ia.prototype.isLineCurve=!0,ia.prototype.getPoint=function(Es){if(1===Es)return this.v2.clone();var Ts=this.v2.clone().sub(this.v1);return Ts.multiplyScalar(Es).add(this.v1),Ts},ia.prototype.getPointAt=function(Es){return this.getPoint(Es)},ia.prototype.getTangent=function(Es){var Ts=this.v2.clone().sub(this.v1);return Ts.normalize()},na.prototype=Object.assign(Object.create(aa.prototype),{constructor:na,add:function(Es){this.curves.push(Es)},closePath:function(){var Es=this.curves[0].getPoint(0),Ts=this.curves[this.curves.length-1].getPoint(1);Es.equals(Ts)||this.curves.push(new ia(Ts,Es))},getPoint:function(Es){for(var Ts=Es*this.getLength(),Ss=this.getCurveLengths(),Ms=0;Ms<Ss.length;){if(Ss[Ms]>=Ts){var ws=Ss[Ms]-Ts,As=this.curves[Ms],Ls=As.getLength(),Rs=0===Ls?0:1-ws/Ls;return As.getPointAt(Rs)}Ms++}return null},getLength:function(){var Es=this.getCurveLengths();return Es[Es.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var Es=[],Ts=0,Ss=0,Ms=this.curves.length;Ss<Ms;Ss++)Ts+=this.curves[Ss].getLength(),Es.push(Ts);return this.cacheLengths=Es,Es},getSpacedPoints:function(Es){Es||(Es=40);for(var Ts=[],Ss=0;Ss<=Es;Ss++)Ts.push(this.getPoint(Ss/Es));return this.autoClose&&Ts.push(Ts[0]),Ts},getPoints:function(Es){Es=Es||12;for(var Ts=[],Ms=0,ws=this.curves,Ss;Ms<ws.length;Ms++)for(var As=ws[Ms],Ls=As&&As.isEllipseCurve?2*Es:As&&As.isLineCurve?1:As&&As.isSplineCurve?Es*As.points.length:Es,Rs=As.getPoints(Ls),Ps=0;Ps<Rs.length;Ps++){var Cs=Rs[Ps];Ss&&Ss.equals(Cs)||(Ts.push(Cs),Ss=Cs)}return this.autoClose&&1<Ts.length&&!Ts[Ts.length-1].equals(Ts[0])&&Ts.push(Ts[0]),Ts},createPointsGeometry:function(Es){var Ts=this.getPoints(Es);return this.createGeometry(Ts)},createSpacedPointsGeometry:function(Es){var Ts=this.getSpacedPoints(Es);return this.createGeometry(Ts)},createGeometry:function(Es){for(var Ts=new Et,Ss=0,Ms=Es.length;Ss<Ms;Ss++){var ws=Es[Ss];Ts.vertices.push(new D(ws.x,ws.y,ws.z||0))}return Ts}}),oa.prototype=Object.create(aa.prototype),oa.prototype.constructor=oa,oa.prototype.isEllipseCurve=!0,oa.prototype.getPoint=function(Es){for(var Ts=2*Math.PI,Ss=this.aEndAngle-this.aStartAngle,Ms=Math.abs(Ss)<Number.EPSILON;0>Ss;)Ss+=Ts;for(;Ss>Ts;)Ss-=Ts;Ss<Number.EPSILON&&(Ms?Ss=0:Ss=Ts),!0!==this.aClockwise||Ms||(Ss===Ts?Ss=-Ts:Ss=Ss-Ts);var ws=this.aStartAngle+Es*Ss,As=this.aX+this.xRadius*Math.cos(ws),Ls=this.aY+this.yRadius*Math.sin(ws);if(0!==this.aRotation){var Rs=Math.cos(this.aRotation),Ps=Math.sin(this.aRotation),Cs=As-this.aX,Is=Ls-this.aY;As=Cs*Rs-Is*Ps+this.aX,Ls=Cs*Ps+Is*Rs+this.aY}return new R(As,Ls)},A.CurveUtils={tangentQuadraticBezier:function(Es,Ts,Ss,Ms){return 2*(1-Es)*(Ss-Ts)+2*Es*(Ms-Ss)},tangentCubicBezier:function(Es,Ts,Ss,Ms,ws){return-3*Ts*(1-Es)*(1-Es)+3*Ss*(1-Es)*(1-Es)-6*Es*Ss*(1-Es)+6*Es*Ms*(1-Es)-3*Es*Es*Ms+3*Es*Es*ws},tangentSpline:function(Es,Ts,Ss,Ms,ws){return 6*Es*Es-6*Es+(3*Es*Es-4*Es+1)+(-6*Es*Es+6*Es)+(3*Es*Es-2*Es)},interpolate:function(Es,Ts,Ss,Ms,ws){var As=0.5*(Ss-Es),Ls=0.5*(Ms-Ts),Rs=ws*ws;return(2*Ts-2*Ss+As+Ls)*(ws*Rs)+(-3*Ts+3*Ss-2*As-Ls)*Rs+As*ws+Ts}},sa.prototype=Object.create(aa.prototype),sa.prototype.constructor=sa,sa.prototype.isSplineCurve=!0,sa.prototype.getPoint=function(Es){var Ts=this.points,Ss=(Ts.length-1)*Es,Ms=Math.floor(Ss),ws=Ss-Ms,As=Ts[0===Ms?Ms:Ms-1],Ls=Ts[Ms],Rs=Ts[Ms>Ts.length-2?Ts.length-1:Ms+1],Ps=Ts[Ms>Ts.length-3?Ts.length-1:Ms+2],Cs=A.CurveUtils.interpolate;return new R(Cs(As.x,Ls.x,Rs.x,Ps.x,ws),Cs(As.y,Ls.y,Rs.y,Ps.y,ws))},la.prototype=Object.create(aa.prototype),la.prototype.constructor=la,la.prototype.getPoint=function(Es){var Ts=A.ShapeUtils.b3;return new R(Ts(Es,this.v0.x,this.v1.x,this.v2.x,this.v3.x),Ts(Es,this.v0.y,this.v1.y,this.v2.y,this.v3.y))},la.prototype.getTangent=function(Es){var Ts=A.CurveUtils.tangentCubicBezier;return new R(Ts(Es,this.v0.x,this.v1.x,this.v2.x,this.v3.x),Ts(Es,this.v0.y,this.v1.y,this.v2.y,this.v3.y)).normalize()},da.prototype=Object.create(aa.prototype),da.prototype.constructor=da,da.prototype.getPoint=function(Es){var Ts=A.ShapeUtils.b2;return new R(Ts(Es,this.v0.x,this.v1.x,this.v2.x),Ts(Es,this.v0.y,this.v1.y,this.v2.y))},da.prototype.getTangent=function(Es){var Ts=A.CurveUtils.tangentQuadraticBezier;return new R(Ts(Es,this.v0.x,this.v1.x,this.v2.x),Ts(Es,this.v0.y,this.v1.y,this.v2.y)).normalize()};var gs=Object.assign(Object.create(na.prototype),{fromPoints:function(Es){this.moveTo(Es[0].x,Es[0].y);for(var Ts=1,Ss=Es.length;Ts<Ss;Ts++)this.lineTo(Es[Ts].x,Es[Ts].y)},moveTo:function(Es,Ts){this.currentPoint.set(Es,Ts)},lineTo:function(Es,Ts){var Ss=new ia(this.currentPoint.clone(),new R(Es,Ts));this.curves.push(Ss),this.currentPoint.set(Es,Ts)},quadraticCurveTo:function(Es,Ts,Ss,Ms){var ws=new da(this.currentPoint.clone(),new R(Es,Ts),new R(Ss,Ms));this.curves.push(ws),this.currentPoint.set(Ss,Ms)},bezierCurveTo:function(Es,Ts,Ss,Ms,ws,As){var Ls=new la(this.currentPoint.clone(),new R(Es,Ts),new R(Ss,Ms),new R(ws,As));this.curves.push(Ls),this.currentPoint.set(ws,As)},splineThru:function(Es){var Ts=[this.currentPoint.clone()].concat(Es),Ss=new sa(Ts);this.curves.push(Ss),this.currentPoint.copy(Es[Es.length-1])},arc:function(Es,Ts,Ss,Ms,ws,As){var Ls=this.currentPoint.x,Rs=this.currentPoint.y;this.absarc(Es+Ls,Ts+Rs,Ss,Ms,ws,As)},absarc:function(Es,Ts,Ss,Ms,ws,As){this.absellipse(Es,Ts,Ss,Ss,Ms,ws,As)},ellipse:function(Es,Ts,Ss,Ms,ws,As,Ls,Rs){var Ps=this.currentPoint.x,Cs=this.currentPoint.y;this.absellipse(Es+Ps,Ts+Cs,Ss,Ms,ws,As,Ls,Rs)},absellipse:function(Es,Ts,Ss,Ms,ws,As,Ls,Rs){var Ps=new oa(Es,Ts,Ss,Ms,ws,As,Ls,Rs);if(0<this.curves.length){var Cs=Ps.getPoint(0);Cs.equals(this.currentPoint)||this.lineTo(Cs.x,Cs.y)}this.curves.push(Ps);var Is=Ps.getPoint(1);this.currentPoint.copy(Is)}});ca.prototype=Object.create(Et.prototype),ca.prototype.constructor=ca,ca.NoTaper=function(Es){return 1},ca.SinusoidalTaper=function(Es){return Math.sin(Math.PI*Es)},ca.FrenetFrames=function(Es,Ts,Ss){var Ms=new D,ws=[],As=[],Ls=[],Rs=new D,Ps=new I,Cs=Ts+1,Is,Us,Ds,Ns,Fs,zs,Bs;for(this.tangents=ws,this.normals=As,this.binormals=Ls,zs=0;zs<Cs;zs++)Bs=zs/(Cs-1),ws[zs]=Es.getTangentAt(Bs),ws[zs].normalize();for(function(){As[0]=new D,Ls[0]=new D,Us=Number.MAX_VALUE,Ds=Math.abs(ws[0].x),Ns=Math.abs(ws[0].y),Fs=Math.abs(ws[0].z),Ds<=Us&&(Us=Ds,Ms.set(1,0,0)),Ns<=Us&&(Us=Ns,Ms.set(0,1,0)),Fs<=Us&&Ms.set(0,0,1),Rs.crossVectors(ws[0],Ms).normalize(),As[0].crossVectors(ws[0],Rs),Ls[0].crossVectors(ws[0],As[0])}(),zs=1;zs<Cs;zs++)As[zs]=As[zs-1].clone(),Ls[zs]=Ls[zs-1].clone(),Rs.crossVectors(ws[zs-1],ws[zs]),Rs.length()>Number.EPSILON&&(Rs.normalize(),Is=Math.acos(A.Math.clamp(ws[zs-1].dot(ws[zs]),-1,1)),As[zs].applyMatrix4(Ps.makeRotationAxis(Rs,Is))),Ls[zs].crossVectors(ws[zs],As[zs]);if(Ss)for(Is=Math.acos(A.Math.clamp(As[0].dot(As[Cs-1]),-1,1)),Is/=Cs-1,0<ws[0].dot(Rs.crossVectors(As[0],As[Cs-1]))&&(Is=-Is),zs=1;zs<Cs;zs++)As[zs].applyMatrix4(Ps.makeRotationAxis(ws[zs],Is*zs)),Ls[zs].crossVectors(ws[zs],As[zs])},ua.prototype=Object.create(Et.prototype),ua.prototype.constructor=ua,ua.prototype.addShapeList=function(Es,Ts){for(var Ss=Es.length,Ms=0;Ms<Ss;Ms++){var ws=Es[Ms];this.addShape(ws,Ts)}},ua.prototype.addShape=function(Es,Ts){function Ss(Cl,Il,Ul){return Il||console.error("THREE.ExtrudeGeometry: vec does not exist"),Il.clone().multiplyScalar(Ul).add(Cl)}function Ms(Cl,Il,Ul){var Fl=1,Dl,Nl,zl=Cl.x-Il.x,Bl=Cl.y-Il.y,Ol=Ul.x-Cl.x,Gl=Ul.y-Cl.y,Vl=zl*zl+Bl*Bl;if(Math.abs(zl*Gl-Bl*Ol)>Number.EPSILON){var Hl=Math.sqrt(Vl),Wl=Math.sqrt(Ol*Ol+Gl*Gl),Xl=Il.x-Bl/Hl,ql=Il.y+zl/Hl,Yl=Ul.x-Gl/Wl,Zl=Ul.y+Ol/Wl,Jl=((Yl-Xl)*Gl-(Zl-ql)*Ol)/(zl*Gl-Bl*Ol);Dl=Xl+zl*Jl-Cl.x,Nl=ql+Bl*Jl-Cl.y;var Ql=Dl*Dl+Nl*Nl;if(2>=Ql)return new R(Dl,Nl);Fl=Math.sqrt(Ql/2)}else{var Kl=!1;zl>Number.EPSILON?Ol>Number.EPSILON&&(Kl=!0):zl<-Number.EPSILON?Ol<-Number.EPSILON&&(Kl=!0):Math.sign(Bl)===Math.sign(Gl)&&(Kl=!0),Kl?(Dl=-Bl,Nl=zl,Fl=Math.sqrt(Vl)):(Dl=zl,Nl=Bl,Fl=Math.sqrt(Vl/2))}return new R(Dl/Fl,Nl/Fl)}function ws(Cl,Il){var Ul,Dl;for(Tl=Cl.length;0<=--Tl;){Ul=Tl,Dl=Tl-1,0>Dl&&(Dl=Cl.length-1);var Nl=0,Fl=Fs+2*Us;for(Nl=0;Nl<Fl;Nl++){var zl=yl*Nl,Bl=yl*(Nl+1),Ol=Il+Ul+zl,Gl=Il+Dl+zl,Vl=Il+Dl+Bl,Hl=Il+Ul+Bl;Rs(Ol,Gl,Vl,Hl,Cl,Nl,Fl,Ul,Dl)}}}function As(Cl,Il,Ul){Ys.vertices.push(new D(Cl,Il,Ul))}function Ls(Cl,Il,Ul){Cl+=Zs,Il+=Zs,Ul+=Zs,Ys.faces.push(new yt(Cl,Il,Ul,null,null,0));var Dl=Gs.generateTopUV(Ys,Cl,Il,Ul);Ys.faceVertexUvs[0].push(Dl)}function Rs(Cl,Il,Ul,Dl,Nl,Fl,zl,Bl,Ol){Cl+=Zs,Il+=Zs,Ul+=Zs,Dl+=Zs,Ys.faces.push(new yt(Cl,Il,Dl,null,null,1)),Ys.faces.push(new yt(Il,Ul,Dl,null,null,1));var Gl=Gs.generateSideWallUV(Ys,Cl,Il,Ul,Dl);Ys.faceVertexUvs[0].push([Gl[0],Gl[1],Gl[3]]),Ys.faceVertexUvs[0].push([Gl[1],Gl[2],Gl[3]])}var Ps=Ts.amount===void 0?100:Ts.amount,Cs=Ts.bevelThickness===void 0?6:Ts.bevelThickness,Is=Ts.bevelSize===void 0?Cs-2:Ts.bevelSize,Us=Ts.bevelSegments===void 0?3:Ts.bevelSegments,Ds=!(Ts.bevelEnabled!==void 0)||Ts.bevelEnabled,Ns=Ts.curveSegments===void 0?12:Ts.curveSegments,Fs=Ts.steps===void 0?1:Ts.steps,zs=Ts.extrudePath,Bs,Os=!1,Gs=Ts.UVGenerator===void 0?ua.WorldUVGenerator:Ts.UVGenerator,Vs,ks,Hs,Ws;zs&&(Bs=zs.getSpacedPoints(Fs),Os=!0,Ds=!1,Vs=Ts.frames===void 0?new ca.FrenetFrames(zs,Fs,!1):Ts.frames,ks=new D,Hs=new D,Ws=new D),Ds||(Us=0,Cs=0,Is=0);var js,Xs,qs,Ys=this,Zs=this.vertices.length,Js=Es.extractPoints(Ns),Qs=Js.shape,Ks=Js.holes,$s=!A.ShapeUtils.isClockWise(Qs);if($s){for(Qs=Qs.reverse(),Xs=0,qs=Ks.length;Xs<qs;Xs++)js=Ks[Xs],A.ShapeUtils.isClockWise(js)&&(Ks[Xs]=js.reverse());$s=!1}var el=A.ShapeUtils.triangulateShape(Qs,Ks),rl=Qs;for(Xs=0,qs=Ks.length;Xs<qs;Xs++)js=Ks[Xs],Qs=Qs.concat(js);for(var yl=Qs.length,_l=el.length,El=[],Tl=0,Sl=rl.length,Ml=Sl-1,wl=Tl+1,al,nl,dl,cl,ul,xl;Tl<Sl;Tl++,Ml++,wl++)Ml===Sl&&(Ml=0),wl===Sl&&(wl=0),El[Tl]=Ms(rl[Tl],rl[Ml],rl[wl]);var Al=[],Rl=El.concat(),Ll;for(Xs=0,qs=Ks.length;Xs<qs;Xs++){for(js=Ks[Xs],Ll=[],(Tl=0,Sl=js.length,Ml=Sl-1,wl=Tl+1);Tl<Sl;Tl++,Ml++,wl++)Ml===Sl&&(Ml=0),wl===Sl&&(wl=0),Ll[Tl]=Ms(js[Tl],js[Ml],js[wl]);Al.push(Ll),Rl=Rl.concat(Ll)}for(al=0;al<Us;al++){for(dl=al/Us,cl=Cs*Math.cos(dl*Math.PI/2),nl=Is*Math.sin(dl*Math.PI/2),(Tl=0,Sl=rl.length);Tl<Sl;Tl++)ul=Ss(rl[Tl],El[Tl],nl),As(ul.x,ul.y,-cl);for(Xs=0,qs=Ks.length;Xs<qs;Xs++)for(js=Ks[Xs],Ll=Al[Xs],(Tl=0,Sl=js.length);Tl<Sl;Tl++)ul=Ss(js[Tl],Ll[Tl],nl),As(ul.x,ul.y,-cl)}for(nl=Is,Tl=0;Tl<yl;Tl++)ul=Ds?Ss(Qs[Tl],Rl[Tl],nl):Qs[Tl],Os?(Hs.copy(Vs.normals[0]).multiplyScalar(ul.x),ks.copy(Vs.binormals[0]).multiplyScalar(ul.y),Ws.copy(Bs[0]).add(Hs).add(ks),As(Ws.x,Ws.y,Ws.z)):As(ul.x,ul.y,0);var Pl;for(Pl=1;Pl<=Fs;Pl++)for(Tl=0;Tl<yl;Tl++)ul=Ds?Ss(Qs[Tl],Rl[Tl],nl):Qs[Tl],Os?(Hs.copy(Vs.normals[Pl]).multiplyScalar(ul.x),ks.copy(Vs.binormals[Pl]).multiplyScalar(ul.y),Ws.copy(Bs[Pl]).add(Hs).add(ks),As(Ws.x,Ws.y,Ws.z)):As(ul.x,ul.y,Ps/Fs*Pl);for(al=Us-1;0<=al;al--){for(dl=al/Us,cl=Cs*Math.cos(dl*Math.PI/2),nl=Is*Math.sin(dl*Math.PI/2),(Tl=0,Sl=rl.length);Tl<Sl;Tl++)ul=Ss(rl[Tl],El[Tl],nl),As(ul.x,ul.y,Ps+cl);for(Xs=0,qs=Ks.length;Xs<qs;Xs++)for(js=Ks[Xs],Ll=Al[Xs],(Tl=0,Sl=js.length);Tl<Sl;Tl++)ul=Ss(js[Tl],Ll[Tl],nl),Os?As(ul.x,ul.y+Bs[Fs-1].y,Bs[Fs-1].x+cl):As(ul.x,ul.y,Ps+cl)}(function(){if(Ds){var Il=0,Ul=yl*Il;for(Tl=0;Tl<_l;Tl++)xl=el[Tl],Ls(xl[2]+Ul,xl[1]+Ul,xl[0]+Ul);for(Il=Fs+2*Us,Ul=yl*Il,Tl=0;Tl<_l;Tl++)xl=el[Tl],Ls(xl[0]+Ul,xl[1]+Ul,xl[2]+Ul)}else{for(Tl=0;Tl<_l;Tl++)xl=el[Tl],Ls(xl[2],xl[1],xl[0]);for(Tl=0;Tl<_l;Tl++)xl=el[Tl],Ls(xl[0]+yl*Fs,xl[1]+yl*Fs,xl[2]+yl*Fs)}})(),function(){var Il=0;for(ws(rl,Il),Il+=rl.length,(Xs=0,qs=Ks.length);Xs<qs;Xs++)js=Ks[Xs],ws(js,Il),Il+=js.length}()},ua.WorldUVGenerator={generateTopUV:function(Es,Ts,Ss,Ms){var ws=Es.vertices,As=ws[Ts],Ls=ws[Ss],Rs=ws[Ms];return[new R(As.x,As.y),new R(Ls.x,Ls.y),new R(Rs.x,Rs.y)]},generateSideWallUV:function(Es,Ts,Ss,Ms,ws){var As=Es.vertices,Ls=As[Ts],Rs=As[Ss],Ps=As[Ms],Cs=As[ws];return 0.01>Math.abs(Ls.y-Rs.y)?[new R(Ls.x,1-Ls.z),new R(Rs.x,1-Rs.z),new R(Ps.x,1-Ps.z),new R(Cs.x,1-Cs.z)]:[new R(Ls.y,1-Ls.z),new R(Rs.y,1-Rs.z),new R(Ps.y,1-Ps.z),new R(Cs.y,1-Cs.z)]}},ma.prototype=Object.create(Et.prototype),ma.prototype.constructor=ma,ma.prototype.addShapeList=function(Es,Ts){for(var Ss=0,Ms=Es.length;Ss<Ms;Ss++)this.addShape(Es[Ss],Ts);return this},ma.prototype.addShape=function(Es,Ts){Ts===void 0&&(Ts={});var Ss=Ts.curveSegments===void 0?12:Ts.curveSegments,Ms=Ts.material,ws=Ts.UVGenerator===void 0?ua.WorldUVGenerator:Ts.UVGenerator,As,Ls,Rs,Ps=this.vertices.length,Cs=Es.extractPoints(Ss),Is=Cs.shape,Us=Cs.holes,Ds=!A.ShapeUtils.isClockWise(Is);if(Ds){for(Is=Is.reverse(),As=0,Ls=Us.length;As<Ls;As++)Rs=Us[As],A.ShapeUtils.isClockWise(Rs)&&(Us[As]=Rs.reverse());Ds=!1}var Ns=A.ShapeUtils.triangulateShape(Is,Us);for(As=0,Ls=Us.length;As<Ls;As++)Rs=Us[As],Is=Is.concat(Rs);var zs=Is.length,Fs,Bs,Os=Ns.length;for(As=0;As<zs;As++)Fs=Is[As],this.vertices.push(new D(Fs.x,Fs.y,0));for(As=0;As<Os;As++){Bs=Ns[As];var Gs=Bs[0]+Ps,Vs=Bs[1]+Ps,ks=Bs[2]+Ps;this.faces.push(new yt(Gs,Vs,ks,null,null,Ms)),this.faceVertexUvs[0].push(ws.generateTopUV(this,Gs,Vs,ks))}},fa.prototype=Object.assign(Object.create(gs),{constructor:fa,extrude:function(Es){return new ua(this,Es)},makeGeometry:function(Es){return new ma(this,Es)},getPointsHoles:function(Es){for(var Ts=[],Ss=0,Ms=this.holes.length;Ss<Ms;Ss++)Ts[Ss]=this.holes[Ss].getPoints(Es);return Ts},extractAllPoints:function(Es){return{shape:this.getPoints(Es),holes:this.getPointsHoles(Es)}},extractPoints:function(Es){return this.extractAllPoints(Es)}}),ga.prototype=gs,gs.constructor=ga,ha.prototype={moveTo:function(Es,Ts){this.currentPath=new ga,this.subPaths.push(this.currentPath),this.currentPath.moveTo(Es,Ts)},lineTo:function(Es,Ts){this.currentPath.lineTo(Es,Ts)},quadraticCurveTo:function(Es,Ts,Ss,Ms){this.currentPath.quadraticCurveTo(Es,Ts,Ss,Ms)},bezierCurveTo:function(Es,Ts,Ss,Ms,ws,As){this.currentPath.bezierCurveTo(Es,Ts,Ss,Ms,ws,As)},splineThru:function(Es){this.currentPath.splineThru(Es)},toShapes:function(Es,Ts){function Ss($s){for(var el=[],rl=0,al=$s.length;rl<al;rl++){var nl=$s[rl],dl=new fa;dl.curves=nl.curves,el.push(dl)}return el}function Ms($s,el){for(var rl=el.length,al=!1,nl=rl-1,dl=0;dl<rl;nl=dl++){var cl=el[nl],ul=el[dl],yl=ul.x-cl.x,xl=ul.y-cl.y;if(Math.abs(xl)>Number.EPSILON){if(0>xl&&(cl=el[dl],yl=-yl,ul=el[nl],xl=-xl),$s.y<cl.y||$s.y>ul.y)continue;if($s.y!==cl.y){var _l=xl*($s.x-cl.x)-yl*($s.y-cl.y);if(0==_l)return!0;if(0>_l)continue;al=!al}else if($s.x===cl.x)return!0}else{if($s.y!==cl.y)continue;if(ul.x<=$s.x&&$s.x<=cl.x||cl.x<=$s.x&&$s.x<=ul.x)return!0}}return al}var ws=A.ShapeUtils.isClockWise,As=this.subPaths;if(0===As.length)return[];if(!0===Ts)return Ss(As);var Cs=[],Ls,Rs,Ps;if(1===As.length)return Rs=As[0],Ps=new fa,Ps.curves=Rs.curves,Cs.push(Ps),Cs;var Is=!ws(As[0].getPoints());Is=Es?!Is:Is;var Us=[],Ds=[],Ns=[],Fs=0,zs;Ds[Fs]=void 0,Ns[Fs]=[];for(var Bs=0,Os=As.length;Bs<Os;Bs++)Rs=As[Bs],zs=Rs.getPoints(),Ls=ws(zs),Ls=Es?!Ls:Ls,Ls?(!Is&&Ds[Fs]&&Fs++,Ds[Fs]={s:new fa,p:zs},Ds[Fs].s.curves=Rs.curves,Is&&Fs++,Ns[Fs]=[]):Ns[Fs].push({h:Rs,p:zs[0]});if(!Ds[0])return Ss(As);if(1<Ds.length){for(var Gs=!1,Vs=[],ks=0,Hs=Ds.length;ks<Hs;ks++)Us[ks]=[];for(var ks=0,Hs=Ds.length;ks<Hs;ks++)for(var Ws=Ns[ks],js=0;js<Ws.length;js++){for(var Xs=Ws[js],qs=!0,Ys=0;Ys<Ds.length;Ys++)Ms(Xs.p,Ds[Ys].p)&&(ks!==Ys&&Vs.push({froms:ks,tos:Ys,hole:js}),qs?(qs=!1,Us[Ys].push(Xs)):Gs=!0);qs&&Us[ks].push(Xs)}0<Vs.length&&!Gs&&(Ns=Us)}for(var Bs=0,Js=Ds.length,Zs;Bs<Js;Bs++){Ps=Ds[Bs].s,Cs.push(Ps),Zs=Ns[Bs];for(var Qs=0,Ks=Zs.length;Qs<Ks;Qs++)Ps.holes.push(Zs[Qs].h)}return Cs}},Object.assign(ya.prototype,{isFont:!0,generateShapes:function(Es,Ts,Ss){function Ms(Cs,Is,Us){var Ds=ws.glyphs[Cs]||ws.glyphs["?"];if(Ds){var Ns=new ha,Fs=[],zs=A.ShapeUtils.b2,Bs=A.ShapeUtils.b3,Os,Gs,Vs,ks,Hs,Ws,js,Xs,qs,Ys,Zs;if(Ds.o)for(var Js=Ds._cachedOutline||(Ds._cachedOutline=Ds.o.split(" ")),Qs=0,Ks=Js.length;Qs<Ks;){var $s=Js[Qs++];switch($s){case"m":Os=Js[Qs++]*Is+Us,Gs=Js[Qs++]*Is,Ns.moveTo(Os,Gs);break;case"l":Os=Js[Qs++]*Is+Us,Gs=Js[Qs++]*Is,Ns.lineTo(Os,Gs);break;case"q":if(Vs=Js[Qs++]*Is+Us,ks=Js[Qs++]*Is,js=Js[Qs++]*Is+Us,Xs=Js[Qs++]*Is,Ns.quadraticCurveTo(js,Xs,Vs,ks),Zs=Fs[Fs.length-1],Zs){Hs=Zs.x,Ws=Zs.y;for(var el=1;el<=Ss;el++){var rl=el/Ss;zs(rl,Hs,js,Vs),zs(rl,Ws,Xs,ks)}}break;case"b":if(Vs=Js[Qs++]*Is+Us,ks=Js[Qs++]*Is,js=Js[Qs++]*Is+Us,Xs=Js[Qs++]*Is,qs=Js[Qs++]*Is+Us,Ys=Js[Qs++]*Is,Ns.bezierCurveTo(js,Xs,qs,Ys,Vs,ks),Zs=Fs[Fs.length-1],Zs){Hs=Zs.x,Ws=Zs.y;for(var el=1;el<=Ss;el++){var rl=el/Ss;Bs(rl,Hs,js,qs,Vs),Bs(rl,Ws,Xs,Ys,ks)}}}}return{offset:Ds.ha*Is,path:Ns}}}Ts===void 0&&(Ts=100),Ss===void 0&&(Ss=4);for(var ws=this.data,As=function(Is){for(var Us=(Is+"").split(""),Ds=Ts/ws.resolution,Ns=0,Fs=[],zs=0;zs<Us.length;zs++){var Bs=Ms(Us[zs],Ds,Ns);Ns+=Bs.offset,Fs.push(Bs.path)}return Fs}(Es),Ls=[],Rs=0,Ps=As.length;Rs<Ps;Rs++)Array.prototype.push.apply(Ls,As[Rs].toShapes());return Ls}}),Object.assign(xa.prototype,{load:function(Es,Ts,Ss,Ms){var ws=this,As=new Tr(this.manager);As.load(Es,function(Ls){var Rs;try{Rs=JSON.parse(Ls)}catch(Cs){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),Rs=JSON.parse(Ls.substring(65,Ls.length-2))}var Ps=ws.parse(Rs);Ts&&Ts(Ps)},Ss,Ms)},parse:function(Es){return new ya(Es)}});var hs;Object.assign(va.prototype,{load:function(Es,Ts,Ss,Ms){var ws=new Tr(this.manager);ws.setResponseType("arraybuffer"),ws.load(Es,function(As){var Ls=_a();Ls.decodeAudioData(As,function(Rs){Ts(Rs)})},Ss,Ms)}}),Object.assign(ba.prototype,{update:function(){var Es,Ts,Ss,Ms,ws,As=new I,Ls=new I;return function(Ps){var Cs=Es!==Ps.focus||Ts!==Ps.fov||Ss!==Ps.aspect*this.aspect||Ms!==Ps.near||ws!==Ps.far;if(Cs){Es=Ps.focus,Ts=Ps.fov,Ss=Ps.aspect*this.aspect,Ms=Ps.near,ws=Ps.far;var Is=Ps.projectionMatrix.clone(),Us=this.eyeSep/2,Ds=Us*Ms/Es,Ns=Ms*Math.tan(0.5*(A.Math.DEG2RAD*Ts)),Fs,zs;Ls.elements[12]=-Us,As.elements[12]=Us,Fs=-Ns*Ss+Ds,zs=Ns*Ss+Ds,Is.elements[0]=2*Ms/(zs-Fs),Is.elements[8]=(zs+Fs)/(zs-Fs),this.cameraL.projectionMatrix.copy(Is),Fs=-Ns*Ss-Ds,zs=Ns*Ss-Ds,Is.elements[0]=2*Ms/(zs-Fs),Is.elements[8]=(zs+Fs)/(zs-Fs),this.cameraR.projectionMatrix.copy(Is)}this.cameraL.matrixWorld.copy(Ps.matrixWorld).multiply(Ls),this.cameraR.matrixWorld.copy(Ps.matrixWorld).multiply(As)}}()}),Ea.prototype=Object.create(vt.prototype),Ea.prototype.constructor=Ea,Ta.prototype=Object.assign(Object.create(vt.prototype),{constructor:Ta,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(Es){null===this.filter?this.gain.disconnect(this.context.destination):(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)),this.filter=Es,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(Es){this.gain.gain.value=Es},updateMatrixWorld:function(){var Es=new D,Ts=new U,Ss=new D,Ms=new D;return function(As){vt.prototype.updateMatrixWorld.call(this,As);var Ls=this.context.listener,Rs=this.up;this.matrixWorld.decompose(Es,Ts,Ss),Ms.set(0,0,-1).applyQuaternion(Ts),Ls.setPosition(Es.x,Es.y,Es.z),Ls.setOrientation(Ms.x,Ms.y,Ms.z,Rs.x,Rs.y,Rs.z)}}()}),Sa.prototype=Object.assign(Object.create(vt.prototype),{constructor:Sa,getOutput:function(){return this.gain},setNodeSource:function(Es){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=Es,this.connect(),this},setBuffer:function(Es){return this.source.buffer=Es,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");var Es=this.context.createBufferSource();return Es.buffer=this.source.buffer,Es.loop=this.source.loop,Es.onended=this.source.onended,Es.start(0,this.startTime),Es.playbackRate.value=this.playbackRate,this.isPlaying=!0,this.source=Es,this.connect()},pause:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this)},stop:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=0,this.isPlaying=!1,this)},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var Es=1,Ts=this.filters.length;Es<Ts;Es++)this.filters[Es-1].connect(this.filters[Es]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var Es=1,Ts=this.filters.length;Es<Ts;Es++)this.filters[Es-1].disconnect(this.filters[Es]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(Es){return Es||(Es=[]),!0===this.isPlaying?(this.disconnect(),this.filters=Es,this.connect()):this.filters=Es,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(Es){return this.setFilters(Es?[Es]:[])},setPlaybackRate:function(Es){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=Es,!0===this.isPlaying&&(this.source.playbackRate.value=this.playbackRate),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1!==this.hasPlaybackControl&&this.source.loop},setLoop:function(Es){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):void(this.source.loop=Es)},getVolume:function(){return this.gain.gain.value},setVolume:function(Es){return this.gain.gain.value=Es,this}}),Ma.prototype=Object.assign(Object.create(Sa.prototype),{constructor:Ma,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(Es){this.panner.refDistance=Es},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(Es){this.panner.rolloffFactor=Es},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(Es){this.panner.distanceModel=Es},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(Es){this.panner.maxDistance=Es},updateMatrixWorld:function(){var Es=new D;return function(Ss){vt.prototype.updateMatrixWorld.call(this,Ss),Es.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(Es.x,Es.y,Es.z)}}()}),Object.assign(wa.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var Es=0,Ts=this.getFrequencyData(),Ss=0;Ss<Ts.length;Ss++)Es+=Ts[Ss];return Es/Ts.length}}),Aa.prototype={constructor:Aa,accumulate:function(Es,Ts){var Ss=this.buffer,Ms=this.valueSize,ws=Es*Ms+Ms,As=this.cumulativeWeight;if(0===As){for(var Ls=0;Ls!==Ms;++Ls)Ss[ws+Ls]=Ss[Ls];As=Ts}else{As+=Ts;var Rs=Ts/As;this._mixBufferRegion(Ss,ws,0,Rs,Ms)}this.cumulativeWeight=As},apply:function(Es){var Ts=this.valueSize,Ss=this.buffer,Ms=Es*Ts+Ts,ws=this.cumulativeWeight,As=this.binding;this.cumulativeWeight=0,1>ws&&this._mixBufferRegion(Ss,Ms,3*Ts,1-ws,Ts);for(var Ls=Ts;Ls!==Ts+Ts;++Ls)if(Ss[Ls]!==Ss[Ls+Ts]){As.setValue(Ss,Ms);break}},saveOriginalState:function(){var Es=this.binding,Ts=this.buffer,Ss=this.valueSize,Ms=3*Ss;Es.getValue(Ts,Ms);for(var ws=Ss;ws!==Ms;++ws)Ts[ws]=Ts[Ms+ws%Ss];this.cumulativeWeight=0},restoreOriginalState:function(){var Es=3*this.valueSize;this.binding.setValue(this.buffer,Es)},_select:function(Es,Ts,Ss,Ms,ws){if(0.5<=Ms)for(var As=0;As!==ws;++As)Es[Ts+As]=Es[Ss+As]},_slerp:function(Es,Ts,Ss,Ms,ws){U.slerpFlat(Es,Ts,Es,Ts,Es,Ss,Ms)},_lerp:function(Es,Ts,Ss,Ms,ws){for(var As=0;As!==ws;++As){var Ls=Ts+As;Es[Ls]=Es[Ls]*(1-Ms)+Es[Ss+As]*Ms}}},La.prototype={constructor:La,getValue:function(Ts,Ss){this.bind(),this.getValue(Ts,Ss)},setValue:function(Ts,Ss){this.bind(),this.setValue(Ts,Ss)},bind:function(){var Es=this.node,Ts=this.parsedPath,Ss=Ts.objectName,Ms=Ts.propertyName,ws=Ts.propertyIndex;if(Es||(Es=La.findNode(this.rootNode,Ts.nodeName)||this.rootNode,this.node=Es),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!Es)return void console.error("  trying to update node for track: "+this.path+" but it wasn't found.");if(Ss){var As=Ts.objectIndex;switch(Ss){case"materials":if(!Es.material)return void console.error("  can not bind to material as node does not have a material",this);if(!Es.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);Es=Es.material.materials;break;case"bones":if(!Es.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);Es=Es.skeleton.bones;for(var Ls=0;Ls<Es.length;Ls++)if(Es[Ls].name===As){As=Ls;break}break;default:if(void 0===Es[Ss])return void console.error("  can not bind to objectName of node, undefined",this);Es=Es[Ss];}if(void 0!==As){if(void 0===Es[As])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,Es);Es=Es[As]}}var Rs=Es[Ms];if(void 0===Rs){var Ps=Ts.nodeName;return void console.error("  trying to update property for track: "+Ps+"."+Ms+" but it wasn't found.",Es)}var Cs=this.Versioning.None;void 0===Es.needsUpdate?void 0!==Es.matrixWorldNeedsUpdate&&(Cs=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=Es):(Cs=this.Versioning.NeedsUpdate,this.targetObject=Es);var Is=this.BindingType.Direct;if(void 0!==ws){if("morphTargetInfluences"===Ms){if(!Es.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!Es.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(var Ls=0;Ls<this.node.geometry.morphTargets.length;Ls++)if(Es.geometry.morphTargets[Ls].name===ws){ws=Ls;break}}Is=this.BindingType.ArrayElement,this.resolvedProperty=Rs,this.propertyIndex=ws}else void 0!==Rs.fromArray&&void 0!==Rs.toArray?(Is=this.BindingType.HasFromToArray,this.resolvedProperty=Rs):void 0===Rs.length?this.propertyName=Ms:(Is=this.BindingType.EntireArray,this.resolvedProperty=Rs);this.getValue=this.GetterByBindingType[Is],this.setValue=this.SetterByBindingTypeAndVersioning[Is][Cs]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(La.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:La.prototype.getValue,_setValue_unbound:La.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(Ts,Ss){Ts[Ss]=this.node[this.propertyName]},function(Ts,Ss){for(var Ms=this.resolvedProperty,ws=0,As=Ms.length;ws!==As;++ws)Ts[Ss++]=Ms[ws]},function(Ts,Ss){Ts[Ss]=this.resolvedProperty[this.propertyIndex]},function(Ts,Ss){this.resolvedProperty.toArray(Ts,Ss)}],SetterByBindingTypeAndVersioning:[[function(Ts,Ss){this.node[this.propertyName]=Ts[Ss]},function(Ts,Ss){this.node[this.propertyName]=Ts[Ss],this.targetObject.needsUpdate=!0},function(Ts,Ss){this.node[this.propertyName]=Ts[Ss],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(Ts,Ss){for(var Ms=this.resolvedProperty,ws=0,As=Ms.length;ws!==As;++ws)Ms[ws]=Ts[Ss++]},function(Ts,Ss){for(var Ms=this.resolvedProperty,ws=0,As=Ms.length;ws!==As;++ws)Ms[ws]=Ts[Ss++];this.targetObject.needsUpdate=!0},function(Ts,Ss){for(var Ms=this.resolvedProperty,ws=0,As=Ms.length;ws!==As;++ws)Ms[ws]=Ts[Ss++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(Ts,Ss){this.resolvedProperty[this.propertyIndex]=Ts[Ss]},function(Ts,Ss){this.resolvedProperty[this.propertyIndex]=Ts[Ss],this.targetObject.needsUpdate=!0},function(Ts,Ss){this.resolvedProperty[this.propertyIndex]=Ts[Ss],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(Ts,Ss){this.resolvedProperty.fromArray(Ts,Ss)},function(Ts,Ss){this.resolvedProperty.fromArray(Ts,Ss),this.targetObject.needsUpdate=!0},function(Ts,Ss){this.resolvedProperty.fromArray(Ts,Ss),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),La.Composite=function(Es,Ts,Ss){var Ms=Ss||La.parseTrackName(Ts);this._targetGroup=Es,this._bindings=Es.subscribe_(Ts,Ms)},La.Composite.prototype={constructor:La.Composite,getValue:function(Es,Ts){this.bind();var Ss=this._targetGroup.nCachedObjects_,Ms=this._bindings[Ss];Ms!==void 0&&Ms.getValue(Es,Ts)},setValue:function(Es,Ts){for(var Ss=this._bindings,Ms=this._targetGroup.nCachedObjects_,ws=Ss.length;Ms!==ws;++Ms)Ss[Ms].setValue(Es,Ts)},bind:function(){for(var Es=this._bindings,Ts=this._targetGroup.nCachedObjects_,Ss=Es.length;Ts!==Ss;++Ts)Es[Ts].bind()},unbind:function(){for(var Es=this._bindings,Ts=this._targetGroup.nCachedObjects_,Ss=Es.length;Ts!==Ss;++Ts)Es[Ts].unbind()}},La.create=function(Es,Ts,Ss){return Es&&Es.isAnimationObjectGroup?new La.Composite(Es,Ts,Ss):new La(Es,Ts,Ss)},La.parseTrackName=function(Es){var Ts=/^((?:\w+\/)*)(\w+)?(?:\.(\w+)(?:\[(.+)\])?)?\.(\w+)(?:\[(.+)\])?$/,Ss=Ts.exec(Es);if(!Ss)throw new Error("cannot parse trackName at all: "+Es);var Ms={nodeName:Ss[2],objectName:Ss[3],objectIndex:Ss[4],propertyName:Ss[5],propertyIndex:Ss[6]};if(null===Ms.propertyName||0===Ms.propertyName.length)throw new Error("can not parse propertyName from trackName: "+Es);return Ms},La.findNode=function(Es,Ts){if(!Ts||""===Ts||"root"===Ts||"."===Ts||-1===Ts||Ts===Es.name||Ts===Es.uuid)return Es;if(Es.skeleton){var Ss=function(Ls){for(var Rs=0;Rs<Ls.bones.length;Rs++){var Ps=Ls.bones[Rs];if(Ps.name===Ts)return Ps}return null},Ms=Ss(Es.skeleton);if(Ms)return Ms}if(Es.children){var ws=function(Ls){for(var Rs=0;Rs<Ls.length;Rs++){var Ps=Ls[Rs];if(Ps.name===Ts||Ps.uuid===Ts)return Ps;var Cs=ws(Ps.children);if(Cs)return Cs}return null},As=ws(Es.children);if(As)return As}return null},Ra.prototype={constructor:Ra,isAnimationObjectGroup:!0,add:function(Es){for(var Ts=this._objects,Ss=Ts.length,Ms=this.nCachedObjects_,ws=this._indicesByUUID,As=this._paths,Ls=this._parsedPaths,Rs=this._bindings,Ps=Rs.length,Cs=0,Is=arguments.length;Cs!==Is;++Cs){var Us=arguments[Cs],Ds=Us.uuid,Ns=ws[Ds];if(Ns===void 0){Ns=Ss++,ws[Ds]=Ns,Ts.push(Us);for(var Fs=0,zs=Ps;Fs!==zs;++Fs)Rs[Fs].push(new La(Us,As[Fs],Ls[Fs]))}else if(Ns<Ms){var Bs=Ts[Ns],Os=--Ms,Gs=Ts[Os];ws[Gs.uuid]=Ns,Ts[Ns]=Gs,ws[Ds]=Os,Ts[Os]=Us;for(var Fs=0,zs=Ps;Fs!==zs;++Fs){var Vs=Rs[Fs],ks=Vs[Os],Hs=Vs[Ns];Vs[Ns]=ks,Hs===void 0&&(Hs=new La(Us,As[Fs],Ls[Fs])),Vs[Os]=Hs}}else Ts[Ns]!==Bs&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=Ms},remove:function(Es){for(var Ts=this._objects,Ss=this.nCachedObjects_,Ms=this._indicesByUUID,ws=this._bindings,As=ws.length,Ls=0,Rs=arguments.length;Ls!==Rs;++Ls){var Ps=arguments[Ls],Cs=Ps.uuid,Is=Ms[Cs];if(Is!==void 0&&Is>=Ss){var Us=Ss++,Ds=Ts[Us];Ms[Ds.uuid]=Is,Ts[Is]=Ds,Ms[Cs]=Us,Ts[Us]=Ps;for(var Ns=0;Ns!==As;++Ns){var Fs=ws[Ns],zs=Fs[Us],Bs=Fs[Is];Fs[Is]=zs,Fs[Us]=Bs}}}this.nCachedObjects_=Ss},uncache:function(Es){for(var Ts=this._objects,Ss=Ts.length,Ms=this.nCachedObjects_,ws=this._indicesByUUID,As=this._bindings,Ls=As.length,Rs=0,Ps=arguments.length;Rs!==Ps;++Rs){var Cs=arguments[Rs],Is=Cs.uuid,Us=ws[Is];if(void 0!==Us)if(delete ws[Is],Us<Ms){var Ds=--Ms,Ns=Ts[Ds],Fs=--Ss,zs=Ts[Fs];ws[Ns.uuid]=Us,Ts[Us]=Ns,ws[zs.uuid]=Ds,Ts[Ds]=zs,Ts.pop();for(var Bs=0,Os=Ls;Bs!==Os;++Bs){var Gs=As[Bs],Vs=Gs[Ds],ks=Gs[Fs];Gs[Us]=Vs,Gs[Ds]=ks,Gs.pop()}}else{var Fs=--Ss,zs=Ts[Fs];ws[zs.uuid]=Us,Ts[Us]=zs,Ts.pop();for(var Bs=0,Os=Ls;Bs!==Os;++Bs){var Gs=As[Bs];Gs[Us]=Gs[Fs],Gs.pop()}}}this.nCachedObjects_=Ms},subscribe_:function(Es,Ts){var Ss=this._bindingsIndicesByPath,Ms=Ss[Es],ws=this._bindings;if(Ms!==void 0)return ws[Ms];var As=this._paths,Ls=this._parsedPaths,Rs=this._objects,Ps=Rs.length,Cs=this.nCachedObjects_,Is=Array(Ps);Ms=ws.length,Ss[Es]=Ms,As.push(Es),Ls.push(Ts),ws.push(Is);for(var Us=Cs,Ds=Rs.length;Us!==Ds;++Us){var Ns=Rs[Us];Is[Us]=new La(Ns,Es,Ts)}return Is},unsubscribe_:function(Es){var Ts=this._bindingsIndicesByPath,Ss=Ts[Es];if(Ss!==void 0){var Ms=this._paths,ws=this._parsedPaths,As=this._bindings,Ls=As.length-1,Rs=As[Ls],Ps=Es[Ls];Ts[Ps]=Ss,As[Ss]=Rs,As.pop(),ws[Ss]=ws[Ls],ws.pop(),Ms[Ss]=Ms[Ls],Ms.pop()}}};;Pa.prototype={constructor:Pa,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(Es){return this._startTime=Es,this},setLoop:function(Es,Ts){return this.loop=Es,this.repetitions=Ts,this},setEffectiveWeight:function(Es){return this.weight=Es,this._effectiveWeight=this.enabled?Es:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(Es){return this._scheduleFading(Es,0,1)},fadeOut:function(Es){return this._scheduleFading(Es,1,0)},crossFadeFrom:function(Es,Ts,Ss){if(Es.fadeOut(Ts),this.fadeIn(Ts),Ss){var Ms=this._clip.duration,ws=Es._clip.duration;Es.warp(1,ws/Ms,Ts),this.warp(Ms/ws,1,Ts)}return this},crossFadeTo:function(Es,Ts,Ss){return Es.crossFadeFrom(this,Ts,Ss)},stopFading:function(){var Es=this._weightInterpolant;return null!==Es&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(Es)),this},setEffectiveTimeScale:function(Es){return this.timeScale=Es,this._effectiveTimeScale=this.paused?0:Es,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(Es){return this.timeScale=this._clip.duration/Es,this.stopWarping()},syncWith:function(Es){return this.time=Es.time,this.timeScale=Es.timeScale,this.stopWarping()},halt:function(Es){return this.warp(this._effectiveTimeScale,0,Es)},warp:function(Es,Ts,Ss){var Ms=this._mixer,ws=Ms.time,As=this._timeScaleInterpolant,Ls=this.timeScale;null===As&&(As=Ms._lendControlInterpolant(),this._timeScaleInterpolant=As);var Rs=As.parameterPositions,Ps=As.sampleValues;return Rs[0]=ws,Rs[1]=ws+Ss,Ps[0]=Es/Ls,Ps[1]=Ts/Ls,this},stopWarping:function(){var Es=this._timeScaleInterpolant;return null!==Es&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(Es)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(Es,Ts,Ss,Ms){var ws=this._startTime;if(null!==ws){var As=(Es-ws)*Ss;if(0>As||0===Ss)return;this._startTime=null,Ts=Ss*As}Ts*=this._updateTimeScale(Es);var Ls=this._updateTime(Ts),Rs=this._updateWeight(Es);if(0<Rs)for(var Ps=this._interpolants,Cs=this._propertyBindings,Is=0,Us=Ps.length;Is!==Us;++Is)Ps[Is].evaluate(Ls),Cs[Is].accumulate(Ms,Rs)},_updateWeight:function(Es){var Ts=0;if(this.enabled){Ts=this.weight;var Ss=this._weightInterpolant;if(null!==Ss){var Ms=Ss.evaluate(Es)[0];Ts*=Ms,Es>Ss.parameterPositions[1]&&(this.stopFading(),0===Ms&&(this.enabled=!1))}}return this._effectiveWeight=Ts,Ts},_updateTimeScale:function(Es){var Ts=0;if(!this.paused){Ts=this.timeScale;var Ss=this._timeScaleInterpolant;if(null!==Ss){var Ms=Ss.evaluate(Es)[0];Ts*=Ms,Es>Ss.parameterPositions[1]&&(this.stopWarping(),0==Ts?this.paused=!0:this.timeScale=Ts)}}return this._effectiveTimeScale=Ts,Ts},_updateTime:function(Es){var Ts=this.time+Es;if(0===Es)return Ts;var Ss=this._clip.duration,Ms=this.loop,ws=this._loopCount;if(Ms===Uo){-1===ws&&(this.loopCount=0,this._setEndings(!0,!0,!1));handle_stop:{if(Ts>=Ss)Ts=Ss;else if(0>Ts)Ts=0;else break handle_stop;this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>Es?-1:1})}}else{var As=Ms===No;if(-1===ws&&(0<=Es?(ws=0,this._setEndings(!0,0===this.repetitions,As)):this._setEndings(0===this.repetitions,!0,As)),Ts>=Ss||0>Ts){var Ls=Math.floor(Ts/Ss);Ts-=Ss*Ls,ws+=Math.abs(Ls);var Rs=this.repetitions-ws;if(0>Rs)this.clampWhenFinished?this.paused=!0:this.enabled=!1,Ts=0<Es?Ss:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<Es?1:-1});else{if(0==Rs){var Ps=0>Es;this._setEndings(Ps,!Ps,As)}else this._setEndings(!1,!1,As);this._loopCount=ws,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:Ls})}}if(As&&1==(1&ws))return this.time=Ts,Ss-Ts}return this.time=Ts,Ts},_setEndings:function(Es,Ts,Ss){var Ms=this._interpolantSettings;Ss?(Ms.endingStart=Go,Ms.endingEnd=Go):(Ms.endingStart=Es?this.zeroSlopeAtStart?Go:Oo:Vo,Ms.endingEnd=Ts?this.zeroSlopeAtEnd?Go:Oo:Vo)},_scheduleFading:function(Es,Ts,Ss){var Ms=this._mixer,ws=Ms.time,As=this._weightInterpolant;null===As&&(As=Ms._lendControlInterpolant(),this._weightInterpolant=As);var Ls=As.parameterPositions,Rs=As.sampleValues;return Ls[0]=ws,Rs[0]=Ts,Ls[1]=ws+Es,Rs[1]=Ss,this}},Object.assign(Ca.prototype,L.prototype,{clipAction:function(Es,Ts){var Ss=Ts||this._root,Ms=Ss.uuid,ws="string"==typeof Es?Qr.findByName(Ss,Es):Es,As=null===ws?Es:ws.uuid,Ls=this._actionsByClip[As],Rs=null;if(void 0!==Ls){var Ps=Ls.actionByRoot[Ms];if(void 0!==Ps)return Ps;Rs=Ls.knownActions[0],null===ws&&(ws=Rs._clip)}if(null===ws)return null;var Cs=new Pa(this,ws,Ts);return this._bindAction(Cs,Rs),this._addInactiveAction(Cs,As,Ms),Cs},existingAction:function(Es,Ts){var Ss=Ts||this._root,Ms=Ss.uuid,ws="string"==typeof Es?Qr.findByName(Ss,Es):Es,As=ws?ws.uuid:Es,Ls=this._actionsByClip[As];return void 0===Ls?null:Ls.actionByRoot[Ms]||null},stopAllAction:function(){var Es=this._actions,Ts=this._nActiveActions,Ss=this._bindings,Ms=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var ws=0;ws!==Ts;++ws)Es[ws].reset();for(var ws=0;ws!==Ms;++ws)Ss[ws].useCount=0;return this},update:function(Es){Es*=this.timeScale;for(var Ts=this._actions,Ss=this._nActiveActions,Ms=this.time+=Es,ws=Math.sign(Es),As=this._accuIndex^=1,Ls=0;Ls!==Ss;++Ls){var Rs=Ts[Ls];Rs.enabled&&Rs._update(Ms,Es,ws,As)}for(var Ps=this._bindings,Cs=this._nActiveBindings,Ls=0;Ls!==Cs;++Ls)Ps[Ls].apply(As);return this},getRoot:function(){return this._root},uncacheClip:function(Es){var Ts=this._actions,Ss=Es.uuid,Ms=this._actionsByClip,ws=Ms[Ss];if(ws!==void 0){for(var As=ws.knownActions,Ls=0,Rs=As.length;Ls!==Rs;++Ls){var Ps=As[Ls];this._deactivateAction(Ps);var Cs=Ps._cacheIndex,Is=Ts[Ts.length-1];Ps._cacheIndex=null,Ps._byClipCacheIndex=null,Is._cacheIndex=Cs,Ts[Cs]=Is,Ts.pop(),this._removeInactiveBindingsForAction(Ps)}delete Ms[Ss]}},uncacheRoot:function(Es){var Ts=Es.uuid,Ss=this._actionsByClip;for(var Ms in Ss){var ws=Ss[Ms].actionByRoot,As=ws[Ts];As!==void 0&&(this._deactivateAction(As),this._removeInactiveAction(As))}var Ls=this._bindingsByRootAndName,Rs=Ls[Ts];if(Rs!==void 0)for(var Ps in Rs){var Cs=Rs[Ps];Cs.restoreOriginalState(),this._removeInactiveBinding(Cs)}},uncacheAction:function(Es,Ts){var Ss=this.existingAction(Es,Ts);null!==Ss&&(this._deactivateAction(Ss),this._removeInactiveAction(Ss))}}),Object.assign(Ca.prototype,{_bindAction:function(Es,Ts){var Ss=Es._localRoot||this._root,Ms=Es._clip.tracks,ws=Ms.length,As=Es._propertyBindings,Ls=Es._interpolants,Rs=Ss.uuid,Ps=this._bindingsByRootAndName,Cs=Ps[Rs];Cs===void 0&&(Cs={},Ps[Rs]=Cs);for(var Is=0;Is!==ws;++Is){var Us=Ms[Is],Ds=Us.name,Ns=Cs[Ds];if(void 0!==Ns)As[Is]=Ns;else{if(Ns=As[Is],void 0!==Ns){null===Ns._cacheIndex&&(++Ns.referenceCount,this._addInactiveBinding(Ns,Rs,Ds));continue}var Fs=Ts&&Ts._propertyBindings[Is].binding.parsedPath;Ns=new Aa(La.create(Ss,Ds,Fs),Us.ValueTypeName,Us.getValueSize()),++Ns.referenceCount,this._addInactiveBinding(Ns,Rs,Ds),As[Is]=Ns}Ls[Is].resultBuffer=Ns.buffer}},_activateAction:function(Es){if(!this._isActiveAction(Es)){if(null===Es._cacheIndex){var Ts=(Es._localRoot||this._root).uuid,Ss=Es._clip.uuid,Ms=this._actionsByClip[Ss];this._bindAction(Es,Ms&&Ms.knownActions[0]),this._addInactiveAction(Es,Ss,Ts)}for(var ws=Es._propertyBindings,As=0,Ls=ws.length;As!==Ls;++As){var Rs=ws[As];0==Rs.useCount++&&(this._lendBinding(Rs),Rs.saveOriginalState())}this._lendAction(Es)}},_deactivateAction:function(Es){if(this._isActiveAction(Es)){for(var Ts=Es._propertyBindings,Ss=0,Ms=Ts.length;Ss!==Ms;++Ss){var ws=Ts[Ss];0==--ws.useCount&&(ws.restoreOriginalState(),this._takeBackBinding(ws))}this._takeBackAction(Es)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var Es=this;this.stats={actions:{get total(){return Es._actions.length},get inUse(){return Es._nActiveActions}},bindings:{get total(){return Es._bindings.length},get inUse(){return Es._nActiveBindings}},controlInterpolants:{get total(){return Es._controlInterpolants.length},get inUse(){return Es._nActiveControlInterpolants}}}},_isActiveAction:function(Es){var Ts=Es._cacheIndex;return null!==Ts&&Ts<this._nActiveActions},_addInactiveAction:function(Es,Ts,Ss){var Ms=this._actions,ws=this._actionsByClip,As=ws[Ts];if(As===void 0)As={knownActions:[Es],actionByRoot:{}},Es._byClipCacheIndex=0,ws[Ts]=As;else{var Ls=As.knownActions;Es._byClipCacheIndex=Ls.length,Ls.push(Es)}Es._cacheIndex=Ms.length,Ms.push(Es),As.actionByRoot[Ss]=Es},_removeInactiveAction:function(Es){var Ts=this._actions,Ss=Ts[Ts.length-1],Ms=Es._cacheIndex;Ss._cacheIndex=Ms,Ts[Ms]=Ss,Ts.pop(),Es._cacheIndex=null;var ws=Es._clip.uuid,As=this._actionsByClip,Ls=As[ws],Rs=Ls.knownActions,Ps=Rs[Rs.length-1],Cs=Es._byClipCacheIndex;Ps._byClipCacheIndex=Cs,Rs[Cs]=Ps,Rs.pop(),Es._byClipCacheIndex=null;var Is=Ls.actionByRoot,Us=(Ts._localRoot||this._root).uuid;delete Is[Us],0===Rs.length&&delete As[ws],this._removeInactiveBindingsForAction(Es)},_removeInactiveBindingsForAction:function(Es){for(var Ts=Es._propertyBindings,Ss=0,Ms=Ts.length;Ss!==Ms;++Ss){var ws=Ts[Ss];0==--ws.referenceCount&&this._removeInactiveBinding(ws)}},_lendAction:function(Es){var Ts=this._actions,Ss=Es._cacheIndex,Ms=this._nActiveActions++,ws=Ts[Ms];Es._cacheIndex=Ms,Ts[Ms]=Es,ws._cacheIndex=Ss,Ts[Ss]=ws},_takeBackAction:function(Es){var Ts=this._actions,Ss=Es._cacheIndex,Ms=--this._nActiveActions,ws=Ts[Ms];Es._cacheIndex=Ms,Ts[Ms]=Es,ws._cacheIndex=Ss,Ts[Ss]=ws},_addInactiveBinding:function(Es,Ts,Ss){var Ms=this._bindingsByRootAndName,ws=Ms[Ts],As=this._bindings;ws===void 0&&(ws={},Ms[Ts]=ws),ws[Ss]=Es,Es._cacheIndex=As.length,As.push(Es)},_removeInactiveBinding:function(Es){var Ts=this._bindings,Ss=Es.binding,Ms=Ss.rootNode.uuid,ws=Ss.path,As=this._bindingsByRootAndName,Ls=As[Ms],Rs=Ts[Ts.length-1],Ps=Es._cacheIndex;Rs._cacheIndex=Ps,Ts[Ps]=Rs,Ts.pop(),delete Ls[ws];remove_empty_map:{for(var Cs in Ls)break remove_empty_map;delete As[Ms]}},_lendBinding:function(Es){var Ts=this._bindings,Ss=Es._cacheIndex,Ms=this._nActiveBindings++,ws=Ts[Ms];Es._cacheIndex=Ms,Ts[Ms]=Es,ws._cacheIndex=Ss,Ts[Ss]=ws},_takeBackBinding:function(Es){var Ts=this._bindings,Ss=Es._cacheIndex,Ms=--this._nActiveBindings,ws=Ts[Ms];Es._cacheIndex=Ms,Ts[Ms]=Es,ws._cacheIndex=Ss,Ts[Ss]=ws},_lendControlInterpolant:function(){var Es=this._controlInterpolants,Ts=this._nActiveControlInterpolants++,Ss=Es[Ts];return void 0===Ss&&(Ss=new Gr(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),Ss.__cacheIndex=Ts,Es[Ts]=Ss),Ss},_takeBackControlInterpolant:function(Es){var Ts=this._controlInterpolants,Ss=Es.__cacheIndex,Ms=--this._nActiveControlInterpolants,ws=Ts[Ms];Es.__cacheIndex=Ms,Ts[Ms]=Es,ws.__cacheIndex=Ss,Ts[Ss]=ws},_controlInterpolantsResultBuffer:new Float32Array(1)}),Ia.prototype={constructor:Ia,onUpdate:function(Es){return this.dynamic=!0,this.onUpdateCallback=Es,this}},Ua.prototype=Object.create(Mt.prototype),Ua.prototype.constructor=Ua,Ua.prototype.isInstancedBufferGeometry=!0,Ua.prototype.addGroup=function(Es,Ts,Ss){this.groups.push({start:Es,count:Ts,instances:Ss})},Ua.prototype.copy=function(Es){var Ts=Es.index;null!==Ts&&this.setIndex(Ts.clone());var Ss=Es.attributes;for(var Ms in Ss){var ws=Ss[Ms];this.addAttribute(Ms,ws.clone())}for(var As=Es.groups,Ls=0,Rs=As.length;Ls<Rs;Ls++){var Ps=As[Ls];this.addGroup(Ps.start,Ps.count,Ps.instances)}return this},Da.prototype={constructor:Da,isInterleavedBufferAttribute:!0,get length(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length},get count(){return this.data.count},get array(){return this.data.array},setX:function(Es,Ts){return this.data.array[Es*this.data.stride+this.offset]=Ts,this},setY:function(Es,Ts){return this.data.array[Es*this.data.stride+this.offset+1]=Ts,this},setZ:function(Es,Ts){return this.data.array[Es*this.data.stride+this.offset+2]=Ts,this},setW:function(Es,Ts){return this.data.array[Es*this.data.stride+this.offset+3]=Ts,this},getX:function(Es){return this.data.array[Es*this.data.stride+this.offset]},getY:function(Es){return this.data.array[Es*this.data.stride+this.offset+1]},getZ:function(Es){return this.data.array[Es*this.data.stride+this.offset+2]},getW:function(Es){return this.data.array[Es*this.data.stride+this.offset+3]},setXY:function(Es,Ts,Ss){return Es=Es*this.data.stride+this.offset,this.data.array[Es+0]=Ts,this.data.array[Es+1]=Ss,this},setXYZ:function(Es,Ts,Ss,Ms){return Es=Es*this.data.stride+this.offset,this.data.array[Es+0]=Ts,this.data.array[Es+1]=Ss,this.data.array[Es+2]=Ms,this},setXYZW:function(Es,Ts,Ss,Ms,ws){return Es=Es*this.data.stride+this.offset,this.data.array[Es+0]=Ts,this.data.array[Es+1]=Ss,this.data.array[Es+2]=Ms,this.data.array[Es+3]=ws,this}},Na.prototype={constructor:Na,isInterleavedBuffer:!0,get length(){return this.array.length},get count(){return this.array.length/this.stride},set needsUpdate(Es){!0===Es&&this.version++},setDynamic:function(Es){return this.dynamic=Es,this},copy:function(Es){return this.array=new Es.array.constructor(Es.array),this.stride=Es.stride,this.dynamic=Es.dynamic,this},copyAt:function(Es,Ts,Ss){Es*=this.stride,Ss*=Ts.stride;for(var Ms=0,ws=this.stride;Ms<ws;Ms++)this.array[Es+Ms]=Ts.array[Ss+Ms];return this},set:function(Es,Ts){return void 0===Ts&&(Ts=0),this.array.set(Es,Ts),this},clone:function(){return new this.constructor().copy(this)}},Fa.prototype=Object.create(Na.prototype),Fa.prototype.constructor=Fa,Fa.prototype.isInstancedInterleavedBuffer=!0,Fa.prototype.copy=function(Es){return Na.prototype.copy.call(this,Es),this.meshPerAttribute=Es.meshPerAttribute,this},za.prototype=Object.create(ut.prototype),za.prototype.constructor=za,za.prototype.isInstancedBufferAttribute=!0,za.prototype.copy=function(Es){return ut.prototype.copy.call(this,Es),this.meshPerAttribute=Es.meshPerAttribute,this},Ba.prototype={constructor:Ba,linePrecision:1,set:function(Es,Ts){this.ray.set(Es,Ts)},setFromCamera:function(Es,Ts){Ts&&Ts.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(Ts.matrixWorld),this.ray.direction.set(Es.x,Es.y,0.5).unproject(Ts).sub(this.ray.origin).normalize()):Ts&&Ts.isOrthographicCamera?(this.ray.origin.set(Es.x,Es.y,(Ts.near+Ts.far)/(Ts.near-Ts.far)).unproject(Ts),this.ray.direction.set(0,0,-1).transformDirection(Ts.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(Es,Ts){var Ss=[];return Ga(Es,this,Ss,Ts),Ss.sort(Oa),Ss},intersectObjects:function(Es,Ts){var Ss=[];if(!1===Array.isArray(Es))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),Ss;for(var Ms=0,ws=Es.length;Ms<ws;Ms++)Ga(Es[Ms],this,Ss,Ts);return Ss.sort(Oa),Ss}},Va.prototype={constructor:Va,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var Es=0;if(this.autoStart&&!this.running&&this.start(),this.running){var Ts=(performance||Date).now();Es=(Ts-this.oldTime)/1000,this.oldTime=Ts,this.elapsedTime+=Es}return Es}},ka.prototype={constructor:ka,set:function(Es,Ts,Ss){return this.radius=Es,this.phi=Ts,this.theta=Ss,this},clone:function(){return new this.constructor().copy(this)},copy:function(Es){return this.radius.copy(Es.radius),this.phi.copy(Es.phi),this.theta.copy(Es.theta),this},makeSafe:function(){var Es=0.000001;return this.phi=Math.max(Es,Math.min(Math.PI-Es,this.phi)),this},setFromVector3:function(Es){return this.radius=Es.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(Es.x,Es.z),this.phi=Math.acos(A.Math.clamp(Es.y/this.radius,-1,1))),this}},Ha.prototype=Object.create(Gt.prototype),Ha.prototype.constructor=Ha,Ha.prototype.createAnimation=function(Es,Ts,Ss,Ms){var ws={start:Ts,end:Ss,length:Ss-Ts+1,fps:Ms,duration:(Ss-Ts)/Ms,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[Es]=ws,this.animationsList.push(ws)},Ha.prototype.autoCreateAnimations=function(Es){for(var Ts=/([a-z]+)_?(\d+)/i,Ms={},ws=this.geometry,As=0,Ls=ws.morphTargets.length,Ss;As<Ls;As++){var Rs=ws.morphTargets[As],Ps=Rs.name.match(Ts);if(Ps&&1<Ps.length){var Cs=Ps[1];Ms[Cs]||(Ms[Cs]={start:1/0,end:-(1/0)});var Is=Ms[Cs];As<Is.start&&(Is.start=As),As>Is.end&&(Is.end=As),Ss||(Ss=Cs)}}for(var Cs in Ms){var Is=Ms[Cs];this.createAnimation(Cs,Is.start,Is.end,Es)}this.firstAnimation=Ss},Ha.prototype.setAnimationDirectionForward=function(Es){var Ts=this.animationsMap[Es];Ts&&(Ts.direction=1,Ts.directionBackwards=!1)},Ha.prototype.setAnimationDirectionBackward=function(Es){var Ts=this.animationsMap[Es];Ts&&(Ts.direction=-1,Ts.directionBackwards=!0)},Ha.prototype.setAnimationFPS=function(Es,Ts){var Ss=this.animationsMap[Es];Ss&&(Ss.fps=Ts,Ss.duration=(Ss.end-Ss.start)/Ss.fps)},Ha.prototype.setAnimationDuration=function(Es,Ts){var Ss=this.animationsMap[Es];Ss&&(Ss.duration=Ts,Ss.fps=(Ss.end-Ss.start)/Ss.duration)},Ha.prototype.setAnimationWeight=function(Es,Ts){var Ss=this.animationsMap[Es];Ss&&(Ss.weight=Ts)},Ha.prototype.setAnimationTime=function(Es,Ts){var Ss=this.animationsMap[Es];Ss&&(Ss.time=Ts)},Ha.prototype.getAnimationTime=function(Es){var Ts=0,Ss=this.animationsMap[Es];return Ss&&(Ts=Ss.time),Ts},Ha.prototype.getAnimationDuration=function(Es){var Ts=-1,Ss=this.animationsMap[Es];return Ss&&(Ts=Ss.duration),Ts},Ha.prototype.playAnimation=function(Es){var Ts=this.animationsMap[Es];Ts?(Ts.time=0,Ts.active=!0):console.warn("THREE.MorphBlendMesh: animation["+Es+"] undefined in .playAnimation()")},Ha.prototype.stopAnimation=function(Es){var Ts=this.animationsMap[Es];Ts&&(Ts.active=!1)},Ha.prototype.update=function(Es){for(var Ts=0,Ss=this.animationsList.length;Ts<Ss;Ts++){var Ms=this.animationsList[Ts];if(Ms.active){var ws=Ms.duration/Ms.length;Ms.time+=Ms.direction*Es,Ms.mirroredLoop?(Ms.time>Ms.duration||0>Ms.time)&&(Ms.direction*=-1,Ms.time>Ms.duration&&(Ms.time=Ms.duration,Ms.directionBackwards=!0),0>Ms.time&&(Ms.time=0,Ms.directionBackwards=!1)):(Ms.time=Ms.time%Ms.duration,0>Ms.time&&(Ms.time+=Ms.duration));var As=Ms.start+A.Math.clamp(Math.floor(Ms.time/ws),0,Ms.length-1),Ls=Ms.weight;As!==Ms.currentFrame&&(this.morphTargetInfluences[Ms.lastFrame]=0,this.morphTargetInfluences[Ms.currentFrame]=1*Ls,this.morphTargetInfluences[As]=0,Ms.lastFrame=Ms.currentFrame,Ms.currentFrame=As);var Rs=Ms.time%ws/ws;Ms.directionBackwards&&(Rs=1-Rs),Ms.currentFrame===Ms.lastFrame?this.morphTargetInfluences[Ms.currentFrame]=Ls:(this.morphTargetInfluences[Ms.currentFrame]=Rs*Ls,this.morphTargetInfluences[Ms.lastFrame]=(1-Rs)*Ls)}}},Wa.prototype=Object.create(vt.prototype),Wa.prototype.constructor=Wa,Wa.prototype.isImmediateRenderObject=!0,ja.prototype=Object.create(Mt.prototype),ja.prototype.constructor=ja,Xa.prototype=Object.create(nr.prototype),Xa.prototype.constructor=Xa,Ya.prototype=Object.create(nr.prototype),Ya.prototype.constructor=Ya,Ya.prototype.update=function(){var Es=new D,Ts=new D,Ss=new He;return function(){var ws=["a","b","c"];this.object.updateMatrixWorld(!0),Ss.getNormalMatrix(this.object.matrixWorld);var As=this.object.matrixWorld,Ls=this.geometry.attributes.position,Rs=this.object.geometry;if(Rs&&Rs.isGeometry)for(var Ps=Rs.vertices,Cs=Rs.faces,Is=0,Us=0,Ds=Cs.length;Us<Ds;Us++)for(var Ns=Cs[Us],Fs=0,zs=Ns.vertexNormals.length;Fs<zs;Fs++){var Bs=Ps[Ns[ws[Fs]]],Os=Ns.vertexNormals[Fs];Es.copy(Bs).applyMatrix4(As),Ts.copy(Os).applyMatrix3(Ss).normalize().multiplyScalar(this.size).add(Es),Ls.setXYZ(Is,Es.x,Es.y,Es.z),Is=Is+1,Ls.setXYZ(Is,Ts.x,Ts.y,Ts.z),Is=Is+1}else if(Rs&&Rs.isBufferGeometry)for(var Gs=Rs.attributes.position,Vs=Rs.attributes.normal,Is=0,Fs=0,zs=Gs.count;Fs<zs;Fs++)Es.set(Gs.getX(Fs),Gs.getY(Fs),Gs.getZ(Fs)).applyMatrix4(As),Ts.set(Vs.getX(Fs),Vs.getY(Fs),Vs.getZ(Fs)),Ts.applyMatrix3(Ss).normalize().multiplyScalar(this.size).add(Es),Ls.setXYZ(Is,Es.x,Es.y,Es.z),Is=Is+1,Ls.setXYZ(Is,Ts.x,Ts.y,Ts.z),Is=Is+1;return Ls.needsUpdate=!0,this}}(),Za.prototype=Object.create(vt.prototype),Za.prototype.constructor=Za,Za.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Za.prototype.update=function(){var Es=new D,Ts=new D;return function(){var Ms=this.light.distance?this.light.distance:1000,ws=Ms*Math.tan(this.light.angle);this.cone.scale.set(ws,ws,Ms),Es.setFromMatrixPosition(this.light.matrixWorld),Ts.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Ts.sub(Es)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),Ja.prototype=Object.create(nr.prototype),Ja.prototype.constructor=Ja,Ja.prototype.getBoneList=function(Es){var Ts=[];Es&&Es.isBone&&Ts.push(Es);for(var Ss=0;Ss<Es.children.length;Ss++)Ts.push.apply(Ts,this.getBoneList(Es.children[Ss]));return Ts},Ja.prototype.update=function(){for(var Es=this.geometry,Ts=new I().getInverse(this.root.matrixWorld),Ss=new I,Ms=0,ws=0;ws<this.bones.length;ws++){var As=this.bones[ws];As.parent&&As.parent.isBone&&(Ss.multiplyMatrices(Ts,As.matrixWorld),Es.vertices[Ms].setFromMatrixPosition(Ss),Ss.multiplyMatrices(Ts,As.parent.matrixWorld),Es.vertices[Ms+1].setFromMatrixPosition(Ss),Ms+=2)}Es.verticesNeedUpdate=!0,Es.computeBoundingSphere()},Qa.prototype=Object.create(Mt.prototype),Qa.prototype.constructor=Qa,Ka.prototype=Object.create(Gt.prototype),Ka.prototype.constructor=Ka,Ka.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Ka.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},$a.prototype=Object.create(Et.prototype),$a.prototype.constructor=$a,ei.prototype=Object.create(vt.prototype),ei.prototype.constructor=ei,ei.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},ei.prototype.update=function(){var Es=new D;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(Es.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),ti.prototype=Object.create(nr.prototype),ti.prototype.constructor=ti,ti.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},ri.prototype=Object.create(nr.prototype),ri.prototype.constructor=ri,ri.prototype.update=function(){var Es=new D,Ts=new D,Ss=new He;return function(){this.object.updateMatrixWorld(!0),Ss.getNormalMatrix(this.object.matrixWorld);for(var ws=this.object.matrixWorld,As=this.geometry.attributes.position,Ls=this.object.geometry,Rs=Ls.vertices,Ps=Ls.faces,Cs=0,Is=0,Us=Ps.length;Is<Us;Is++){var Ds=Ps[Is],Ns=Ds.normal;Es.copy(Rs[Ds.a]).add(Rs[Ds.b]).add(Rs[Ds.c]).divideScalar(3).applyMatrix4(ws),Ts.copy(Ns).applyMatrix3(Ss).normalize().multiplyScalar(this.size).add(Es),As.setXYZ(Cs,Es.x,Es.y,Es.z),Cs=Cs+1,As.setXYZ(Cs,Ts.x,Ts.y,Ts.z),Cs=Cs+1}return As.needsUpdate=!0,this}}(),ai.prototype=Object.create(Mt.prototype),ai.prototype.constructor=ai,ni.prototype=Object.create(nr.prototype),ni.prototype.constructor=ni,oi.prototype=Object.create(vt.prototype),oi.prototype.constructor=oi,oi.prototype.dispose=function(){var Es=this.children[0],Ts=this.children[1];Es.geometry.dispose(),Es.material.dispose(),Ts.geometry.dispose(),Ts.material.dispose()},oi.prototype.update=function(){var Es=new D,Ts=new D,Ss=new D;return function(){Es.setFromMatrixPosition(this.light.matrixWorld),Ts.setFromMatrixPosition(this.light.target.matrixWorld),Ss.subVectors(Ts,Es);var ws=this.children[0],As=this.children[1];ws.lookAt(Ss),ws.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),As.lookAt(Ss),As.scale.z=Ss.length()}}(),si.prototype=Object.create(nr.prototype),si.prototype.constructor=si,si.prototype.update=function(){function Es(As,Ls,Rs,Ps){Ms.set(Ls,Rs,Ps).unproject(ws);var Cs=Ss[As];if(Cs!==void 0)for(var Is=0,Us=Cs.length;Is<Us;Is++)Ts.vertices[Cs[Is]].copy(Ms)}var Ts,Ss,Ms=new D,ws=new kt;return function(){Ts=this.geometry,Ss=this.pointMap;var Ls=1,Rs=1;ws.projectionMatrix.copy(this.camera.projectionMatrix),Es("c",0,0,-1),Es("t",0,0,1),Es("n1",-Ls,-Rs,-1),Es("n2",Ls,-Rs,-1),Es("n3",-Ls,Rs,-1),Es("n4",Ls,Rs,-1),Es("f1",-Ls,-Rs,1),Es("f2",Ls,-Rs,1),Es("f3",-Ls,Rs,1),Es("f4",Ls,Rs,1),Es("u1",0.7*Ls,1.1*Rs,-1),Es("u2",0.7*-Ls,1.1*Rs,-1),Es("u3",0,2*Rs,-1),Es("cf1",-Ls,0,1),Es("cf2",Ls,0,1),Es("cf3",0,-Rs,1),Es("cf4",0,Rs,1),Es("cn1",-Ls,0,-1),Es("cn2",Ls,0,-1),Es("cn3",0,-Rs,-1),Es("cn4",0,Rs,-1),Ts.verticesNeedUpdate=!0}}(),li.prototype=Object.create(Et.prototype),li.prototype.constructor=li,di.prototype=Object.create(Gt.prototype),di.prototype.constructor=di,di.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},pi.prototype=Object.create(nr.prototype),pi.prototype.constructor=pi,pi.prototype.update=function(){var Es=new Ve;return function(Ss){if(Ss&&Ss.isBox3?Es.copy(Ss):Es.setFromObject(Ss),!Es.isEmpty()){var Ms=Es.min,ws=Es.max,As=this.geometry.attributes.position,Ls=As.array;Ls[0]=ws.x,Ls[1]=ws.y,Ls[2]=ws.z,Ls[3]=Ms.x,Ls[4]=ws.y,Ls[5]=ws.z,Ls[6]=Ms.x,Ls[7]=Ms.y,Ls[8]=ws.z,Ls[9]=ws.x,Ls[10]=Ms.y,Ls[11]=ws.z,Ls[12]=ws.x,Ls[13]=ws.y,Ls[14]=Ms.z,Ls[15]=Ms.x,Ls[16]=ws.y,Ls[17]=Ms.z,Ls[18]=Ms.x,Ls[19]=Ms.y,Ls[20]=Ms.z,Ls[21]=ws.x,Ls[22]=Ms.y,Ls[23]=Ms.z,As.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),ci.prototype=Object.create(Mt.prototype),ci.prototype.constructor=ci;var ys=new Mt;ys.addAttribute("position",new ht([0,0,0,0,1,0],3));var xs=new ci(0,0.5,1,5,1);xs.translate(0,-0.5,0),ui.prototype=Object.create(vt.prototype),ui.prototype.constructor=ui,ui.prototype.setDirection=function(){var Es=new D,Ts;return function(Ms){0.99999<Ms.y?this.quaternion.set(0,0,0,1):-0.99999>Ms.y?this.quaternion.set(1,0,0,0):(Es.set(Ms.z,0,-Ms.x).normalize(),Ts=Math.acos(Ms.y),this.quaternion.setFromAxisAngle(Es,Ts))}}(),ui.prototype.setLength=function(Es,Ts,Ss){Ts===void 0&&(Ts=0.2*Es),Ss===void 0&&(Ss=0.2*Ts),this.line.scale.set(1,Math.max(0,Es-Ts),1),this.line.updateMatrix(),this.cone.scale.set(Ss,Ts,Ss),this.cone.position.y=Es,this.cone.updateMatrix()},ui.prototype.setColor=function(Es){this.line.material.color.copy(Es),this.cone.material.color.copy(Es)},mi.prototype=Object.create(nr.prototype),mi.prototype.constructor=mi,gi.prototype=Object.create(Et.prototype),gi.prototype.constructor=gi,hi.prototype=Object.create(Et.prototype),hi.prototype.constructor=hi,yi.prototype=Object.create(hi.prototype),yi.prototype.constructor=yi,xi.prototype=Object.create(hi.prototype),xi.prototype.constructor=xi,_i.prototype=Object.create(hi.prototype),_i.prototype.constructor=_i,vi.prototype=Object.create(hi.prototype),vi.prototype.constructor=vi,bi.prototype=Object.create(Mt.prototype),bi.prototype.constructor=bi,Ei.prototype=Object.create(Et.prototype),Ei.prototype.constructor=Ei,Ti.prototype=Object.create(Mt.prototype),Ti.prototype.constructor=Ti,Si.prototype=Object.create(Et.prototype),Si.prototype.constructor=Si,Mi.prototype=Object.create(ua.prototype),Mi.prototype.constructor=Mi,wi.prototype=Object.create(Mt.prototype),wi.prototype.constructor=wi,Ai.prototype=Object.create(Et.prototype),Ai.prototype.constructor=Ai,Li.prototype=Object.create(Et.prototype),Li.prototype.constructor=Li,Ri.prototype=Object.create(Mt.prototype),Ri.prototype.constructor=Ri,Pi.prototype=Object.create(Et.prototype),Pi.prototype.constructor=Pi,Ci.prototype=Object.create(Et.prototype),Ci.prototype.constructor=Ci,Ii.prototype=Object.create(Ci.prototype),Ii.prototype.constructor=Ii,Ui.prototype=Object.create(Mt.prototype),Ui.prototype.constructor=Ui,Di.prototype=Object.create(Mt.prototype),Di.prototype.constructor=Di,Ni.prototype=Object.create(Et.prototype),Ni.prototype.constructor=Ni,A.CatmullRomCurve3=function(){function Es(){}var Ts=new D,Ss=new Es,Ms=new Es,ws=new Es;return Es.prototype.init=function(As,Ls,Rs,Ps){this.c0=As,this.c1=Rs,this.c2=-3*As+3*Ls-2*Rs-Ps,this.c3=2*As-2*Ls+Rs+Ps},Es.prototype.initNonuniformCatmullRom=function(As,Ls,Rs,Ps,Cs,Is,Us){var Ds=(Ls-As)/Cs-(Rs-As)/(Cs+Is)+(Rs-Ls)/Is,Ns=(Rs-Ls)/Is-(Ps-Ls)/(Is+Us)+(Ps-Rs)/Us;Ds*=Is,Ns*=Is,this.init(Ls,Rs,Ds,Ns)},Es.prototype.initCatmullRom=function(As,Ls,Rs,Ps,Cs){this.init(Ls,Rs,Cs*(Rs-As),Cs*(Ps-Ls))},Es.prototype.calc=function(As){var Ls=As*As;return this.c0+this.c1*As+this.c2*Ls+this.c3*(Ls*As)},aa.create(function(As){this.points=As||[],this.closed=!1},function(As){var Ls=this.points,Rs,Ps,Cs,Is;Is=Ls.length,2>Is&&console.log("duh, you need at least 2 points"),Rs=(Is-(this.closed?0:1))*As,Ps=Math.floor(Rs),Cs=Rs-Ps,this.closed?Ps+=0<Ps?0:(Math.floor(Math.abs(Ps)/Ls.length)+1)*Ls.length:0===Cs&&Ps===Is-1&&(Ps=Is-2,Cs=1);var Us,Ds,Ns,Fs;if(this.closed||0<Ps?Us=Ls[(Ps-1)%Is]:(Ts.subVectors(Ls[0],Ls[1]).add(Ls[0]),Us=Ts),Ds=Ls[Ps%Is],Ns=Ls[(Ps+1)%Is],this.closed||Ps+2<Is?Fs=Ls[(Ps+2)%Is]:(Ts.subVectors(Ls[Is-1],Ls[Is-2]).add(Ls[Is-1]),Fs=Ts),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var zs="chordal"===this.type?0.5:0.25,Bs=Math.pow(Us.distanceToSquared(Ds),zs),Os=Math.pow(Ds.distanceToSquared(Ns),zs),Gs=Math.pow(Ns.distanceToSquared(Fs),zs);1e-4>Os&&(Os=1),1e-4>Bs&&(Bs=Os),1e-4>Gs&&(Gs=Os),Ss.initNonuniformCatmullRom(Us.x,Ds.x,Ns.x,Fs.x,Bs,Os,Gs),Ms.initNonuniformCatmullRom(Us.y,Ds.y,Ns.y,Fs.y,Bs,Os,Gs),ws.initNonuniformCatmullRom(Us.z,Ds.z,Ns.z,Fs.z,Bs,Os,Gs)}else if("catmullrom"===this.type){var Vs=void 0===this.tension?0.5:this.tension;Ss.initCatmullRom(Us.x,Ds.x,Ns.x,Fs.x,Vs),Ms.initCatmullRom(Us.y,Ds.y,Ns.y,Fs.y,Vs),ws.initCatmullRom(Us.z,Ds.z,Ns.z,Fs.z,Vs)}var ks=new D(Ss.calc(Cs),Ms.calc(Cs),ws.calc(Cs));return ks})}(),Fi.prototype=Object.create(A.CatmullRomCurve3.prototype);var _s=aa.create(function(Es){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),this.points=Es===void 0?[]:Es},function(Es){var Ts=this.points,Ss=(Ts.length-1)*Es,Ms=Math.floor(Ss),ws=Ss-Ms,As=Ts[0==Ms?Ms:Ms-1],Ls=Ts[Ms],Rs=Ts[Ms>Ts.length-2?Ts.length-1:Ms+1],Ps=Ts[Ms>Ts.length-3?Ts.length-1:Ms+2],Cs=A.CurveUtils.interpolate;return new D(Cs(As.x,Ls.x,Rs.x,Ps.x,ws),Cs(As.y,Ls.y,Rs.y,Ps.y,ws),Cs(As.z,Ls.z,Rs.z,Ps.z,ws))});A.CubicBezierCurve3=aa.create(function(Es,Ts,Ss,Ms){this.v0=Es,this.v1=Ts,this.v2=Ss,this.v3=Ms},function(Es){var Ts=A.ShapeUtils.b3;return new D(Ts(Es,this.v0.x,this.v1.x,this.v2.x,this.v3.x),Ts(Es,this.v0.y,this.v1.y,this.v2.y,this.v3.y),Ts(Es,this.v0.z,this.v1.z,this.v2.z,this.v3.z))}),A.QuadraticBezierCurve3=aa.create(function(Es,Ts,Ss){this.v0=Es,this.v1=Ts,this.v2=Ss},function(Es){var Ts=A.ShapeUtils.b2;return new D(Ts(Es,this.v0.x,this.v1.x,this.v2.x),Ts(Es,this.v0.y,this.v1.y,this.v2.y),Ts(Es,this.v0.z,this.v1.z,this.v2.z))}),A.LineCurve3=aa.create(function(Es,Ts){this.v1=Es,this.v2=Ts},function(Es){if(1===Es)return this.v2.clone();var Ts=new D;return Ts.subVectors(this.v2,this.v1),Ts.multiplyScalar(Es),Ts.add(this.v1),Ts}),zi.prototype=Object.create(oa.prototype),zi.prototype.constructor=zi,A.SceneUtils={createMultiMaterialObject:function(Es,Ts){for(var Ss=new lr,Ms=0,ws=Ts.length;Ms<ws;Ms++)Ss.add(new Gt(Es,Ts[Ms]));return Ss},detach:function(Es,Ts,Ss){Es.applyMatrix(Ts.matrixWorld),Ts.remove(Es),Ss.add(Es)},attach:function(Es,Ts,Ss){var Ms=new I;Ms.getInverse(Ss.matrixWorld),Es.applyMatrix(Ms),Ts.remove(Es),Ss.add(Es)}},Object.assign(O.prototype,{empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(Es){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(Es)}}),Object.assign(Ve.prototype,{empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(Es){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(Es)},isIntersectionSphere:function(Es){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(Es)}}),Object.assign(He.prototype,{multiplyVector3:function(Es){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),Es.applyMatrix3(this)},multiplyVector3Array:function(Es){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(Es)}}),Object.assign(I.prototype,{extractPosition:function(Es){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(Es)},setRotationFromQuaternion:function(Es){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(Es)},multiplyVector3:function(Es){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),Es.applyProjection(this)},multiplyVector4:function(Es){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),Es.applyMatrix4(this)},multiplyVector3Array:function(Es){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(Es)},rotateAxis:function(Es){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),Es.transformDirection(this)},crossVector:function(Es){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),Es.applyMatrix4(this)},translate:function(Es){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(Es){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(Es){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(Es){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(Es,Ts){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")}}),Object.assign(We.prototype,{isIntersectionLine:function(Es){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(Es)}}),Object.assign(U.prototype,{multiplyVector3:function(Es){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),Es.applyQuaternion(this)}}),Object.assign(Ft.prototype,{isIntersectionBox:function(Es){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(Es)},isIntersectionPlane:function(Es){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(Es)},isIntersectionSphere:function(Es){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(Es)}}),Object.assign(D.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(Es){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(Es)},getScaleFromMatrix:function(Es){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(Es)},getColumnFromMatrix:function(Es,Ts){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(Ts,Es)}}),Object.assign(vt.prototype,{getChildByName:function(Es){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(Es)},renderDepth:function(Es){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(Es,Ts){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(Ts,Es)}}),Object.defineProperties(vt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(Es){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=Es}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(Es){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Kt.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Ht.prototype.setLens=function(Es,Ts){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),Ts!==void 0&&(this.filmGauge=Ts),this.setFocalLength(Es)},Object.defineProperties(Rr.prototype,{onlyShadow:{set:function(Es){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(Es){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=Es}},shadowCameraLeft:{set:function(Es){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=Es}},shadowCameraRight:{set:function(Es){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=Es}},shadowCameraTop:{set:function(Es){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=Es}},shadowCameraBottom:{set:function(Es){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=Es}},shadowCameraNear:{set:function(Es){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=Es}},shadowCameraFar:{set:function(Es){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=Es}},shadowCameraVisible:{set:function(Es){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(Es){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=Es}},shadowDarkness:{set:function(Es){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(Es){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=Es}},shadowMapHeight:{set:function(Es){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=Es}}}),Object.defineProperties(ut.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length}}}),Object.assign(Mt.prototype,{addIndex:function(Es){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(Es)},addDrawCall:function(Es,Ts,Ss){Ss!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(Es,Ts)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Mt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Fe.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(Es){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new Oe}}}),Object.defineProperties(xr.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(Es){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Be.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(Es){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=Es}}}),L.prototype=Object.assign(Object.create({constructor:L,apply:function(Es){console.warn("THREE.EventDispatcher: .apply is deprecated, just inherit or Object.assign the prototype to mix-in."),Object.assign(Es,this)}}),L.prototype),Object.assign(jt.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(Es){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(Es)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(jt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(Es){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=Es}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(Es){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=Es}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(Es){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=Es}}}),Object.defineProperties(Xe.prototype,{cullFace:{get:function(){return this.renderReverseSided?Vi:Gi},set:function(Es){var Ts=Es!==Gi;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+Ts+"."),this.renderReverseSided=Ts}}}),Object.defineProperties(Ne.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(Es){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=Es}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(Es){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=Es}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(Es){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=Es}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(Es){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=Es}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(Es){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=Es}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(Es){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=Es}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(Es){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=Es}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(Es){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=Es}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(Es){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=Es}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(Es){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=Es}}}),Object.assign(Sa.prototype,{load:function(Es){console.warn("THREE.Audio: .load has been deprecated. Please use THREE.AudioLoader.");var Ts=this,Ss=new va;return Ss.load(Es,function(Ms){Ts.setBuffer(Ms)}),this}}),Object.assign(wa.prototype,{getData:function(Es){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()}});var vs={crossOrigin:void 0,loadTexture:function(Es,Ts,Ss,Ms){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var ws=new Lr;ws.setCrossOrigin(this.crossOrigin);var As=ws.load(Es,Ss,void 0,Ms);return Ts&&(As.mapping=Ts),As},loadTextureCube:function(Es,Ts,Ss,Ms){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var ws=new Ar;ws.setCrossOrigin(this.crossOrigin);var As=ws.load(Es,Ss,void 0,Ms);return Ts&&(As.mapping=Ts),As},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};Object.defineProperty(A,"AudioContext",{get:function(){return A.getAudioContext()}}),A.SpritePlugin=F,A.LensFlarePlugin=G,A.WebGLUniforms=Ce,A.WebGLTextures=Ie,A.WebGLState=De,A.WebGLShadowMap=Xe,A.WebGLShader=Ye,A.WebGLProperties=Ze,A.WebGLPrograms=ct,A.WebGLProgram=dt,A.WebGLObjects=At,A.WebGLLights=Lt,A.WebGLGeometries=wt,A.WebGLCapabilities=Rt,A.WebGLExtensions=Pt,A.WebGLIndexedBufferRenderer=Ct,A.WebGLClipping=It,A.WebGLBufferRenderer=Ut,A.WebGLRenderTargetCube=Dt,A.WebGLRenderTarget=Ne,A.WebGLRenderer=jt,A.ShaderLib=ds,A.UniformsLib=ls,A.ShaderChunk=ss,A.FogExp2=Xt,A.Fog=qt,A.Scene=Yt,A.LensFlare=Zt,A.Sprite=Qt,A.LOD=Kt,A.SkinnedMesh=rr,A.Skeleton=er,A.Bone=tr,A.Mesh=Gt,A.LineSegments=nr,A.Line=ir,A.Points=sr,A.Group=lr,A.VideoTexture=dr,A.DataTexture=$t,A.CompressedTexture=pr,A.CubeTexture=V,A.CanvasTexture=cr,A.DepthTexture=ur,A.TextureIdCount=C,A.Texture=P,A.ShadowMaterial=mr,A.SpriteMaterial=Jt,A.RawShaderMaterial=fr,A.ShaderMaterial=Be,A.PointsMaterial=or,A.MultiMaterial=gr,A.MeshPhysicalMaterial=yr,A.MeshStandardMaterial=hr,A.MeshPhongMaterial=xr,A.MeshNormalMaterial=_r,A.MeshLambertMaterial=vr,A.MeshDepthMaterial=Ge,A.MeshBasicMaterial=Ot,A.LineDashedMaterial=br,A.LineBasicMaterial=ar,A.MaterialIdCount=ze,A.Material=Fe,A.CompressedTextureLoader=Sr,A.BinaryTextureLoader=Mr,A.DataTextureLoader=Mr,A.CubeTextureLoader=Ar,A.TextureLoader=Lr,A.ObjectLoader=ra,A.MaterialLoader=Kr,A.BufferGeometryLoader=$r,A.LoadingManager=Er,A.JSONLoader=ta,A.ImageLoader=wr,A.FontLoader=xa,A.XHRLoader=Tr,A.Loader=ea,A.AudioLoader=va,A.SpotLightShadow=Ir,A.SpotLight=Ur,A.PointLight=Dr,A.HemisphereLight=Pr,A.DirectionalLightShadow=Nr,A.DirectionalLight=Fr,A.AmbientLight=zr,A.LightShadow=Cr,A.Light=Rr,A.StereoCamera=ba,A.PerspectiveCamera=Ht,A.OrthographicCamera=Wt,A.CubeCamera=Ea,A.Camera=kt,A.AudioListener=Ta,A.PositionalAudio=Ma,A.getAudioContext=_a,A.AudioAnalyser=wa,A.Audio=Sa,A.VectorKeyframeTrack=Hr,A.StringKeyframeTrack=qr,A.QuaternionKeyframeTrack=jr,A.NumberKeyframeTrack=Xr,A.ColorKeyframeTrack=Zr,A.BooleanKeyframeTrack=Yr,A.PropertyMixer=Aa,A.PropertyBinding=La,A.KeyframeTrack=Jr,A.AnimationObjectGroup=Ra,A.AnimationMixer=Ca,A.AnimationClip=Qr,A.Uniform=Ia,A.InstancedBufferGeometry=Ua,A.BufferGeometry=Mt,A.DirectGeometry=St,A.GeometryIdCount=Tt,A.Geometry=Et,A.InterleavedBufferAttribute=Da,A.InstancedInterleavedBuffer=Fa,A.InterleavedBuffer=Na,A.InstancedBufferAttribute=za,A.DynamicBufferAttribute=function(Ts,Ss){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new ut(Ts,Ss).setDynamic(!0)},A.Float64Attribute=function(Ts,Ss){return new ut(new Float64Array(Ts),Ss)},A.Float32Attribute=ht,A.Uint32Attribute=ft,A.Int32Attribute=function(Ts,Ss){return new ut(new Int32Array(Ts),Ss)},A.Uint16Attribute=mt,A.Int16Attribute=function(Ts,Ss){return new ut(new Int16Array(Ts),Ss)},A.Uint8ClampedAttribute=function(Ts,Ss){return new ut(new Uint8ClampedArray(Ts),Ss)},A.Uint8Attribute=function(Ts,Ss){return new ut(new Uint8Array(Ts),Ss)},A.Int8Attribute=function(Ts,Ss){return new ut(new Int8Array(Ts),Ss)},A.BufferAttribute=ut,A.Face3=yt,A.Object3DIdCount=bt,A.Object3D=vt,A.Raycaster=Ba,A.Layers=_t,A.EventDispatcher=L,A.Clock=Va,A.QuaternionLinearInterpolant=Wr,A.LinearInterpolant=Gr,A.DiscreteInterpolant=Vr,A.CubicInterpolant=Or,A.Interpolant=Br,A.Triangle=Bt,A.Spline=function(Ts){function Ss(Fs,zs,Bs,Os,Gs,Vs,ks){var Hs=0.5*(Bs-Fs),Ws=0.5*(Os-zs);return(2*(zs-Bs)+Hs+Ws)*ks+(-3*(zs-Bs)-2*Hs-Ws)*Vs+Hs*Gs+zs}this.points=Ts;var Ms=[],ws={x:0,y:0,z:0},As,Ls,Rs,Ps,Cs,Is,Us,Ds,Ns;this.initFromArray=function(Fs){this.points=[];for(var zs=0;zs<Fs.length;zs++)this.points[zs]={x:Fs[zs][0],y:Fs[zs][1],z:Fs[zs][2]}},this.getPoint=function(Fs){return As=(this.points.length-1)*Fs,Ls=Math.floor(As),Rs=As-Ls,Ms[0]=0===Ls?Ls:Ls-1,Ms[1]=Ls,Ms[2]=Ls>this.points.length-2?this.points.length-1:Ls+1,Ms[3]=Ls>this.points.length-3?this.points.length-1:Ls+2,Is=this.points[Ms[0]],Us=this.points[Ms[1]],Ds=this.points[Ms[2]],Ns=this.points[Ms[3]],Ps=Rs*Rs,Cs=Rs*Ps,ws.x=Ss(Is.x,Us.x,Ds.x,Ns.x,Rs,Ps,Cs),ws.y=Ss(Is.y,Us.y,Ds.y,Ns.y,Rs,Ps,Cs),ws.z=Ss(Is.z,Us.z,Ds.z,Ns.z,Rs,Ps,Cs),ws},this.getControlPointsArray=function(){var Bs=this.points.length,Os=[],Fs,zs;for(Fs=0;Fs<Bs;Fs++)zs=this.points[Fs],Os[Fs]=[zs.x,zs.y,zs.z];return Os},this.getLength=function(Fs){var Vs=0,ks=0,Hs=0,Ws=new D,js=new D,Xs=[],qs=0,zs,Bs,Os,Gs;for(Xs[0]=0,Fs||(Fs=100),Os=this.points.length*Fs,Ws.copy(this.points[0]),zs=1;zs<Os;zs++)Bs=zs/Os,Gs=this.getPoint(Bs),js.copy(Gs),qs+=js.distanceTo(Ws),Ws.copy(Gs),Vs=(this.points.length-1)*Bs,ks=Math.floor(Vs),ks!=Hs&&(Xs[ks]=qs,Hs=ks);return Xs[Xs.length]=qs,{chunks:Xs,total:qs}},this.reparametrizeByArcLength=function(Fs){var js=[],Xs=new D,qs=this.getLength(),zs,Bs,Os,Gs,Vs,ks,Hs,Ws;for(js.push(Xs.copy(this.points[0]).clone()),zs=1;zs<this.points.length;zs++){for(ks=qs.chunks[zs]-qs.chunks[zs-1],Hs=Math.ceil(Fs*ks/qs.total),Gs=(zs-1)/(this.points.length-1),Vs=zs/(this.points.length-1),Bs=1;Bs<Hs-1;Bs++)Os=Gs+Bs*(1/Hs)*(Vs-Gs),Ws=this.getPoint(Os),js.push(Xs.copy(Ws).clone());js.push(Xs.copy(this.points[zs]).clone())}this.points=js}},A.Spherical=ka,A.Plane=We,A.Frustum=je,A.Sphere=ke,A.Ray=Ft,A.Matrix4=I,A.Matrix3=He,A.Box3=Ve,A.Box2=O,A.Line3=zt,A.Euler=xt,A.Vector4=Ue,A.Vector3=D,A.Vector2=R,A.Quaternion=U,A.Color=Oe,A.MorphBlendMesh=Ha,A.ImmediateRenderObject=Wa,A.WireframeHelper=Xa,A.VertexNormalsHelper=Ya,A.SpotLightHelper=Za,A.SkeletonHelper=Ja,A.PointLightHelper=Ka,A.HemisphereLightHelper=ei,A.GridHelper=ti,A.FaceNormalsHelper=ri,A.EdgesHelper=ni,A.DirectionalLightHelper=oi,A.CameraHelper=si,A.BoundingBoxHelper=di,A.BoxHelper=pi,A.ArrowHelper=ui,A.AxisHelper=mi,A.WireframeGeometry=ja,A.ParametricGeometry=gi,A.TetrahedronGeometry=yi,A.OctahedronGeometry=xi,A.IcosahedronGeometry=_i,A.DodecahedronGeometry=vi,A.PolyhedronGeometry=hi,A.TubeGeometry=ca,A.TorusKnotGeometry=Ei,A.TorusKnotBufferGeometry=bi,A.TorusGeometry=Si,A.TorusBufferGeometry=Ti,A.TextGeometry=Mi,A.SphereBufferGeometry=Qa,A.SphereGeometry=$a,A.RingGeometry=Ai,A.RingBufferGeometry=wi,A.PlaneBufferGeometry=Vt,A.PlaneGeometry=Li,A.LatheGeometry=Pi,A.LatheBufferGeometry=Ri,A.ShapeGeometry=ma,A.ExtrudeGeometry=ua,A.EdgesGeometry=ai,A.ConeGeometry=Ii,A.ConeBufferGeometry=Ui,A.CylinderGeometry=Ci,A.CylinderBufferGeometry=ci,A.CircleBufferGeometry=Di,A.CircleGeometry=Ni,A.BoxBufferGeometry=Nt,A.BoxGeometry=li,A.ClosedSplineCurve3=Fi,A.SplineCurve3=_s,A.ArcCurve=zi,A.EllipseCurve=oa,A.SplineCurve=sa,A.CubicBezierCurve=la,A.QuadraticBezierCurve=da,A.LineCurve=ia,A.Shape=fa,A.ShapePath=ha,A.Path=ga,A.Font=ya,A.CurvePath=na,A.Curve=aa,A.REVISION=Bi,A.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},A.CullFaceNone=Oi,A.CullFaceBack=Gi,A.CullFaceFront=Vi,A.CullFaceFrontBack=3,A.FrontFaceDirectionCW=ki,A.FrontFaceDirectionCCW=1,A.BasicShadowMap=0,A.PCFShadowMap=Hi,A.PCFSoftShadowMap=Wi,A.FrontSide=ji,A.BackSide=Xi,A.DoubleSide=qi,A.FlatShading=Yi,A.SmoothShading=Zi,A.NoColors=Ji,A.FaceColors=Qi,A.VertexColors=Ki,A.NoBlending=$i,A.NormalBlending=en,A.AdditiveBlending=tn,A.SubtractiveBlending=rn,A.MultiplyBlending=an,A.CustomBlending=nn,A.AddEquation=on,A.SubtractEquation=sn,A.ReverseSubtractEquation=ln,A.MinEquation=dn,A.MaxEquation=pn,A.ZeroFactor=cn,A.OneFactor=un,A.SrcColorFactor=mn,A.OneMinusSrcColorFactor=gn,A.SrcAlphaFactor=hn,A.OneMinusSrcAlphaFactor=yn,A.DstAlphaFactor=xn,A.OneMinusDstAlphaFactor=_n,A.DstColorFactor=vn,A.OneMinusDstColorFactor=bn,A.SrcAlphaSaturateFactor=En,A.NeverDepth=Tn,A.AlwaysDepth=Sn,A.LessDepth=Mn,A.LessEqualDepth=wn,A.EqualDepth=An,A.GreaterEqualDepth=Ln,A.GreaterDepth=Rn,A.NotEqualDepth=Pn,A.MultiplyOperation=Cn,A.MixOperation=In,A.AddOperation=Un,A.NoToneMapping=Dn,A.LinearToneMapping=Nn,A.ReinhardToneMapping=Fn,A.Uncharted2ToneMapping=zn,A.CineonToneMapping=Bn,A.UVMapping=On,A.CubeReflectionMapping=Gn,A.CubeRefractionMapping=Vn,A.EquirectangularReflectionMapping=kn,A.EquirectangularRefractionMapping=Hn,A.SphericalReflectionMapping=Wn,A.CubeUVReflectionMapping=jn,A.CubeUVRefractionMapping=Xn,A.RepeatWrapping=qn,A.ClampToEdgeWrapping=Yn,A.MirroredRepeatWrapping=Zn,A.NearestFilter=Jn,A.NearestMipMapNearestFilter=Qn,A.NearestMipMapLinearFilter=Kn,A.LinearFilter=$n,A.LinearMipMapNearestFilter=eo,A.LinearMipMapLinearFilter=ro,A.UnsignedByteType=ao,A.ByteType=io,A.ShortType=no,A.UnsignedShortType=oo,A.IntType=so,A.UnsignedIntType=lo,A.FloatType=po,A.HalfFloatType=co,A.UnsignedShort4444Type=uo,A.UnsignedShort5551Type=mo,A.UnsignedShort565Type=fo,A.UnsignedInt248Type=go,A.AlphaFormat=yo,A.RGBFormat=xo,A.RGBAFormat=_o,A.LuminanceFormat=vo,A.LuminanceAlphaFormat=bo,A.RGBEFormat=_o,A.DepthFormat=Eo,A.DepthStencilFormat=To,A.RGB_S3TC_DXT1_Format=So,A.RGBA_S3TC_DXT1_Format=Mo,A.RGBA_S3TC_DXT3_Format=wo,A.RGBA_S3TC_DXT5_Format=Ao,A.RGB_PVRTC_4BPPV1_Format=Lo,A.RGB_PVRTC_2BPPV1_Format=Ro,A.RGBA_PVRTC_4BPPV1_Format=Po,A.RGBA_PVRTC_2BPPV1_Format=Co,A.RGB_ETC1_Format=Io,A.LoopOnce=Uo,A.LoopRepeat=Do,A.LoopPingPong=No,A.InterpolateDiscrete=Fo,A.InterpolateLinear=zo,A.InterpolateSmooth=Bo,A.ZeroCurvatureEnding=Oo,A.ZeroSlopeEnding=Go,A.WrapAroundEnding=Vo,A.TrianglesDrawMode=ko,A.TriangleStripDrawMode=Ho,A.TriangleFanDrawMode=Wo,A.LinearEncoding=jo,A.sRGBEncoding=Xo,A.GammaEncoding=qo,A.RGBEEncoding=Yo,A.LogLuvEncoding=3003,A.RGBM7Encoding=Zo,A.RGBM16Encoding=Jo,A.RGBDEncoding=Qo,A.BasicDepthPacking=Ko,A.RGBADepthPacking=$o,A.CubeGeometry=li,A.Face4=function(Ts,Ss,Ms,ws,As,Ls,Rs){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new yt(Ts,Ss,Ms,As,Ls,Rs)},A.LineStrip=0,A.LinePieces=1,A.MeshFaceMaterial=gr,A.PointCloud=function(Ts,Ss){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new sr(Ts,Ss)},A.Particle=Qt,A.ParticleSystem=function(Ts,Ss){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new sr(Ts,Ss)},A.PointCloudMaterial=function(Ts){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new or(Ts)},A.ParticleBasicMaterial=function(Ts){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new or(Ts)},A.ParticleSystemMaterial=function(Ts){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new or(Ts)},A.Vertex=function(Ts,Ss,Ms){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new D(Ts,Ss,Ms)},A.GeometryUtils={merge:function(Es,Ts,Ss){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var Ms;Ts.isMesh&&(Ts.matrixAutoUpdate&&Ts.updateMatrix(),Ms=Ts.matrix,Ts=Ts.geometry),Es.merge(Ts,Ms,Ss)},center:function(Es){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),Es.center()}},A.ImageUtils=vs,A.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(Ts,Ss){console.warn("THREE.Projector: .projectVector() is now vector.project()."),Ts.project(Ss)},this.unprojectVector=function(Ts,Ss){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),Ts.unproject(Ss)},this.pickingRay=function(Ts,Ss){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},A.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},Object.defineProperty(A,"__esModule",{value:!0})})},,,function(E,S){var M=function(){return this}();try{M=M||Function("return this")()||(1,eval)("this")}catch(A){"object"==typeof window&&(M=window)}E.exports=M},function(E,S){E.exports=function(M){return M.webpackPolyfill||(M.deprecate=function(){},M.paths=[],!M.children&&(M.children=[]),Object.defineProperty(M,"loaded",{enumerable:!0,configurable:!1,get:function(){return M.l}}),Object.defineProperty(M,"id",{enumerable:!0,configurable:!1,get:function(){return M.i}}),M.webpackPolyfill=1),M}},,function(E,S,M){M(1),E.exports=M(0)}]);
